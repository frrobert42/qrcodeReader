(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,r){t.exports=r("zUnb")},KBVK:function(t,e,r){!function(t){"use strict";var e,r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n=function(t){function e(e){var r,n,o,i=this.constructor,s=t.call(this,e)||this;return Object.defineProperty(s,"name",{value:i.name,enumerable:!1}),r=s,n=i.prototype,(o=Object.setPrototypeOf)?o(r,n):r.__proto__=n,function(t,e){void 0===e&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}(s),s}return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error);class o extends n{constructor(t){super(t),this.message=t}getKind(){return this.constructor.kind}}o.kind="Exception";class i extends o{}i.kind="ArgumentException";class s extends o{}s.kind="IllegalArgumentException";class a{constructor(t){if(this.binarizer=t,null===t)throw new s("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,e){return this.binarizer.getBlackRow(t,e)}getBlackMatrix(){return null==this.matrix&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,e,r,n){const o=this.binarizer.getLuminanceSource().crop(t,e,r,n);return new a(this.binarizer.createBinarizer(o))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new a(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new a(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch(t){return""}}}class l extends o{static getChecksumInstance(){return new l}}l.kind="ChecksumException";class u{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class c{static arraycopy(t,e,r,n,o){for(;o--;)r[n++]=t[e++]}static currentTimeMillis(){return Date.now()}}class h extends o{}h.kind="IndexOutOfBoundsException";class d extends h{constructor(t,e){super(e),this.index=t,this.message=e}}d.kind="ArrayIndexOutOfBoundsException";class f{static fill(t,e){for(let r=0,n=t.length;r<n;r++)t[r]=e}static fillWithin(t,e,r,n){f.rangeCheck(t.length,e,r);for(let o=e;o<r;o++)t[o]=n}static rangeCheck(t,e,r){if(e>r)throw new s("fromIndex("+e+") > toIndex("+r+")");if(e<0)throw new d(e);if(r>t)throw new d(r)}static asList(...t){return t}static create(t,e,r){return Array.from({length:t}).map(t=>Array.from({length:e}).fill(r))}static createInt32Array(t,e,r){return Array.from({length:t}).map(t=>Int32Array.from({length:e}).fill(r))}static equals(t,e){if(!t)return!1;if(!e)return!1;if(!t.length)return!1;if(!e.length)return!1;if(t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}static hashCode(t){if(null===t)return 0;let e=1;for(const r of t)e=31*e+r;return e}static fillUint8Array(t,e){for(let r=0;r!==t.length;r++)t[r]=e}static copyOf(t,e){return t.slice(0,e)}static copyOfUint8Array(t,e){if(t.length<=e){const r=new Uint8Array(e);return r.set(t),r}return t.slice(0,e)}static copyOfRange(t,e,r){const n=r-e,o=new Int32Array(n);return c.arraycopy(t,e,o,0,n),o}static binarySearch(t,e,r){void 0===r&&(r=f.numberComparator);let n=0,o=t.length-1;for(;n<=o;){const i=o+n>>1,s=r(e,t[i]);if(s>0)n=i+1;else{if(!(s<0))return i;o=i-1}}return-n-1}static numberComparator(t,e){return t-e}}class g{static numberOfTrailingZeros(t){let e;if(0===t)return 32;let r=31;return e=t<<16,0!==e&&(r-=16,t=e),e=t<<8,0!==e&&(r-=8,t=e),e=t<<4,0!==e&&(r-=4,t=e),e=t<<2,0!==e&&(r-=2,t=e),r-(t<<1>>>31)}static numberOfLeadingZeros(t){if(0===t)return 32;let e=1;return t>>>16==0&&(e+=16,t<<=16),t>>>24==0&&(e+=8,t<<=8),t>>>28==0&&(e+=4,t<<=4),t>>>30==0&&(e+=2,t<<=2),e-=t>>>31,e}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=(t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135,63&(t+=t>>>8)+(t>>>16)}static truncDivision(t,e){return Math.trunc(t/e)}static parseInt(t,e){return parseInt(t,e)}}g.MIN_VALUE_32_BITS=-2147483648,g.MAX_VALUE=Number.MAX_SAFE_INTEGER;class p{constructor(t,e){void 0===t?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,this.bits=null==e?p.makeArray(t):e)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>32*this.bits.length){const e=p.makeArray(t);c.arraycopy(this.bits,0,e,0,this.bits.length),this.bits=e}}get(t){return 0!=(this.bits[Math.floor(t/32)]&1<<(31&t))}set(t){this.bits[Math.floor(t/32)]|=1<<(31&t)}flip(t){this.bits[Math.floor(t/32)]^=1<<(31&t)}getNextSet(t){const e=this.size;if(t>=e)return e;const r=this.bits;let n=Math.floor(t/32),o=r[n];o&=~((1<<(31&t))-1);const i=r.length;for(;0===o;){if(++n===i)return e;o=r[n]}const s=32*n+g.numberOfTrailingZeros(o);return s>e?e:s}getNextUnset(t){const e=this.size;if(t>=e)return e;const r=this.bits;let n=Math.floor(t/32),o=~r[n];o&=~((1<<(31&t))-1);const i=r.length;for(;0===o;){if(++n===i)return e;o=~r[n]}const s=32*n+g.numberOfTrailingZeros(o);return s>e?e:s}setBulk(t,e){this.bits[Math.floor(t/32)]=e}setRange(t,e){if(e<t||t<0||e>this.size)throw new s;if(e===t)return;e--;const r=Math.floor(t/32),n=Math.floor(e/32),o=this.bits;for(let i=r;i<=n;i++)o[i]|=(2<<(i<n?31:31&e))-(1<<(i>r?0:31&t))}clear(){const t=this.bits.length,e=this.bits;for(let r=0;r<t;r++)e[r]=0}isRange(t,e,r){if(e<t||t<0||e>this.size)throw new s;if(e===t)return!0;e--;const n=Math.floor(t/32),o=Math.floor(e/32),i=this.bits;for(let s=n;s<=o;s++){const a=(2<<(s<o?31:31&e))-(1<<(s>n?0:31&t))&4294967295;if((i[s]&a)!==(r?a:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(t,e){if(e<0||e>32)throw new s("Num bits must be between 0 and 32");this.ensureCapacity(this.size+e);for(let r=e;r>0;r--)this.appendBit(1==(t>>r-1&1))}appendBitArray(t){const e=t.size;this.ensureCapacity(this.size+e);for(let r=0;r<e;r++)this.appendBit(t.get(r))}xor(t){if(this.size!==t.size)throw new s("Sizes don't match");const e=this.bits;for(let r=0,n=e.length;r<n;r++)e[r]^=t.bits[r]}toBytes(t,e,r,n){for(let o=0;o<n;o++){let n=0;for(let e=0;e<8;e++)this.get(t)&&(n|=1<<7-e),t++;e[r+o]=n}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),e=Math.floor((this.size-1)/32),r=e+1,n=this.bits;for(let o=0;o<r;o++){let r=n[o];r=r>>1&1431655765|(1431655765&r)<<1,r=r>>2&858993459|(858993459&r)<<2,r=r>>4&252645135|(252645135&r)<<4,r=r>>8&16711935|(16711935&r)<<8,r=r>>16&65535|(65535&r)<<16,t[e-o]=r}if(this.size!==32*r){const e=32*r-this.size;let n=t[0]>>>e;for(let o=1;o<r;o++){const r=t[o];n|=r<<32-e,t[o-1]=n,n=r>>>e}t[r-1]=n}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){return t instanceof p&&this.size===t.size&&f.equals(this.bits,t.bits)}hashCode(){return 31*this.size+f.hashCode(this.bits)}toString(){let t="";for(let e=0,r=this.size;e<r;e++)0==(7&e)&&(t+=" "),t+=this.get(e)?"X":".";return t}clone(){return new p(this.size,this.bits.slice())}}!function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ASSUME_GS1=7]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(e||(e={}));var w,m=e;class _ extends o{static getFormatInstance(){return new _}}_.kind="FormatException",function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"}(w||(w={}));class y{constructor(t,e,r,...n){this.valueIdentifier=t,this.name=r,this.values="number"==typeof e?Int32Array.from([e]):e,this.otherEncodingNames=n,y.VALUE_IDENTIFIER_TO_ECI.set(t,this),y.NAME_TO_ECI.set(r,this);const o=this.values;for(let i=0,s=o.length;i!==s;i++)y.VALUES_TO_ECI.set(o[i],this);for(const i of n)y.NAME_TO_ECI.set(i,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new _("incorect value");const e=y.VALUES_TO_ECI.get(t);if(void 0===e)throw new _("incorect value");return e}static getCharacterSetECIByName(t){const e=y.NAME_TO_ECI.get(t);if(void 0===e)throw new _("incorect value");return e}equals(t){if(!(t instanceof y))return!1;const e=t;return this.getName()===e.getName()}}y.VALUE_IDENTIFIER_TO_ECI=new Map,y.VALUES_TO_ECI=new Map,y.NAME_TO_ECI=new Map,y.Cp437=new y(w.Cp437,Int32Array.from([0,2]),"Cp437"),y.ISO8859_1=new y(w.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),y.ISO8859_2=new y(w.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),y.ISO8859_3=new y(w.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),y.ISO8859_4=new y(w.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),y.ISO8859_5=new y(w.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),y.ISO8859_6=new y(w.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),y.ISO8859_7=new y(w.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),y.ISO8859_8=new y(w.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),y.ISO8859_9=new y(w.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),y.ISO8859_10=new y(w.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),y.ISO8859_11=new y(w.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),y.ISO8859_13=new y(w.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),y.ISO8859_14=new y(w.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),y.ISO8859_15=new y(w.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),y.ISO8859_16=new y(w.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),y.SJIS=new y(w.SJIS,20,"SJIS","Shift_JIS"),y.Cp1250=new y(w.Cp1250,21,"Cp1250","windows-1250"),y.Cp1251=new y(w.Cp1251,22,"Cp1251","windows-1251"),y.Cp1252=new y(w.Cp1252,23,"Cp1252","windows-1252"),y.Cp1256=new y(w.Cp1256,24,"Cp1256","windows-1256"),y.UnicodeBigUnmarked=new y(w.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),y.UTF8=new y(w.UTF8,26,"UTF8","UTF-8"),y.ASCII=new y(w.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),y.Big5=new y(w.Big5,28,"Big5"),y.GB18030=new y(w.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),y.EUC_KR=new y(w.EUC_KR,30,"EUC_KR","EUC-KR");class C extends o{}C.kind="UnsupportedOperationException";class E{static decode(t,e){const r=this.encodingName(e);return this.customDecoder?this.customDecoder(t,r):"undefined"==typeof TextDecoder||this.shouldDecodeOnFallback(r)?this.decodeFallback(t,r):new TextDecoder(r).decode(t)}static shouldDecodeOnFallback(t){return!E.isBrowser()&&"ISO-8859-1"===t}static encode(t,e){const r=this.encodingName(e);return this.customEncoder?this.customEncoder(t,r):"undefined"==typeof TextEncoder?this.encodeFallback(t):(new TextEncoder).encode(t)}static isBrowser(){return"undefined"!=typeof window&&"[object Window]"==={}.toString.call(window)}static encodingName(t){return"string"==typeof t?t:t.getName()}static encodingCharacterSet(t){return t instanceof y?t:y.getCharacterSetECIByName(t)}static decodeFallback(t,e){const r=this.encodingCharacterSet(e);if(E.isDecodeFallbackSupported(r)){let e="";for(let r=0,n=t.length;r<n;r++){let n=t[r].toString(16);n.length<2&&(n="0"+n),e+="%"+n}return decodeURIComponent(e)}if(r.equals(y.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new C(`Encoding ${this.encodingName(e)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(y.UTF8)||t.equals(y.ISO8859_1)||t.equals(y.ASCII)}static encodeFallback(t){const e=btoa(unescape(encodeURIComponent(t))).split(""),r=[];for(let n=0;n<e.length;n++)r.push(e[n].charCodeAt(0));return new Uint8Array(r)}}class A{static castAsNonUtf8Char(t,e=null){const r=e?e.getName():this.ISO88591;return E.decode(new Uint8Array([t]),r)}static guessEncoding(t,e){if(null!=e&&void 0!==e.get(m.CHARACTER_SET))return e.get(m.CHARACTER_SET).toString();const r=t.length;let n=!0,o=!0,i=!0,s=0,a=0,l=0,u=0,c=0,h=0,d=0,f=0,g=0,p=0,w=0;const _=t.length>3&&239===t[0]&&187===t[1]&&191===t[2];for(let m=0;m<r&&(n||o||i);m++){const e=255&t[m];i&&(s>0?0==(128&e)?i=!1:s--:0!=(128&e)&&(0==(64&e)?i=!1:(s++,0==(32&e)?a++:(s++,0==(16&e)?l++:(s++,0==(8&e)?u++:i=!1))))),n&&(e>127&&e<160?n=!1:e>159&&(e<192||215===e||247===e)&&w++),o&&(c>0?e<64||127===e||e>252?o=!1:c--:128===e||160===e||e>239?o=!1:e>160&&e<224?(h++,f=0,d++,d>g&&(g=d)):e>127?(c++,d=0,f++,f>p&&(p=f)):(d=0,f=0))}return i&&s>0&&(i=!1),o&&c>0&&(o=!1),i&&(_||a+l+u>0)?A.UTF8:o&&(A.ASSUME_SHIFT_JIS||g>=3||p>=3)?A.SHIFT_JIS:n&&o?2===g&&2===h||10*w>=r?A.SHIFT_JIS:A.ISO88591:n?A.ISO88591:o?A.SHIFT_JIS:i?A.UTF8:A.PLATFORM_DEFAULT_ENCODING}static format(t,...e){let r=-1;return t.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(t,n,o,i,s,a){if("%%"===t)return"%";if(void 0===e[++r])return;t=i?parseInt(i.substr(1)):void 0;let l,u=s?parseInt(s.substr(1)):void 0;switch(a){case"s":l=e[r];break;case"c":l=e[r][0];break;case"f":l=parseFloat(e[r]).toFixed(t);break;case"p":l=parseFloat(e[r]).toPrecision(t);break;case"e":l=parseFloat(e[r]).toExponential(t);break;case"x":l=parseInt(e[r]).toString(u||16);break;case"d":l=parseFloat(parseInt(e[r],u||10).toPrecision(t)).toFixed(0)}l="object"==typeof l?JSON.stringify(l):(+l).toString(u);let c=parseInt(o),h=o&&o[0]+""=="0"?"0":" ";for(;l.length<c;)l=void 0!==n?l+h:h+l;return l})}static getBytes(t,e){return E.encode(t,e)}static getCharCode(t,e=0){return t.charCodeAt(e)}static getCharAt(t){return String.fromCharCode(t)}}A.SHIFT_JIS=y.SJIS.getName(),A.GB2312="GB2312",A.ISO88591=y.ISO8859_1.getName(),A.EUC_JP="EUC_JP",A.UTF8=y.UTF8.getName(),A.PLATFORM_DEFAULT_ENCODING=A.UTF8,A.ASSUME_SHIFT_JIS=!1;class v{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return this.value+="string"==typeof t?t.toString():this.encoding?A.castAsNonUtf8Char(t,this.encoding):String.fromCharCode(t),this}appendChars(t,e,r){for(let n=e;e<e+r;n++)this.append(t[n]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+1)}substring(t,e){return this.value.substring(t,e)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+e.length)}}class S{constructor(t,e,r,n){if(this.width=t,this.height=e,this.rowSize=r,this.bits=n,null==e&&(e=t),this.height=e,t<1||e<1)throw new s("Both dimensions must be greater than 0");null==r&&(r=Math.floor((t+31)/32)),this.rowSize=r,null==n&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const e=t.length,r=t[0].length,n=new S(r,e);for(let o=0;o<e;o++){const e=t[o];for(let t=0;t<r;t++)e[t]&&n.set(t,o)}return n}static parseFromString(t,e,r){if(null===t)throw new s("stringRepresentation cannot be null");const n=new Array(t.length);let o=0,i=0,a=-1,l=0,u=0;for(;u<t.length;)if("\n"===t.charAt(u)||"\r"===t.charAt(u)){if(o>i){if(-1===a)a=o-i;else if(o-i!==a)throw new s("row lengths do not match");i=o,l++}u++}else if(t.substring(u,u+e.length)===e)u+=e.length,n[o]=!0,o++;else{if(t.substring(u,u+r.length)!==r)throw new s("illegal character encountered: "+t.substring(u));u+=r.length,n[o]=!1,o++}if(o>i){if(-1===a)a=o-i;else if(o-i!==a)throw new s("row lengths do not match");l++}const c=new S(a,l);for(let s=0;s<o;s++)n[s]&&c.set(Math.floor(s%a),Math.floor(s/a));return c}get(t,e){const r=e*this.rowSize+Math.floor(t/32);return 0!=(this.bits[r]>>>(31&t)&1)}set(t,e){const r=e*this.rowSize+Math.floor(t/32);this.bits[r]|=1<<(31&t)&4294967295}unset(t,e){const r=e*this.rowSize+Math.floor(t/32);this.bits[r]&=~(1<<(31&t)&4294967295)}flip(t,e){const r=e*this.rowSize+Math.floor(t/32);this.bits[r]^=1<<(31&t)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new s("input matrix dimensions do not match");const e=new p(Math.floor(this.width/32)+1),r=this.rowSize,n=this.bits;for(let o=0,i=this.height;o<i;o++){const i=o*r,s=t.getRow(o,e).getBitArray();for(let t=0;t<r;t++)n[i+t]^=s[t]}}clear(){const t=this.bits,e=t.length;for(let r=0;r<e;r++)t[r]=0}setRegion(t,e,r,n){if(e<0||t<0)throw new s("Left and top must be nonnegative");if(n<1||r<1)throw new s("Height and width must be at least 1");const o=t+r,i=e+n;if(i>this.height||o>this.width)throw new s("The region must fit inside the matrix");const a=this.rowSize,l=this.bits;for(let s=e;s<i;s++){const e=s*a;for(let r=t;r<o;r++)l[e+Math.floor(r/32)]|=1<<(31&r)&4294967295}}getRow(t,e){null==e||e.getSize()<this.width?e=new p(this.width):e.clear();const r=this.rowSize,n=this.bits,o=t*r;for(let i=0;i<r;i++)e.setBulk(32*i,n[o+i]);return e}setRow(t,e){c.arraycopy(e.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),e=this.getHeight();let r=new p(t),n=new p(t);for(let o=0,i=Math.floor((e+1)/2);o<i;o++)r=this.getRow(o,r),n=this.getRow(e-1-o,n),r.reverse(),n.reverse(),this.setRow(o,n),this.setRow(e-1-o,r)}getEnclosingRectangle(){const t=this.height,e=this.rowSize,r=this.bits;let n=this.width,o=t,i=-1,s=-1;for(let a=0;a<t;a++)for(let t=0;t<e;t++){const l=r[a*e+t];if(0!==l){if(a<o&&(o=a),a>s&&(s=a),32*t<n){let e=0;for(;0==(l<<31-e&4294967295);)e++;32*t+e<n&&(n=32*t+e)}if(32*t+31>i){let e=31;for(;l>>>e==0;)e--;32*t+e>i&&(i=32*t+e)}}}return i<n||s<o?null:Int32Array.from([n,o,i-n+1,s-o+1])}getTopLeftOnBit(){const t=this.rowSize,e=this.bits;let r=0;for(;r<e.length&&0===e[r];)r++;if(r===e.length)return null;const n=r/t;let o=r%t*32;const i=e[r];let s=0;for(;0==(i<<31-s&4294967295);)s++;return o+=s,Int32Array.from([o,n])}getBottomRightOnBit(){const t=this.rowSize,e=this.bits;let r=e.length-1;for(;r>=0&&0===e[r];)r--;if(r<0)return null;const n=Math.floor(r/t);let o=32*Math.floor(r%t);const i=e[r];let s=31;for(;i>>>s==0;)s--;return o+=s,Int32Array.from([o,n])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){return t instanceof S&&this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&f.equals(this.bits,t.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+f.hashCode(this.bits),t}toString(t="X ",e="  ",r="\n"){return this.buildToString(t,e,r)}buildToString(t,e,r){let n=new v;for(let o=0,i=this.height;o<i;o++){for(let r=0,i=this.width;r<i;r++)n.append(this.get(r,o)?t:e);n.append(r)}return n.toString()}clone(){return new S(this.width,this.height,this.rowSize,this.bits.slice())}}class I extends o{static getNotFoundInstance(){return new I}}I.kind="NotFoundException";class b extends u{constructor(t){super(t),this.luminances=b.EMPTY,this.buckets=new Int32Array(b.LUMINANCE_BUCKETS)}getBlackRow(t,e){const r=this.getLuminanceSource(),n=r.getWidth();null==e||e.getSize()<n?e=new p(n):e.clear(),this.initArrays(n);const o=r.getRow(t,this.luminances),i=this.buckets;for(let a=0;a<n;a++)i[(255&o[a])>>b.LUMINANCE_SHIFT]++;const s=b.estimateBlackPoint(i);if(n<3)for(let a=0;a<n;a++)(255&o[a])<s&&e.set(a);else{let t=255&o[0],r=255&o[1];for(let i=1;i<n-1;i++){const n=255&o[i+1];(4*r-t-n)/2<s&&e.set(i),t=r,r=n}}return e}getBlackMatrix(){const t=this.getLuminanceSource(),e=t.getWidth(),r=t.getHeight(),n=new S(e,r);this.initArrays(e);const o=this.buckets;for(let a=1;a<5;a++){const n=Math.floor(r*a/5),i=t.getRow(n,this.luminances),s=Math.floor(4*e/5);for(let t=Math.floor(e/5);t<s;t++)o[(255&i[t])>>b.LUMINANCE_SHIFT]++}const i=b.estimateBlackPoint(o),s=t.getMatrix();for(let a=0;a<r;a++){const t=a*e;for(let r=0;r<e;r++)(255&s[t+r])<i&&n.set(r,a)}return n}createBinarizer(t){return new b(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const e=this.buckets;for(let r=0;r<b.LUMINANCE_BUCKETS;r++)e[r]=0}static estimateBlackPoint(t){const e=t.length;let r=0,n=0,o=0;for(let u=0;u<e;u++)t[u]>o&&(n=u,o=t[u]),t[u]>r&&(r=t[u]);let i=0,s=0;for(let u=0;u<e;u++){const e=u-n,r=t[u]*e*e;r>s&&(i=u,s=r)}if(n>i){const t=n;n=i,i=t}if(i-n<=e/16)throw new I;let a=i-1,l=-1;for(let u=i-1;u>n;u--){const e=u-n,o=e*e*(i-u)*(r-t[u]);o>l&&(a=u,l=o)}return a<<b.LUMINANCE_SHIFT}}b.LUMINANCE_BITS=5,b.LUMINANCE_SHIFT=8-b.LUMINANCE_BITS,b.LUMINANCE_BUCKETS=1<<b.LUMINANCE_BITS,b.EMPTY=Uint8ClampedArray.from([0]);class T extends b{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const t=this.getLuminanceSource(),e=t.getWidth(),r=t.getHeight();if(e>=T.MINIMUM_DIMENSION&&r>=T.MINIMUM_DIMENSION){const n=t.getMatrix();let o=e>>T.BLOCK_SIZE_POWER;0!=(e&T.BLOCK_SIZE_MASK)&&o++;let i=r>>T.BLOCK_SIZE_POWER;0!=(r&T.BLOCK_SIZE_MASK)&&i++;const s=T.calculateBlackPoints(n,o,i,e,r),a=new S(e,r);T.calculateThresholdForBlock(n,o,i,e,r,s,a),this.matrix=a}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new T(t)}static calculateThresholdForBlock(t,e,r,n,o,i,s){const a=o-T.BLOCK_SIZE,l=n-T.BLOCK_SIZE;for(let u=0;u<r;u++){let o=u<<T.BLOCK_SIZE_POWER;o>a&&(o=a);const c=T.cap(u,2,r-3);for(let r=0;r<e;r++){let a=r<<T.BLOCK_SIZE_POWER;a>l&&(a=l);const u=T.cap(r,2,e-3);let h=0;for(let t=-2;t<=2;t++){const e=i[c+t];h+=e[u-2]+e[u-1]+e[u]+e[u+1]+e[u+2]}T.thresholdBlock(t,a,o,h/25,n,s)}}}static cap(t,e,r){return t<e?e:t>r?r:t}static thresholdBlock(t,e,r,n,o,i){for(let s=0,a=r*o+e;s<T.BLOCK_SIZE;s++,a+=o)for(let o=0;o<T.BLOCK_SIZE;o++)(255&t[a+o])<=n&&i.set(e+o,r+s)}static calculateBlackPoints(t,e,r,n,o){const i=o-T.BLOCK_SIZE,s=n-T.BLOCK_SIZE,a=new Array(r);for(let l=0;l<r;l++){a[l]=new Int32Array(e);let r=l<<T.BLOCK_SIZE_POWER;r>i&&(r=i);for(let o=0;o<e;o++){let e=o<<T.BLOCK_SIZE_POWER;e>s&&(e=s);let i=0,u=255,c=0;for(let o=0,s=r*n+e;o<T.BLOCK_SIZE;o++,s+=n){for(let e=0;e<T.BLOCK_SIZE;e++){const r=255&t[s+e];i+=r,r<u&&(u=r),r>c&&(c=r)}if(c-u>T.MIN_DYNAMIC_RANGE)for(o++,s+=n;o<T.BLOCK_SIZE;o++,s+=n)for(let e=0;e<T.BLOCK_SIZE;e++)i+=255&t[s+e]}let h=i>>2*T.BLOCK_SIZE_POWER;if(c-u<=T.MIN_DYNAMIC_RANGE&&(h=u/2,l>0&&o>0)){const t=(a[l-1][o]+2*a[l][o-1]+a[l-1][o-1])/4;u<t&&(h=t)}a[l][o]=h}}return a}}T.BLOCK_SIZE_POWER=3,T.BLOCK_SIZE=1<<T.BLOCK_SIZE_POWER,T.BLOCK_SIZE_MASK=T.BLOCK_SIZE-1,T.MINIMUM_DIMENSION=5*T.BLOCK_SIZE,T.MIN_DYNAMIC_RANGE=24;class R{constructor(t,e){this.width=t,this.height=e}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,e,r,n){throw new C("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new C("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new C("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let e=new v;for(let r=0;r<this.height;r++){const n=this.getRow(r,t);for(let t=0;t<this.width;t++){const r=255&n[t];let o;o=r<64?"#":r<128?"+":r<192?".":" ",e.append(o)}e.append("\n")}return e.toString()}}class O extends R{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,e){const r=this.delegate.getRow(t,e),n=this.getWidth();for(let o=0;o<n;o++)r[o]=255-(255&r[o]);return r}getMatrix(){const t=this.delegate.getMatrix(),e=this.getWidth()*this.getHeight(),r=new Uint8ClampedArray(e);for(let n=0;n<e;n++)r[n]=255-(255&t[n]);return r}isCropSupported(){return this.delegate.isCropSupported()}crop(t,e,r,n){return new O(this.delegate.crop(t,e,r,n))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new O(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new O(this.delegate.rotateCounterClockwise45())}}class N extends R{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=N.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const e=t.getContext("2d").getImageData(0,0,t.width,t.height);return N.toGrayscaleBuffer(e.data,t.width,t.height)}static toGrayscaleBuffer(t,e,r){const n=new Uint8ClampedArray(e*r);for(let o=0,i=0,s=t.length;o<s;o+=4,i++){let e;e=0===t[o+3]?255:306*t[o]+601*t[o+1]+117*t[o+2]+512>>10,n[i]=e}return n}getRow(t,e){if(t<0||t>=this.getHeight())throw new s("Requested row is outside the image: "+t);const r=this.getWidth(),n=t*r;return null===e?e=this.buffer.slice(n,n+r):(e.length<r&&(e=new Uint8ClampedArray(r)),e.set(this.buffer.slice(n,n+r))),e}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,e,r,n){return super.crop(t,e,r,n),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const e=this.getTempCanvasElement(),r=e.getContext("2d"),n=t*N.DEGREE_TO_RADIANS,o=this.canvas.width,i=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(n))*o+Math.abs(Math.sin(n))*i),a=Math.ceil(Math.abs(Math.sin(n))*o+Math.abs(Math.cos(n))*i);return e.width=s,e.height=a,r.translate(s/2,a/2),r.rotate(n),r.drawImage(this.canvas,o/-2,i/-2),this.buffer=N.makeBufferFromCanvasImageData(e),this}invert(){return new O(this)}}N.DEGREE_TO_RADIANS=Math.PI/180;class D{constructor(t,e,r){this.deviceId=t,this.label=e,this.kind="videoinput",this.groupId=r||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var M,P=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__awaiter:void 0)||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function s(t){try{l(n.next(t))}catch(e){i(e)}}function a(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(s,a)}l((n=n.apply(t,e||[])).next())})};class B{constructor(t,e=500,r){this.reader=t,this.timeBetweenScansMillis=e,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!=typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return P(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),e=[];for(const r of t){const t="video"===r.kind?"videoinput":r.kind;"videoinput"===t&&e.push({deviceId:r.deviceId||r.id,label:r.label||"Video device "+(e.length+1),kind:t,groupId:r.groupId})}return e})}getVideoInputDevices(){return P(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(t=>new D(t.deviceId,t.label))})}findDeviceById(t){return P(this,void 0,void 0,function*(){const e=yield this.listVideoInputDevices();return e?e.find(e=>e.deviceId===t):null})}decodeFromInputVideoDevice(t,e){return P(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,e)})}decodeOnceFromVideoDevice(t,e){return P(this,void 0,void 0,function*(){let r;this.reset(),r=t?{deviceId:{exact:t}}:{facingMode:"environment"};const n={video:r};return yield this.decodeOnceFromConstraints(n,e)})}decodeOnceFromConstraints(t,e){return P(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(r,e)})}decodeOnceFromStream(t,e){return P(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(t,e);return yield this.decodeOnce(r)})}decodeFromInputVideoDeviceContinuously(t,e,r){return P(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,e,r)})}decodeFromVideoDevice(t,e,r){return P(this,void 0,void 0,function*(){let n;n=t?{deviceId:{exact:t}}:{facingMode:"environment"};const o={video:n};return yield this.decodeFromConstraints(o,e,r)})}decodeFromConstraints(t,e,r){return P(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(n,e,r)})}decodeFromStream(t,e,r){return P(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(t,e);return yield this.decodeContinuously(n,r)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,e){return P(this,void 0,void 0,function*(){const r=this.prepareVideoElement(e);return this.addVideoSource(r,t),this.videoElement=r,this.stream=t,yield this.playVideoOnLoadAsync(r),r})}playVideoOnLoadAsync(t){return new Promise((e,r)=>this.playVideoOnLoad(t,()=>e()))}playVideoOnLoad(t,e){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",e),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return P(this,void 0,void 0,function*(){if(this.isVideoPlaying(t))console.warn("Trying to play video that is already playing.");else try{yield t.play()}catch(e){console.warn("It was not possible to play the video.")}})}getMediaElement(t,e){const r=document.getElementById(t);if(!r)throw new i(`element with id '${t}' not found`);if(r.nodeName.toLowerCase()!==e.toLowerCase())throw new i(`element with id '${t}' must be an ${e} element`);return r}decodeFromImage(t,e){if(!t&&!e)throw new i("either imageElement with a src set or an url must be provided");return e&&!t?this.decodeFromImageUrl(e):this.decodeFromImageElement(t)}decodeFromVideo(t,e){if(!t&&!e)throw new i("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrl(e):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,e,r){if(void 0===t&&void 0===e)throw new i("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrlContinuously(e,r):this.decodeFromVideoElementContinuously(t,r)}decodeFromImageElement(t){if(!t)throw new i("An image element must be provided.");this.reset();const e=this.prepareImageElement(t);let r;return this.imageElement=e,r=this.isImageLoaded(e)?this.decodeOnce(e,!1,!0):this._decodeOnLoadImage(e),r}decodeFromVideoElement(t){const e=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(e)}decodeFromVideoElementContinuously(t,e){const r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(r,e)}_decodeFromVideoElementSetup(t){if(!t)throw new i("A video element must be provided.");this.reset();const e=this.prepareVideoElement(t);return this.videoElement=e,e}decodeFromImageUrl(t){if(!t)throw new i("An URL must be provided.");this.reset();const e=this.prepareImageElement();this.imageElement=e;const r=this._decodeOnLoadImage(e);return e.src=t,r}decodeFromVideoUrl(t){if(!t)throw new i("An URL must be provided.");this.reset();const e=this.prepareVideoElement(),r=this.decodeFromVideoElement(e);return e.src=t,r}decodeFromVideoUrlContinuously(t,e){if(!t)throw new i("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),n=this.decodeFromVideoElementContinuously(r,e);return r.src=t,n}_decodeOnLoadImage(t){return new Promise((e,r)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(e,r),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return P(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,e){return P(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,e)})}isImageLoaded(t){return!!t.complete&&0!==t.naturalWidth}prepareImageElement(t){let e;return void 0===t&&(e=document.createElement("img"),e.width=200,e.height=200),"string"==typeof t&&(e=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(e=t),e}prepareVideoElement(t){let e;return t||"undefined"==typeof document||(e=document.createElement("video"),e.width=200,e.height=200),"string"==typeof t&&(e=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(e=t),e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.setAttribute("playsinline","true"),e}decodeOnce(t,e=!0,r=!0){this._stopAsyncDecode=!1;const n=(o,i)=>{if(this._stopAsyncDecode)return i(new I("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{o(this.decode(t))}catch(s){const t=(s instanceof l||s instanceof _)&&r;if(e&&s instanceof I||t)return setTimeout(n,this._timeBetweenDecodingAttempts,o,i);i(s)}};return new Promise((t,e)=>n(t,e))}decodeContinuously(t,e){this._stopContinuousDecode=!1;const r=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const n=this.decode(t);e(n,null),setTimeout(r,this.timeBetweenScansMillis)}catch(n){e(null,n);const t=n instanceof I;(n instanceof l||n instanceof _||t)&&setTimeout(r,this._timeBetweenDecodingAttempts)}};r()}decode(t){const e=this.createBinaryBitmap(t);return this.decodeBitmap(e)}createBinaryBitmap(t){const e=this.getCaptureCanvasContext(t);this.drawImageOnCanvas(e,t);const r=this.getCaptureCanvas(t),n=new N(r),o=new T(n);return new a(o)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const e=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=e}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const e=this.createCaptureCanvas(t);this.captureCanvas=e}return this.captureCanvas}drawImageOnCanvas(t,e){t.drawImage(e,0,0)}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if("undefined"==typeof document)return this._destroyCaptureCanvas(),null;const e=document.createElement("canvas");let r,n;return void 0!==t&&(t instanceof HTMLVideoElement?(r=t.videoWidth,n=t.videoHeight):t instanceof HTMLImageElement&&(r=t.naturalWidth||t.width,n=t.naturalHeight||t.height)),e.style.width=r+"px",e.style.height=n+"px",e.width=r,e.height=n,e}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(void 0!==this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),void 0!==this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),void 0!==this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,e){try{t.srcObject=e}catch(r){t.src=URL.createObjectURL(e)}}cleanVideoSource(t){try{t.srcObject=null}catch(e){t.src=""}this.videoElement.removeAttribute("src")}}class L{constructor(t,e,r=(null==e?0:8*e.length),n,o,i=c.currentTimeMillis()){this.text=t,this.rawBytes=e,this.numBits=r,this.resultPoints=n,this.format=o,this.timestamp=i,this.text=t,this.rawBytes=e,this.numBits=null==r?null==e?0:8*e.length:r,this.resultPoints=n,this.format=o,this.resultMetadata=null,this.timestamp=null==i?c.currentTimeMillis():i}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,e){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(t,e)}putAllMetadata(t){null!==t&&(this.resultMetadata=null===this.resultMetadata?t:new Map(t))}addResultPoints(t){const e=this.resultPoints;if(null===e)this.resultPoints=t;else if(null!==t&&t.length>0){const r=new Array(e.length+t.length);c.arraycopy(e,0,r,0,e.length),c.arraycopy(t,0,r,e.length,t.length),this.resultPoints=r}}getTimestamp(){return this.timestamp}toString(){return this.text}}!function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(M||(M={}));var x,F=M;!function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(x||(x={}));var k,V,U,H,G,W,z=x;class X{constructor(t,e,r,n,o=-1,i=-1){this.rawBytes=t,this.text=e,this.byteSegments=r,this.ecLevel=n,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=i,this.numBits=null==t?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class j{exp(t){return this.expTable[t]}log(t){if(0===t)throw new s;return this.logTable[t]}static addOrSubtract(t,e){return t^e}}class Y{constructor(t,e){if(0===e.length)throw new s;this.field=t;const r=e.length;if(r>1&&0===e[0]){let t=1;for(;t<r&&0===e[t];)t++;t===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-t),c.arraycopy(e,t,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(0===t)return this.getCoefficient(0);const e=this.coefficients;let r;if(1===t){r=0;for(let t=0,n=e.length;t!==n;t++)r=j.addOrSubtract(r,e[t]);return r}r=e[0];const n=e.length,o=this.field;for(let i=1;i<n;i++)r=j.addOrSubtract(o.multiply(t,r),e[i]);return r}addOrSubtract(t){if(!this.field.equals(t.field))throw new s("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let e=this.coefficients,r=t.coefficients;if(e.length>r.length){const t=e;e=r,r=t}let n=new Int32Array(r.length);const o=r.length-e.length;c.arraycopy(r,0,n,0,o);for(let i=o;i<r.length;i++)n[i]=j.addOrSubtract(e[i-o],r[i]);return new Y(this.field,n)}multiply(t){if(!this.field.equals(t.field))throw new s("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const e=this.coefficients,r=e.length,n=t.coefficients,o=n.length,i=new Int32Array(r+o-1),a=this.field;for(let s=0;s<r;s++){const t=e[s];for(let e=0;e<o;e++)i[s+e]=j.addOrSubtract(i[s+e],a.multiply(t,n[e]))}return new Y(a,i)}multiplyScalar(t){if(0===t)return this.field.getZero();if(1===t)return this;const e=this.coefficients.length,r=this.field,n=new Int32Array(e),o=this.coefficients;for(let i=0;i<e;i++)n[i]=r.multiply(o[i],t);return new Y(r,n)}multiplyByMonomial(t,e){if(t<0)throw new s;if(0===e)return this.field.getZero();const r=this.coefficients,n=r.length,o=new Int32Array(n+t),i=this.field;for(let s=0;s<n;s++)o[s]=i.multiply(r[s],e);return new Y(i,o)}divide(t){if(!this.field.equals(t.field))throw new s("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new s("Divide by 0");const e=this.field;let r=e.getZero(),n=this;const o=t.getCoefficient(t.getDegree()),i=e.inverse(o);for(;n.getDegree()>=t.getDegree()&&!n.isZero();){const o=n.getDegree()-t.getDegree(),s=e.multiply(n.getCoefficient(n.getDegree()),i),a=t.multiplyByMonomial(o,s),l=e.buildMonomial(o,s);r=r.addOrSubtract(l),n=n.addOrSubtract(a)}return[r,n]}toString(){let t="";for(let e=this.getDegree();e>=0;e--){let r=this.getCoefficient(e);if(0!==r){if(r<0?(t+=" - ",r=-r):t.length>0&&(t+=" + "),0===e||1!==r){const e=this.field.log(r);0===e?t+="1":1===e?t+="a":(t+="a^",t+=e)}0!==e&&(1===e?t+="x":(t+="x^",t+=e))}}return t}}class Z extends o{}Z.kind="ArithmeticException";class K extends j{constructor(t,e,r){super(),this.primitive=t,this.size=e,this.generatorBase=r;const n=new Int32Array(e);let o=1;for(let s=0;s<e;s++)n[s]=o,o*=2,o>=e&&(o^=t,o&=e-1);this.expTable=n;const i=new Int32Array(e);for(let s=0;s<e-1;s++)i[n[s]]=s;this.logTable=i,this.zero=new Y(this,Int32Array.from([0])),this.one=new Y(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,e){if(t<0)throw new s;if(0===e)return this.zero;const r=new Int32Array(t+1);return r[0]=e,new Y(this,r)}inverse(t){if(0===t)throw new Z;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,e){return 0===t||0===e?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+g.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}K.AZTEC_DATA_12=new K(4201,4096,1),K.AZTEC_DATA_10=new K(1033,1024,1),K.AZTEC_DATA_6=new K(67,64,1),K.AZTEC_PARAM=new K(19,16,1),K.QR_CODE_FIELD_256=new K(285,256,0),K.DATA_MATRIX_FIELD_256=new K(301,256,1),K.AZTEC_DATA_8=K.DATA_MATRIX_FIELD_256,K.MAXICODE_FIELD_64=K.AZTEC_DATA_6;class q extends o{}q.kind="ReedSolomonException";class $ extends o{}$.kind="IllegalStateException";class Q{constructor(t){this.field=t}decode(t,e){const r=this.field,n=new Y(r,t),o=new Int32Array(e);let i=!0;for(let h=0;h<e;h++){const t=n.evaluateAt(r.exp(h+r.getGeneratorBase()));o[o.length-1-h]=t,0!==t&&(i=!1)}if(i)return;const s=new Y(r,o),a=this.runEuclideanAlgorithm(r.buildMonomial(e,1),s,e),l=a[1],u=this.findErrorLocations(a[0]),c=this.findErrorMagnitudes(l,u);for(let h=0;h<u.length;h++){const e=t.length-1-r.log(u[h]);if(e<0)throw new q("Bad error location");t[e]=K.addOrSubtract(t[e],c[h])}}runEuclideanAlgorithm(t,e,r){if(t.getDegree()<e.getDegree()){const r=t;t=e,e=r}const n=this.field;let o=t,i=e,s=n.getZero(),a=n.getOne();for(;i.getDegree()>=(r/2|0);){let t=o,e=s;if(o=i,s=a,o.isZero())throw new q("r_{i-1} was zero");i=t;let r=n.getZero();const l=o.getCoefficient(o.getDegree()),u=n.inverse(l);for(;i.getDegree()>=o.getDegree()&&!i.isZero();){const t=i.getDegree()-o.getDegree(),e=n.multiply(i.getCoefficient(i.getDegree()),u);r=r.addOrSubtract(n.buildMonomial(t,e)),i=i.addOrSubtract(o.multiplyByMonomial(t,e))}if(a=r.multiply(s).addOrSubtract(e),i.getDegree()>=o.getDegree())throw new $("Division algorithm failed to reduce polynomial?")}const l=a.getCoefficient(0);if(0===l)throw new q("sigmaTilde(0) was zero");const u=n.inverse(l);return[a.multiplyScalar(u),i.multiplyScalar(u)]}findErrorLocations(t){const e=t.getDegree();if(1===e)return Int32Array.from([t.getCoefficient(1)]);const r=new Int32Array(e);let n=0;const o=this.field;for(let i=1;i<o.getSize()&&n<e;i++)0===t.evaluateAt(i)&&(r[n]=o.inverse(i),n++);if(n!==e)throw new q("Error locator degree does not match number of roots");return r}findErrorMagnitudes(t,e){const r=e.length,n=new Int32Array(r),o=this.field;for(let i=0;i<r;i++){const s=o.inverse(e[i]);let a=1;for(let t=0;t<r;t++)if(i!==t){const r=o.multiply(e[t],s);a=o.multiply(a,0==(1&r)?1|r:-2&r)}n[i]=o.multiply(t.evaluateAt(s),o.inverse(a)),0!==o.getGeneratorBase()&&(n[i]=o.multiply(n[i],s))}return n}}!function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"}(k||(k={}));class J{decode(t){this.ddata=t;let e=t.getBits(),r=this.extractBits(e),n=this.correctBits(r),o=J.convertBoolArrayToByteArray(n),i=J.getEncodedData(n),s=new X(o,i,null,null);return s.setNumBits(n.length),s}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let e=t.length,r=k.UPPER,n=k.UPPER,o="",i=0;for(;i<e;)if(n===k.BINARY){if(e-i<5)break;let s=J.readCode(t,i,5);if(i+=5,0===s){if(e-i<11)break;s=J.readCode(t,i,11)+31,i+=11}for(let r=0;r<s;r++){if(e-i<8){i=e;break}const r=J.readCode(t,i,8);o+=A.castAsNonUtf8Char(r),i+=8}n=r}else{let s=n===k.DIGIT?4:5;if(e-i<s)break;let a=J.readCode(t,i,s);i+=s;let l=J.getCharacter(n,a);l.startsWith("CTRL_")?(r=n,n=J.getTable(l.charAt(5)),"L"===l.charAt(6)&&(r=n)):(o+=l,n=r)}return o}static getTable(t){switch(t){case"L":return k.LOWER;case"P":return k.PUNCT;case"M":return k.MIXED;case"D":return k.DIGIT;case"B":return k.BINARY;case"U":default:return k.UPPER}}static getCharacter(t,e){switch(t){case k.UPPER:return J.UPPER_TABLE[e];case k.LOWER:return J.LOWER_TABLE[e];case k.MIXED:return J.MIXED_TABLE[e];case k.PUNCT:return J.PUNCT_TABLE[e];case k.DIGIT:return J.DIGIT_TABLE[e];default:throw new $("Bad table")}}correctBits(t){let e,r;this.ddata.getNbLayers()<=2?(r=6,e=K.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,e=K.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,e=K.AZTEC_DATA_10):(r=12,e=K.AZTEC_DATA_12);let n=this.ddata.getNbDatablocks(),o=t.length/r;if(o<n)throw new _;let i=t.length%r,s=new Int32Array(o);for(let d=0;d<o;d++,i+=r)s[d]=J.readCode(t,i,r);try{new Q(e).decode(s,o-n)}catch(h){throw new _(h)}let a=(1<<r)-1,l=0;for(let d=0;d<n;d++){let t=s[d];if(0===t||t===a)throw new _;1!==t&&t!==a-1||l++}let u=new Array(n*r-l),c=0;for(let d=0;d<n;d++){let t=s[d];if(1===t||t===a-1)u.fill(t>1,c,c+r-1),c+=r-1;else for(let e=r-1;e>=0;--e)u[c++]=0!=(t&1<<e)}return u}extractBits(t){let e=this.ddata.isCompact(),r=this.ddata.getNbLayers(),n=(e?11:14)+4*r,o=new Int32Array(n),i=new Array(this.totalBitsInLayer(r,e));if(e)for(let s=0;s<o.length;s++)o[s]=s;else{let t=n+1+2*g.truncDivision(g.truncDivision(n,2)-1,15),e=n/2,r=g.truncDivision(t,2);for(let n=0;n<e;n++){let t=n+g.truncDivision(n,15);o[e-n-1]=r-t-1,o[e+n]=r+t+1}}for(let s=0,a=0;s<r;s++){let l=4*(r-s)+(e?9:12),u=2*s,c=n-1-u;for(let e=0;e<l;e++){let r=2*e;for(let n=0;n<2;n++)i[a+r+n]=t.get(o[u+n],o[u+e]),i[a+2*l+r+n]=t.get(o[u+e],o[c-n]),i[a+4*l+r+n]=t.get(o[c-n],o[c-e]),i[a+6*l+r+n]=t.get(o[c-e],o[u+n])}a+=8*l}return i}static readCode(t,e,r){let n=0;for(let o=e;o<e+r;o++)n<<=1,t[o]&&(n|=1);return n}static readByte(t,e){let r=t.length-e;return r>=8?J.readCode(t,e,8):J.readCode(t,e,r)<<8-r}static convertBoolArrayToByteArray(t){let e=new Uint8Array((t.length+7)/8);for(let r=0;r<e.length;r++)e[r]=J.readByte(t,8*r);return e}totalBitsInLayer(t,e){return((e?88:112)+16*t)*t}}J.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],J.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],J.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],J.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],J.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class tt{constructor(){}static round(t){return NaN===t?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,e,r,n){const o=t-r,i=e-n;return Math.sqrt(o*o+i*i)}static sum(t){let e=0;for(let r=0,n=t.length;r!==n;r++)e+=t[r];return e}}class et{static floatToIntBits(t){return t}}et.MAX_VALUE=Number.MAX_SAFE_INTEGER;class rt{constructor(t,e){this.x=t,this.y=e}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof rt){const e=t;return this.x===e.x&&this.y===e.y}return!1}hashCode(){return 31*et.floatToIntBits(this.x)+et.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const e=this.distance(t[0],t[1]),r=this.distance(t[1],t[2]),n=this.distance(t[0],t[2]);let o,i,s;if(r>=e&&r>=n?(i=t[0],o=t[1],s=t[2]):n>=r&&n>=e?(i=t[1],o=t[0],s=t[2]):(i=t[2],o=t[0],s=t[1]),this.crossProductZ(o,i,s)<0){const t=o;o=s,s=t}t[0]=o,t[1]=i,t[2]=s}static distance(t,e){return tt.distance(t.x,t.y,e.x,e.y)}static crossProductZ(t,e,r){const n=e.x,o=e.y;return(r.x-n)*(t.y-o)-(r.y-o)*(t.x-n)}}class nt{constructor(t,e){this.bits=t,this.points=e}getBits(){return this.bits}getPoints(){return this.points}}class ot extends nt{constructor(t,e,r,n,o){super(t,e),this.compact=r,this.nbDatablocks=n,this.nbLayers=o}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class it{constructor(t,e,r,n){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),null==e&&(e=it.INIT_SIZE),null==r&&(r=t.getWidth()/2|0),null==n&&(n=t.getHeight()/2|0);const o=e/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=n-o,this.downInit=n+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new I}detect(){let t=this.leftInit,e=this.rightInit,r=this.upInit,n=this.downInit,o=!1,i=!0,s=!1,a=!1,l=!1,u=!1,c=!1;const h=this.width,d=this.height;for(;i;){i=!1;let f=!0;for(;(f||!a)&&e<h;)f=this.containsBlackPoint(r,n,e,!1),f?(e++,i=!0,a=!0):a||e++;if(e>=h){o=!0;break}let g=!0;for(;(g||!l)&&n<d;)g=this.containsBlackPoint(t,e,n,!0),g?(n++,i=!0,l=!0):l||n++;if(n>=d){o=!0;break}let p=!0;for(;(p||!u)&&t>=0;)p=this.containsBlackPoint(r,n,t,!1),p?(t--,i=!0,u=!0):u||t--;if(t<0){o=!0;break}let w=!0;for(;(w||!c)&&r>=0;)w=this.containsBlackPoint(t,e,r,!0),w?(r--,i=!0,c=!0):c||r--;if(r<0){o=!0;break}i&&(s=!0)}if(!o&&s){const o=e-t;let i=null;for(let e=1;null===i&&e<o;e++)i=this.getBlackPointOnSegment(t,n-e,t+e,n);if(null==i)throw new I;let s=null;for(let e=1;null===s&&e<o;e++)s=this.getBlackPointOnSegment(t,r+e,t+e,r);if(null==s)throw new I;let a=null;for(let t=1;null===a&&t<o;t++)a=this.getBlackPointOnSegment(e,r+t,e-t,r);if(null==a)throw new I;let l=null;for(let t=1;null===l&&t<o;t++)l=this.getBlackPointOnSegment(e,n-t,e-t,n);if(null==l)throw new I;return this.centerEdges(l,i,a,s)}throw new I}getBlackPointOnSegment(t,e,r,n){const o=tt.round(tt.distance(t,e,r,n)),i=(r-t)/o,s=(n-e)/o,a=this.image;for(let l=0;l<o;l++){const r=tt.round(t+l*i),n=tt.round(e+l*s);if(a.get(r,n))return new rt(r,n)}return null}centerEdges(t,e,r,n){const o=t.getX(),i=t.getY(),s=e.getX(),a=e.getY(),l=r.getX(),u=r.getY(),c=n.getX(),h=n.getY(),d=it.CORR;return o<this.width/2?[new rt(c-d,h+d),new rt(s+d,a+d),new rt(l-d,u-d),new rt(o+d,i-d)]:[new rt(c+d,h+d),new rt(s+d,a-d),new rt(l-d,u+d),new rt(o-d,i-d)]}containsBlackPoint(t,e,r,n){const o=this.image;if(n){for(let i=t;i<=e;i++)if(o.get(i,r))return!0}else for(let i=t;i<=e;i++)if(o.get(r,i))return!0;return!1}}it.INIT_SIZE=10,it.CORR=1;class st{static checkAndNudgePoints(t,e){const r=t.getWidth(),n=t.getHeight();let o=!0;for(let i=0;i<e.length&&o;i+=2){const t=Math.floor(e[i]),s=Math.floor(e[i+1]);if(t<-1||t>r||s<-1||s>n)throw new I;o=!1,-1===t?(e[i]=0,o=!0):t===r&&(e[i]=r-1,o=!0),-1===s?(e[i+1]=0,o=!0):s===n&&(e[i+1]=n-1,o=!0)}o=!0;for(let i=e.length-2;i>=0&&o;i-=2){const t=Math.floor(e[i]),s=Math.floor(e[i+1]);if(t<-1||t>r||s<-1||s>n)throw new I;o=!1,-1===t?(e[i]=0,o=!0):t===r&&(e[i]=r-1,o=!0),-1===s?(e[i+1]=0,o=!0):s===n&&(e[i+1]=n-1,o=!0)}}}class at{constructor(t,e,r,n,o,i,s,a,l){this.a11=t,this.a21=e,this.a31=r,this.a12=n,this.a22=o,this.a32=i,this.a13=s,this.a23=a,this.a33=l}static quadrilateralToQuadrilateral(t,e,r,n,o,i,s,a,l,u,c,h,d,f,g,p){const w=at.quadrilateralToSquare(t,e,r,n,o,i,s,a);return at.squareToQuadrilateral(l,u,c,h,d,f,g,p).times(w)}transformPoints(t){const e=t.length,r=this.a11,n=this.a12,o=this.a13,i=this.a21,s=this.a22,a=this.a23,l=this.a31,u=this.a32,c=this.a33;for(let h=0;h<e;h+=2){const e=t[h],d=t[h+1],f=o*e+a*d+c;t[h]=(r*e+i*d+l)/f,t[h+1]=(n*e+s*d+u)/f}}transformPointsWithValues(t,e){const r=this.a11,n=this.a12,o=this.a13,i=this.a21,s=this.a22,a=this.a23,l=this.a31,u=this.a32,c=this.a33,h=t.length;for(let d=0;d<h;d++){const h=t[d],f=e[d],g=o*h+a*f+c;t[d]=(r*h+i*f+l)/g,e[d]=(n*h+s*f+u)/g}}static squareToQuadrilateral(t,e,r,n,o,i,s,a){const l=t-r+o-s,u=e-n+i-a;if(0===l&&0===u)return new at(r-t,o-r,t,n-e,i-n,e,0,0,1);{const c=r-o,h=s-o,d=n-i,f=a-i,g=c*f-h*d,p=(l*f-h*u)/g,w=(c*u-l*d)/g;return new at(r-t+p*r,s-t+w*s,t,n-e+p*n,a-e+w*a,e,p,w,1)}}static quadrilateralToSquare(t,e,r,n,o,i,s,a){return at.squareToQuadrilateral(t,e,r,n,o,i,s,a).buildAdjoint()}buildAdjoint(){return new at(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new at(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class lt extends st{sampleGrid(t,e,r,n,o,i,s,a,l,u,c,h,d,f,g,p,w,m,_){const y=at.quadrilateralToQuadrilateral(n,o,i,s,a,l,u,c,h,d,f,g,p,w,m,_);return this.sampleGridWithTransform(t,e,r,y)}sampleGridWithTransform(t,e,r,n){if(e<=0||r<=0)throw new I;const o=new S(e,r),i=new Float32Array(2*e);for(let a=0;a<r;a++){const e=i.length,r=a+.5;for(let t=0;t<e;t+=2)i[t]=t/2+.5,i[t+1]=r;n.transformPoints(i),st.checkAndNudgePoints(t,i);try{for(let r=0;r<e;r+=2)t.get(Math.floor(i[r]),Math.floor(i[r+1]))&&o.set(r/2,a)}catch(s){throw new I}}return o}}class ut{static setGridSampler(t){ut.gridSampler=t}static getInstance(){return ut.gridSampler}}ut.gridSampler=new lt;class ct{constructor(t,e){this.x=t,this.y=e}toResultPoint(){return new rt(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ht{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let e=this.getMatrixCenter(),r=this.getBullsEyeCorners(e);if(t){let t=r[0];r[0]=r[2],r[2]=t}this.extractParameters(r);let n=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),o=this.getMatrixCornerPoints(r);return new ot(n,o,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!(this.isValidPoint(t[0])&&this.isValidPoint(t[1])&&this.isValidPoint(t[2])&&this.isValidPoint(t[3])))throw new I;let e=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(t[0],t[1],e),this.sampleLine(t[1],t[2],e),this.sampleLine(t[2],t[3],e),this.sampleLine(t[3],t[0],e)]);this.shift=this.getRotation(r,e);let n=0;for(let i=0;i<4;i++){let t=r[(this.shift+i)%4];this.compact?(n<<=7,n+=t>>1&127):(n<<=10,n+=(t>>2&992)+(t>>1&31))}let o=this.getCorrectedParameterData(n,this.compact);this.compact?(this.nbLayers=1+(o>>6),this.nbDataBlocks=1+(63&o)):(this.nbLayers=1+(o>>11),this.nbDataBlocks=1+(2047&o))}getRotation(t,e){let r=0;t.forEach((t,n,o)=>{r=(t>>e-2<<1)+(1&t)+(r<<3)}),r=((1&r)<<11)+(r>>1);for(let n=0;n<4;n++)if(g.bitCount(r^this.EXPECTED_CORNER_BITS[n])<=2)return n;throw new I}getCorrectedParameterData(t,e){let r,n;e?(r=7,n=2):(r=10,n=4);let o=r-n,i=new Int32Array(r);for(let l=r-1;l>=0;--l)i[l]=15&t,t>>=4;try{new Q(K.AZTEC_PARAM).decode(i,o)}catch(a){throw new I}let s=0;for(let l=0;l<n;l++)s=(s<<4)+i[l];return s}getBullsEyeCorners(t){let e=t,r=t,n=t,o=t,i=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let t=this.getFirstDifferent(e,i,1,-1),s=this.getFirstDifferent(r,i,1,1),a=this.getFirstDifferent(n,i,-1,1),l=this.getFirstDifferent(o,i,-1,-1);if(this.nbCenterLayers>2){let r=this.distancePoint(l,t)*this.nbCenterLayers/(this.distancePoint(o,e)*(this.nbCenterLayers+2));if(r<.75||r>1.25||!this.isWhiteOrBlackRectangle(t,s,a,l))break}e=t,r=s,n=a,o=l,i=!i}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new I;this.compact=5===this.nbCenterLayers;let s=new rt(e.getX()+.5,e.getY()-.5),a=new rt(r.getX()+.5,r.getY()+.5),l=new rt(n.getX()-.5,n.getY()+.5),u=new rt(o.getX()-.5,o.getY()-.5);return this.expandSquare([s,a,l,u],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,e,r,n;try{let o=new it(this.image).detect();t=o[0],e=o[1],r=o[2],n=o[3]}catch(s){let o=this.image.getWidth()/2,i=this.image.getHeight()/2;t=this.getFirstDifferent(new ct(o+7,i-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new ct(o+7,i+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new ct(o-7,i+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new ct(o-7,i-7),!1,-1,-1).toResultPoint()}let o=tt.round((t.getX()+n.getX()+e.getX()+r.getX())/4),i=tt.round((t.getY()+n.getY()+e.getY()+r.getY())/4);try{let s=new it(this.image,15,o,i).detect();t=s[0],e=s[1],r=s[2],n=s[3]}catch(s){t=this.getFirstDifferent(new ct(o+7,i-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new ct(o+7,i+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new ct(o-7,i+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new ct(o-7,i-7),!1,-1,-1).toResultPoint()}return o=tt.round((t.getX()+n.getX()+e.getX()+r.getX())/4),i=tt.round((t.getY()+n.getY()+e.getY()+r.getY())/4),new ct(o,i)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,e,r,n,o){let i=ut.getInstance(),s=this.getDimension(),a=s/2-this.nbCenterLayers,l=s/2+this.nbCenterLayers;return i.sampleGrid(t,s,s,a,a,l,a,l,l,a,l,e.getX(),e.getY(),r.getX(),r.getY(),n.getX(),n.getY(),o.getX(),o.getY())}sampleLine(t,e,r){let n=0,o=this.distanceResultPoint(t,e),i=o/r,s=t.getX(),a=t.getY(),l=i*(e.getX()-t.getX())/o,u=i*(e.getY()-t.getY())/o;for(let c=0;c<r;c++)this.image.get(tt.round(s+c*l),tt.round(a+c*u))&&(n|=1<<r-c-1);return n}isWhiteOrBlackRectangle(t,e,r,n){t=new ct(t.getX()-3,t.getY()+3),e=new ct(e.getX()-3,e.getY()-3),r=new ct(r.getX()+3,r.getY()-3),n=new ct(n.getX()+3,n.getY()+3);let o=this.getColor(n,t);if(0===o)return!1;let i=this.getColor(t,e);return i===o&&(i=this.getColor(e,r),i===o&&(i=this.getColor(r,n),i===o))}getColor(t,e){let r=this.distancePoint(t,e),n=(e.getX()-t.getX())/r,o=(e.getY()-t.getY())/r,i=0,s=t.getX(),a=t.getY(),l=this.image.get(t.getX(),t.getY()),u=Math.ceil(r);for(let h=0;h<u;h++)s+=n,a+=o,this.image.get(tt.round(s),tt.round(a))!==l&&i++;let c=i/r;return c>.1&&c<.9?0:c<=.1===l?1:-1}getFirstDifferent(t,e,r,n){let o=t.getX()+r,i=t.getY()+n;for(;this.isValid(o,i)&&this.image.get(o,i)===e;)o+=r,i+=n;for(o-=r,i-=n;this.isValid(o,i)&&this.image.get(o,i)===e;)o+=r;for(o-=r;this.isValid(o,i)&&this.image.get(o,i)===e;)i+=n;return i-=n,new ct(o,i)}expandSquare(t,e,r){let n=r/(2*e),o=t[0].getX()-t[2].getX(),i=t[0].getY()-t[2].getY(),s=(t[0].getX()+t[2].getX())/2,a=(t[0].getY()+t[2].getY())/2,l=new rt(s+n*o,a+n*i),u=new rt(s-n*o,a-n*i);return o=t[1].getX()-t[3].getX(),i=t[1].getY()-t[3].getY(),s=(t[1].getX()+t[3].getX())/2,a=(t[1].getY()+t[3].getY())/2,[l,new rt(s+n*o,a+n*i),u,new rt(s-n*o,a-n*i)]}isValid(t,e){return t>=0&&t<this.image.getWidth()&&e>0&&e<this.image.getHeight()}isValidPoint(t){let e=tt.round(t.getX()),r=tt.round(t.getY());return this.isValid(e,r)}distancePoint(t,e){return tt.distance(t.getX(),t.getY(),e.getX(),e.getY())}distanceResultPoint(t,e){return tt.distance(t.getX(),t.getY(),e.getX(),e.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(g.truncDivision(this.nbLayers-4,8)+1)+15}}class dt{decode(t,e=null){let r=null,n=new ht(t.getBlackMatrix()),o=null,i=null;try{let t=n.detectMirror(!1);o=t.getPoints(),this.reportFoundResultPoints(e,o),i=(new J).decode(t)}catch(u){r=u}if(null==i)try{let t=n.detectMirror(!0);o=t.getPoints(),this.reportFoundResultPoints(e,o),i=(new J).decode(t)}catch(u){if(null!=r)throw r;throw u}let s=new L(i.getText(),i.getRawBytes(),i.getNumBits(),o,F.AZTEC,c.currentTimeMillis()),a=i.getByteSegments();null!=a&&s.putMetadata(z.BYTE_SEGMENTS,a);let l=i.getECLevel();return null!=l&&s.putMetadata(z.ERROR_CORRECTION_LEVEL,l),s}reportFoundResultPoints(t,e){if(null!=t){let r=t.get(m.NEED_RESULT_POINT_CALLBACK);null!=r&&e.forEach((t,e,n)=>{r.foundPossibleResultPoint(t)})}}reset(){}}class ft{decode(t,e){try{return this.doDecode(t,e)}catch(r){if(e&&!0===e.get(m.TRY_HARDER)&&t.isRotateSupported()){const r=t.rotateCounterClockwise(),n=this.doDecode(r,e),o=n.getResultMetadata();let i=270;null!==o&&!0===o.get(z.ORIENTATION)&&(i+=o.get(z.ORIENTATION)%360),n.putMetadata(z.ORIENTATION,i);const s=n.getResultPoints();if(null!==s){const t=r.getHeight();for(let e=0;e<s.length;e++)s[e]=new rt(t-s[e].getY()-1,s[e].getX())}return n}throw new I}}reset(){}doDecode(t,e){const r=t.getWidth(),n=t.getHeight();let o=new p(r);const i=e&&!0===e.get(m.TRY_HARDER),s=Math.max(1,n>>(i?8:5));let a;a=i?n:15;const l=Math.trunc(n/2);for(let h=0;h<a;h++){const i=Math.trunc((h+1)/2),a=l+s*(0==(1&h)?i:-i);if(a<0||a>=n)break;try{o=t.getBlackRow(a,o)}catch(u){continue}for(let t=0;t<2;t++){if(1===t&&(o.reverse(),e&&!0===e.get(m.NEED_RESULT_POINT_CALLBACK))){const t=new Map;e.forEach((e,r)=>t.set(r,e)),t.delete(m.NEED_RESULT_POINT_CALLBACK),e=t}try{const n=this.decodeRow(a,o,e);if(1===t){n.putMetadata(z.ORIENTATION,180);const t=n.getResultPoints();null!==t&&(t[0]=new rt(r-t[0].getX()-1,t[0].getY()),t[1]=new rt(r-t[1].getX()-1,t[1].getY()))}return n}catch(c){}}}throw new I}static recordPattern(t,e,r){const n=r.length;for(let l=0;l<n;l++)r[l]=0;const o=t.getSize();if(e>=o)throw new I;let i=!t.get(e),s=0,a=e;for(;a<o;){if(t.get(a)!==i)r[s]++;else{if(++s===n)break;r[s]=1,i=!i}a++}if(s!==n&&(s!==n-1||a!==o))throw new I}static recordPatternInReverse(t,e,r){let n=r.length,o=t.get(e);for(;e>0&&n>=0;)t.get(--e)!==o&&(n--,o=!o);if(n>=0)throw new I;ft.recordPattern(t,e+1,r)}static patternMatchVariance(t,e,r){const n=t.length;let o=0,i=0;for(let l=0;l<n;l++)o+=t[l],i+=e[l];if(o<i)return Number.POSITIVE_INFINITY;const s=o/i;r*=s;let a=0;for(let l=0;l<n;l++){const n=t[l],o=e[l]*s,i=n>o?n-o:o-n;if(i>r)return Number.POSITIVE_INFINITY;a+=i}return a/o}}class gt extends ft{static findStartPattern(t){const e=t.getSize(),r=t.getNextSet(0);let n=0,o=Int32Array.from([0,0,0,0,0,0]),i=r,s=!1;for(let a=r;a<e;a++)if(t.get(a)!==s)o[n]++;else{if(5===n){let e=gt.MAX_AVG_VARIANCE,r=-1;for(let t=gt.CODE_START_A;t<=gt.CODE_START_C;t++){const n=ft.patternMatchVariance(o,gt.CODE_PATTERNS[t],gt.MAX_INDIVIDUAL_VARIANCE);n<e&&(e=n,r=t)}if(r>=0&&t.isRange(Math.max(0,i-(a-i)/2),i,!1))return Int32Array.from([i,a,r]);i+=o[0]+o[1],o=o.slice(2,o.length-1),o[n-1]=0,o[n]=0,n--}else n++;o[n]=1,s=!s}throw new I}static decodeCode(t,e,r){ft.recordPattern(t,r,e);let n=gt.MAX_AVG_VARIANCE,o=-1;for(let i=0;i<gt.CODE_PATTERNS.length;i++){const t=this.patternMatchVariance(e,gt.CODE_PATTERNS[i],gt.MAX_INDIVIDUAL_VARIANCE);t<n&&(n=t,o=i)}if(o>=0)return o;throw new I}decodeRow(t,e,r){const n=r&&!0===r.get(m.ASSUME_GS1),o=gt.findStartPattern(e),i=o[2];let s=0;const a=new Uint8Array(20);let u;switch(a[s++]=i,i){case gt.CODE_START_A:u=gt.CODE_CODE_A;break;case gt.CODE_START_B:u=gt.CODE_CODE_B;break;case gt.CODE_START_C:u=gt.CODE_CODE_C;break;default:throw new _}let c=!1,h=!1,d="",f=o[0],g=o[1];const p=Int32Array.from([0,0,0,0,0,0]);let w=0,y=0,C=i,E=0,A=!0,v=!1,S=!1;for(;!c;){const t=h;switch(h=!1,w=y,y=gt.decodeCode(e,p,g),a[s++]=y,y!==gt.CODE_STOP&&(A=!0),y!==gt.CODE_STOP&&(E++,C+=E*y),f=g,g+=p.reduce((t,e)=>t+e,0),y){case gt.CODE_START_A:case gt.CODE_START_B:case gt.CODE_START_C:throw new _}switch(u){case gt.CODE_CODE_A:if(y<64)d+=String.fromCharCode(S===v?" ".charCodeAt(0)+y:" ".charCodeAt(0)+y+128),S=!1;else if(y<96)d+=String.fromCharCode(S===v?y-64:y+64),S=!1;else switch(y!==gt.CODE_STOP&&(A=!1),y){case gt.CODE_FNC_1:n&&(d+=0===d.length?"]C1":String.fromCharCode(29));break;case gt.CODE_FNC_2:case gt.CODE_FNC_3:break;case gt.CODE_FNC_4_A:!v&&S?(v=!0,S=!1):v&&S?(v=!1,S=!1):S=!0;break;case gt.CODE_SHIFT:h=!0,u=gt.CODE_CODE_B;break;case gt.CODE_CODE_B:u=gt.CODE_CODE_B;break;case gt.CODE_CODE_C:u=gt.CODE_CODE_C;break;case gt.CODE_STOP:c=!0}break;case gt.CODE_CODE_B:if(y<96)d+=String.fromCharCode(S===v?" ".charCodeAt(0)+y:" ".charCodeAt(0)+y+128),S=!1;else switch(y!==gt.CODE_STOP&&(A=!1),y){case gt.CODE_FNC_1:n&&(d+=0===d.length?"]C1":String.fromCharCode(29));break;case gt.CODE_FNC_2:case gt.CODE_FNC_3:break;case gt.CODE_FNC_4_B:!v&&S?(v=!0,S=!1):v&&S?(v=!1,S=!1):S=!0;break;case gt.CODE_SHIFT:h=!0,u=gt.CODE_CODE_A;break;case gt.CODE_CODE_A:u=gt.CODE_CODE_A;break;case gt.CODE_CODE_C:u=gt.CODE_CODE_C;break;case gt.CODE_STOP:c=!0}break;case gt.CODE_CODE_C:if(y<100)y<10&&(d+="0"),d+=y;else switch(y!==gt.CODE_STOP&&(A=!1),y){case gt.CODE_FNC_1:n&&(d+=0===d.length?"]C1":String.fromCharCode(29));break;case gt.CODE_CODE_A:u=gt.CODE_CODE_A;break;case gt.CODE_CODE_B:u=gt.CODE_CODE_B;break;case gt.CODE_STOP:c=!0}}t&&(u=u===gt.CODE_CODE_A?gt.CODE_CODE_B:gt.CODE_CODE_A)}const b=g-f;if(g=e.getNextUnset(g),!e.isRange(g,Math.min(e.getSize(),g+(g-f)/2),!1))throw new I;if(C-=E*w,C%103!==w)throw new l;const T=d.length;if(0===T)throw new I;T>0&&A&&(d=d.substring(0,u===gt.CODE_CODE_C?T-2:T-1));const R=(o[1]+o[0])/2,O=f+b/2,N=a.length,D=new Uint8Array(N);for(let l=0;l<N;l++)D[l]=a[l];const M=[new rt(R,t),new rt(O,t)];return new L(d,D,0,M,F.CODE_128,(new Date).getTime())}}gt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],gt.MAX_AVG_VARIANCE=.25,gt.MAX_INDIVIDUAL_VARIANCE=.7,gt.CODE_SHIFT=98,gt.CODE_CODE_C=99,gt.CODE_CODE_B=100,gt.CODE_CODE_A=101,gt.CODE_FNC_1=102,gt.CODE_FNC_2=97,gt.CODE_FNC_3=96,gt.CODE_FNC_4_A=101,gt.CODE_FNC_4_B=100,gt.CODE_START_A=103,gt.CODE_START_B=104,gt.CODE_START_C=105,gt.CODE_STOP=106;class pt extends ft{constructor(t=!1,e=!1){super(),this.usingCheckDigit=t,this.extendedMode=e,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,e,r){let n=this.counters;n.fill(0),this.decodeRowResult="";let o,i,s=pt.findAsteriskPattern(e,n),a=e.getNextSet(s[1]),u=e.getSize();do{pt.recordPattern(e,a,n);let t=pt.toNarrowWidePattern(n);if(t<0)throw new I;o=pt.patternToChar(t),this.decodeRowResult+=o,i=a;for(let e of n)a+=e;a=e.getNextSet(a)}while("*"!==o);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let c,h=0;for(let l of n)h+=l;if(a!==u&&2*(a-i-h)<h)throw new I;if(this.usingCheckDigit){let t=this.decodeRowResult.length-1,e=0;for(let r=0;r<t;r++)e+=pt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(r));if(this.decodeRowResult.charAt(t)!==pt.ALPHABET_STRING.charAt(e%43))throw new l;this.decodeRowResult=this.decodeRowResult.substring(0,t)}if(0===this.decodeRowResult.length)throw new I;c=this.extendedMode?pt.decodeExtended(this.decodeRowResult):this.decodeRowResult;let d=i+h/2;return new L(c,null,0,[new rt((s[1]+s[0])/2,t),new rt(d,t)],F.CODE_39,(new Date).getTime())}static findAsteriskPattern(t,e){let r=t.getSize(),n=t.getNextSet(0),o=0,i=n,s=!1,a=e.length;for(let l=n;l<r;l++)if(t.get(l)!==s)e[o]++;else{if(o===a-1){if(this.toNarrowWidePattern(e)===pt.ASTERISK_ENCODING&&t.isRange(Math.max(0,i-Math.floor((l-i)/2)),i,!1))return[i,l];i+=e[0]+e[1],e.copyWithin(0,2,2+o-1),e[o-1]=0,e[o]=0,o--}else o++;e[o]=1,s=!s}throw new I}static toNarrowWidePattern(t){let e,r=t.length,n=0;do{let o=2147483647;for(let e of t)e<o&&e>n&&(o=e);n=o,e=0;let i=0,s=0;for(let a=0;a<r;a++){let o=t[a];o>n&&(s|=1<<r-1-a,e++,i+=o)}if(3===e){for(let o=0;o<r&&e>0;o++){let r=t[o];if(r>n&&(e--,2*r>=i))return-1}return s}}while(e>3);return-1}static patternToChar(t){for(let e=0;e<pt.CHARACTER_ENCODINGS.length;e++)if(pt.CHARACTER_ENCODINGS[e]===t)return pt.ALPHABET_STRING.charAt(e);if(t===pt.ASTERISK_ENCODING)return"*";throw new I}static decodeExtended(t){let e=t.length,r="";for(let n=0;n<e;n++){let e=t.charAt(n);if("+"===e||"$"===e||"%"===e||"/"===e){let o=t.charAt(n+1),i="\0";switch(e){case"+":if(!(o>="A"&&o<="Z"))throw new _;i=String.fromCharCode(o.charCodeAt(0)+32);break;case"$":if(!(o>="A"&&o<="Z"))throw new _;i=String.fromCharCode(o.charCodeAt(0)-64);break;case"%":if(o>="A"&&o<="E")i=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")i=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")i=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")i=String.fromCharCode(o.charCodeAt(0)+43);else if("U"===o)i="\0";else if("V"===o)i="@";else if("W"===o)i="`";else{if("X"!==o&&"Y"!==o&&"Z"!==o)throw new _;i="\x7f"}break;case"/":if(o>="A"&&o<="O")i=String.fromCharCode(o.charCodeAt(0)-32);else{if("Z"!==o)throw new _;i=":"}}r+=i,n++}else r+=e}return r}}pt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",pt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],pt.ASTERISK_ENCODING=148;class wt extends ft{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,e,r){let n=this.decodeStart(e),o=this.decodeEnd(e),i=new v;wt.decodeMiddle(e,n[1],o[0],i);let s=i.toString(),a=null;null!=r&&(a=r.get(m.ALLOWED_LENGTHS)),null==a&&(a=wt.DEFAULT_ALLOWED_LENGTHS);let l=s.length,u=!1,c=0;for(let d of a){if(l===d){u=!0;break}d>c&&(c=d)}if(!u&&l>c&&(u=!0),!u)throw new _;const h=[new rt(n[1],t),new rt(o[0],t)];return new L(s,null,0,h,F.ITF,(new Date).getTime())}static decodeMiddle(t,e,r,n){let o=new Int32Array(10),i=new Int32Array(5),s=new Int32Array(5);for(o.fill(0),i.fill(0),s.fill(0);e<r;){ft.recordPattern(t,e,o);for(let t=0;t<5;t++){let e=2*t;i[t]=o[e],s[t]=o[e+1]}let r=wt.decodeDigit(i);n.append(r.toString()),r=this.decodeDigit(s),n.append(r.toString()),o.forEach(function(t){e+=t})}}decodeStart(t){let e=wt.skipWhiteSpace(t),r=wt.findGuardPattern(t,e,wt.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(t,r[0]),r}validateQuietZone(t,e){let r=10*this.narrowLineWidth;r=r<e?r:e;for(let n=e-1;r>0&&n>=0&&!t.get(n);n--)r--;if(0!==r)throw new I}static skipWhiteSpace(t){const e=t.getSize(),r=t.getNextSet(0);if(r===e)throw new I;return r}decodeEnd(t){t.reverse();try{let r,n=wt.skipWhiteSpace(t);try{r=wt.findGuardPattern(t,n,wt.END_PATTERN_REVERSED[0])}catch(e){e instanceof I&&(r=wt.findGuardPattern(t,n,wt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,r[0]);let o=r[0];return r[0]=t.getSize()-r[1],r[1]=t.getSize()-o,r}finally{t.reverse()}}static findGuardPattern(t,e,r){let n=r.length,o=new Int32Array(n),i=t.getSize(),s=!1,a=0,l=e;o.fill(0);for(let u=e;u<i;u++)if(t.get(u)!==s)o[a]++;else{if(a===n-1){if(ft.patternMatchVariance(o,r,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE)return[l,u];l+=o[0]+o[1],c.arraycopy(o,2,o,0,a-1),o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,s=!s}throw new I}static decodeDigit(t){let e=wt.MAX_AVG_VARIANCE,r=-1,n=wt.PATTERNS.length;for(let o=0;o<n;o++){let n=ft.patternMatchVariance(t,wt.PATTERNS[o],wt.MAX_INDIVIDUAL_VARIANCE);n<e?(e=n,r=o):n===e&&(r=-1)}if(r>=0)return r%10;throw new I}}wt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],wt.MAX_AVG_VARIANCE=.38,wt.MAX_INDIVIDUAL_VARIANCE=.5,wt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],wt.START_PATTERN=Int32Array.from([1,1,1,1]),wt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class mt extends ft{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let e,r=!1,n=0,o=Int32Array.from([0,0,0]);for(;!r;){o=Int32Array.from([0,0,0]),e=mt.findGuardPattern(t,n,!1,this.START_END_PATTERN,o);let i=e[0];n=e[1];let s=i-(n-i);s>=0&&(r=t.isRange(s,i,!1))}return e}static checkChecksum(t){return mt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let e=t.length;if(0===e)return!1;let r=parseInt(t.charAt(e-1),10);return mt.getStandardUPCEANChecksum(t.substring(0,e-1))===r}static getStandardUPCEANChecksum(t){let e=t.length,r=0;for(let n=e-1;n>=0;n-=2){let e=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new _;r+=e}r*=3;for(let n=e-2;n>=0;n-=2){let e=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new _;r+=e}return(1e3-r)%10}static decodeEnd(t,e){return mt.findGuardPattern(t,e,!1,mt.START_END_PATTERN,new Int32Array(mt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,e,r,n){return this.findGuardPattern(t,e,r,n,new Int32Array(n.length))}static findGuardPattern(t,e,r,n,o){let i=t.getSize(),s=0,a=e=r?t.getNextUnset(e):t.getNextSet(e),l=n.length,u=r;for(let c=e;c<i;c++)if(t.get(c)!==u)o[s]++;else{if(s===l-1){if(ft.patternMatchVariance(o,n,mt.MAX_INDIVIDUAL_VARIANCE)<mt.MAX_AVG_VARIANCE)return Int32Array.from([a,c]);a+=o[0]+o[1];let t=o.slice(2,o.length-1);for(let e=0;e<s-1;e++)o[e]=t[e];o[s-1]=0,o[s]=0,s--}else s++;o[s]=1,u=!u}throw new I}static decodeDigit(t,e,r,n){this.recordPattern(t,r,e);let o=this.MAX_AVG_VARIANCE,i=-1,s=n.length;for(let a=0;a<s;a++){let t=ft.patternMatchVariance(e,n[a],mt.MAX_INDIVIDUAL_VARIANCE);t<o&&(o=t,i=a)}if(i>=0)return i;throw new I}}mt.MAX_AVG_VARIANCE=.48,mt.MAX_INDIVIDUAL_VARIANCE=.7,mt.START_END_PATTERN=Int32Array.from([1,1,1]),mt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),mt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),mt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class _t{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,e,r){let n=this.decodeRowStringBuffer,o=this.decodeMiddle(e,r,n),i=n.toString(),s=_t.parseExtensionString(i),a=[new rt((r[0]+r[1])/2,t),new rt(o,t)],l=new L(i,null,0,a,F.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&l.putAllMetadata(s),l}decodeMiddle(t,e,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let o=t.getSize(),i=e[1],s=0;for(let l=0;l<5&&i<o;l++){let e=mt.decodeDigit(t,n,i,mt.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+e%10);for(let t of n)i+=t;e>=10&&(s|=1<<4-l),4!==l&&(i=t.getNextSet(i),i=t.getNextUnset(i))}if(5!==r.length)throw new I;let a=this.determineCheckDigit(s);if(_t.extensionChecksum(r.toString())!==a)throw new I;return i}static extensionChecksum(t){let e=t.length,r=0;for(let n=e-2;n>=0;n-=2)r+=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0);r*=3;for(let n=e-1;n>=0;n-=2)r+=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0);return r*=3,r%10}determineCheckDigit(t){for(let e=0;e<10;e++)if(t===this.CHECK_DIGIT_ENCODINGS[e])return e;throw new I}static parseExtensionString(t){if(5!==t.length)return null;let e=_t.parseExtension5String(t);return null==e?null:new Map([[z.SUGGESTED_PRICE,e]])}static parseExtension5String(t){let e;switch(t.charAt(0)){case"0":e="\xa3";break;case"5":e="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}e="";break;default:e=""}let r=parseInt(t.substring(1)),n=r%100;return e+(r/100).toString()+"."+(n<10?"0"+n:n.toString())}}class yt{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,e,r){let n=this.decodeRowStringBuffer,o=this.decodeMiddle(e,r,n),i=n.toString(),s=yt.parseExtensionString(i),a=[new rt((r[0]+r[1])/2,t),new rt(o,t)],l=new L(i,null,0,a,F.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&l.putAllMetadata(s),l}decodeMiddle(t,e,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let o=t.getSize(),i=e[1],s=0;for(let a=0;a<2&&i<o;a++){let e=mt.decodeDigit(t,n,i,mt.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+e%10);for(let t of n)i+=t;e>=10&&(s|=1<<1-a),1!==a&&(i=t.getNextSet(i),i=t.getNextUnset(i))}if(2!==r.length)throw new I;if(parseInt(r.toString())%4!==s)throw new I;return i}static parseExtensionString(t){return 2!==t.length?null:new Map([[z.ISSUE_NUMBER,parseInt(t)]])}}class Ct{static decodeRow(t,e,r){let n=mt.findGuardPattern(e,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new _t).decodeRow(t,e,n)}catch(o){return(new yt).decodeRow(t,e,n)}}}Ct.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Et extends mt{constructor(){super(),this.decodeRowStringBuffer="",Et.L_AND_G_PATTERNS=Et.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let e=Et.L_PATTERNS[t-10],r=new Int32Array(e.length);for(let t=0;t<e.length;t++)r[t]=e[e.length-t-1];Et.L_AND_G_PATTERNS[t]=r}}decodeRow(t,e,r){let n=Et.findStartGuardPattern(e),o=null==r?null:r.get(m.NEED_RESULT_POINT_CALLBACK);if(null!=o){const e=new rt((n[0]+n[1])/2,t);o.foundPossibleResultPoint(e)}let i=this.decodeMiddle(e,n,this.decodeRowStringBuffer),s=i.rowOffset,a=i.resultString;if(null!=o){const e=new rt(s,t);o.foundPossibleResultPoint(e)}let u=Et.decodeEnd(e,s);if(null!=o){const e=new rt((u[0]+u[1])/2,t);o.foundPossibleResultPoint(e)}let c=u[1],h=c+(c-u[0]);if(h>=e.getSize()||!e.isRange(c,h,!1))throw new I;let d=a.toString();if(d.length<8)throw new _;if(!Et.checkChecksum(d))throw new l;let f=(n[1]+n[0])/2,g=(u[1]+u[0])/2,p=this.getBarcodeFormat(),w=[new rt(f,t),new rt(g,t)],y=new L(d,null,0,w,p,(new Date).getTime()),C=0;try{let r=Ct.decodeRow(t,e,u[1]);y.putMetadata(z.UPC_EAN_EXTENSION,r.getText()),y.putAllMetadata(r.getResultMetadata()),y.addResultPoints(r.getResultPoints()),C=r.getText().length}catch(A){}let E=null==r?null:r.get(m.ALLOWED_EAN_EXTENSIONS);if(null!=E){let t=!1;for(let e in E)if(C.toString()===e){t=!0;break}if(!t)throw new I}return y}static checkChecksum(t){return Et.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let e=t.length;if(0===e)return!1;let r=parseInt(t.charAt(e-1),10);return Et.getStandardUPCEANChecksum(t.substring(0,e-1))===r}static getStandardUPCEANChecksum(t){let e=t.length,r=0;for(let n=e-1;n>=0;n-=2){let e=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new _;r+=e}r*=3;for(let n=e-2;n>=0;n-=2){let e=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new _;r+=e}return(1e3-r)%10}static decodeEnd(t,e){return Et.findGuardPattern(t,e,!1,Et.START_END_PATTERN,new Int32Array(Et.START_END_PATTERN.length).fill(0))}}class At extends Et{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,e,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let o=t.getSize(),i=e[1],s=0;for(let a=0;a<6&&i<o;a++){let e=Et.decodeDigit(t,n,i,Et.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+e%10);for(let t of n)i+=t;e>=10&&(s|=1<<5-a)}r=At.determineFirstDigit(r,s),i=Et.findGuardPattern(t,i,!0,Et.MIDDLE_PATTERN,new Int32Array(Et.MIDDLE_PATTERN.length).fill(0))[1];for(let a=0;a<6&&i<o;a++){let e=Et.decodeDigit(t,n,i,Et.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+e);for(let t of n)i+=t}return{rowOffset:i,resultString:r}}getBarcodeFormat(){return F.EAN_13}static determineFirstDigit(t,e){for(let r=0;r<10;r++)if(e===this.FIRST_DIGIT_ENCODINGS[r])return String.fromCharCode("0".charCodeAt(0)+r)+t;throw new I}}At.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class vt extends Et{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,e,r){const n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let o=t.getSize(),i=e[1];for(let s=0;s<4&&i<o;s++){let e=Et.decodeDigit(t,n,i,Et.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+e);for(let t of n)i+=t}i=Et.findGuardPattern(t,i,!0,Et.MIDDLE_PATTERN,new Int32Array(Et.MIDDLE_PATTERN.length).fill(0))[1];for(let s=0;s<4&&i<o;s++){let e=Et.decodeDigit(t,n,i,Et.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+e);for(let t of n)i+=t}return{rowOffset:i,resultString:r}}getBarcodeFormat(){return F.EAN_8}}class St extends Et{constructor(){super(...arguments),this.ean13Reader=new At}getBarcodeFormat(){return F.UPC_A}decode(t,e){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,e,r){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,e,r))}decodeMiddle(t,e,r){return this.ean13Reader.decodeMiddle(t,e,r)}maybeReturnResult(t){let e=t.getText();if("0"===e.charAt(0)){let r=new L(e.substring(1),null,null,t.getResultPoints(),F.UPC_A);return null!=t.getResultMetadata()&&r.putAllMetadata(t.getResultMetadata()),r}throw new I}reset(){this.ean13Reader.reset()}}class It extends Et{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,e,r){const n=this.decodeMiddleCounters.map(t=>t);n[0]=0,n[1]=0,n[2]=0,n[3]=0;const o=t.getSize();let i=e[1],s=0;for(let a=0;a<6&&i<o;a++){const e=It.decodeDigit(t,n,i,It.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+e%10);for(let t of n)i+=t;e>=10&&(s|=1<<5-a)}return It.determineNumSysAndCheckDigit(new v(r),s),i}decodeEnd(t,e){return It.findGuardPatternWithoutCounters(t,e,!0,It.MIDDLE_END_PATTERN)}checkChecksum(t){return Et.checkChecksum(It.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,e){for(let r=0;r<=1;r++)for(let n=0;n<10;n++)if(e===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[r][n])return t.insert(0,"0"+r),void t.append("0"+n);throw I.getNotFoundInstance()}getBarcodeFormat(){return F.UPC_E}static convertUPCEtoUPCA(t){const e=t.slice(1,7).split("").map(t=>t.charCodeAt(0)),r=new v;r.append(t.charAt(0));let n=e[5];switch(n){case 0:case 1:case 2:r.appendChars(e,0,2),r.append(n),r.append("0000"),r.appendChars(e,2,3);break;case 3:r.appendChars(e,0,3),r.append("00000"),r.appendChars(e,3,2);break;case 4:r.appendChars(e,0,4),r.append("00000"),r.append(e[4]);break;default:r.appendChars(e,0,5),r.append("0000"),r.append(n)}return t.length>=8&&r.append(t.charAt(7)),r.toString()}}It.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),It.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])];class bt extends ft{constructor(t){super();let e=null==t?null:t.get(m.POSSIBLE_FORMATS),r=[];null!=e&&(e.indexOf(F.EAN_13)>-1?r.push(new At):e.indexOf(F.UPC_A)>-1&&r.push(new St),e.indexOf(F.EAN_8)>-1&&r.push(new vt),e.indexOf(F.UPC_E)>-1&&r.push(new It)),0===r.length&&(r.push(new At),r.push(new vt),r.push(new It)),this.readers=r}decodeRow(t,e,r){for(let o of this.readers)try{const n=o.decodeRow(t,e,r),i=n.getBarcodeFormat()===F.EAN_13&&"0"===n.getText().charAt(0),s=null==r?null:r.get(m.POSSIBLE_FORMATS),a=null==s||s.includes(F.UPC_A);if(i&&a){const t=n.getRawBytes(),e=new L(n.getText().substring(1),t,t.length,n.getResultPoints(),F.UPC_A);return e.putAllMetadata(n.getResultMetadata()),e}return n}catch(n){}throw new I}reset(){for(let t of this.readers)t.reset()}}class Tt extends ft{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,e){for(let r=0;r<e.length;r++)if(ft.patternMatchVariance(t,e[r],Tt.MAX_INDIVIDUAL_VARIANCE)<Tt.MAX_AVG_VARIANCE)return r;throw new I}static count(t){return tt.sum(new Int32Array(t))}static increment(t,e){let r=0,n=e[0];for(let o=1;o<t.length;o++)e[o]>n&&(n=e[o],r=o);t[r]++}static decrement(t,e){let r=0,n=e[0];for(let o=1;o<t.length;o++)e[o]<n&&(n=e[o],r=o);t[r]--}static isFinderPattern(t){let e=t[0]+t[1],r=e/(e+t[2]+t[3]);if(r>=Tt.MIN_FINDER_PATTERN_RATIO&&r<=Tt.MAX_FINDER_PATTERN_RATIO){let e=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;for(let n of t)n>r&&(r=n),n<e&&(e=n);return r<10*e}return!1}}Tt.MAX_AVG_VARIANCE=.2,Tt.MAX_INDIVIDUAL_VARIANCE=.45,Tt.MIN_FINDER_PATTERN_RATIO=9.5/12,Tt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Rt{constructor(t,e){this.value=t,this.checksumPortion=e}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){return t instanceof Rt&&this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ot{constructor(t,e,r,n,o){this.value=t,this.startEnd=e,this.value=t,this.startEnd=e,this.resultPoints=new Array,this.resultPoints.push(new rt(r,o)),this.resultPoints.push(new rt(n,o))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){return t instanceof Ot&&this.value===t.value}hashCode(){return this.value}}class Nt{constructor(){}static getRSSvalue(t,e,r){let n=0;for(let a of t)n+=a;let o=0,i=0,s=t.length;for(let a=0;a<s-1;a++){let l;for(l=1,i|=1<<a;l<t[a];l++,i&=~(1<<a)){let t=Nt.combins(n-l-1,s-a-2);if(r&&0===i&&n-l-(s-a-1)>=s-a-1&&(t-=Nt.combins(n-l-(s-a),s-a-2)),s-a-1>1){let r=0;for(let t=n-l-(s-a-2);t>e;t--)r+=Nt.combins(n-l-t-1,s-a-3);t-=r*(s-1-a)}else n-l>e&&t--;o+=t}n-=l}return o}static combins(t,e){let r,n;t-e>e?(n=e,r=t-e):(n=t-e,r=e);let o=1,i=1;for(let s=t;s>r;s--)o*=s,i<=n&&(o/=i,i++);for(;i<=n;)o/=i,i++;return o}}class Dt{constructor(t,e){e?this.decodedInformation=null:(this.finished=t,this.decodedInformation=e)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Mt{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class Pt extends Mt{constructor(t,e){super(t),this.value=e}getValue(){return this.value}isFNC1(){return this.value===Pt.FNC1}}Pt.FNC1="$";class Bt extends Mt{constructor(t,e,r){super(t),r?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=e}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Lt extends Mt{constructor(t,e,r){if(super(t),e<0||e>10||r<0||r>10)throw new _;this.firstDigit=e,this.secondDigit=r}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Lt.FNC1}isSecondDigitFNC1(){return this.secondDigit===Lt.FNC1}isAnyFNC1(){return this.firstDigit===Lt.FNC1||this.secondDigit===Lt.FNC1}}Lt.FNC1=10;class xt{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new I;let e=t.substring(0,2);for(let o of xt.TWO_DIGIT_DATA_LENGTH)if(o[0]===e)return o[1]===xt.VARIABLE_LENGTH?xt.processVariableAI(2,o[2],t):xt.processFixedAI(2,o[1],t);if(t.length<3)throw new I;let r=t.substring(0,3);for(let o of xt.THREE_DIGIT_DATA_LENGTH)if(o[0]===r)return o[1]===xt.VARIABLE_LENGTH?xt.processVariableAI(3,o[2],t):xt.processFixedAI(3,o[1],t);for(let o of xt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(o[0]===r)return o[1]===xt.VARIABLE_LENGTH?xt.processVariableAI(4,o[2],t):xt.processFixedAI(4,o[1],t);if(t.length<4)throw new I;let n=t.substring(0,4);for(let o of xt.FOUR_DIGIT_DATA_LENGTH)if(o[0]===n)return o[1]===xt.VARIABLE_LENGTH?xt.processVariableAI(4,o[2],t):xt.processFixedAI(4,o[1],t);throw new I}static processFixedAI(t,e,r){if(r.length<t)throw new I;let n=r.substring(0,t);if(r.length<t+e)throw new I;let o=r.substring(t,t+e),i=r.substring(t+e),s="("+n+")"+o,a=xt.parseFieldsInGeneralPurpose(i);return null==a?s:s+a}static processVariableAI(t,e,r){let n,o=r.substring(0,t);n=r.length<t+e?r.length:t+e;let i=r.substring(t,n),s=r.substring(n),a="("+o+")"+i,l=xt.parseFieldsInGeneralPurpose(s);return null==l?a:a+l}}xt.VARIABLE_LENGTH=[],xt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",xt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",xt.VARIABLE_LENGTH,20],["22",xt.VARIABLE_LENGTH,29],["30",xt.VARIABLE_LENGTH,8],["37",xt.VARIABLE_LENGTH,8],["90",xt.VARIABLE_LENGTH,30],["91",xt.VARIABLE_LENGTH,30],["92",xt.VARIABLE_LENGTH,30],["93",xt.VARIABLE_LENGTH,30],["94",xt.VARIABLE_LENGTH,30],["95",xt.VARIABLE_LENGTH,30],["96",xt.VARIABLE_LENGTH,30],["97",xt.VARIABLE_LENGTH,3],["98",xt.VARIABLE_LENGTH,30],["99",xt.VARIABLE_LENGTH,30]],xt.THREE_DIGIT_DATA_LENGTH=[["240",xt.VARIABLE_LENGTH,30],["241",xt.VARIABLE_LENGTH,30],["242",xt.VARIABLE_LENGTH,6],["250",xt.VARIABLE_LENGTH,30],["251",xt.VARIABLE_LENGTH,30],["253",xt.VARIABLE_LENGTH,17],["254",xt.VARIABLE_LENGTH,20],["400",xt.VARIABLE_LENGTH,30],["401",xt.VARIABLE_LENGTH,30],["402",17],["403",xt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",xt.VARIABLE_LENGTH,20],["421",xt.VARIABLE_LENGTH,15],["422",3],["423",xt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],xt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",xt.VARIABLE_LENGTH,15],["391",xt.VARIABLE_LENGTH,18],["392",xt.VARIABLE_LENGTH,15],["393",xt.VARIABLE_LENGTH,18],["703",xt.VARIABLE_LENGTH,30]],xt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",xt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",xt.VARIABLE_LENGTH,20],["8003",xt.VARIABLE_LENGTH,30],["8004",xt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",xt.VARIABLE_LENGTH,30],["8008",xt.VARIABLE_LENGTH,12],["8018",18],["8020",xt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",xt.VARIABLE_LENGTH,70],["8200",xt.VARIABLE_LENGTH,70]];class Ft{constructor(t){this.buffer=new v,this.information=t}decodeAllCodes(t,e){let r=e,n=null;for(;;){let e=this.decodeGeneralPurposeField(r,n),o=xt.parseFieldsInGeneralPurpose(e.getNewString());if(null!=o&&t.append(o),n=e.isRemaining()?""+e.getRemainingValue():null,r===e.getNewPosition())break;r=e.getNewPosition()}return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let e=t;e<t+3;++e)if(this.information.get(e))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let e=this.extractNumericValueFromBitArray(t,4);return new Lt(this.information.getSize(),0===e?Lt.FNC1:e-1,Lt.FNC1)}let e=this.extractNumericValueFromBitArray(t,7);return new Lt(t+7,(e-8)/11,(e-8)%11)}extractNumericValueFromBitArray(t,e){return Ft.extractNumericValueFromBitArray(this.information,t,e)}static extractNumericValueFromBitArray(t,e,r){let n=0;for(let o=0;o<r;++o)t.get(e+o)&&(n|=1<<r-o-1);return n}decodeGeneralPurposeField(t,e){this.buffer.setLengthToZero(),null!=e&&this.buffer.append(e),this.current.setPosition(t);let r=this.parseBlocks();return null!=r&&r.isRemaining()?new Bt(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Bt(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,e;do{let r=this.current.getPosition();if(this.current.isAlpha()?(e=this.parseAlphaBlock(),t=e.isFinished()):this.current.isIsoIec646()?(e=this.parseIsoIec646Block(),t=e.isFinished()):(e=this.parseNumericBlock(),t=e.isFinished()),r===this.current.getPosition()&&!t)break}while(!t);return e.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let e;return e=t.isSecondDigitFNC1()?new Bt(this.current.getPosition(),this.buffer.toString()):new Bt(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Dt(!0,e)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let t=new Bt(this.current.getPosition(),this.buffer.toString());return new Dt(!0,t)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Dt(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let t=new Bt(this.current.getPosition(),this.buffer.toString());return new Dt(!0,t)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Dt(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let t=new Bt(this.current.getPosition(),this.buffer.toString());return new Dt(!0,t)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Dt(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+7>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<116)return!0;if(t+8>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(t,8);return n>=232&&n<253}decodeIsoIec646(t){let e=this.extractNumericValueFromBitArray(t,5);if(15===e)return new Pt(t+5,Pt.FNC1);if(e>=5&&e<15)return new Pt(t+5,"0"+(e-5));let r,n=this.extractNumericValueFromBitArray(t,7);if(n>=64&&n<90)return new Pt(t+7,""+(n+1));if(n>=90&&n<116)return new Pt(t+7,""+(n+7));switch(this.extractNumericValueFromBitArray(t,8)){case 232:r="!";break;case 233:r='"';break;case 234:r="%";break;case 235:r="&";break;case 236:r="'";break;case 237:r="(";break;case 238:r=")";break;case 239:r="*";break;case 240:r="+";break;case 241:r=",";break;case 242:r="-";break;case 243:r=".";break;case 244:r="/";break;case 245:r=":";break;case 246:r=";";break;case 247:r="<";break;case 248:r="=";break;case 249:r=">";break;case 250:r="?";break;case 251:r="_";break;case 252:r=" ";break;default:throw new _}return new Pt(t+8,r)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+6>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,6);return r>=16&&r<63}decodeAlphanumeric(t){let e=this.extractNumericValueFromBitArray(t,5);if(15===e)return new Pt(t+5,Pt.FNC1);if(e>=5&&e<15)return new Pt(t+5,"0"+(e-5));let r,n=this.extractNumericValueFromBitArray(t,6);if(n>=32&&n<58)return new Pt(t+6,""+(n+33));switch(n){case 58:r="*";break;case 59:r=",";break;case 60:r="-";break;case 61:r=".";break;case 62:r="/";break;default:throw new $("Decoding invalid alphanumeric value: "+n)}return new Pt(t+6,r)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let e=0;e<5&&e+t<this.information.getSize();++e)if(2===e){if(!this.information.get(t+2))return!1}else if(this.information.get(t+e))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let e=t;e<t+3;++e)if(this.information.get(e))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let e=0;e<4&&e+t<this.information.getSize();++e)if(this.information.get(t+e))return!1;return!0}}class kt{constructor(t){this.information=t,this.generalDecoder=new Ft(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Vt extends kt{constructor(t){super(t)}encodeCompressedGtin(t,e){t.append("(01)");let r=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,e,r)}encodeCompressedGtinWithoutAI(t,e,r){for(let n=0;n<4;++n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(e+10*n,10);r/100==0&&t.append("0"),r/10==0&&t.append("0"),t.append(r)}Vt.appendCheckDigit(t,r)}static appendCheckDigit(t,e){let r=0;for(let n=0;n<13;n++){let o=t.charAt(n+e).charCodeAt(0)-"0".charCodeAt(0);r+=0==(1&n)?3*o:o}r=10-r%10,10===r&&(r=0),t.append(r)}}Vt.GTIN_SIZE=40;class Ut extends Vt{constructor(t){super(t)}parseInformation(){let t=new v;t.append("(01)");let e=t.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(Ut.HEADER_SIZE,4);return t.append(r),this.encodeCompressedGtinWithoutAI(t,Ut.HEADER_SIZE+4,e),this.getGeneralDecoder().decodeAllCodes(t,Ut.HEADER_SIZE+44)}}Ut.HEADER_SIZE=4;class Ht extends kt{constructor(t){super(t)}parseInformation(){let t=new v;return this.getGeneralDecoder().decodeAllCodes(t,Ht.HEADER_SIZE)}}Ht.HEADER_SIZE=5;class Gt extends Vt{constructor(t){super(t)}encodeCompressedWeight(t,e,r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(e,r);this.addWeightCode(t,n);let o=this.checkWeight(n),i=1e5;for(let s=0;s<5;++s)o/i==0&&t.append("0"),i/=10;t.append(o)}}class Wt extends Gt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=Wt.HEADER_SIZE+Gt.GTIN_SIZE+Wt.WEIGHT_SIZE)throw new I;let t=new v;return this.encodeCompressedGtin(t,Wt.HEADER_SIZE),this.encodeCompressedWeight(t,Wt.HEADER_SIZE+Gt.GTIN_SIZE,Wt.WEIGHT_SIZE),t.toString()}}Wt.HEADER_SIZE=5,Wt.WEIGHT_SIZE=15;class zt extends Wt{constructor(t){super(t)}addWeightCode(t,e){t.append("(3103)")}checkWeight(t){return t}}class Xt extends Wt{constructor(t){super(t)}addWeightCode(t,e){t.append(e<1e4?"(3202)":"(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class jt extends Vt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<jt.HEADER_SIZE+Vt.GTIN_SIZE)throw new I;let t=new v;this.encodeCompressedGtin(t,jt.HEADER_SIZE);let e=this.getGeneralDecoder().extractNumericValueFromBitArray(jt.HEADER_SIZE+Vt.GTIN_SIZE,jt.LAST_DIGIT_SIZE);t.append("(392"),t.append(e),t.append(")");let r=this.getGeneralDecoder().decodeGeneralPurposeField(jt.HEADER_SIZE+Vt.GTIN_SIZE+jt.LAST_DIGIT_SIZE,null);return t.append(r.getNewString()),t.toString()}}jt.HEADER_SIZE=8,jt.LAST_DIGIT_SIZE=2;class Yt extends Vt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Yt.HEADER_SIZE+Vt.GTIN_SIZE)throw new I;let t=new v;this.encodeCompressedGtin(t,Yt.HEADER_SIZE);let e=this.getGeneralDecoder().extractNumericValueFromBitArray(Yt.HEADER_SIZE+Vt.GTIN_SIZE,Yt.LAST_DIGIT_SIZE);t.append("(393"),t.append(e),t.append(")");let r=this.getGeneralDecoder().extractNumericValueFromBitArray(Yt.HEADER_SIZE+Vt.GTIN_SIZE+Yt.LAST_DIGIT_SIZE,Yt.FIRST_THREE_DIGITS_SIZE);r/100==0&&t.append("0"),r/10==0&&t.append("0"),t.append(r);let n=this.getGeneralDecoder().decodeGeneralPurposeField(Yt.HEADER_SIZE+Vt.GTIN_SIZE+Yt.LAST_DIGIT_SIZE+Yt.FIRST_THREE_DIGITS_SIZE,null);return t.append(n.getNewString()),t.toString()}}Yt.HEADER_SIZE=8,Yt.LAST_DIGIT_SIZE=2,Yt.FIRST_THREE_DIGITS_SIZE=10;class Zt extends Gt{constructor(t,e,r){super(t),this.dateCode=r,this.firstAIdigits=e}parseInformation(){if(this.getInformation().getSize()!=Zt.HEADER_SIZE+Zt.GTIN_SIZE+Zt.WEIGHT_SIZE+Zt.DATE_SIZE)throw new I;let t=new v;return this.encodeCompressedGtin(t,Zt.HEADER_SIZE),this.encodeCompressedWeight(t,Zt.HEADER_SIZE+Zt.GTIN_SIZE,Zt.WEIGHT_SIZE),this.encodeCompressedDate(t,Zt.HEADER_SIZE+Zt.GTIN_SIZE+Zt.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,e){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(e,Zt.DATE_SIZE);if(38400==r)return;t.append("("),t.append(this.dateCode),t.append(")");let n=r%32;r/=32;let o=r%12+1;r/=12;let i=r;i/10==0&&t.append("0"),t.append(i),o/10==0&&t.append("0"),t.append(o),n/10==0&&t.append("0"),t.append(n)}addWeightCode(t,e){t.append("("),t.append(this.firstAIdigits),t.append(e/1e5),t.append(")")}checkWeight(t){return t%1e5}}Zt.HEADER_SIZE=8,Zt.WEIGHT_SIZE=20,Zt.DATE_SIZE=16;class Kt{constructor(t,e,r,n){this.leftchar=t,this.rightchar=e,this.finderpattern=r,this.maybeLast=n}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(t,e){return t instanceof Kt&&Kt.equalsOrNull(t.leftchar,e.leftchar)&&Kt.equalsOrNull(t.rightchar,e.rightchar)&&Kt.equalsOrNull(t.finderpattern,e.finderpattern)}static equalsOrNull(t,e){return null===t?null===e:Kt.equals(t,e)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class qt{constructor(t,e,r){this.pairs=t,this.rowNumber=e,this.wasReversed=r}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,e){return t instanceof qt&&this.checkEqualitity(t,e)&&t.wasReversed===e.wasReversed}checkEqualitity(t,e){if(!t||!e)return;let r;return t.forEach((t,n)=>{e.forEach(e=>{t.getLeftChar().getValue()===e.getLeftChar().getValue()&&t.getRightChar().getValue()===e.getRightChar().getValue()&&t.getFinderPatter().getValue()===e.getFinderPatter().getValue()&&(r=!0)})}),r}}class $t extends Tt{constructor(){super(...arguments),this.pairs=new Array($t.MAX_PAIRS),this.rows=new Array,this.startEnd=[2]}decodeRow(t,e,r){this.pairs.length=0,this.startFromEven=!1;try{return $t.constructResult(this.decodeRow2pairs(t,e))}catch(n){console.log(n)}return this.pairs.length=0,this.startFromEven=!0,$t.constructResult(this.decodeRow2pairs(t,e))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,e){let r,n=!1;for(;!n;)try{this.pairs.push(this.retrieveNextPair(e,this.pairs,t))}catch(o){if(o instanceof I){if(!this.pairs.length)throw new I;n=!0}}if(this.checkChecksum())return this.pairs;if(r=!!this.rows.length,this.storeRow(t,!1),r){let t=this.checkRowsBoolean(!1);if(null!=t)return t;if(t=this.checkRowsBoolean(!0),null!=t)return t}throw new I}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let e=null;try{e=this.checkRows(new Array,0)}catch(r){console.log(r)}return t&&(this.rows=this.rows.reverse()),e}checkRows(t,e){for(let n=e;n<this.rows.length;n++){let e=this.rows[n];this.pairs.length=0;for(let r of t)this.pairs.push(r.getPairs());if(this.pairs.push(e.getPairs()),!$t.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let o=new Array(t);o.push(e);try{return this.checkRows(o,n+1)}catch(r){console.log(r)}}throw new I}static isValidSequence(t){for(let e of $t.FINDER_PATTERN_SEQUENCES){if(t.length>e.length)continue;let r=!0;for(let n=0;n<t.length;n++)if(t[n].getFinderPattern().getValue()!=e[n]){r=!1;break}if(r)return!0}return!1}storeRow(t,e){let r=0,n=!1,o=!1;for(;r<this.rows.length;){let e=this.rows[r];if(e.getRowNumber()>t){o=e.isEquivalent(this.pairs);break}n=e.isEquivalent(this.pairs),r++}o||n||$t.isPartialRow(this.pairs,this.rows)||(this.rows.push(r,new qt(this.pairs,t,e)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,e){for(let r of e)if(r.getPairs().length!==t.length)for(let e of r.getPairs())for(let r of t)if(Kt.equals(e,r))break}static isPartialRow(t,e){for(let r of e){let e=!0;for(let n of t){let t=!1;for(let e of r.getPairs())if(n.equals(e)){t=!0;break}if(!t){e=!1;break}}if(e)return!0}return!1}getRows(){return this.rows}static constructResult(t){let e=function(t){try{if(t.get(1))return new Ut(t);if(!t.get(2))return new Ht(t);switch(Ft.extractNumericValueFromBitArray(t,1,4)){case 4:return new zt(t);case 5:return new Xt(t)}switch(Ft.extractNumericValueFromBitArray(t,1,5)){case 12:return new jt(t);case 13:return new Yt(t)}switch(Ft.extractNumericValueFromBitArray(t,1,7)){case 56:return new Zt(t,"310","11");case 57:return new Zt(t,"320","11");case 58:return new Zt(t,"310","13");case 59:return new Zt(t,"320","13");case 60:return new Zt(t,"310","15");case 61:return new Zt(t,"320","15");case 62:return new Zt(t,"310","17");case 63:return new Zt(t,"320","17")}}catch(e){throw console.log(e),new $("unknown decoder: "+t)}}(class{static buildBitArray(t){let e=2*t.length-1;null==t[t.length-1].getRightChar()&&(e-=1);let r=new p(12*e),n=0,o=t[0].getRightChar().getValue();for(let i=11;i>=0;--i)0!=(o&1<<i)&&r.set(n),n++;for(let i=1;i<t.length;++i){let e=t[i],o=e.getLeftChar().getValue();for(let t=11;t>=0;--t)0!=(o&1<<t)&&r.set(n),n++;if(null!=e.getRightChar()){let t=e.getRightChar().getValue();for(let e=11;e>=0;--e)0!=(t&1<<e)&&r.set(n),n++}}return r}}.buildBitArray(t)).parseInformation(),r=t[0].getFinderPattern().getResultPoints(),n=t[t.length-1].getFinderPattern().getResultPoints();return new L(e,null,null,[r[0],r[1],n[0],n[1]],F.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),e=t.getLeftChar(),r=t.getRightChar();if(null==r)return!1;let n=r.getChecksumPortion(),o=2;for(let i=1;i<this.pairs.size();++i){let t=this.pairs.get(i);n+=t.getLeftChar().getChecksumPortion(),o++;let e=t.getRightChar();null!=e&&(n+=e.getChecksumPortion(),o++)}return n%=211,211*(o-4)+n==e.getValue()}static getNextSecondBar(t,e){let r;return t.get(e)?(r=t.getNextUnset(e),r=t.getNextSet(r)):(r=t.getNextSet(e),r=t.getNextUnset(r)),r}retrieveNextPair(t,e,r){let n,o=e.length%2==0;this.startFromEven&&(o=!o);let i=!0,s=-1;do{this.findNextPair(t,e,s),n=this.parseFoundFinderPattern(t,r,o),null==n?s=$t.getNextSecondBar(t,this.startEnd[0]):i=!1}while(i);let a,l=this.decodeDataCharacter(t,n,o,!0);if(!this.isEmptyPair(e)&&e[e.length-1].mustBeLast())throw new I;try{a=this.decodeDataCharacter(t,n,o,!1)}catch(u){a=null,console.log(u)}return new Kt(l,a,n,!0)}isEmptyPair(t){return 0===t.length}findNextPair(t,e,r){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let o,i=t.getSize();o=r>=0?r:this.isEmptyPair(e)?0:e[e.length-1].getFinderPattern().getStartEnd()[1];let s=e.length%2!=0;this.startFromEven&&(s=!s);let a=!1;for(;o<i&&(a=!t.get(o),a);)o++;let l=0,u=o;for(let c=o;c<i;c++)if(t.get(c)!=a)n[l]++;else{if(3==l){if(s&&$t.reverseCounters(n),$t.isFinderPattern(n))return this.startEnd[0]=u,void(this.startEnd[1]=c);s&&$t.reverseCounters(n),u+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,l--}else l++;n[l]=1,a=!a}throw new I}static reverseCounters(t){let e=t.length;for(let r=0;r<e/2;++r){let n=t[r];t[r]=t[e-r-1],t[e-r-1]=n}}parseFoundFinderPattern(t,e,r){let n,o,i;if(r){let e=this.startEnd[0]-1;for(;e>=0&&!t.get(e);)e--;e++,n=this.startEnd[0]-e,o=e,i=this.startEnd[1]}else o=this.startEnd[0],i=t.getNextUnset(this.startEnd[1]+1),n=i-this.startEnd[1];let s,a=this.getDecodeFinderCounters();c.arraycopy(a,0,a,1,a.length-1),a[0]=n;try{s=this.parseFinderValue(a,$t.FINDER_PATTERNS)}catch(l){return null}return new Ot(s,[o,i],o,i,e)}decodeDataCharacter(t,e,r,n){let o=this.getDataCharacterCounters();for(let E=0;E<o.length;E++)o[E]=0;if(n)$t.recordPatternInReverse(t,e.getStartEnd()[0],o);else{$t.recordPattern(t,e.getStartEnd()[1],o);for(let t=0,e=o.length-1;t<e;t++,e--){let r=o[t];o[t]=o[e],o[e]=r}}let i=tt.sum(new Int32Array(o))/17,s=(e.getStartEnd()[1]-e.getStartEnd()[0])/15;if(Math.abs(i-s)/s>.3)throw new I;let a=this.getOddCounts(),l=this.getEvenCounts(),u=this.getOddRoundingErrors(),c=this.getEvenRoundingErrors();for(let E=0;E<o.length;E++){let t=1*o[E]/i,e=t+.5;if(e<1){if(t<.3)throw new I;e=1}else if(e>8){if(t>8.7)throw new I;e=8}let r=E/2;0==(1&E)?(a[r]=e,u[r]=t-e):(l[r]=e,c[r]=t-e)}this.adjustOddEvenCounts(17);let h=4*e.getValue()+(r?0:2)+(n?0:1)-1,d=0,f=0;for(let E=a.length-1;E>=0;E--)$t.isNotA1left(e,r,n)&&(f+=a[E]*$t.WEIGHTS[h][2*E]),d+=a[E];let g=0;for(let E=l.length-1;E>=0;E--)$t.isNotA1left(e,r,n)&&(g+=l[E]*$t.WEIGHTS[h][2*E+1]);let p=f+g;if(0!=(1&d)||d>13||d<4)throw new I;let w=(13-d)/2,m=$t.SYMBOL_WIDEST[w],_=9-m,y=Nt.getRSSvalue(a,m,!0),C=Nt.getRSSvalue(l,_,!1);return new Rt(y*$t.EVEN_TOTAL_SUBSET[w]+C+$t.GSUM[w],p)}static isNotA1left(t,e,r){return!(0==t.getValue()&&e&&r)}adjustOddEvenCounts(t){let e=tt.sum(new Int32Array(this.getOddCounts())),r=tt.sum(new Int32Array(this.getEvenCounts())),n=!1,o=!1;e>13?o=!0:e<4&&(n=!0);let i=!1,s=!1;r>13?s=!0:r<4&&(i=!0);let a=e+r-t,l=1==(1&e),u=0==(1&r);if(1==a)if(l){if(u)throw new I;o=!0}else{if(!u)throw new I;s=!0}else if(-1==a)if(l){if(u)throw new I;n=!0}else{if(!u)throw new I;i=!0}else{if(0!=a)throw new I;if(l){if(!u)throw new I;e<r?(n=!0,s=!0):(o=!0,i=!0)}else if(u)throw new I}if(n){if(o)throw new I;$t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&$t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),i){if(s)throw new I;$t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&$t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}$t.SYMBOL_WIDEST=[7,5,4,3,1],$t.EVEN_TOTAL_SUBSET=[4,20,52,104,204],$t.GSUM=[0,348,1388,2948,3988],$t.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],$t.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],$t.FINDER_PAT_A=0,$t.FINDER_PAT_B=1,$t.FINDER_PAT_C=2,$t.FINDER_PAT_D=3,$t.FINDER_PAT_E=4,$t.FINDER_PAT_F=5,$t.FINDER_PATTERN_SEQUENCES=[[$t.FINDER_PAT_A,$t.FINDER_PAT_A],[$t.FINDER_PAT_A,$t.FINDER_PAT_B,$t.FINDER_PAT_B],[$t.FINDER_PAT_A,$t.FINDER_PAT_C,$t.FINDER_PAT_B,$t.FINDER_PAT_D],[$t.FINDER_PAT_A,$t.FINDER_PAT_E,$t.FINDER_PAT_B,$t.FINDER_PAT_D,$t.FINDER_PAT_C],[$t.FINDER_PAT_A,$t.FINDER_PAT_E,$t.FINDER_PAT_B,$t.FINDER_PAT_D,$t.FINDER_PAT_D,$t.FINDER_PAT_F],[$t.FINDER_PAT_A,$t.FINDER_PAT_E,$t.FINDER_PAT_B,$t.FINDER_PAT_D,$t.FINDER_PAT_E,$t.FINDER_PAT_F,$t.FINDER_PAT_F],[$t.FINDER_PAT_A,$t.FINDER_PAT_A,$t.FINDER_PAT_B,$t.FINDER_PAT_B,$t.FINDER_PAT_C,$t.FINDER_PAT_C,$t.FINDER_PAT_D,$t.FINDER_PAT_D],[$t.FINDER_PAT_A,$t.FINDER_PAT_A,$t.FINDER_PAT_B,$t.FINDER_PAT_B,$t.FINDER_PAT_C,$t.FINDER_PAT_C,$t.FINDER_PAT_D,$t.FINDER_PAT_E,$t.FINDER_PAT_E],[$t.FINDER_PAT_A,$t.FINDER_PAT_A,$t.FINDER_PAT_B,$t.FINDER_PAT_B,$t.FINDER_PAT_C,$t.FINDER_PAT_C,$t.FINDER_PAT_D,$t.FINDER_PAT_E,$t.FINDER_PAT_F,$t.FINDER_PAT_F],[$t.FINDER_PAT_A,$t.FINDER_PAT_A,$t.FINDER_PAT_B,$t.FINDER_PAT_B,$t.FINDER_PAT_C,$t.FINDER_PAT_D,$t.FINDER_PAT_D,$t.FINDER_PAT_E,$t.FINDER_PAT_E,$t.FINDER_PAT_F,$t.FINDER_PAT_F]],$t.MAX_PAIRS=11;class Qt extends Rt{constructor(t,e,r){super(t,e),this.count=0,this.finderPattern=r}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Jt extends Tt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,e,r){const n=this.decodePair(e,!1,t,r);Jt.addOrTally(this.possibleLeftPairs,n),e.reverse();let o=this.decodePair(e,!0,t,r);Jt.addOrTally(this.possibleRightPairs,o),e.reverse();for(let i of this.possibleLeftPairs)if(i.getCount()>1)for(let t of this.possibleRightPairs)if(t.getCount()>1&&Jt.checkChecksum(i,t))return Jt.constructResult(i,t);throw new I}static addOrTally(t,e){if(null==e)return;let r=!1;for(let n of t)if(n.getValue()===e.getValue()){n.incrementCount(),r=!0;break}r||t.push(e)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,e){let r=4537077*t.getValue()+e.getValue(),n=new String(r).toString(),o=new v;for(let l=13-n.length;l>0;l--)o.append("0");o.append(n);let i=0;for(let l=0;l<13;l++){let t=o.charAt(l).charCodeAt(0)-"0".charCodeAt(0);i+=0==(1&l)?3*t:t}i=10-i%10,10===i&&(i=0),o.append(i.toString());let s=t.getFinderPattern().getResultPoints(),a=e.getFinderPattern().getResultPoints();return new L(o.toString(),null,0,[s[0],s[1],a[0],a[1]],F.RSS_14,(new Date).getTime())}static checkChecksum(t,e){let r=(t.getChecksumPortion()+16*e.getChecksumPortion())%79,n=9*t.getFinderPattern().getValue()+e.getFinderPattern().getValue();return n>72&&n--,n>8&&n--,r===n}decodePair(t,e,r,n){try{let o=this.findFinderPattern(t,e),i=this.parseFoundFinderPattern(t,r,e,o),s=null==n?null:n.get(m.NEED_RESULT_POINT_CALLBACK);if(null!=s){let n=(o[0]+o[1])/2;e&&(n=t.getSize()-1-n),s.foundPossibleResultPoint(new rt(n,r))}let a=this.decodeDataCharacter(t,i,!0),l=this.decodeDataCharacter(t,i,!1);return new Qt(1597*a.getValue()+l.getValue(),a.getChecksumPortion()+4*l.getChecksumPortion(),i)}catch(o){return null}}decodeDataCharacter(t,e,r){let n=this.getDataCharacterCounters();for(let p=0;p<n.length;p++)n[p]=0;if(r)ft.recordPatternInReverse(t,e.getStartEnd()[0],n);else{ft.recordPattern(t,e.getStartEnd()[1]+1,n);for(let t=0,e=n.length-1;t<e;t++,e--){let r=n[t];n[t]=n[e],n[e]=r}}let o=r?16:15,i=tt.sum(new Int32Array(n))/o,s=this.getOddCounts(),a=this.getEvenCounts(),l=this.getOddRoundingErrors(),u=this.getEvenRoundingErrors();for(let p=0;p<n.length;p++){let t=n[p]/i,e=Math.floor(t+.5);e<1?e=1:e>8&&(e=8);let r=Math.floor(p/2);0==(1&p)?(s[r]=e,l[r]=t-e):(a[r]=e,u[r]=t-e)}this.adjustOddEvenCounts(r,o);let c=0,h=0;for(let p=s.length-1;p>=0;p--)h*=9,h+=s[p],c+=s[p];let d=0,f=0;for(let p=a.length-1;p>=0;p--)d*=9,d+=a[p],f+=a[p];let g=h+3*d;if(r){if(0!=(1&c)||c>12||c<4)throw new I;let t=(12-c)/2,e=Jt.OUTSIDE_ODD_WIDEST[t],r=9-e,n=Nt.getRSSvalue(s,e,!1),o=Nt.getRSSvalue(a,r,!0);return new Rt(n*Jt.OUTSIDE_EVEN_TOTAL_SUBSET[t]+o+Jt.OUTSIDE_GSUM[t],g)}{if(0!=(1&f)||f>10||f<4)throw new I;let t=(10-f)/2,e=Jt.INSIDE_ODD_WIDEST[t],r=9-e,n=Nt.getRSSvalue(s,e,!0),o=Nt.getRSSvalue(a,r,!1);return new Rt(o*Jt.INSIDE_ODD_TOTAL_SUBSET[t]+n+Jt.INSIDE_GSUM[t],g)}}findFinderPattern(t,e){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let n=t.getSize(),o=!1,i=0;for(;i<n&&(o=!t.get(i),e!==o);)i++;let s=0,a=i;for(let l=i;l<n;l++)if(t.get(l)!==o)r[s]++;else{if(3===s){if(Tt.isFinderPattern(r))return[a,l];a+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,s--}else s++;r[s]=1,o=!o}throw new I}parseFoundFinderPattern(t,e,r,n){let o=t.get(n[0]),i=n[0]-1;for(;i>=0&&o!==t.get(i);)i--;i++;const s=n[0]-i,a=this.getDecodeFinderCounters(),l=new Int32Array(a.length);c.arraycopy(a,0,l,1,a.length-1),l[0]=s;const u=this.parseFinderValue(l,Jt.FINDER_PATTERNS);let h=i,d=n[1];return r&&(h=t.getSize()-1-h,d=t.getSize()-1-d),new Ot(u,[i,n[1]],h,d,e)}adjustOddEvenCounts(t,e){let r=tt.sum(new Int32Array(this.getOddCounts())),n=tt.sum(new Int32Array(this.getEvenCounts())),o=!1,i=!1,s=!1,a=!1;t?(r>12?i=!0:r<4&&(o=!0),n>12?a=!0:n<4&&(s=!0)):(r>11?i=!0:r<5&&(o=!0),n>10?a=!0:n<4&&(s=!0));let l=r+n-e,u=(1&r)==(t?1:0),c=1==(1&n);if(1===l)if(u){if(c)throw new I;i=!0}else{if(!c)throw new I;a=!0}else if(-1===l)if(u){if(c)throw new I;o=!0}else{if(!c)throw new I;s=!0}else{if(0!==l)throw new I;if(u){if(!c)throw new I;r<n?(o=!0,a=!0):(i=!0,s=!0)}else if(c)throw new I}if(o){if(i)throw new I;Tt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&Tt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(a)throw new I;Tt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&Tt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Jt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Jt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Jt.OUTSIDE_GSUM=[0,161,961,2015,2715],Jt.INSIDE_GSUM=[0,336,1036,1516],Jt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Jt.INSIDE_ODD_WIDEST=[2,4,6,8],Jt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class te extends ft{constructor(t){super(),this.readers=[];const e=t?t.get(m.POSSIBLE_FORMATS):null,r=t&&void 0!==t.get(m.ASSUME_CODE_39_CHECK_DIGIT);e&&((e.includes(F.EAN_13)||e.includes(F.UPC_A)||e.includes(F.EAN_8)||e.includes(F.UPC_E))&&this.readers.push(new bt(t)),e.includes(F.CODE_39)&&this.readers.push(new pt(r)),e.includes(F.CODE_128)&&this.readers.push(new gt),e.includes(F.ITF)&&this.readers.push(new wt),e.includes(F.RSS_14)&&this.readers.push(new Jt),e.includes(F.RSS_EXPANDED)&&this.readers.push(new $t)),0===this.readers.length&&(this.readers.push(new bt(t)),this.readers.push(new pt),this.readers.push(new bt(t)),this.readers.push(new gt),this.readers.push(new wt),this.readers.push(new Jt),this.readers.push(new $t))}decodeRow(t,e,r){for(let o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,e,r)}catch(n){}throw new I}reset(){this.readers.forEach(t=>t.reset())}}class ee{constructor(t,e,r){this.ecCodewords=t,this.ecBlocks=[e],r&&this.ecBlocks.push(r)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class re{constructor(t,e){this.count=t,this.dataCodewords=e}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ne{constructor(t,e,r,n,o,i){this.versionNumber=t,this.symbolSizeRows=e,this.symbolSizeColumns=r,this.dataRegionSizeRows=n,this.dataRegionSizeColumns=o,this.ecBlocks=i;let s=0;const a=i.getECCodewords(),l=i.getECBlocks();for(let u of l)s+=u.getCount()*(u.getDataCodewords()+a);this.totalCodewords=s}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,e){if(0!=(1&t)||0!=(1&e))throw new _;for(let r of ne.VERSIONS)if(r.symbolSizeRows===t&&r.symbolSizeColumns===e)return r;throw new _}toString(){return""+this.versionNumber}static buildVersions(){return[new ne(1,10,10,8,8,new ee(5,new re(1,3))),new ne(2,12,12,10,10,new ee(7,new re(1,5))),new ne(3,14,14,12,12,new ee(10,new re(1,8))),new ne(4,16,16,14,14,new ee(12,new re(1,12))),new ne(5,18,18,16,16,new ee(14,new re(1,18))),new ne(6,20,20,18,18,new ee(18,new re(1,22))),new ne(7,22,22,20,20,new ee(20,new re(1,30))),new ne(8,24,24,22,22,new ee(24,new re(1,36))),new ne(9,26,26,24,24,new ee(28,new re(1,44))),new ne(10,32,32,14,14,new ee(36,new re(1,62))),new ne(11,36,36,16,16,new ee(42,new re(1,86))),new ne(12,40,40,18,18,new ee(48,new re(1,114))),new ne(13,44,44,20,20,new ee(56,new re(1,144))),new ne(14,48,48,22,22,new ee(68,new re(1,174))),new ne(15,52,52,24,24,new ee(42,new re(2,102))),new ne(16,64,64,14,14,new ee(56,new re(2,140))),new ne(17,72,72,16,16,new ee(36,new re(4,92))),new ne(18,80,80,18,18,new ee(48,new re(4,114))),new ne(19,88,88,20,20,new ee(56,new re(4,144))),new ne(20,96,96,22,22,new ee(68,new re(4,174))),new ne(21,104,104,24,24,new ee(56,new re(6,136))),new ne(22,120,120,18,18,new ee(68,new re(6,175))),new ne(23,132,132,20,20,new ee(62,new re(8,163))),new ne(24,144,144,22,22,new ee(62,new re(8,156),new re(2,155))),new ne(25,8,18,6,16,new ee(7,new re(1,5))),new ne(26,8,32,6,14,new ee(11,new re(1,10))),new ne(27,12,26,10,24,new ee(14,new re(1,16))),new ne(28,12,36,10,16,new ee(18,new re(1,22))),new ne(29,16,36,14,16,new ee(24,new re(1,32))),new ne(30,16,48,14,22,new ee(28,new re(1,49)))]}}ne.VERSIONS=ne.buildVersions();class oe{constructor(t){const e=t.getHeight();if(e<8||e>144||0!=(1&e))throw new _;this.version=oe.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new S(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const e=t.getHeight(),r=t.getWidth();return ne.getVersionForDimensions(e,r)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let e=0,r=4,n=0;const o=this.mappingBitMatrix.getHeight(),i=this.mappingBitMatrix.getWidth();let s=!1,a=!1,l=!1,u=!1;do{if(r!==o||0!==n||s)if(r!==o-2||0!==n||0==(3&i)||a)if(r!==o+4||2!==n||0!=(7&i)||l)if(r!==o-2||0!==n||4!=(7&i)||u){do{r<o&&n>=0&&!this.readMappingMatrix.get(n,r)&&(t[e++]=255&this.readUtah(r,n,o,i)),r-=2,n+=2}while(r>=0&&n<i);r+=1,n+=3;do{r>=0&&n<i&&!this.readMappingMatrix.get(n,r)&&(t[e++]=255&this.readUtah(r,n,o,i)),r+=2,n-=2}while(r<o&&n>=0);r+=3,n+=1}else t[e++]=255&this.readCorner4(o,i),r-=2,n+=2,u=!0;else t[e++]=255&this.readCorner3(o,i),r-=2,n+=2,l=!0;else t[e++]=255&this.readCorner2(o,i),r-=2,n+=2,a=!0;else t[e++]=255&this.readCorner1(o,i),r-=2,n+=2,s=!0}while(r<o||n<i);if(e!==this.version.getTotalCodewords())throw new _;return t}readModule(t,e,r,n){return t<0&&(t+=r,e+=4-(r+4&7)),e<0&&(e+=n,t+=4-(n+4&7)),this.readMappingMatrix.set(e,t),this.mappingBitMatrix.get(e,t)}readUtah(t,e,r,n){let o=0;return this.readModule(t-2,e-2,r,n)&&(o|=1),o<<=1,this.readModule(t-2,e-1,r,n)&&(o|=1),o<<=1,this.readModule(t-1,e-2,r,n)&&(o|=1),o<<=1,this.readModule(t-1,e-1,r,n)&&(o|=1),o<<=1,this.readModule(t-1,e,r,n)&&(o|=1),o<<=1,this.readModule(t,e-2,r,n)&&(o|=1),o<<=1,this.readModule(t,e-1,r,n)&&(o|=1),o<<=1,this.readModule(t,e,r,n)&&(o|=1),o}readCorner1(t,e){let r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,1,t,e)&&(r|=1),r<<=1,this.readModule(t-1,2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r}readCorner2(t,e){let r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-4,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r}readCorner3(t,e){let r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-3,t,e)&&(r|=1),r<<=1,this.readModule(1,e-2,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r}readCorner4(t,e){let r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r}extractDataRegion(t){const e=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(t.getHeight()!==e)throw new s("Dimension of bitMatrix must match the version size");const n=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),i=e/n|0,a=r/o|0,l=new S(a*o,i*n);for(let s=0;s<i;++s){const e=s*n;for(let r=0;r<a;++r){const i=r*o;for(let a=0;a<n;++a){const u=s*(n+2)+1+a,c=e+a;for(let e=0;e<o;++e)t.get(r*(o+2)+1+e,u)&&l.set(i+e,c)}}}return l}}class ie{constructor(t,e){this.numDataCodewords=t,this.codewords=e}static getDataBlocks(t,e){const r=e.getECBlocks();let n=0;const o=r.getECBlocks();for(let s of o)n+=s.getCount();const i=new Array(n);let a=0;for(let s of o)for(let t=0;t<s.getCount();t++){const t=s.getDataCodewords(),e=r.getECCodewords()+t;i[a++]=new ie(t,new Uint8Array(e))}const l=i[0].codewords.length-r.getECCodewords(),u=l-1;let c=0;for(let s=0;s<u;s++)for(let e=0;e<a;e++)i[e].codewords[s]=t[c++];const h=24===e.getVersionNumber(),d=h?8:a;for(let s=0;s<d;s++)i[s].codewords[l-1]=t[c++];const f=i[0].codewords.length;for(let s=l;s<f;s++)for(let e=0;e<a;e++){const r=h?(e+8)%a:e;i[r].codewords[h&&r>7?s-1:s]=t[c++]}if(c!==t.length)throw new s;return i}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class se{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new s(""+t);let e=0,r=this.bitOffset,n=this.byteOffset;const o=this.bytes;if(r>0){const i=8-r,s=t<i?t:i,a=i-s;e=(o[n]&255>>8-s<<a)>>a,t-=s,r+=s,8===r&&(r=0,n++)}if(t>0){for(;t>=8;)e=e<<8|255&o[n],n++,t-=8;if(t>0){const i=8-t;e=e<<t|(o[n]&255>>i<<i)>>i,r+=t}}return this.bitOffset=r,this.byteOffset=n,e}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}!function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"}(V||(V={}));class ae{static decode(t){const e=new se(t),r=new v,n=new v,o=new Array;let i=V.ASCII_ENCODE;do{if(i===V.ASCII_ENCODE)i=this.decodeAsciiSegment(e,r,n);else{switch(i){case V.C40_ENCODE:this.decodeC40Segment(e,r);break;case V.TEXT_ENCODE:this.decodeTextSegment(e,r);break;case V.ANSIX12_ENCODE:this.decodeAnsiX12Segment(e,r);break;case V.EDIFACT_ENCODE:this.decodeEdifactSegment(e,r);break;case V.BASE256_ENCODE:this.decodeBase256Segment(e,r,o);break;default:throw new _}i=V.ASCII_ENCODE}}while(i!==V.PAD_ENCODE&&e.available()>0);return n.length()>0&&r.append(n.toString()),new X(t,r.toString(),0===o.length?null:o,null)}static decodeAsciiSegment(t,e,r){let n=!1;do{let o=t.readBits(8);if(0===o)throw new _;if(o<=128)return n&&(o+=128),e.append(String.fromCharCode(o-1)),V.ASCII_ENCODE;if(129===o)return V.PAD_ENCODE;if(o<=229){const t=o-130;t<10&&e.append("0"),e.append(""+t)}else switch(o){case 230:return V.C40_ENCODE;case 231:return V.BASE256_ENCODE;case 232:e.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:n=!0;break;case 236:e.append("[)>\x1e05\x1d"),r.insert(0,"\x1e\x04");break;case 237:e.append("[)>\x1e06\x1d"),r.insert(0,"\x1e\x04");break;case 238:return V.ANSIX12_ENCODE;case 239:return V.TEXT_ENCODE;case 240:return V.EDIFACT_ENCODE;case 241:break;default:if(254!==o||0!==t.available())throw new _}}while(t.available()>0);return V.ASCII_ENCODE}static decodeC40Segment(t,e){let r=!1;const n=[];let o=0;do{if(8===t.available())return;const i=t.readBits(8);if(254===i)return;this.parseTwoBytes(i,t.readBits(8),n);for(let t=0;t<3;t++){const i=n[t];switch(o){case 0:if(i<3)o=i+1;else{if(!(i<this.C40_BASIC_SET_CHARS.length))throw new _;{const t=this.C40_BASIC_SET_CHARS[i];r?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),r=!1):e.append(t)}}break;case 1:r?(e.append(String.fromCharCode(i+128)),r=!1):e.append(String.fromCharCode(i)),o=0;break;case 2:if(i<this.C40_SHIFT2_SET_CHARS.length){const t=this.C40_SHIFT2_SET_CHARS[i];r?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),r=!1):e.append(t)}else switch(i){case 27:e.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new _}o=0;break;case 3:r?(e.append(String.fromCharCode(i+224)),r=!1):e.append(String.fromCharCode(i+96)),o=0;break;default:throw new _}}}while(t.available()>0)}static decodeTextSegment(t,e){let r=!1,n=[],o=0;do{if(8===t.available())return;const i=t.readBits(8);if(254===i)return;this.parseTwoBytes(i,t.readBits(8),n);for(let t=0;t<3;t++){const i=n[t];switch(o){case 0:if(i<3)o=i+1;else{if(!(i<this.TEXT_BASIC_SET_CHARS.length))throw new _;{const t=this.TEXT_BASIC_SET_CHARS[i];r?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),r=!1):e.append(t)}}break;case 1:r?(e.append(String.fromCharCode(i+128)),r=!1):e.append(String.fromCharCode(i)),o=0;break;case 2:if(i<this.TEXT_SHIFT2_SET_CHARS.length){const t=this.TEXT_SHIFT2_SET_CHARS[i];r?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),r=!1):e.append(t)}else switch(i){case 27:e.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new _}o=0;break;case 3:if(!(i<this.TEXT_SHIFT3_SET_CHARS.length))throw new _;{const t=this.TEXT_SHIFT3_SET_CHARS[i];r?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),r=!1):e.append(t),o=0}break;default:throw new _}}}while(t.available()>0)}static decodeAnsiX12Segment(t,e){const r=[];do{if(8===t.available())return;const n=t.readBits(8);if(254===n)return;this.parseTwoBytes(n,t.readBits(8),r);for(let t=0;t<3;t++){const n=r[t];switch(n){case 0:e.append("\r");break;case 1:e.append("*");break;case 2:e.append(">");break;case 3:e.append(" ");break;default:if(n<14)e.append(String.fromCharCode(n+44));else{if(!(n<40))throw new _;e.append(String.fromCharCode(n+51))}}}}while(t.available()>0)}static parseTwoBytes(t,e,r){let n=(t<<8)+e-1,o=Math.floor(n/1600);r[0]=o,n-=1600*o,o=Math.floor(n/40),r[1]=o,r[2]=n-40*o}static decodeEdifactSegment(t,e){do{if(t.available()<=16)return;for(let r=0;r<4;r++){let r=t.readBits(6);if(31===r){const e=8-t.getBitOffset();return void(8!==e&&t.readBits(e))}0==(32&r)&&(r|=64),e.append(String.fromCharCode(r))}}while(t.available()>0)}static decodeBase256Segment(t,e,r){let n=1+t.getByteOffset();const o=this.unrandomize255State(t.readBits(8),n++);let i;if(i=0===o?t.available()/8|0:o<250?o:250*(o-249)+this.unrandomize255State(t.readBits(8),n++),i<0)throw new _;const s=new Uint8Array(i);for(let l=0;l<i;l++){if(t.available()<8)throw new _;s[l]=this.unrandomize255State(t.readBits(8),n++)}r.push(s);try{e.append(E.decode(s,A.ISO88591))}catch(a){throw new $("Platform does not support required encoding: "+a.message)}}static unrandomize255State(t,e){const r=t-(149*e%255+1);return r>=0?r:r+256}}ae.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ae.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ae.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ae.TEXT_SHIFT2_SET_CHARS=ae.C40_SHIFT2_SET_CHARS,ae.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class le{constructor(){this.rsDecoder=new Q(K.DATA_MATRIX_FIELD_256)}decode(t){const e=new oe(t),r=e.getVersion(),n=e.readCodewords(),o=ie.getDataBlocks(n,r);let i=0;for(let l of o)i+=l.getNumDataCodewords();const s=new Uint8Array(i),a=o.length;for(let l=0;l<a;l++){const t=o[l],e=t.getCodewords(),r=t.getNumDataCodewords();this.correctErrors(e,r);for(let n=0;n<r;n++)s[n*a+l]=e[n]}return ae.decode(s)}correctErrors(t,e){const r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch(n){throw new l}for(let o=0;o<e;o++)t[o]=r[o]}}class ue{constructor(t){this.image=t,this.rectangleDetector=new it(this.image)}detect(){const t=this.rectangleDetector.detect();let e=this.detectSolid1(t);if(e=this.detectSolid2(e),e[3]=this.correctTopRight(e),!e[3])throw new I;e=this.shiftToModuleCenter(e);const r=e[0],n=e[1],o=e[2],i=e[3];let s=this.transitionsBetween(r,i)+1,a=this.transitionsBetween(o,i)+1;1==(1&s)&&(s+=1),1==(1&a)&&(a+=1),4*s<7*a&&4*a<7*s&&(s=a=Math.max(s,a));let l=ue.sampleGrid(this.image,r,n,o,i,s,a);return new nt(l,[r,n,o,i])}static shiftPoint(t,e,r){let n=(e.getX()-t.getX())/(r+1),o=(e.getY()-t.getY())/(r+1);return new rt(t.getX()+n,t.getY()+o)}static moveAway(t,e,r){let n=t.getX(),o=t.getY();return n<e?n-=1:n+=1,o<r?o-=1:o+=1,new rt(n,o)}detectSolid1(t){let e=t[0],r=t[1],n=t[3],o=t[2],i=this.transitionsBetween(e,r),s=this.transitionsBetween(r,n),a=this.transitionsBetween(n,o),l=this.transitionsBetween(o,e),u=i,c=[o,e,r,n];return u>s&&(u=s,c[0]=e,c[1]=r,c[2]=n,c[3]=o),u>a&&(u=a,c[0]=r,c[1]=n,c[2]=o,c[3]=e),u>l&&(c[0]=n,c[1]=o,c[2]=e,c[3]=r),c}detectSolid2(t){let e=t[0],r=t[1],n=t[2],o=t[3],i=this.transitionsBetween(e,o),s=ue.shiftPoint(r,n,4*(i+1)),a=ue.shiftPoint(n,r,4*(i+1));return this.transitionsBetween(s,e)<this.transitionsBetween(a,o)?(t[0]=e,t[1]=r,t[2]=n,t[3]=o):(t[0]=r,t[1]=n,t[2]=o,t[3]=e),t}correctTopRight(t){let e=t[0],r=t[1],n=t[2],o=t[3],i=this.transitionsBetween(e,o),s=this.transitionsBetween(r,o),a=ue.shiftPoint(e,r,4*(s+1)),l=ue.shiftPoint(n,r,4*(i+1));i=this.transitionsBetween(a,o),s=this.transitionsBetween(l,o);let u=new rt(o.getX()+(n.getX()-r.getX())/(i+1),o.getY()+(n.getY()-r.getY())/(i+1)),c=new rt(o.getX()+(e.getX()-r.getX())/(s+1),o.getY()+(e.getY()-r.getY())/(s+1));return this.isValid(u)?this.isValid(c)?this.transitionsBetween(a,u)+this.transitionsBetween(l,u)>this.transitionsBetween(a,c)+this.transitionsBetween(l,c)?u:c:u:this.isValid(c)?c:null}shiftToModuleCenter(t){let e=t[0],r=t[1],n=t[2],o=t[3],i=this.transitionsBetween(e,o)+1,s=this.transitionsBetween(n,o)+1,a=ue.shiftPoint(e,r,4*s),l=ue.shiftPoint(n,r,4*i);i=this.transitionsBetween(a,o)+1,s=this.transitionsBetween(l,o)+1,1==(1&i)&&(i+=1),1==(1&s)&&(s+=1);let u,c,h=(e.getX()+r.getX()+n.getX()+o.getX())/4,d=(e.getY()+r.getY()+n.getY()+o.getY())/4;return e=ue.moveAway(e,h,d),r=ue.moveAway(r,h,d),n=ue.moveAway(n,h,d),o=ue.moveAway(o,h,d),a=ue.shiftPoint(e,r,4*s),a=ue.shiftPoint(a,o,4*i),u=ue.shiftPoint(r,e,4*s),u=ue.shiftPoint(u,n,4*i),l=ue.shiftPoint(n,o,4*s),l=ue.shiftPoint(l,r,4*i),c=ue.shiftPoint(o,n,4*s),c=ue.shiftPoint(c,e,4*i),[a,u,l,c]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,e,r,n,o,i,s){return ut.getInstance().sampleGrid(t,i,s,.5,.5,i-.5,.5,i-.5,s-.5,.5,s-.5,e.getX(),e.getY(),o.getX(),o.getY(),n.getX(),n.getY(),r.getX(),r.getY())}transitionsBetween(t,e){let r=Math.trunc(t.getX()),n=Math.trunc(t.getY()),o=Math.trunc(e.getX()),i=Math.trunc(e.getY()),s=Math.abs(i-n)>Math.abs(o-r);if(s){let t=r;r=n,n=t,t=o,o=i,i=t}let a=Math.abs(o-r),l=Math.abs(i-n),u=-a/2,c=n<i?1:-1,h=r<o?1:-1,d=0,f=this.image.get(s?n:r,s?r:n);for(let g=r,p=n;g!==o;g+=h){let t=this.image.get(s?p:g,s?g:p);if(t!==f&&(d++,f=t),u+=l,u>0){if(p===i)break;p+=c,u-=a}}return d}}class ce{constructor(){this.decoder=new le}decode(t,e=null){let r,n;if(null!=e&&e.has(m.PURE_BARCODE)){const e=ce.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(e),n=ce.NO_POINTS}else{const e=new ue(t.getBlackMatrix()).detect();r=this.decoder.decode(e.getBits()),n=e.getPoints()}const o=r.getRawBytes(),i=new L(r.getText(),o,8*o.length,n,F.DATA_MATRIX,c.currentTimeMillis()),s=r.getByteSegments();null!=s&&i.putMetadata(z.BYTE_SEGMENTS,s);const a=r.getECLevel();return null!=a&&i.putMetadata(z.ERROR_CORRECTION_LEVEL,a),i}reset(){}static extractPureBits(t){const e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(null==e||null==r)throw new I;const n=this.moduleSize(e,t);let o=e[1],i=e[0];const s=(r[0]-i+1)/n,a=(r[1]-o+1)/n;if(s<=0||a<=0)throw new I;const l=n/2;o+=l,i+=l;const u=new S(s,a);for(let c=0;c<a;c++){const e=o+c*n;for(let r=0;r<s;r++)t.get(i+r*n,e)&&u.set(r,c)}return u}static moduleSize(t,e){const r=e.getWidth();let n=t[0];const o=t[1];for(;n<r&&e.get(n,o);)n++;if(n===r)throw new I;const i=n-t[0];if(0===i)throw new I;return i}}ce.NO_POINTS=[],function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"}(U||(U={}));class he{constructor(t,e,r){this.value=t,this.stringValue=e,this.bits=r,he.FOR_BITS.set(r,this),he.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return he.L;case"M":return he.M;case"Q":return he.Q;case"H":return he.H;default:throw new i(t+"not available")}}toString(){return this.stringValue}equals(t){return t instanceof he&&this.value===t.value}static forBits(t){if(t<0||t>=he.FOR_BITS.size)throw new s;return he.FOR_BITS.get(t)}}he.FOR_BITS=new Map,he.FOR_VALUE=new Map,he.L=new he(U.L,"L",1),he.M=new he(U.M,"M",0),he.Q=new he(U.Q,"Q",3),he.H=new he(U.H,"H",2);class de{constructor(t){this.errorCorrectionLevel=he.forBits(t>>3&3),this.dataMask=7&t}static numBitsDiffering(t,e){return g.bitCount(t^e)}static decodeFormatInformation(t,e){const r=de.doDecodeFormatInformation(t,e);return null!==r?r:de.doDecodeFormatInformation(t^de.FORMAT_INFO_MASK_QR,e^de.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;for(const o of de.FORMAT_INFO_DECODE_LOOKUP){const i=o[0];if(i===t||i===e)return new de(o[1]);let s=de.numBitsDiffering(t,i);s<r&&(n=o[1],r=s),t!==e&&(s=de.numBitsDiffering(e,i),s<r&&(n=o[1],r=s))}return r<=3?new de(n):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){return t instanceof de&&this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}de.FORMAT_INFO_MASK_QR=21522,de.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class fe{constructor(t,...e){this.ecCodewordsPerBlock=t,this.ecBlocks=e}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const e=this.ecBlocks;for(const r of e)t+=r.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ge{constructor(t,e){this.count=t,this.dataCodewords=e}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class pe{constructor(t,e,...r){this.versionNumber=t,this.alignmentPatternCenters=e,this.ecBlocks=r;let n=0;const o=r[0].getECCodewordsPerBlock(),i=r[0].getECBlocks();for(const s of i)n+=s.getCount()*(s.getDataCodewords()+o);this.totalCodewords=n}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!=1)throw new _;try{return this.getVersionForNumber((t-17)/4)}catch(e){throw new _}}static getVersionForNumber(t){if(t<1||t>40)throw new s;return pe.VERSIONS[t-1]}static decodeVersionInformation(t){let e=Number.MAX_SAFE_INTEGER,r=0;for(let n=0;n<pe.VERSION_DECODE_INFO.length;n++){const o=pe.VERSION_DECODE_INFO[n];if(o===t)return pe.getVersionForNumber(n+7);const i=de.numBitsDiffering(t,o);i<e&&(r=n+7,e=i)}return e<=3?pe.getVersionForNumber(r):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),e=new S(t);e.setRegion(0,0,9,9),e.setRegion(t-8,0,8,9),e.setRegion(0,t-8,9,8);const r=this.alignmentPatternCenters.length;for(let n=0;n<r;n++){const t=this.alignmentPatternCenters[n]-2;for(let o=0;o<r;o++)0===n&&(0===o||o===r-1)||n===r-1&&0===o||e.setRegion(this.alignmentPatternCenters[o]-2,t,5,5)}return e.setRegion(6,9,1,t-17),e.setRegion(9,6,t-17,1),this.versionNumber>6&&(e.setRegion(t-11,0,3,6),e.setRegion(0,t-11,6,3)),e}toString(){return""+this.versionNumber}}pe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),pe.VERSIONS=[new pe(1,new Int32Array(0),new fe(7,new ge(1,19)),new fe(10,new ge(1,16)),new fe(13,new ge(1,13)),new fe(17,new ge(1,9))),new pe(2,Int32Array.from([6,18]),new fe(10,new ge(1,34)),new fe(16,new ge(1,28)),new fe(22,new ge(1,22)),new fe(28,new ge(1,16))),new pe(3,Int32Array.from([6,22]),new fe(15,new ge(1,55)),new fe(26,new ge(1,44)),new fe(18,new ge(2,17)),new fe(22,new ge(2,13))),new pe(4,Int32Array.from([6,26]),new fe(20,new ge(1,80)),new fe(18,new ge(2,32)),new fe(26,new ge(2,24)),new fe(16,new ge(4,9))),new pe(5,Int32Array.from([6,30]),new fe(26,new ge(1,108)),new fe(24,new ge(2,43)),new fe(18,new ge(2,15),new ge(2,16)),new fe(22,new ge(2,11),new ge(2,12))),new pe(6,Int32Array.from([6,34]),new fe(18,new ge(2,68)),new fe(16,new ge(4,27)),new fe(24,new ge(4,19)),new fe(28,new ge(4,15))),new pe(7,Int32Array.from([6,22,38]),new fe(20,new ge(2,78)),new fe(18,new ge(4,31)),new fe(18,new ge(2,14),new ge(4,15)),new fe(26,new ge(4,13),new ge(1,14))),new pe(8,Int32Array.from([6,24,42]),new fe(24,new ge(2,97)),new fe(22,new ge(2,38),new ge(2,39)),new fe(22,new ge(4,18),new ge(2,19)),new fe(26,new ge(4,14),new ge(2,15))),new pe(9,Int32Array.from([6,26,46]),new fe(30,new ge(2,116)),new fe(22,new ge(3,36),new ge(2,37)),new fe(20,new ge(4,16),new ge(4,17)),new fe(24,new ge(4,12),new ge(4,13))),new pe(10,Int32Array.from([6,28,50]),new fe(18,new ge(2,68),new ge(2,69)),new fe(26,new ge(4,43),new ge(1,44)),new fe(24,new ge(6,19),new ge(2,20)),new fe(28,new ge(6,15),new ge(2,16))),new pe(11,Int32Array.from([6,30,54]),new fe(20,new ge(4,81)),new fe(30,new ge(1,50),new ge(4,51)),new fe(28,new ge(4,22),new ge(4,23)),new fe(24,new ge(3,12),new ge(8,13))),new pe(12,Int32Array.from([6,32,58]),new fe(24,new ge(2,92),new ge(2,93)),new fe(22,new ge(6,36),new ge(2,37)),new fe(26,new ge(4,20),new ge(6,21)),new fe(28,new ge(7,14),new ge(4,15))),new pe(13,Int32Array.from([6,34,62]),new fe(26,new ge(4,107)),new fe(22,new ge(8,37),new ge(1,38)),new fe(24,new ge(8,20),new ge(4,21)),new fe(22,new ge(12,11),new ge(4,12))),new pe(14,Int32Array.from([6,26,46,66]),new fe(30,new ge(3,115),new ge(1,116)),new fe(24,new ge(4,40),new ge(5,41)),new fe(20,new ge(11,16),new ge(5,17)),new fe(24,new ge(11,12),new ge(5,13))),new pe(15,Int32Array.from([6,26,48,70]),new fe(22,new ge(5,87),new ge(1,88)),new fe(24,new ge(5,41),new ge(5,42)),new fe(30,new ge(5,24),new ge(7,25)),new fe(24,new ge(11,12),new ge(7,13))),new pe(16,Int32Array.from([6,26,50,74]),new fe(24,new ge(5,98),new ge(1,99)),new fe(28,new ge(7,45),new ge(3,46)),new fe(24,new ge(15,19),new ge(2,20)),new fe(30,new ge(3,15),new ge(13,16))),new pe(17,Int32Array.from([6,30,54,78]),new fe(28,new ge(1,107),new ge(5,108)),new fe(28,new ge(10,46),new ge(1,47)),new fe(28,new ge(1,22),new ge(15,23)),new fe(28,new ge(2,14),new ge(17,15))),new pe(18,Int32Array.from([6,30,56,82]),new fe(30,new ge(5,120),new ge(1,121)),new fe(26,new ge(9,43),new ge(4,44)),new fe(28,new ge(17,22),new ge(1,23)),new fe(28,new ge(2,14),new ge(19,15))),new pe(19,Int32Array.from([6,30,58,86]),new fe(28,new ge(3,113),new ge(4,114)),new fe(26,new ge(3,44),new ge(11,45)),new fe(26,new ge(17,21),new ge(4,22)),new fe(26,new ge(9,13),new ge(16,14))),new pe(20,Int32Array.from([6,34,62,90]),new fe(28,new ge(3,107),new ge(5,108)),new fe(26,new ge(3,41),new ge(13,42)),new fe(30,new ge(15,24),new ge(5,25)),new fe(28,new ge(15,15),new ge(10,16))),new pe(21,Int32Array.from([6,28,50,72,94]),new fe(28,new ge(4,116),new ge(4,117)),new fe(26,new ge(17,42)),new fe(28,new ge(17,22),new ge(6,23)),new fe(30,new ge(19,16),new ge(6,17))),new pe(22,Int32Array.from([6,26,50,74,98]),new fe(28,new ge(2,111),new ge(7,112)),new fe(28,new ge(17,46)),new fe(30,new ge(7,24),new ge(16,25)),new fe(24,new ge(34,13))),new pe(23,Int32Array.from([6,30,54,78,102]),new fe(30,new ge(4,121),new ge(5,122)),new fe(28,new ge(4,47),new ge(14,48)),new fe(30,new ge(11,24),new ge(14,25)),new fe(30,new ge(16,15),new ge(14,16))),new pe(24,Int32Array.from([6,28,54,80,106]),new fe(30,new ge(6,117),new ge(4,118)),new fe(28,new ge(6,45),new ge(14,46)),new fe(30,new ge(11,24),new ge(16,25)),new fe(30,new ge(30,16),new ge(2,17))),new pe(25,Int32Array.from([6,32,58,84,110]),new fe(26,new ge(8,106),new ge(4,107)),new fe(28,new ge(8,47),new ge(13,48)),new fe(30,new ge(7,24),new ge(22,25)),new fe(30,new ge(22,15),new ge(13,16))),new pe(26,Int32Array.from([6,30,58,86,114]),new fe(28,new ge(10,114),new ge(2,115)),new fe(28,new ge(19,46),new ge(4,47)),new fe(28,new ge(28,22),new ge(6,23)),new fe(30,new ge(33,16),new ge(4,17))),new pe(27,Int32Array.from([6,34,62,90,118]),new fe(30,new ge(8,122),new ge(4,123)),new fe(28,new ge(22,45),new ge(3,46)),new fe(30,new ge(8,23),new ge(26,24)),new fe(30,new ge(12,15),new ge(28,16))),new pe(28,Int32Array.from([6,26,50,74,98,122]),new fe(30,new ge(3,117),new ge(10,118)),new fe(28,new ge(3,45),new ge(23,46)),new fe(30,new ge(4,24),new ge(31,25)),new fe(30,new ge(11,15),new ge(31,16))),new pe(29,Int32Array.from([6,30,54,78,102,126]),new fe(30,new ge(7,116),new ge(7,117)),new fe(28,new ge(21,45),new ge(7,46)),new fe(30,new ge(1,23),new ge(37,24)),new fe(30,new ge(19,15),new ge(26,16))),new pe(30,Int32Array.from([6,26,52,78,104,130]),new fe(30,new ge(5,115),new ge(10,116)),new fe(28,new ge(19,47),new ge(10,48)),new fe(30,new ge(15,24),new ge(25,25)),new fe(30,new ge(23,15),new ge(25,16))),new pe(31,Int32Array.from([6,30,56,82,108,134]),new fe(30,new ge(13,115),new ge(3,116)),new fe(28,new ge(2,46),new ge(29,47)),new fe(30,new ge(42,24),new ge(1,25)),new fe(30,new ge(23,15),new ge(28,16))),new pe(32,Int32Array.from([6,34,60,86,112,138]),new fe(30,new ge(17,115)),new fe(28,new ge(10,46),new ge(23,47)),new fe(30,new ge(10,24),new ge(35,25)),new fe(30,new ge(19,15),new ge(35,16))),new pe(33,Int32Array.from([6,30,58,86,114,142]),new fe(30,new ge(17,115),new ge(1,116)),new fe(28,new ge(14,46),new ge(21,47)),new fe(30,new ge(29,24),new ge(19,25)),new fe(30,new ge(11,15),new ge(46,16))),new pe(34,Int32Array.from([6,34,62,90,118,146]),new fe(30,new ge(13,115),new ge(6,116)),new fe(28,new ge(14,46),new ge(23,47)),new fe(30,new ge(44,24),new ge(7,25)),new fe(30,new ge(59,16),new ge(1,17))),new pe(35,Int32Array.from([6,30,54,78,102,126,150]),new fe(30,new ge(12,121),new ge(7,122)),new fe(28,new ge(12,47),new ge(26,48)),new fe(30,new ge(39,24),new ge(14,25)),new fe(30,new ge(22,15),new ge(41,16))),new pe(36,Int32Array.from([6,24,50,76,102,128,154]),new fe(30,new ge(6,121),new ge(14,122)),new fe(28,new ge(6,47),new ge(34,48)),new fe(30,new ge(46,24),new ge(10,25)),new fe(30,new ge(2,15),new ge(64,16))),new pe(37,Int32Array.from([6,28,54,80,106,132,158]),new fe(30,new ge(17,122),new ge(4,123)),new fe(28,new ge(29,46),new ge(14,47)),new fe(30,new ge(49,24),new ge(10,25)),new fe(30,new ge(24,15),new ge(46,16))),new pe(38,Int32Array.from([6,32,58,84,110,136,162]),new fe(30,new ge(4,122),new ge(18,123)),new fe(28,new ge(13,46),new ge(32,47)),new fe(30,new ge(48,24),new ge(14,25)),new fe(30,new ge(42,15),new ge(32,16))),new pe(39,Int32Array.from([6,26,54,82,110,138,166]),new fe(30,new ge(20,117),new ge(4,118)),new fe(28,new ge(40,47),new ge(7,48)),new fe(30,new ge(43,24),new ge(22,25)),new fe(30,new ge(10,15),new ge(67,16))),new pe(40,Int32Array.from([6,30,58,86,114,142,170]),new fe(30,new ge(19,118),new ge(6,119)),new fe(28,new ge(18,47),new ge(31,48)),new fe(30,new ge(34,24),new ge(34,25)),new fe(30,new ge(20,15),new ge(61,16)))],function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"}(H||(H={}));class we{constructor(t,e){this.value=t,this.isMasked=e}unmaskBitMatrix(t,e){for(let r=0;r<e;r++)for(let n=0;n<e;n++)this.isMasked(r,n)&&t.flip(n,r)}}we.values=new Map([[H.DATA_MASK_000,new we(H.DATA_MASK_000,(t,e)=>0==(t+e&1))],[H.DATA_MASK_001,new we(H.DATA_MASK_001,(t,e)=>0==(1&t))],[H.DATA_MASK_010,new we(H.DATA_MASK_010,(t,e)=>e%3==0)],[H.DATA_MASK_011,new we(H.DATA_MASK_011,(t,e)=>(t+e)%3==0)],[H.DATA_MASK_100,new we(H.DATA_MASK_100,(t,e)=>0==(Math.floor(t/2)+Math.floor(e/3)&1))],[H.DATA_MASK_101,new we(H.DATA_MASK_101,(t,e)=>t*e%6==0)],[H.DATA_MASK_110,new we(H.DATA_MASK_110,(t,e)=>t*e%6<3)],[H.DATA_MASK_111,new we(H.DATA_MASK_111,(t,e)=>0==(t+e+t*e%3&1))]]);class me{constructor(t){const e=t.getHeight();if(e<21||1!=(3&e))throw new _;this.bitMatrix=t}readFormatInformation(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;let t=0;for(let o=0;o<6;o++)t=this.copyBit(o,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let o=5;o>=0;o--)t=this.copyBit(8,o,t);const e=this.bitMatrix.getHeight();let r=0;const n=e-7;for(let o=e-1;o>=n;o--)r=this.copyBit(8,o,r);for(let o=e-8;o<e;o++)r=this.copyBit(o,8,r);if(this.parsedFormatInfo=de.decodeFormatInformation(t,r),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new _}readVersion(){if(null!=this.parsedVersion)return this.parsedVersion;const t=this.bitMatrix.getHeight(),e=Math.floor((t-17)/4);if(e<=6)return pe.getVersionForNumber(e);let r=0;const n=t-11;for(let i=5;i>=0;i--)for(let e=t-9;e>=n;e--)r=this.copyBit(e,i,r);let o=pe.decodeVersionInformation(r);if(null!==o&&o.getDimensionForVersion()===t)return this.parsedVersion=o,o;r=0;for(let i=5;i>=0;i--)for(let e=t-9;e>=n;e--)r=this.copyBit(i,e,r);if(o=pe.decodeVersionInformation(r),null!==o&&o.getDimensionForVersion()===t)return this.parsedVersion=o,o;throw new _}copyBit(t,e,r){return(this.isMirror?this.bitMatrix.get(e,t):this.bitMatrix.get(t,e))?r<<1|1:r<<1}readCodewords(){const t=this.readFormatInformation(),e=this.readVersion(),r=we.values.get(t.getDataMask()),n=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,n);const o=e.buildFunctionPattern();let i=!0;const s=new Uint8Array(e.getTotalCodewords());let a=0,l=0,u=0;for(let c=n-1;c>0;c-=2){6===c&&c--;for(let t=0;t<n;t++){const e=i?n-1-t:t;for(let t=0;t<2;t++)o.get(c-t,e)||(u++,l<<=1,this.bitMatrix.get(c-t,e)&&(l|=1),8===u&&(s[a++]=l,u=0,l=0))}i=!i}if(a!==e.getTotalCodewords())throw new _;return s}remask(){if(null===this.parsedFormatInfo)return;const t=we.values[this.parsedFormatInfo.getDataMask()],e=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,e)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let e=0,r=t.getWidth();e<r;e++)for(let n=e+1,o=t.getHeight();n<o;n++)t.get(e,n)!==t.get(n,e)&&(t.flip(n,e),t.flip(e,n))}}class _e{constructor(t,e){this.numDataCodewords=t,this.codewords=e}static getDataBlocks(t,e,r){if(t.length!==e.getTotalCodewords())throw new s;const n=e.getECBlocksForLevel(r);let o=0;const i=n.getECBlocks();for(const s of i)o+=s.getCount();const a=new Array(o);let l=0;for(const s of i)for(let t=0;t<s.getCount();t++){const t=s.getDataCodewords(),e=n.getECCodewordsPerBlock()+t;a[l++]=new _e(t,new Uint8Array(e))}const u=a[0].codewords.length;let c=a.length-1;for(;c>=0&&a[c].codewords.length!==u;)c--;c++;const h=u-n.getECCodewordsPerBlock();let d=0;for(let s=0;s<h;s++)for(let e=0;e<l;e++)a[e].codewords[s]=t[d++];for(let s=c;s<l;s++)a[s].codewords[h]=t[d++];const f=a[0].codewords.length;for(let s=h;s<f;s++)for(let e=0;e<l;e++)a[e].codewords[e<c?s:s+1]=t[d++];return a}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}!function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"}(G||(G={}));class ye{constructor(t,e,r,n){this.value=t,this.stringValue=e,this.characterCountBitsForVersions=r,this.bits=n,ye.FOR_BITS.set(n,this),ye.FOR_VALUE.set(t,this)}static forBits(t){const e=ye.FOR_BITS.get(t);if(void 0===e)throw new s;return e}getCharacterCountBits(t){const e=t.getVersionNumber();let r;return r=e<=9?0:e<=26?1:2,this.characterCountBitsForVersions[r]}getValue(){return this.value}getBits(){return this.bits}equals(t){return t instanceof ye&&this.value===t.value}toString(){return this.stringValue}}ye.FOR_BITS=new Map,ye.FOR_VALUE=new Map,ye.TERMINATOR=new ye(G.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ye.NUMERIC=new ye(G.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ye.ALPHANUMERIC=new ye(G.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ye.STRUCTURED_APPEND=new ye(G.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ye.BYTE=new ye(G.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ye.ECI=new ye(G.ECI,"ECI",Int32Array.from([0,0,0]),7),ye.KANJI=new ye(G.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ye.FNC1_FIRST_POSITION=new ye(G.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ye.FNC1_SECOND_POSITION=new ye(G.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ye.HANZI=new ye(G.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Ce{static decode(t,e,r,n){const o=new se(t);let i=new v;const s=new Array;let a=-1,l=-1;try{let t,r=null,u=!1;do{if(o.available()<4)t=ye.TERMINATOR;else{const e=o.readBits(4);t=ye.forBits(e)}switch(t){case ye.TERMINATOR:break;case ye.FNC1_FIRST_POSITION:case ye.FNC1_SECOND_POSITION:u=!0;break;case ye.STRUCTURED_APPEND:if(o.available()<16)throw new _;a=o.readBits(8),l=o.readBits(8);break;case ye.ECI:const c=Ce.parseECIValue(o);if(r=y.getCharacterSetECIByValue(c),null===r)throw new _;break;case ye.HANZI:const h=o.readBits(4),d=o.readBits(t.getCharacterCountBits(e));h===Ce.GB2312_SUBSET&&Ce.decodeHanziSegment(o,i,d);break;default:const f=o.readBits(t.getCharacterCountBits(e));switch(t){case ye.NUMERIC:Ce.decodeNumericSegment(o,i,f);break;case ye.ALPHANUMERIC:Ce.decodeAlphanumericSegment(o,i,f,u);break;case ye.BYTE:Ce.decodeByteSegment(o,i,f,r,s,n);break;case ye.KANJI:Ce.decodeKanjiSegment(o,i,f);break;default:throw new _}}}while(t!==ye.TERMINATOR)}catch(u){throw new _}return new X(t,i.toString(),0===s.length?null:s,null===r?null:r.toString(),a,l)}static decodeHanziSegment(t,e,r){if(13*r>t.available())throw new _;const n=new Uint8Array(2*r);let o=0;for(;r>0;){const e=t.readBits(13);let i=e/96<<8&4294967295|e%96;i+=i<959?41377:42657,n[o]=i>>8&255,n[o+1]=255&i,o+=2,r--}try{e.append(E.decode(n,A.GB2312))}catch(i){throw new _(i)}}static decodeKanjiSegment(t,e,r){if(13*r>t.available())throw new _;const n=new Uint8Array(2*r);let o=0;for(;r>0;){const e=t.readBits(13);let i=e/192<<8&4294967295|e%192;i+=i<7936?33088:49472,n[o]=i>>8,n[o+1]=i,o+=2,r--}try{e.append(E.decode(n,A.SHIFT_JIS))}catch(i){throw new _(i)}}static decodeByteSegment(t,e,r,n,o,i){if(8*r>t.available())throw new _;const s=new Uint8Array(r);for(let u=0;u<r;u++)s[u]=t.readBits(8);let a;a=null===n?A.guessEncoding(s,i):n.getName();try{e.append(E.decode(s,a))}catch(l){throw new _(l)}o.push(s)}static toAlphaNumericChar(t){if(t>=Ce.ALPHANUMERIC_CHARS.length)throw new _;return Ce.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,e,r,n){const o=e.length();for(;r>1;){if(t.available()<11)throw new _;const n=t.readBits(11);e.append(Ce.toAlphaNumericChar(Math.floor(n/45))),e.append(Ce.toAlphaNumericChar(n%45)),r-=2}if(1===r){if(t.available()<6)throw new _;e.append(Ce.toAlphaNumericChar(t.readBits(6)))}if(n)for(let i=o;i<e.length();i++)"%"===e.charAt(i)&&(i<e.length()-1&&"%"===e.charAt(i+1)?e.deleteCharAt(i+1):e.setCharAt(i,String.fromCharCode(29)))}static decodeNumericSegment(t,e,r){for(;r>=3;){if(t.available()<10)throw new _;const n=t.readBits(10);if(n>=1e3)throw new _;e.append(Ce.toAlphaNumericChar(Math.floor(n/100))),e.append(Ce.toAlphaNumericChar(Math.floor(n/10)%10)),e.append(Ce.toAlphaNumericChar(n%10)),r-=3}if(2===r){if(t.available()<7)throw new _;const r=t.readBits(7);if(r>=100)throw new _;e.append(Ce.toAlphaNumericChar(Math.floor(r/10))),e.append(Ce.toAlphaNumericChar(r%10))}else if(1===r){if(t.available()<4)throw new _;const r=t.readBits(4);if(r>=10)throw new _;e.append(Ce.toAlphaNumericChar(r))}}static parseECIValue(t){const e=t.readBits(8);if(0==(128&e))return 127&e;if(128==(192&e))return(63&e)<<8&4294967295|t.readBits(8);if(192==(224&e))return(31&e)<<16&4294967295|t.readBits(16);throw new _}}Ce.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Ce.GB2312_SUBSET=1;class Ee{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||null===t||t.length<3)return;const e=t[0];t[0]=t[2],t[2]=e}}class Ae{constructor(){this.rsDecoder=new Q(K.QR_CODE_FIELD_256)}decodeBooleanArray(t,e){return this.decodeBitMatrix(S.parseFromBooleanArray(t),e)}decodeBitMatrix(t,e){const r=new me(t);let n=null;try{return this.decodeBitMatrixParser(r,e)}catch(o){n=o}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();const t=this.decodeBitMatrixParser(r,e);return t.setOther(new Ee(!0)),t}catch(o){if(null!==n)throw n;throw o}}decodeBitMatrixParser(t,e){const r=t.readVersion(),n=t.readFormatInformation().getErrorCorrectionLevel(),o=t.readCodewords(),i=_e.getDataBlocks(o,r,n);let s=0;for(const u of i)s+=u.getNumDataCodewords();const a=new Uint8Array(s);let l=0;for(const u of i){const t=u.getCodewords(),e=u.getNumDataCodewords();this.correctErrors(t,e);for(let r=0;r<e;r++)a[l++]=t[r]}return Ce.decode(a,r,n,e)}correctErrors(t,e){const r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch(n){throw new l}for(let o=0;o<e;o++)t[o]=r[o]}}class ve extends rt{constructor(t,e,r){super(t,e),this.estimatedModuleSize=r}aboutEquals(t,e,r){if(Math.abs(e-this.getY())<=t&&Math.abs(r-this.getX())<=t){const e=Math.abs(t-this.estimatedModuleSize);return e<=1||e<=this.estimatedModuleSize}return!1}combineEstimate(t,e,r){const n=(this.getX()+e)/2,o=(this.getY()+t)/2;return new ve(n,o,(this.estimatedModuleSize+r)/2)}}class Se{constructor(t,e,r,n,o,i,s){this.image=t,this.startX=e,this.startY=r,this.width=n,this.height=o,this.moduleSize=i,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,e=this.height,r=t+this.width,n=this.startY+e/2,o=new Int32Array(3),i=this.image;for(let s=0;s<e;s++){const e=n+(0==(1&s)?Math.floor((s+1)/2):-Math.floor((s+1)/2));o[0]=0,o[1]=0,o[2]=0;let a=t;for(;a<r&&!i.get(a,e);)a++;let l=0;for(;a<r;){if(i.get(a,e))if(1===l)o[1]++;else if(2===l){if(this.foundPatternCross(o)){const t=this.handlePossibleCenter(o,e,a);if(null!==t)return t}o[0]=o[2],o[1]=1,o[2]=0,l=1}else o[++l]++;else 1===l&&l++,o[l]++;a++}if(this.foundPatternCross(o)){const t=this.handlePossibleCenter(o,e,r);if(null!==t)return t}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new I}static centerFromEnd(t,e){return e-t[2]-t[1]/2}foundPatternCross(t){const e=this.moduleSize,r=e/2;for(let n=0;n<3;n++)if(Math.abs(e-t[n])>=r)return!1;return!0}crossCheckVertical(t,e,r,n){const o=this.image,i=o.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;let a=t;for(;a>=0&&o.get(e,a)&&s[1]<=r;)s[1]++,a--;if(a<0||s[1]>r)return NaN;for(;a>=0&&!o.get(e,a)&&s[0]<=r;)s[0]++,a--;if(s[0]>r)return NaN;for(a=t+1;a<i&&o.get(e,a)&&s[1]<=r;)s[1]++,a++;if(a===i||s[1]>r)return NaN;for(;a<i&&!o.get(e,a)&&s[2]<=r;)s[2]++,a++;return s[2]>r||5*Math.abs(s[0]+s[1]+s[2]-n)>=2*n?NaN:this.foundPatternCross(s)?Se.centerFromEnd(s,a):NaN}handlePossibleCenter(t,e,r){const n=t[0]+t[1]+t[2],o=Se.centerFromEnd(t,r),i=this.crossCheckVertical(e,o,2*t[1],n);if(!isNaN(i)){const e=(t[0]+t[1]+t[2])/3;for(const t of this.possibleCenters)if(t.aboutEquals(e,i,o))return t.combineEstimate(i,o,e);const r=new ve(o,i,e);this.possibleCenters.push(r),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(r)}return null}}class Ie extends rt{constructor(t,e,r,n){super(t,e),this.estimatedModuleSize=r,this.count=n,void 0===n&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,e,r){if(Math.abs(e-this.getY())<=t&&Math.abs(r-this.getX())<=t){const e=Math.abs(t-this.estimatedModuleSize);return e<=1||e<=this.estimatedModuleSize}return!1}combineEstimate(t,e,r){const n=this.count+1,o=(this.count*this.getX()+e)/n,i=(this.count*this.getY()+t)/n;return new Ie(o,i,(this.count*this.estimatedModuleSize+r)/n,n)}}class be{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Te{constructor(t,e){this.image=t,this.resultPointCallback=e,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=e}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const e=null!=t&&void 0!==t.get(m.TRY_HARDER),r=null!=t&&void 0!==t.get(m.PURE_BARCODE),n=this.image,o=n.getHeight(),i=n.getWidth();let s=Math.floor(3*o/(4*Te.MAX_MODULES));(s<Te.MIN_SKIP||e)&&(s=Te.MIN_SKIP);let a=!1;const l=new Int32Array(5);for(let c=s-1;c<o&&!a;c+=s){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;let t=0;for(let e=0;e<i;e++)if(n.get(e,c))1==(1&t)&&t++,l[t]++;else if(0==(1&t))if(4===t)if(Te.foundPatternCross(l)){if(!0!==this.handlePossibleCenter(l,c,e,r)){l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,t=3;continue}if(s=2,!0===this.hasSkipped)a=this.haveMultiplyConfirmedCenters();else{const t=this.findRowSkip();t>l[2]&&(c+=t-l[2]-s,e=i-1)}t=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,t=3;else l[++t]++;else l[t]++;Te.foundPatternCross(l)&&!0===this.handlePossibleCenter(l,c,i,r)&&(s=l[0],this.hasSkipped&&(a=this.haveMultiplyConfirmedCenters()))}const u=this.selectBestPatterns();return rt.orderBestPatterns(u),new be(u)}static centerFromEnd(t,e){return e-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let e=0;for(let o=0;o<5;o++){const r=t[o];if(0===r)return!1;e+=r}if(e<7)return!1;const r=e/7,n=r/2;return Math.abs(r-t[0])<n&&Math.abs(r-t[1])<n&&Math.abs(3*r-t[2])<3*n&&Math.abs(r-t[3])<n&&Math.abs(r-t[4])<n}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,e,r,n){const o=this.getCrossCheckStateCount();let i=0;const s=this.image;for(;t>=i&&e>=i&&s.get(e-i,t-i);)o[2]++,i++;if(t<i||e<i)return!1;for(;t>=i&&e>=i&&!s.get(e-i,t-i)&&o[1]<=r;)o[1]++,i++;if(t<i||e<i||o[1]>r)return!1;for(;t>=i&&e>=i&&s.get(e-i,t-i)&&o[0]<=r;)o[0]++,i++;if(o[0]>r)return!1;const a=s.getHeight(),l=s.getWidth();for(i=1;t+i<a&&e+i<l&&s.get(e+i,t+i);)o[2]++,i++;if(t+i>=a||e+i>=l)return!1;for(;t+i<a&&e+i<l&&!s.get(e+i,t+i)&&o[3]<r;)o[3]++,i++;if(t+i>=a||e+i>=l||o[3]>=r)return!1;for(;t+i<a&&e+i<l&&s.get(e+i,t+i)&&o[4]<r;)o[4]++,i++;return!(o[4]>=r)&&Math.abs(o[0]+o[1]+o[2]+o[3]+o[4]-n)<2*n&&Te.foundPatternCross(o)}crossCheckVertical(t,e,r,n){const o=this.image,i=o.getHeight(),s=this.getCrossCheckStateCount();let a=t;for(;a>=0&&o.get(e,a);)s[2]++,a--;if(a<0)return NaN;for(;a>=0&&!o.get(e,a)&&s[1]<=r;)s[1]++,a--;if(a<0||s[1]>r)return NaN;for(;a>=0&&o.get(e,a)&&s[0]<=r;)s[0]++,a--;if(s[0]>r)return NaN;for(a=t+1;a<i&&o.get(e,a);)s[2]++,a++;if(a===i)return NaN;for(;a<i&&!o.get(e,a)&&s[3]<r;)s[3]++,a++;if(a===i||s[3]>=r)return NaN;for(;a<i&&o.get(e,a)&&s[4]<r;)s[4]++,a++;return s[4]>=r||5*Math.abs(s[0]+s[1]+s[2]+s[3]+s[4]-n)>=2*n?NaN:Te.foundPatternCross(s)?Te.centerFromEnd(s,a):NaN}crossCheckHorizontal(t,e,r,n){const o=this.image,i=o.getWidth(),s=this.getCrossCheckStateCount();let a=t;for(;a>=0&&o.get(a,e);)s[2]++,a--;if(a<0)return NaN;for(;a>=0&&!o.get(a,e)&&s[1]<=r;)s[1]++,a--;if(a<0||s[1]>r)return NaN;for(;a>=0&&o.get(a,e)&&s[0]<=r;)s[0]++,a--;if(s[0]>r)return NaN;for(a=t+1;a<i&&o.get(a,e);)s[2]++,a++;if(a===i)return NaN;for(;a<i&&!o.get(a,e)&&s[3]<r;)s[3]++,a++;if(a===i||s[3]>=r)return NaN;for(;a<i&&o.get(a,e)&&s[4]<r;)s[4]++,a++;return s[4]>=r||5*Math.abs(s[0]+s[1]+s[2]+s[3]+s[4]-n)>=n?NaN:Te.foundPatternCross(s)?Te.centerFromEnd(s,a):NaN}handlePossibleCenter(t,e,r,n){const o=t[0]+t[1]+t[2]+t[3]+t[4];let i=Te.centerFromEnd(t,r),s=this.crossCheckVertical(e,Math.floor(i),t[2],o);if(!isNaN(s)&&(i=this.crossCheckHorizontal(Math.floor(i),Math.floor(s),t[2],o),!isNaN(i)&&(!n||this.crossCheckDiagonal(Math.floor(s),Math.floor(i),t[2],o)))){const t=o/7;let e=!1;const r=this.possibleCenters;for(let n=0,o=r.length;n<o;n++){const o=r[n];if(o.aboutEquals(t,s,i)){r[n]=o.combineEstimate(s,i,t),e=!0;break}}if(!e){const e=new Ie(i,s,t);r.push(e),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(e)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let t=null;for(const e of this.possibleCenters)if(e.getCount()>=Te.CENTER_QUORUM){if(null!=t)return this.hasSkipped=!0,Math.floor((Math.abs(t.getX()-e.getX())-Math.abs(t.getY()-e.getY()))/2);t=e}return 0}haveMultiplyConfirmedCenters(){let t=0,e=0;const r=this.possibleCenters.length;for(const i of this.possibleCenters)i.getCount()>=Te.CENTER_QUORUM&&(t++,e+=i.getEstimatedModuleSize());if(t<3)return!1;const n=e/r;let o=0;for(const i of this.possibleCenters)o+=Math.abs(i.getEstimatedModuleSize()-n);return o<=.05*e}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new I;const e=this.possibleCenters;let r;if(t>3){let n=0,o=0;for(const t of this.possibleCenters){const e=t.getEstimatedModuleSize();n+=e,o+=e*e}r=n/t;let i=Math.sqrt(o/t-r*r);e.sort((t,e)=>{const n=Math.abs(e.getEstimatedModuleSize()-r),o=Math.abs(t.getEstimatedModuleSize()-r);return n<o?-1:n>o?1:0});const s=Math.max(.2*r,i);for(let t=0;t<e.length&&e.length>3;t++)Math.abs(e[t].getEstimatedModuleSize()-r)>s&&(e.splice(t,1),t--)}if(e.length>3){let t=0;for(const r of e)t+=r.getEstimatedModuleSize();r=t/e.length,e.sort((t,e)=>{if(e.getCount()===t.getCount()){const n=Math.abs(e.getEstimatedModuleSize()-r),o=Math.abs(t.getEstimatedModuleSize()-r);return n<o?1:n>o?-1:0}return e.getCount()-t.getCount()}),e.splice(3)}return[e[0],e[1],e[2]]}}Te.CENTER_QUORUM=2,Te.MIN_SKIP=3,Te.MAX_MODULES=57;class Re{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=null==t?null:t.get(m.NEED_RESULT_POINT_CALLBACK);const e=new Te(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(e)}processFinderPatternInfo(t){const e=t.getTopLeft(),r=t.getTopRight(),n=t.getBottomLeft(),o=this.calculateModuleSize(e,r,n);if(o<1)throw new I("No pattern found in proccess finder.");const i=Re.computeDimension(e,r,n,o),s=pe.getProvisionalVersionForDimension(i),a=s.getDimensionForVersion()-7;let l=null;if(s.getAlignmentPatternCenters().length>0){const t=r.getX()-e.getX()+n.getX(),i=r.getY()-e.getY()+n.getY(),s=1-3/a,u=Math.floor(e.getX()+s*(t-e.getX())),c=Math.floor(e.getY()+s*(i-e.getY()));for(let e=4;e<=16;e<<=1)try{l=this.findAlignmentInRegion(o,u,c,e);break}catch(d){if(!(d instanceof I))throw d}}const u=Re.createTransform(e,r,n,l,i),c=Re.sampleGrid(this.image,u,i);let h;return h=null===l?[n,e,r]:[n,e,r,l],new nt(c,h)}static createTransform(t,e,r,n,o){const i=o-3.5;let s,a,l,u;return null!==n?(s=n.getX(),a=n.getY(),l=i-3,u=l):(s=e.getX()-t.getX()+r.getX(),a=e.getY()-t.getY()+r.getY(),l=i,u=i),at.quadrilateralToQuadrilateral(3.5,3.5,i,3.5,l,u,3.5,i,t.getX(),t.getY(),e.getX(),e.getY(),s,a,r.getX(),r.getY())}static sampleGrid(t,e,r){return ut.getInstance().sampleGridWithTransform(t,r,r,e)}static computeDimension(t,e,r,n){const o=tt.round(rt.distance(t,e)/n),i=tt.round(rt.distance(t,r)/n);let s=Math.floor((o+i)/2)+7;switch(3&s){case 0:s++;break;case 2:s--;break;case 3:throw new I("Dimensions could be not found.")}return s}calculateModuleSize(t,e,r){return(this.calculateModuleSizeOneWay(t,e)+this.calculateModuleSizeOneWay(t,r))/2}calculateModuleSizeOneWay(t,e){const r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY())),n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(r)?n/7:isNaN(n)?r/7:(r+n)/14}sizeOfBlackWhiteBlackRunBothWays(t,e,r,n){let o=this.sizeOfBlackWhiteBlackRun(t,e,r,n),i=1,s=t-(r-t);s<0?(i=t/(t-s),s=0):s>=this.image.getWidth()&&(i=(this.image.getWidth()-1-t)/(s-t),s=this.image.getWidth()-1);let a=Math.floor(e-(n-e)*i);return i=1,a<0?(i=e/(e-a),a=0):a>=this.image.getHeight()&&(i=(this.image.getHeight()-1-e)/(a-e),a=this.image.getHeight()-1),s=Math.floor(t+(s-t)*i),o+=this.sizeOfBlackWhiteBlackRun(t,e,s,a),o-1}sizeOfBlackWhiteBlackRun(t,e,r,n){const o=Math.abs(n-e)>Math.abs(r-t);if(o){let o=t;t=e,e=o,o=r,r=n,n=o}const i=Math.abs(r-t),s=Math.abs(n-e);let a=-i/2;const l=t<r?1:-1,u=e<n?1:-1;let c=0;const h=r+l;for(let d=t,f=e;d!==h;d+=l){if(1===c===this.image.get(o?f:d,o?d:f)){if(2===c)return tt.distance(d,f,t,e);c++}if(a+=s,a>0){if(f===n)break;f+=u,a-=i}}return 2===c?tt.distance(r+l,n,t,e):NaN}findAlignmentInRegion(t,e,r,n){const o=Math.floor(n*t),i=Math.max(0,e-o),s=Math.min(this.image.getWidth()-1,e+o);if(s-i<3*t)throw new I("Alignment top exceeds estimated module size.");const a=Math.max(0,r-o),l=Math.min(this.image.getHeight()-1,r+o);if(l-a<3*t)throw new I("Alignment bottom exceeds estimated module size.");return new Se(this.image,i,a,s-i,l-a,t,this.resultPointCallback).find()}}class Oe{constructor(){this.decoder=new Ae}getDecoder(){return this.decoder}decode(t,e){let r,n;if(null!=e&&void 0!==e.get(m.PURE_BARCODE)){const o=Oe.extractPureBits(t.getBlackMatrix());r=this.decoder.decodeBitMatrix(o,e),n=Oe.NO_POINTS}else{const o=new Re(t.getBlackMatrix()).detect(e);r=this.decoder.decodeBitMatrix(o.getBits(),e),n=o.getPoints()}r.getOther()instanceof Ee&&r.getOther().applyMirroredCorrection(n);const o=new L(r.getText(),r.getRawBytes(),void 0,n,F.QR_CODE,void 0),i=r.getByteSegments();null!==i&&o.putMetadata(z.BYTE_SEGMENTS,i);const s=r.getECLevel();return null!==s&&o.putMetadata(z.ERROR_CORRECTION_LEVEL,s),r.hasStructuredAppend()&&(o.putMetadata(z.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),o.putMetadata(z.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),o}reset(){}static extractPureBits(t){const e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(null===e||null===r)throw new I;const n=this.moduleSize(e,t);let o=e[1],i=r[1],s=e[0],a=r[0];if(s>=a||o>=i)throw new I;if(i-o!=a-s&&(a=s+(i-o),a>=t.getWidth()))throw new I;const l=Math.round((a-s+1)/n),u=Math.round((i-o+1)/n);if(l<=0||u<=0)throw new I;if(u!==l)throw new I;const c=Math.floor(n/2);o+=c,s+=c;const h=s+Math.floor((l-1)*n)-a;if(h>0){if(h>c)throw new I;s-=h}const d=o+Math.floor((u-1)*n)-i;if(d>0){if(d>c)throw new I;o-=d}const f=new S(l,u);for(let g=0;g<u;g++){const e=o+Math.floor(g*n);for(let r=0;r<l;r++)t.get(s+Math.floor(r*n),e)&&f.set(r,g)}return f}static moduleSize(t,e){const r=e.getHeight(),n=e.getWidth();let o=t[0],i=t[1],s=!0,a=0;for(;o<n&&i<r;){if(s!==e.get(o,i)){if(5==++a)break;s=!s}o++,i++}if(o===n||i===r)throw new I;return(o-t[0])/7}}Oe.NO_POINTS=new Array;class Ne{PDF417Common(){}static getBitCountSum(t){return tt.sum(t)}static toIntArray(t){if(null==t||!t.length)return Ne.EMPTY_INT_ARRAY;const e=new Int32Array(t.length);let r=0;for(const n of t)e[r++]=n;return e}static getCodeword(t){const e=f.binarySearch(Ne.SYMBOL_TABLE,262143&t);return e<0?-1:(Ne.CODEWORD_TABLE[e]-1)%Ne.NUMBER_OF_CODEWORDS}}Ne.NUMBER_OF_CODEWORDS=929,Ne.MAX_CODEWORDS_IN_BARCODE=Ne.NUMBER_OF_CODEWORDS-1,Ne.MIN_ROWS_IN_BARCODE=3,Ne.MAX_ROWS_IN_BARCODE=90,Ne.MODULES_IN_CODEWORD=17,Ne.MODULES_IN_STOP_PATTERN=18,Ne.BARS_IN_MODULE=8,Ne.EMPTY_INT_ARRAY=new Int32Array([]),Ne.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ne.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class De{constructor(t,e){this.bits=t,this.points=e}getBits(){return this.bits}getPoints(){return this.points}}class Me{static detectMultiple(t,e,r){let n=t.getBlackMatrix(),o=Me.detect(r,n);return o.length||(n=n.clone(),n.rotate180(),o=Me.detect(r,n)),new De(n,o)}static detect(t,e){const r=new Array;let n=0,o=0,i=!1;for(;n<e.getHeight();){const s=Me.findVertices(e,n,o);if(null!=s[0]||null!=s[3]){if(i=!0,r.push(s),!t)break;null!=s[2]?(o=Math.trunc(s[2].getX()),n=Math.trunc(s[2].getY())):(o=Math.trunc(s[4].getX()),n=Math.trunc(s[4].getY()))}else{if(!i)break;i=!1,o=0;for(const t of r)null!=t[1]&&(n=Math.trunc(Math.max(n,t[1].getY()))),null!=t[3]&&(n=Math.max(n,Math.trunc(t[3].getY())));n+=Me.ROW_STEP}}return r}static findVertices(t,e,r){const n=t.getHeight(),o=t.getWidth(),i=new Array(8);return Me.copyToResult(i,Me.findRowsWithPattern(t,n,o,e,r,Me.START_PATTERN),Me.INDEXES_START_PATTERN),null!=i[4]&&(r=Math.trunc(i[4].getX()),e=Math.trunc(i[4].getY())),Me.copyToResult(i,Me.findRowsWithPattern(t,n,o,e,r,Me.STOP_PATTERN),Me.INDEXES_STOP_PATTERN),i}static copyToResult(t,e,r){for(let n=0;n<r.length;n++)t[r[n]]=e[n]}static findRowsWithPattern(t,e,r,n,o,i){const s=new Array(4);let a=!1;const l=new Int32Array(i.length);for(;n<e;n+=Me.ROW_STEP){let e=Me.findGuardPattern(t,o,n,r,!1,i,l);if(null!=e){for(;n>0;){const s=Me.findGuardPattern(t,o,--n,r,!1,i,l);if(null==s){n++;break}e=s}s[0]=new rt(e[0],n),s[1]=new rt(e[1],n),a=!0;break}}let u=n+1;if(a){let n=0,o=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);for(;u<e;u++){const e=Me.findGuardPattern(t,o[0],u,r,!1,i,l);if(null!=e&&Math.abs(o[0]-e[0])<Me.MAX_PATTERN_DRIFT&&Math.abs(o[1]-e[1])<Me.MAX_PATTERN_DRIFT)o=e,n=0;else{if(n>Me.SKIPPED_ROW_COUNT_MAX)break;n++}}u-=n+1,s[2]=new rt(o[0],u),s[3]=new rt(o[1],u)}return u-n<Me.BARCODE_MIN_HEIGHT&&f.fill(s,null),s}static findGuardPattern(t,e,r,n,o,i,s){f.fillWithin(s,0,s.length,0);let a=e,l=0;for(;t.get(a,r)&&a>0&&l++<Me.MAX_PIXEL_DRIFT;)a--;let u=a,h=0,d=i.length;for(let f=o;u<n;u++)if(t.get(u,r)!==f)s[h]++;else{if(h===d-1){if(Me.patternMatchVariance(s,i,Me.MAX_INDIVIDUAL_VARIANCE)<Me.MAX_AVG_VARIANCE)return new Int32Array([a,u]);a+=s[0]+s[1],c.arraycopy(s,2,s,0,h-1),s[h-1]=0,s[h]=0,h--}else h++;s[h]=1,f=!f}return h===d-1&&Me.patternMatchVariance(s,i,Me.MAX_INDIVIDUAL_VARIANCE)<Me.MAX_AVG_VARIANCE?new Int32Array([a,u-1]):null}static patternMatchVariance(t,e,r){let n=t.length,o=0,i=0;for(let l=0;l<n;l++)o+=t[l],i+=e[l];if(o<i)return 1/0;let s=o/i;r*=s;let a=0;for(let l=0;l<n;l++){let n=t[l],o=e[l]*s,i=n>o?n-o:o-n;if(i>r)return 1/0;a+=i}return a/o}}Me.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Me.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Me.MAX_AVG_VARIANCE=.42,Me.MAX_INDIVIDUAL_VARIANCE=.8,Me.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Me.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Me.MAX_PIXEL_DRIFT=3,Me.MAX_PATTERN_DRIFT=5,Me.SKIPPED_ROW_COUNT_MAX=25,Me.ROW_STEP=5,Me.BARCODE_MIN_HEIGHT=10;class Pe{constructor(t,e){if(0===e.length)throw new s;this.field=t;let r=e.length;if(r>1&&0===e[0]){let t=1;for(;t<r&&0===e[t];)t++;t===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-t),c.arraycopy(e,t,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(0===t)return this.getCoefficient(0);if(1===t){let t=0;for(let e of this.coefficients)t=this.field.add(t,e);return t}let e=this.coefficients[0],r=this.coefficients.length;for(let n=1;n<r;n++)e=this.field.add(this.field.multiply(t,e),this.coefficients[n]);return e}add(t){if(!this.field.equals(t.field))throw new s("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let e=this.coefficients,r=t.coefficients;if(e.length>r.length){let t=e;e=r,r=t}let n=new Int32Array(r.length),o=r.length-e.length;c.arraycopy(r,0,n,0,o);for(let i=o;i<r.length;i++)n[i]=this.field.add(e[i-o],r[i]);return new Pe(this.field,n)}subtract(t){if(!this.field.equals(t.field))throw new s("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof Pe?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new s("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new Pe(this.field,new Int32Array([0]));let e=this.coefficients,r=e.length,n=t.coefficients,o=n.length,i=new Int32Array(r+o-1);for(let s=0;s<r;s++){let t=e[s];for(let e=0;e<o;e++)i[s+e]=this.field.add(i[s+e],this.field.multiply(t,n[e]))}return new Pe(this.field,i)}negative(){let t=this.coefficients.length,e=new Int32Array(t);for(let r=0;r<t;r++)e[r]=this.field.subtract(0,this.coefficients[r]);return new Pe(this.field,e)}multiplyScalar(t){if(0===t)return new Pe(this.field,new Int32Array([0]));if(1===t)return this;let e=this.coefficients.length,r=new Int32Array(e);for(let n=0;n<e;n++)r[n]=this.field.multiply(this.coefficients[n],t);return new Pe(this.field,r)}multiplyByMonomial(t,e){if(t<0)throw new s;if(0===e)return new Pe(this.field,new Int32Array([0]));let r=this.coefficients.length,n=new Int32Array(r+t);for(let o=0;o<r;o++)n[o]=this.field.multiply(this.coefficients[o],e);return new Pe(this.field,n)}toString(){let t=new v;for(let e=this.getDegree();e>=0;e--){let r=this.getCoefficient(e);0!==r&&(r<0?(t.append(" - "),r=-r):t.length()>0&&t.append(" + "),0!==e&&1===r||t.append(r),0!==e&&(1===e?t.append("x"):(t.append("x^"),t.append(e))))}return t.toString()}}class Be extends class{add(t,e){return(t+e)%this.modulus}subtract(t,e){return(this.modulus+t-e)%this.modulus}exp(t){return this.expTable[t]}log(t){if(0===t)throw new s;return this.logTable[t]}inverse(t){if(0===t)throw new Z;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,e){return 0===t||0===e?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}{constructor(t,e){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let r=1;for(let n=0;n<t;n++)this.expTable[n]=r,r=r*e%t;for(let n=0;n<t-1;n++)this.logTable[this.expTable[n]]=n;this.zero=new Pe(this,new Int32Array([0])),this.one=new Pe(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,e){if(t<0)throw new s;if(0===e)return this.zero;let r=new Int32Array(t+1);return r[0]=e,new Pe(this,r)}}Be.PDF417_GF=new Be(Ne.NUMBER_OF_CODEWORDS,3);class Le{constructor(){this.field=Be.PDF417_GF}decode(t,e,r){let n=new Pe(this.field,t),o=new Int32Array(e),i=!1;for(let l=e;l>0;l--){let t=n.evaluateAt(this.field.exp(l));o[e-l]=t,0!==t&&(i=!0)}if(!i)return 0;let s=this.field.getOne();if(null!=r)for(const l of r){let e=this.field.exp(t.length-1-l),r=new Pe(this.field,new Int32Array([this.field.subtract(0,e),1]));s=s.multiply(r)}let a=new Pe(this.field,o),u=this.runEuclideanAlgorithm(this.field.buildMonomial(e,1),a,e),c=u[0],h=u[1],d=this.findErrorLocations(c),f=this.findErrorMagnitudes(h,c,d);for(let g=0;g<d.length;g++){let e=t.length-1-this.field.log(d[g]);if(e<0)throw l.getChecksumInstance();t[e]=this.field.subtract(t[e],f[g])}return d.length}runEuclideanAlgorithm(t,e,r){if(t.getDegree()<e.getDegree()){let r=t;t=e,e=r}let n=t,o=e,i=this.field.getZero(),s=this.field.getOne();for(;o.getDegree()>=Math.round(r/2);){let t=n,e=i;if(n=o,i=s,n.isZero())throw l.getChecksumInstance();o=t;let r=this.field.getZero(),a=n.getCoefficient(n.getDegree()),u=this.field.inverse(a);for(;o.getDegree()>=n.getDegree()&&!o.isZero();){let t=o.getDegree()-n.getDegree(),e=this.field.multiply(o.getCoefficient(o.getDegree()),u);r=r.add(this.field.buildMonomial(t,e)),o=o.subtract(n.multiplyByMonomial(t,e))}s=r.multiply(i).subtract(e).negative()}let a=s.getCoefficient(0);if(0===a)throw l.getChecksumInstance();let u=this.field.inverse(a);return[s.multiply(u),o.multiply(u)]}findErrorLocations(t){let e=t.getDegree(),r=new Int32Array(e),n=0;for(let o=1;o<this.field.getSize()&&n<e;o++)0===t.evaluateAt(o)&&(r[n]=this.field.inverse(o),n++);if(n!==e)throw l.getChecksumInstance();return r}findErrorMagnitudes(t,e,r){let n=e.getDegree(),o=new Int32Array(n);for(let l=1;l<=n;l++)o[n-l]=this.field.multiply(l,e.getCoefficient(l));let i=new Pe(this.field,o),s=r.length,a=new Int32Array(s);for(let l=0;l<s;l++){let e=this.field.inverse(r[l]),n=this.field.subtract(0,t.evaluateAt(e)),o=this.field.inverse(i.evaluateAt(e));a[l]=this.field.multiply(n,o)}return a}}class xe{constructor(t,e,r,n,o){t instanceof xe?this.constructor_2(t):this.constructor_1(t,e,r,n,o)}constructor_1(t,e,r,n,o){const i=null==e||null==r,s=null==n||null==o;if(i&&s)throw new I;i?(e=new rt(0,n.getY()),r=new rt(0,o.getY())):s&&(n=new rt(t.getWidth()-1,e.getY()),o=new rt(t.getWidth()-1,r.getY())),this.image=t,this.topLeft=e,this.bottomLeft=r,this.topRight=n,this.bottomRight=o,this.minX=Math.trunc(Math.min(e.getX(),r.getX())),this.maxX=Math.trunc(Math.max(n.getX(),o.getX())),this.minY=Math.trunc(Math.min(e.getY(),n.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,e){return null==t?e:null==e?t:new xe(t.image,t.topLeft,t.bottomLeft,e.topRight,e.bottomRight)}addMissingRows(t,e,r){let n=this.topLeft,o=this.bottomLeft,i=this.topRight,s=this.bottomRight;if(t>0){let e=r?this.topLeft:this.topRight,o=Math.trunc(e.getY()-t);o<0&&(o=0);let s=new rt(e.getX(),o);r?n=s:i=s}if(e>0){let t=r?this.bottomLeft:this.bottomRight,n=Math.trunc(t.getY()+e);n>=this.image.getHeight()&&(n=this.image.getHeight()-1);let i=new rt(t.getX(),n);r?o=i:s=i}return new xe(this.image,n,o,i,s)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Fe{constructor(t,e,r,n){this.columnCount=t,this.errorCorrectionLevel=n,this.rowCountUpperPart=e,this.rowCountLowerPart=r,this.rowCount=e+r}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ke{constructor(){this.buffer=""}static form(t,e){let r=-1;return t.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(t,n,o,i,s,a){if("%%"===t)return"%";if(void 0===e[++r])return;t=i?parseInt(i.substr(1)):void 0;let l,u=s?parseInt(s.substr(1)):void 0;switch(a){case"s":l=e[r];break;case"c":l=e[r][0];break;case"f":l=parseFloat(e[r]).toFixed(t);break;case"p":l=parseFloat(e[r]).toPrecision(t);break;case"e":l=parseFloat(e[r]).toExponential(t);break;case"x":l=parseInt(e[r]).toString(u||16);break;case"d":l=parseFloat(parseInt(e[r],u||10).toPrecision(t)).toFixed(0)}l="object"==typeof l?JSON.stringify(l):(+l).toString(u);let c=parseInt(o),h=o&&o[0]+""=="0"?"0":" ";for(;l.length<c;)l=void 0!==n?l+h:h+l;return l})}format(t,...e){this.buffer+=ke.form(t,e)}toString(){return this.buffer}}class Ve{constructor(t){this.boundingBox=new xe(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let e=this.getCodeword(t);if(null!=e)return e;for(let r=1;r<Ve.MAX_NEARBY_DISTANCE;r++){let n=this.imageRowToCodewordIndex(t)-r;if(n>=0&&(e=this.codewords[n],null!=e))return e;if(n=this.imageRowToCodewordIndex(t)+r,n<this.codewords.length&&(e=this.codewords[n],null!=e))return e}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,e){this.codewords[this.imageRowToCodewordIndex(t)]=e}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new ke;let e=0;for(const r of this.codewords)null!=r?t.format("%3d: %3d|%3d%n",e++,r.getRowNumber(),r.getValue()):t.format("%3d:    |   %n",e++);return t.toString()}}Ve.MAX_NEARBY_DISTANCE=5;class Ue{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let e=this.values.get(t);null==e&&(e=0),e++,this.values.set(t,e)}getValue(){let t=-1,e=new Array;for(const[r,n]of this.values.entries()){const o={getKey:()=>r,getValue:()=>n};o.getValue()>t?(t=o.getValue(),e=[],e.push(o.getKey())):o.getValue()===t&&e.push(o.getKey())}return Ne.toIntArray(e)}getConfidence(t){return this.values.get(t)}}class He extends Ve{constructor(t,e){super(t),this._isLeft=e}setRowNumbers(){for(let t of this.getCodewords())null!=t&&t.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let e=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(e,t);let r=this.getBoundingBox(),n=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),s=this.imageRowToCodewordIndex(Math.trunc(o.getY())),a=-1,l=1,u=0;for(let c=i;c<s;c++){if(null==e[c])continue;let r=e[c],n=r.getRowNumber()-a;if(0===n)u++;else if(1===n)l=Math.max(l,u),u=1,a=r.getRowNumber();else if(n<0||r.getRowNumber()>=t.getRowCount()||n>c)e[c]=null;else{let t;t=l>2?(l-2)*n:n;let o=t>=c;for(let r=1;r<=t&&!o;r++)o=null!=e[c-r];o?e[c]=null:(a=r.getRowNumber(),u=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(null==t)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let e=new Int32Array(t.getRowCount());for(let r of this.getCodewords())if(null!=r){let t=r.getRowNumber();if(t>=e.length)continue;e[t]++}return e}adjustIncompleteIndicatorColumnRowNumbers(t){let e=this.getBoundingBox(),r=this._isLeft?e.getTopLeft():e.getTopRight(),n=this._isLeft?e.getBottomLeft():e.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),s=this.getCodewords(),a=-1;for(let l=o;l<i;l++){if(null==s[l])continue;let e=s[l];e.setRowNumberAsRowIndicatorColumn();let r=e.getRowNumber()-a;0===r||(1===r?a=e.getRowNumber():e.getRowNumber()>=t.getRowCount()?s[l]=null:a=e.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),e=new Ue,r=new Ue,n=new Ue,o=new Ue;for(let s of t){if(null==s)continue;s.setRowNumberAsRowIndicatorColumn();let t=s.getValue()%30,i=s.getRowNumber();switch(this._isLeft||(i+=2),i%3){case 0:r.setValue(3*t+1);break;case 1:o.setValue(t/3),n.setValue(t%3);break;case 2:e.setValue(t+1)}}if(0===e.getValue().length||0===r.getValue().length||0===n.getValue().length||0===o.getValue().length||e.getValue()[0]<1||r.getValue()[0]+n.getValue()[0]<Ne.MIN_ROWS_IN_BARCODE||r.getValue()[0]+n.getValue()[0]>Ne.MAX_ROWS_IN_BARCODE)return null;let i=new Fe(e.getValue()[0],r.getValue()[0],n.getValue()[0],o.getValue()[0]);return this.removeIncorrectCodewords(t,i),i}removeIncorrectCodewords(t,e){for(let r=0;r<t.length;r++){let n=t[r];if(null==t[r])continue;let o=n.getValue()%30,i=n.getRowNumber();if(i>e.getRowCount())t[r]=null;else switch(this._isLeft||(i+=2),i%3){case 0:3*o+1!==e.getRowCountUpperPart()&&(t[r]=null);break;case 1:Math.trunc(o/3)===e.getErrorCorrectionLevel()&&o%3===e.getRowCountLowerPart()||(t[r]=null);break;case 2:o+1!==e.getColumnCount()&&(t[r]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class Ge{constructor(t,e){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=e,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t,e=Ne.MAX_CODEWORDS_IN_BARCODE;do{t=e,e=this.adjustRowNumbersAndGetCount()}while(e>0&&e<t);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){null!=t&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(0===t)return 0;for(let e=1;e<this.barcodeColumnCount+1;e++){let t=this.detectionResultColumns[e].getCodewords();for(let r=0;r<t.length;r++)null!=t[r]&&(t[r].hasValidRowNumber()||this.adjustRowNumbers(e,r,t))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let t=this.detectionResultColumns[0].getCodewords(),e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<t.length;r++)if(null!=t[r]&&null!=e[r]&&t[r].getRowNumber()===e[r].getRowNumber())for(let e=1;e<=this.barcodeColumnCount;e++){let n=this.detectionResultColumns[e].getCodewords()[r];null!=n&&(n.setRowNumber(t[r].getRowNumber()),n.hasValidRowNumber()||(this.detectionResultColumns[e].getCodewords()[r]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let t=0,e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<e.length;r++){if(null==e[r])continue;let n=e[r].getRowNumber(),o=0;for(let e=this.barcodeColumnCount+1;e>0&&o<this.ADJUST_ROW_NUMBER_SKIP;e--){let i=this.detectionResultColumns[e].getCodewords()[r];null!=i&&(o=Ge.adjustRowNumberIfValid(n,o,i),i.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let t=0,e=this.detectionResultColumns[0].getCodewords();for(let r=0;r<e.length;r++){if(null==e[r])continue;let n=e[r].getRowNumber(),o=0;for(let e=1;e<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;e++){let i=this.detectionResultColumns[e].getCodewords()[r];null!=i&&(o=Ge.adjustRowNumberIfValid(n,o,i),i.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,e,r){return null==r||r.hasValidRowNumber()||(r.isValidRowNumber(t)?(r.setRowNumber(t),e=0):++e),e}adjustRowNumbers(t,e,r){let n=r[e],o=this.detectionResultColumns[t-1].getCodewords(),i=o;null!=this.detectionResultColumns[t+1]&&(i=this.detectionResultColumns[t+1].getCodewords());let s=new Array(14);s[2]=o[e],s[3]=i[e],e>0&&(s[0]=r[e-1],s[4]=o[e-1],s[5]=i[e-1]),e>1&&(s[8]=r[e-2],s[10]=o[e-2],s[11]=i[e-2]),e<r.length-1&&(s[1]=r[e+1],s[6]=o[e+1],s[7]=i[e+1]),e<r.length-2&&(s[9]=r[e+2],s[12]=o[e+2],s[13]=i[e+2]);for(let a of s)if(Ge.adjustRowNumber(n,a))return}static adjustRowNumber(t,e){return!(null==e||!e.hasValidRowNumber()||e.getBucket()!==t.getBucket()||(t.setRowNumber(e.getRowNumber()),0))}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,e){this.detectionResultColumns[t]=e}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];null==t&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let e=new ke;for(let r=0;r<t.getCodewords().length;r++){e.format("CW %3d:",r);for(let t=0;t<this.barcodeColumnCount+2;t++){if(null==this.detectionResultColumns[t]){e.format("    |   ");continue}let n=this.detectionResultColumns[t].getCodewords()[r];null!=n?e.format(" %3d|%3d",n.getRowNumber(),n.getValue()):e.format("    |   ")}e.format("%n")}return e.toString()}}class We{constructor(t,e,r,n){this.rowNumber=We.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(e),this.bucket=Math.trunc(r),this.value=Math.trunc(n)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==We.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}We.BARCODE_ROW_UNKNOWN=-1;class ze{static initialize(){for(let t=0;t<Ne.SYMBOL_TABLE.length;t++){let e=Ne.SYMBOL_TABLE[t],r=1&e;for(let n=0;n<Ne.BARS_IN_MODULE;n++){let o=0;for(;(1&e)===r;)o+=1,e>>=1;r=1&e,ze.RATIOS_TABLE[t]||(ze.RATIOS_TABLE[t]=new Array(Ne.BARS_IN_MODULE)),ze.RATIOS_TABLE[t][Ne.BARS_IN_MODULE-n-1]=Math.fround(o/Ne.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let e=ze.getDecodedCodewordValue(ze.sampleBitCounts(t));return-1!==e?e:ze.getClosestDecodedValue(t)}static sampleBitCounts(t){let e=tt.sum(t),r=new Int32Array(Ne.BARS_IN_MODULE),n=0,o=0;for(let i=0;i<Ne.MODULES_IN_CODEWORD;i++)o+t[n]<=e/(2*Ne.MODULES_IN_CODEWORD)+i*e/Ne.MODULES_IN_CODEWORD&&(o+=t[n],n++),r[n]++;return r}static getDecodedCodewordValue(t){let e=ze.getBitValue(t);return-1===Ne.getCodeword(e)?-1:e}static getBitValue(t){let e=0;for(let r=0;r<t.length;r++)for(let n=0;n<t[r];n++)e=e<<1|(r%2==0?1:0);return Math.trunc(e)}static getClosestDecodedValue(t){let e=tt.sum(t),r=new Array(Ne.BARS_IN_MODULE);if(e>1)for(let i=0;i<r.length;i++)r[i]=Math.fround(t[i]/e);let n=et.MAX_VALUE,o=-1;this.bSymbolTableReady||ze.initialize();for(let i=0;i<ze.RATIOS_TABLE.length;i++){let t=0,e=ze.RATIOS_TABLE[i];for(let o=0;o<Ne.BARS_IN_MODULE;o++){let i=Math.fround(e[o]-r[o]);if(t+=Math.fround(i*i),t>=n)break}t<n&&(n=t,o=Ne.SYMBOL_TABLE[i])}return o}}ze.bSymbolTableReady=!1,ze.RATIOS_TABLE=new Array(Ne.SYMBOL_TABLE.length).map(t=>new Array(Ne.BARS_IN_MODULE));class Xe{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class je{static parseLong(t,e){return parseInt(t,e)}}class Ye extends o{}Ye.kind="NullPointerException";class Ze extends o{}class Ke extends class{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,e,r){if(null==t)throw new Ye;if(e<0||e>t.length||r<0||e+r>t.length||e+r<0)throw new h;if(0!==r)for(let n=0;n<r;n++)this.write(t[e+n])}flush(){}close(){}}{constructor(t=32){if(super(),this.count=0,t<0)throw new s("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let e=this.buf.length<<1;if(e-t<0&&(e=t),e<0){if(t<0)throw new Ze;e=g.MAX_VALUE}this.buf=f.copyOfUint8Array(this.buf,e)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,e,r){if(e<0||e>t.length||r<0||e+r-t.length>0)throw new h;this.ensureCapacity(this.count+r),c.arraycopy(t,e,this.buf,this.count,r),this.count+=r}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return f.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?"string"==typeof t?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}function qe(){if("undefined"!=typeof window)return window.BigInt||null;if("undefined"!=typeof global)return global.BigInt||null;if("undefined"!=typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let $e;function Qe(t){if(void 0===$e&&($e=qe()),null===$e)throw new Error("BigInt is not supported!");return $e(t)}!function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(W||(W={}));class Je{static decode(t,e){let r=new v(""),n=y.ISO8859_1;r.enableDecoding(n);let o=1,i=t[o++],s=new Xe;for(;o<t[0];){switch(i){case Je.TEXT_COMPACTION_MODE_LATCH:o=Je.textCompaction(t,o,r);break;case Je.BYTE_COMPACTION_MODE_LATCH:case Je.BYTE_COMPACTION_MODE_LATCH_6:o=Je.byteCompaction(i,t,n,o,r);break;case Je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o++]);break;case Je.NUMERIC_COMPACTION_MODE_LATCH:o=Je.numericCompaction(t,o,r);break;case Je.ECI_CHARSET:y.getCharacterSetECIByValue(t[o++]);break;case Je.ECI_GENERAL_PURPOSE:o+=2;break;case Je.ECI_USER_DEFINED:o++;break;case Je.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=Je.decodeMacroBlock(t,o,s);break;case Je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Je.MACRO_PDF417_TERMINATOR:throw new _;default:o--,o=Je.textCompaction(t,o,r)}if(!(o<t.length))throw _.getFormatInstance();i=t[o++]}if(0===r.length())throw _.getFormatInstance();let a=new X(null,r.toString(),null,e);return a.setOther(s),a}static decodeMacroBlock(t,e,r){if(e+Je.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw _.getFormatInstance();let n=new Int32Array(Je.NUMBER_OF_SEQUENCE_CODEWORDS);for(let s=0;s<Je.NUMBER_OF_SEQUENCE_CODEWORDS;s++,e++)n[s]=t[e];r.setSegmentIndex(g.parseInt(Je.decodeBase900toBase10(n,Je.NUMBER_OF_SEQUENCE_CODEWORDS)));let o=new v;e=Je.textCompaction(t,e,o),r.setFileId(o.toString());let i=-1;for(t[e]===Je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(i=e+1);e<t[0];)switch(t[e]){case Je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t[++e]){case Je.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let n=new v;e=Je.textCompaction(t,e+1,n),r.setFileName(n.toString());break;case Je.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let o=new v;e=Je.textCompaction(t,e+1,o),r.setSender(o.toString());break;case Je.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let i=new v;e=Je.textCompaction(t,e+1,i),r.setAddressee(i.toString());break;case Je.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let s=new v;e=Je.numericCompaction(t,e+1,s),r.setSegmentCount(g.parseInt(s.toString()));break;case Je.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let a=new v;e=Je.numericCompaction(t,e+1,a),r.setTimestamp(je.parseLong(a.toString()));break;case Je.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let l=new v;e=Je.numericCompaction(t,e+1,l),r.setChecksum(g.parseInt(l.toString()));break;case Je.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let u=new v;e=Je.numericCompaction(t,e+1,u),r.setFileSize(je.parseLong(u.toString()));break;default:throw _.getFormatInstance()}break;case Je.MACRO_PDF417_TERMINATOR:e++,r.setLastSegment(!0);break;default:throw _.getFormatInstance()}if(-1!==i){let n=e-i;r.isLastSegment()&&n--,r.setOptionalData(f.copyOfRange(t,i,i+n))}return e}static textCompaction(t,e,r){let n=new Int32Array(2*(t[0]-e)),o=new Int32Array(2*(t[0]-e)),i=0,s=!1;for(;e<t[0]&&!s;){let r=t[e++];if(r<Je.TEXT_COMPACTION_MODE_LATCH)n[i]=r/30,n[i+1]=r%30,i+=2;else switch(r){case Je.TEXT_COMPACTION_MODE_LATCH:n[i++]=Je.TEXT_COMPACTION_MODE_LATCH;break;case Je.BYTE_COMPACTION_MODE_LATCH:case Je.BYTE_COMPACTION_MODE_LATCH_6:case Je.NUMERIC_COMPACTION_MODE_LATCH:case Je.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Je.MACRO_PDF417_TERMINATOR:e--,s=!0;break;case Je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n[i]=Je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,r=t[e++],o[i]=r,i++}}return Je.decodeTextCompaction(n,o,i,r),e}static decodeTextCompaction(t,e,r,n){let o=W.ALPHA,i=W.ALPHA,s=0;for(;s<r;){let r=t[s],a="";switch(o){case W.ALPHA:if(r<26)a=String.fromCharCode(65+r);else switch(r){case 26:a=" ";break;case Je.LL:o=W.LOWER;break;case Je.ML:o=W.MIXED;break;case Je.PS:i=o,o=W.PUNCT_SHIFT;break;case Je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s]);break;case Je.TEXT_COMPACTION_MODE_LATCH:o=W.ALPHA}break;case W.LOWER:if(r<26)a=String.fromCharCode(97+r);else switch(r){case 26:a=" ";break;case Je.AS:i=o,o=W.ALPHA_SHIFT;break;case Je.ML:o=W.MIXED;break;case Je.PS:i=o,o=W.PUNCT_SHIFT;break;case Je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s]);break;case Je.TEXT_COMPACTION_MODE_LATCH:o=W.ALPHA}break;case W.MIXED:if(r<Je.PL)a=Je.MIXED_CHARS[r];else switch(r){case Je.PL:o=W.PUNCT;break;case 26:a=" ";break;case Je.LL:o=W.LOWER;break;case Je.AL:o=W.ALPHA;break;case Je.PS:i=o,o=W.PUNCT_SHIFT;break;case Je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s]);break;case Je.TEXT_COMPACTION_MODE_LATCH:o=W.ALPHA}break;case W.PUNCT:if(r<Je.PAL)a=Je.PUNCT_CHARS[r];else switch(r){case Je.PAL:o=W.ALPHA;break;case Je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s]);break;case Je.TEXT_COMPACTION_MODE_LATCH:o=W.ALPHA}break;case W.ALPHA_SHIFT:if(o=i,r<26)a=String.fromCharCode(65+r);else switch(r){case 26:a=" ";break;case Je.TEXT_COMPACTION_MODE_LATCH:o=W.ALPHA}break;case W.PUNCT_SHIFT:if(o=i,r<Je.PAL)a=Je.PUNCT_CHARS[r];else switch(r){case Je.PAL:o=W.ALPHA;break;case Je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s]);break;case Je.TEXT_COMPACTION_MODE_LATCH:o=W.ALPHA}}""!==a&&n.append(a),s++}}static byteCompaction(t,e,r,n,o){let i=new Ke,s=0,a=0,l=!1;switch(t){case Je.BYTE_COMPACTION_MODE_LATCH:let t=new Int32Array(6),r=e[n++];for(;n<e[0]&&!l;)switch(t[s++]=r,a=900*a+r,r=e[n++],r){case Je.TEXT_COMPACTION_MODE_LATCH:case Je.BYTE_COMPACTION_MODE_LATCH:case Je.NUMERIC_COMPACTION_MODE_LATCH:case Je.BYTE_COMPACTION_MODE_LATCH_6:case Je.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Je.MACRO_PDF417_TERMINATOR:n--,l=!0;break;default:if(s%5==0&&s>0){for(let t=0;t<6;++t)i.write(Number(Qe(a)>>Qe(8*(5-t))));a=0,s=0}}n===e[0]&&r<Je.TEXT_COMPACTION_MODE_LATCH&&(t[s++]=r);for(let e=0;e<s;e++)i.write(t[e]);break;case Je.BYTE_COMPACTION_MODE_LATCH_6:for(;n<e[0]&&!l;){let t=e[n++];if(t<Je.TEXT_COMPACTION_MODE_LATCH)s++,a=900*a+t;else switch(t){case Je.TEXT_COMPACTION_MODE_LATCH:case Je.BYTE_COMPACTION_MODE_LATCH:case Je.NUMERIC_COMPACTION_MODE_LATCH:case Je.BYTE_COMPACTION_MODE_LATCH_6:case Je.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Je.MACRO_PDF417_TERMINATOR:n--,l=!0}if(s%5==0&&s>0){for(let t=0;t<6;++t)i.write(Number(Qe(a)>>Qe(8*(5-t))));a=0,s=0}}}return o.append(E.decode(i.toByteArray(),r)),n}static numericCompaction(t,e,r){let n=0,o=!1,i=new Int32Array(Je.MAX_NUMERIC_CODEWORDS);for(;e<t[0]&&!o;){let s=t[e++];if(e===t[0]&&(o=!0),s<Je.TEXT_COMPACTION_MODE_LATCH)i[n]=s,n++;else switch(s){case Je.TEXT_COMPACTION_MODE_LATCH:case Je.BYTE_COMPACTION_MODE_LATCH:case Je.BYTE_COMPACTION_MODE_LATCH_6:case Je.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Je.MACRO_PDF417_TERMINATOR:e--,o=!0}(n%Je.MAX_NUMERIC_CODEWORDS==0||s===Je.NUMERIC_COMPACTION_MODE_LATCH||o)&&n>0&&(r.append(Je.decodeBase900toBase10(i,n)),n=0)}return e}static decodeBase900toBase10(t,e){let r=Qe(0);for(let o=0;o<e;o++)r+=Je.EXP900[e-o-1]*Qe(t[o]);let n=r.toString();if("1"!==n.charAt(0))throw new _;return n.substring(1)}}Je.TEXT_COMPACTION_MODE_LATCH=900,Je.BYTE_COMPACTION_MODE_LATCH=901,Je.NUMERIC_COMPACTION_MODE_LATCH=902,Je.BYTE_COMPACTION_MODE_LATCH_6=924,Je.ECI_USER_DEFINED=925,Je.ECI_GENERAL_PURPOSE=926,Je.ECI_CHARSET=927,Je.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Je.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Je.MACRO_PDF417_TERMINATOR=922,Je.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Je.MAX_NUMERIC_CODEWORDS=15,Je.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Je.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Je.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Je.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Je.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Je.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Je.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Je.PL=25,Je.LL=27,Je.AS=27,Je.ML=28,Je.AL=28,Je.PS=29,Je.PAL=29,Je.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",Je.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",Je.EXP900=qe()?function(){let t=[];t[0]=Qe(1);let e=Qe(900);t[1]=e;for(let r=2;r<16;r++)t[r]=t[r-1]*e;return t}():[],Je.NUMBER_OF_SEQUENCE_CODEWORDS=2;class tr{constructor(){}static decode(t,e,r,n,o,i,s){let a,l=new xe(t,e,r,n,o),u=null,c=null;for(let f=!0;;f=!1){if(null!=e&&(u=tr.getRowIndicatorColumn(t,l,e,!0,i,s)),null!=n&&(c=tr.getRowIndicatorColumn(t,l,n,!1,i,s)),a=tr.merge(u,c),null==a)throw I.getNotFoundInstance();let r=a.getBoundingBox();if(!f||null==r||!(r.getMinY()<l.getMinY()||r.getMaxY()>l.getMaxY()))break;l=r}a.setBoundingBox(l);let h=a.getBarcodeColumnCount()+1;a.setDetectionResultColumn(0,u),a.setDetectionResultColumn(h,c);let d=null!=u;for(let f=1;f<=h;f++){let e,r=d?f:h-f;if(void 0!==a.getDetectionResultColumn(r))continue;e=0===r||r===h?new He(l,0===r):new Ve(l),a.setDetectionResultColumn(r,e);let n=-1,o=n;for(let u=l.getMinY();u<=l.getMaxY();u++){if(n=tr.getStartColumn(a,r,u,d),n<0||n>l.getMaxX()){if(-1===o)continue;n=o}let c=tr.detectCodeword(t,l.getMinX(),l.getMaxX(),d,n,u,i,s);null!=c&&(e.setCodeword(u,c),o=n,i=Math.min(i,c.getWidth()),s=Math.max(s,c.getWidth()))}}return tr.createDecoderResult(a)}static merge(t,e){if(null==t&&null==e)return null;let r=tr.getBarcodeMetadata(t,e);if(null==r)return null;let n=xe.merge(tr.adjustBoundingBox(t),tr.adjustBoundingBox(e));return new Ge(r,n)}static adjustBoundingBox(t){if(null==t)return null;let e=t.getRowHeights();if(null==e)return null;let r=tr.getMax(e),n=0;for(let s of e)if(n+=r-s,s>0)break;let o=t.getCodewords();for(let s=0;n>0&&null==o[s];s++)n--;let i=0;for(let s=e.length-1;s>=0&&(i+=r-e[s],!(e[s]>0));s--);for(let s=o.length-1;i>0&&null==o[s];s--)i--;return t.getBoundingBox().addMissingRows(n,i,t.isLeft())}static getMax(t){let e=-1;for(let r of t)e=Math.max(e,r);return e}static getBarcodeMetadata(t,e){let r,n;return null==t||null==(r=t.getBarcodeMetadata())?null==e?null:e.getBarcodeMetadata():null==e||null==(n=e.getBarcodeMetadata())?r:r.getColumnCount()!==n.getColumnCount()&&r.getErrorCorrectionLevel()!==n.getErrorCorrectionLevel()&&r.getRowCount()!==n.getRowCount()?null:r}static getRowIndicatorColumn(t,e,r,n,o,i){let s=new He(e,n);for(let a=0;a<2;a++){let l=0===a?1:-1,u=Math.trunc(Math.trunc(r.getX()));for(let a=Math.trunc(Math.trunc(r.getY()));a<=e.getMaxY()&&a>=e.getMinY();a+=l){let e=tr.detectCodeword(t,0,t.getWidth(),n,u,a,o,i);null!=e&&(s.setCodeword(a,e),u=n?e.getStartX():e.getEndX())}}return s}static adjustCodewordCount(t,e){let r=e[0][1],n=r.getValue(),o=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-tr.getNumberOfECCodeWords(t.getBarcodeECLevel());if(0===n.length){if(o<1||o>Ne.MAX_CODEWORDS_IN_BARCODE)throw I.getNotFoundInstance();r.setValue(o)}else n[0]!==o&&r.setValue(o)}static createDecoderResult(t){let e=tr.createBarcodeMatrix(t);tr.adjustCodewordCount(t,e);let r=new Array,n=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),o=[],i=new Array;for(let a=0;a<t.getBarcodeRowCount();a++)for(let s=0;s<t.getBarcodeColumnCount();s++){let l=e[a][s+1].getValue(),u=a*t.getBarcodeColumnCount()+s;0===l.length?r.push(u):1===l.length?n[u]=l[0]:(i.push(u),o.push(l))}let s=new Array(o.length);for(let a=0;a<s.length;a++)s[a]=o[a];return tr.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),n,Ne.toIntArray(r),Ne.toIntArray(i),s)}static createDecoderResultFromAmbiguousValues(t,e,r,n,o){let i=new Int32Array(n.length),s=100;for(;s-- >0;){for(let t=0;t<i.length;t++)e[n[t]]=o[t][i[t]];try{return tr.decodeCodewords(e,t,r)}catch(a){if(!(a instanceof l))throw a}if(0===i.length)throw l.getChecksumInstance();for(let t=0;t<i.length;t++){if(i[t]<o[t].length-1){i[t]++;break}if(i[t]=0,t===i.length-1)throw l.getChecksumInstance()}}throw l.getChecksumInstance()}static createBarcodeMatrix(t){let e=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let n=0;n<e.length;n++)for(let t=0;t<e[n].length;t++)e[n][t]=new Ue;let r=0;for(let n of t.getDetectionResultColumns()){if(null!=n)for(let t of n.getCodewords())if(null!=t){let n=t.getRowNumber();if(n>=0){if(n>=e.length)continue;e[n][r].setValue(t.getValue())}}r++}return e}static isValidBarcodeColumn(t,e){return e>=0&&e<=t.getBarcodeColumnCount()+1}static getStartColumn(t,e,r,n){let o=n?1:-1,i=null;if(tr.isValidBarcodeColumn(t,e-o)&&(i=t.getDetectionResultColumn(e-o).getCodeword(r)),null!=i)return n?i.getEndX():i.getStartX();if(i=t.getDetectionResultColumn(e).getCodewordNearby(r),null!=i)return n?i.getStartX():i.getEndX();if(tr.isValidBarcodeColumn(t,e-o)&&(i=t.getDetectionResultColumn(e-o).getCodewordNearby(r)),null!=i)return n?i.getEndX():i.getStartX();let s=0;for(;tr.isValidBarcodeColumn(t,e-o);){e-=o;for(let r of t.getDetectionResultColumn(e).getCodewords())if(null!=r)return(n?r.getEndX():r.getStartX())+o*s*(r.getEndX()-r.getStartX());s++}return n?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,e,r,n,o,i,s,a){o=tr.adjustCodewordStartColumn(t,e,r,n,o,i);let l,u=tr.getModuleBitCount(t,e,r,n,o,i);if(null==u)return null;let c=tt.sum(u);if(n)l=o+c;else{for(let t=0;t<u.length/2;t++){let e=u[t];u[t]=u[u.length-1-t],u[u.length-1-t]=e}l=o,o=l-c}if(!tr.checkCodewordSkew(c,s,a))return null;let h=ze.getDecodedValue(u),d=Ne.getCodeword(h);return-1===d?null:new We(o,l,tr.getCodewordBucketNumber(h),d)}static getModuleBitCount(t,e,r,n,o,i){let s=o,a=new Int32Array(8),l=0,u=n?1:-1,c=n;for(;(n?s<r:s>=e)&&l<a.length;)t.get(s,i)===c?(a[l]++,s+=u):(l++,c=!c);return l===a.length||s===(n?r:e)&&l===a.length-1?a:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,e,r,n,o,i){let s=o,a=n?-1:1;for(let l=0;l<2;l++){for(;(n?s>=e:s<r)&&n===t.get(s,i);){if(Math.abs(o-s)>tr.CODEWORD_SKEW_SIZE)return o;s+=a}a=-a,n=!n}return s}static checkCodewordSkew(t,e,r){return e-tr.CODEWORD_SKEW_SIZE<=t&&t<=r+tr.CODEWORD_SKEW_SIZE}static decodeCodewords(t,e,r){if(0===t.length)throw _.getFormatInstance();let n=1<<e+1,o=tr.correctErrors(t,r,n);tr.verifyCodewordCount(t,n);let i=Je.decode(t,""+e);return i.setErrorsCorrected(o),i.setErasures(r.length),i}static correctErrors(t,e,r){if(null!=e&&e.length>r/2+tr.MAX_ERRORS||r<0||r>tr.MAX_EC_CODEWORDS)throw l.getChecksumInstance();return tr.errorCorrection.decode(t,r,e)}static verifyCodewordCount(t,e){if(t.length<4)throw _.getFormatInstance();let r=t[0];if(r>t.length)throw _.getFormatInstance();if(0===r){if(!(e<t.length))throw _.getFormatInstance();t[0]=t.length-e}}static getBitCountForCodeword(t){let e=new Int32Array(8),r=0,n=e.length-1;for(;!((1&t)!==r&&(r=1&t,n--,n<0));)e[n]++,t>>=1;return e}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return tr.getCodewordBucketNumber(tr.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let e=new ke;for(let r=0;r<t.length;r++){e.format("Row %2d: ",r);for(let n=0;n<t[r].length;n++){let o=t[r][n];0===o.getValue().length?e.format("        ",null):e.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}e.format("%n")}return e.toString()}}tr.CODEWORD_SKEW_SIZE=2,tr.MAX_ERRORS=3,tr.MAX_EC_CODEWORDS=512,tr.errorCorrection=new Le;class er{decode(t,e=null){let r=er.decode(t,e,!1);if(null==r||0===r.length||null==r[0])throw I.getNotFoundInstance();return r[0]}decodeMultiple(t,e=null){try{return er.decode(t,e,!0)}catch(r){if(r instanceof _||r instanceof l)throw I.getNotFoundInstance();throw r}}static decode(t,e,r){const n=new Array,o=Me.detectMultiple(t,e,r);for(const i of o.getPoints()){const t=tr.decode(o.getBits(),i[4],i[5],i[6],i[7],er.getMinCodewordWidth(i),er.getMaxCodewordWidth(i)),e=new L(t.getText(),t.getRawBytes(),void 0,i,F.PDF_417);e.putMetadata(z.ERROR_CORRECTION_LEVEL,t.getECLevel());const r=t.getOther();null!=r&&e.putMetadata(z.PDF417_EXTRA_METADATA,r),n.push(e)}return n.map(t=>t)}static getMaxWidth(t,e){return null==t||null==e?0:Math.trunc(Math.abs(t.getX()-e.getX()))}static getMinWidth(t,e){return null==t||null==e?g.MAX_VALUE:Math.trunc(Math.abs(t.getX()-e.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(er.getMaxWidth(t[0],t[4]),er.getMaxWidth(t[6],t[2])*Ne.MODULES_IN_CODEWORD/Ne.MODULES_IN_STOP_PATTERN),Math.max(er.getMaxWidth(t[1],t[5]),er.getMaxWidth(t[7],t[3])*Ne.MODULES_IN_CODEWORD/Ne.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(er.getMinWidth(t[0],t[4]),er.getMinWidth(t[6],t[2])*Ne.MODULES_IN_CODEWORD/Ne.MODULES_IN_STOP_PATTERN),Math.min(er.getMinWidth(t[1],t[5]),er.getMinWidth(t[7],t[3])*Ne.MODULES_IN_CODEWORD/Ne.MODULES_IN_STOP_PATTERN)))}reset(){}}class rr extends o{}rr.kind="ReaderException";class nr{decode(t,e){return this.setHints(e),this.decodeInternal(t)}decodeWithState(t){return null==this.readers&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const e=null!=t&&void 0!==t.get(m.TRY_HARDER),r=null==t?null:t.get(m.POSSIBLE_FORMATS),n=new Array;if(null!=r){const o=r.some(t=>t===F.UPC_A||t===F.UPC_E||t===F.EAN_13||t===F.EAN_8||t===F.CODABAR||t===F.CODE_39||t===F.CODE_93||t===F.CODE_128||t===F.ITF||t===F.RSS_14||t===F.RSS_EXPANDED);o&&!e&&n.push(new te(t)),r.includes(F.QR_CODE)&&n.push(new Oe),r.includes(F.DATA_MATRIX)&&n.push(new ce),r.includes(F.AZTEC)&&n.push(new dt),r.includes(F.PDF_417)&&n.push(new er),o&&e&&n.push(new te(t))}0===n.length&&(e||n.push(new te(t)),n.push(new Oe),n.push(new ce),n.push(new dt),n.push(new er),e&&n.push(new te(t))),this.readers=n}reset(){if(null!==this.readers)for(const t of this.readers)t.reset()}decodeInternal(t){if(null===this.readers)throw new rr("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(t,this.hints)}catch(e){if(e instanceof rr)continue}throw new I("No MultiFormat Readers were able to detect the code.")}}var or;!function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.MIN_SIZE=3]="MIN_SIZE",t[t.MAX_SIZE=4]="MAX_SIZE",t[t.MARGIN=5]="MARGIN",t[t.PDF417_COMPACT=6]="PDF417_COMPACT",t[t.PDF417_COMPACTION=7]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=9]="AZTEC_LAYERS",t[t.QR_VERSION=10]="QR_VERSION"}(or||(or={}));var ir=or;class sr{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new Y(t,Int32Array.from([1])))}buildGenerator(t){const e=this.cachedGenerators;if(t>=e.length){let r=e[e.length-1];const n=this.field;for(let o=e.length;o<=t;o++){const t=r.multiply(new Y(n,Int32Array.from([1,n.exp(o-1+n.getGeneratorBase())])));e.push(t),r=t}}return e[t]}encode(t,e){if(0===e)throw new s("No error correction bytes");const r=t.length-e;if(r<=0)throw new s("No data bytes provided");const n=this.buildGenerator(e),o=new Int32Array(r);c.arraycopy(t,0,o,0,r);let i=new Y(this.field,o);i=i.multiplyByMonomial(e,1);const a=i.divide(n)[1].getCoefficients(),l=e-a.length;for(let s=0;s<l;s++)t[r+s]=0;c.arraycopy(a,0,t,r+l,a.length)}}class ar{constructor(){}static applyMaskPenaltyRule1(t){return ar.applyMaskPenaltyRule1Internal(t,!0)+ar.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let e=0;const r=t.getArray(),n=t.getWidth(),o=t.getHeight();for(let i=0;i<o-1;i++){const t=r[i];for(let o=0;o<n-1;o++){const n=t[o];n===t[o+1]&&n===r[i+1][o]&&n===r[i+1][o+1]&&e++}}return ar.N2*e}static applyMaskPenaltyRule3(t){let e=0;const r=t.getArray(),n=t.getWidth(),o=t.getHeight();for(let i=0;i<o;i++)for(let t=0;t<n;t++){const s=r[i];t+6<n&&1===s[t]&&0===s[t+1]&&1===s[t+2]&&1===s[t+3]&&1===s[t+4]&&0===s[t+5]&&1===s[t+6]&&(ar.isWhiteHorizontal(s,t-4,t)||ar.isWhiteHorizontal(s,t+7,t+11))&&e++,i+6<o&&1===r[i][t]&&0===r[i+1][t]&&1===r[i+2][t]&&1===r[i+3][t]&&1===r[i+4][t]&&0===r[i+5][t]&&1===r[i+6][t]&&(ar.isWhiteVertical(r,t,i-4,i)||ar.isWhiteVertical(r,t,i+7,i+11))&&e++}return e*ar.N3}static isWhiteHorizontal(t,e,r){e=Math.max(e,0),r=Math.min(r,t.length);for(let n=e;n<r;n++)if(1===t[n])return!1;return!0}static isWhiteVertical(t,e,r,n){r=Math.max(r,0),n=Math.min(n,t.length);for(let o=r;o<n;o++)if(1===t[o][e])return!1;return!0}static applyMaskPenaltyRule4(t){let e=0;const r=t.getArray(),n=t.getWidth(),o=t.getHeight();for(let s=0;s<o;s++){const t=r[s];for(let r=0;r<n;r++)1===t[r]&&e++}const i=t.getHeight()*t.getWidth();return Math.floor(10*Math.abs(2*e-i)/i)*ar.N4}static getDataMaskBit(t,e,r){let n,o;switch(t){case 0:n=r+e&1;break;case 1:n=1&r;break;case 2:n=e%3;break;case 3:n=(r+e)%3;break;case 4:n=Math.floor(r/2)+Math.floor(e/3)&1;break;case 5:o=r*e,n=(1&o)+o%3;break;case 6:o=r*e,n=(1&o)+o%3&1;break;case 7:o=r*e,n=o%3+(r+e&1)&1;break;default:throw new s("Invalid mask pattern: "+t)}return 0===n}static applyMaskPenaltyRule1Internal(t,e){let r=0;const n=e?t.getHeight():t.getWidth(),o=e?t.getWidth():t.getHeight(),i=t.getArray();for(let s=0;s<n;s++){let t=0,n=-1;for(let a=0;a<o;a++){const o=e?i[s][a]:i[a][s];o===n?t++:(t>=5&&(r+=ar.N1+(t-5)),t=1,n=o)}t>=5&&(r+=ar.N1+(t-5))}return r}}ar.N1=3,ar.N2=3,ar.N3=40,ar.N4=10;class lr{constructor(t,e){this.width=t,this.height=e;const r=new Array(e);for(let n=0;n!==e;n++)r[n]=new Uint8Array(t);this.bytes=r}getHeight(){return this.height}getWidth(){return this.width}get(t,e){return this.bytes[e][t]}getArray(){return this.bytes}setNumber(t,e,r){this.bytes[e][t]=r}setBoolean(t,e,r){this.bytes[e][t]=r?1:0}clear(t){for(const e of this.bytes)f.fill(e,t)}equals(t){if(!(t instanceof lr))return!1;const e=t;if(this.width!==e.width)return!1;if(this.height!==e.height)return!1;for(let r=0,n=this.height;r<n;++r){const t=this.bytes[r],n=e.bytes[r];for(let e=0,r=this.width;e<r;++e)if(t[e]!==n[e])return!1}return!0}toString(){const t=new v;for(let e=0,r=this.height;e<r;++e){const r=this.bytes[e];for(let e=0,n=this.width;e<n;++e)switch(r[e]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ")}t.append("\n")}return t.toString()}}class ur{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new v;return t.append("<<\n"),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append("\n ecLevel: "),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append("\n version: "),t.append(this.version?this.version.toString():"null"),t.append("\n maskPattern: "),t.append(this.maskPattern.toString()),this.matrix?(t.append("\n matrix:\n"),t.append(this.matrix.toString())):t.append("\n matrix: null\n"),t.append(">>\n"),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<ur.NUM_MASK_PATTERNS}}ur.NUM_MASK_PATTERNS=8;class cr extends o{}cr.kind="WriterException";class hr{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,e,r,n,o){hr.clearMatrix(o),hr.embedBasicPatterns(r,o),hr.embedTypeInfo(e,n,o),hr.maybeEmbedVersionInfo(r,o),hr.embedDataBits(t,n,o)}static embedBasicPatterns(t,e){hr.embedPositionDetectionPatternsAndSeparators(e),hr.embedDarkDotAtLeftBottomCorner(e),hr.maybeEmbedPositionAdjustmentPatterns(t,e),hr.embedTimingPatterns(e)}static embedTypeInfo(t,e,r){const n=new p;hr.makeTypeInfoBits(t,e,n);for(let o=0,i=n.getSize();o<i;++o){const t=n.get(n.getSize()-1-o),e=hr.TYPE_INFO_COORDINATES[o];if(r.setBoolean(e[0],e[1],t),o<8){const e=r.getWidth()-o-1;r.setBoolean(e,8,t)}else{const e=8,n=r.getHeight()-7+(o-8);r.setBoolean(e,n,t)}}}static maybeEmbedVersionInfo(t,e){if(t.getVersionNumber()<7)return;const r=new p;hr.makeVersionInfoBits(t,r);let n=17;for(let o=0;o<6;++o)for(let t=0;t<3;++t){const i=r.get(n);n--,e.setBoolean(o,e.getHeight()-11+t,i),e.setBoolean(e.getHeight()-11+t,o,i)}}static embedDataBits(t,e,r){let n=0,o=-1,i=r.getWidth()-1,s=r.getHeight()-1;for(;i>0;){for(6===i&&(i-=1);s>=0&&s<r.getHeight();){for(let o=0;o<2;++o){const a=i-o;if(!hr.isEmpty(r.get(a,s)))continue;let l;n<t.getSize()?(l=t.get(n),++n):l=!1,255!==e&&ar.getDataMaskBit(e,a,s)&&(l=!l),r.setBoolean(a,s,l)}s+=o}o=-o,s+=o,i-=2}if(n!==t.getSize())throw new cr("Not all bits consumed: "+n+"/"+t.getSize())}static findMSBSet(t){return 32-g.numberOfLeadingZeros(t)}static calculateBCHCode(t,e){if(0===e)throw new s("0 polynomial");const r=hr.findMSBSet(e);for(t<<=r-1;hr.findMSBSet(t)>=r;)t^=e<<hr.findMSBSet(t)-r;return t}static makeTypeInfoBits(t,e,r){if(!ur.isValidMaskPattern(e))throw new cr("Invalid mask pattern");const n=t.getBits()<<3|e;r.appendBits(n,5);const o=hr.calculateBCHCode(n,hr.TYPE_INFO_POLY);r.appendBits(o,10);const i=new p;if(i.appendBits(hr.TYPE_INFO_MASK_PATTERN,15),r.xor(i),15!==r.getSize())throw new cr("should not happen but we got: "+r.getSize())}static makeVersionInfoBits(t,e){e.appendBits(t.getVersionNumber(),6);const r=hr.calculateBCHCode(t.getVersionNumber(),hr.VERSION_INFO_POLY);if(e.appendBits(r,12),18!==e.getSize())throw new cr("should not happen but we got: "+e.getSize())}static isEmpty(t){return 255===t}static embedTimingPatterns(t){for(let e=8;e<t.getWidth()-8;++e){const r=(e+1)%2;hr.isEmpty(t.get(e,6))&&t.setNumber(e,6,r),hr.isEmpty(t.get(6,e))&&t.setNumber(6,e,r)}}static embedDarkDotAtLeftBottomCorner(t){if(0===t.get(8,t.getHeight()-8))throw new cr;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,e,r){for(let n=0;n<8;++n){if(!hr.isEmpty(r.get(t+n,e)))throw new cr;r.setNumber(t+n,e,0)}}static embedVerticalSeparationPattern(t,e,r){for(let n=0;n<7;++n){if(!hr.isEmpty(r.get(t,e+n)))throw new cr;r.setNumber(t,e+n,0)}}static embedPositionAdjustmentPattern(t,e,r){for(let n=0;n<5;++n){const o=hr.POSITION_ADJUSTMENT_PATTERN[n];for(let i=0;i<5;++i)r.setNumber(t+i,e+n,o[i])}}static embedPositionDetectionPattern(t,e,r){for(let n=0;n<7;++n){const o=hr.POSITION_DETECTION_PATTERN[n];for(let i=0;i<7;++i)r.setNumber(t+i,e+n,o[i])}}static embedPositionDetectionPatternsAndSeparators(t){const e=hr.POSITION_DETECTION_PATTERN[0].length;hr.embedPositionDetectionPattern(0,0,t),hr.embedPositionDetectionPattern(t.getWidth()-e,0,t),hr.embedPositionDetectionPattern(0,t.getWidth()-e,t),hr.embedHorizontalSeparationPattern(0,7,t),hr.embedHorizontalSeparationPattern(t.getWidth()-8,7,t),hr.embedHorizontalSeparationPattern(0,t.getWidth()-8,t),hr.embedVerticalSeparationPattern(7,0,t),hr.embedVerticalSeparationPattern(t.getHeight()-7-1,0,t),hr.embedVerticalSeparationPattern(7,t.getHeight()-7,t)}static maybeEmbedPositionAdjustmentPatterns(t,e){if(t.getVersionNumber()<2)return;const r=t.getVersionNumber()-1,n=hr.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r];for(let o=0,i=n.length;o!==i;o++){const t=n[o];if(t>=0)for(let r=0;r!==i;r++){const o=n[r];o>=0&&hr.isEmpty(e.get(o,t))&&hr.embedPositionAdjustmentPattern(o-2,t-2,e)}}}}hr.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),hr.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),hr.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),hr.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),hr.VERSION_INFO_POLY=7973,hr.TYPE_INFO_POLY=1335,hr.TYPE_INFO_MASK_PATTERN=21522;class dr{constructor(t,e){this.dataBytes=t,this.errorCorrectionBytes=e}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class fr{constructor(){}static calculateMaskPenalty(t){return ar.applyMaskPenaltyRule1(t)+ar.applyMaskPenaltyRule2(t)+ar.applyMaskPenaltyRule3(t)+ar.applyMaskPenaltyRule4(t)}static encode(t,e,r=null){let n=fr.DEFAULT_BYTE_MODE_ENCODING;const o=null!==r&&void 0!==r.get(ir.CHARACTER_SET);o&&(n=r.get(ir.CHARACTER_SET).toString());const i=this.chooseMode(t,n),s=new p;if(i===ye.BYTE&&(o||fr.DEFAULT_BYTE_MODE_ENCODING!==n)){const t=y.getCharacterSetECIByName(n);void 0!==t&&this.appendECI(t,s)}this.appendModeInfo(i,s);const a=new p;let l;if(this.appendBytes(t,i,a,n),null!==r&&void 0!==r.get(ir.QR_VERSION)){const t=Number.parseInt(r.get(ir.QR_VERSION).toString(),10);l=pe.getVersionForNumber(t);const n=this.calculateBitsNeeded(i,s,a,l);if(!this.willFit(n,l,e))throw new cr("Data too big for requested version")}else l=this.recommendVersion(e,i,s,a);const u=new p;u.appendBitArray(s);const c=i===ye.BYTE?a.getSizeInBytes():t.length;this.appendLengthInfo(c,l,i,u),u.appendBitArray(a);const h=l.getECBlocksForLevel(e),d=l.getTotalCodewords()-h.getTotalECCodewords();this.terminateBits(d,u);const f=this.interleaveWithECBytes(u,l.getTotalCodewords(),d,h.getNumBlocks()),g=new ur;g.setECLevel(e),g.setMode(i),g.setVersion(l);const w=l.getDimensionForVersion(),m=new lr(w,w),_=this.chooseMaskPattern(f,e,l,m);return g.setMaskPattern(_),hr.buildMatrix(f,e,l,_,m),g.setMatrix(m),g}static recommendVersion(t,e,r,n){const o=this.calculateBitsNeeded(e,r,n,pe.getVersionForNumber(1)),i=this.chooseVersion(o,t),s=this.calculateBitsNeeded(e,r,n,i);return this.chooseVersion(s,t)}static calculateBitsNeeded(t,e,r,n){return e.getSize()+t.getCharacterCountBits(n)+r.getSize()}static getAlphanumericCode(t){return t<fr.ALPHANUMERIC_TABLE.length?fr.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,e=null){if(y.SJIS.getName()===e&&this.isOnlyDoubleByteKanji(t))return ye.KANJI;let r=!1,n=!1;for(let o=0,i=t.length;o<i;++o){const e=t.charAt(o);if(fr.isDigit(e))r=!0;else{if(-1===this.getAlphanumericCode(e.charCodeAt(0)))return ye.BYTE;n=!0}}return n?ye.ALPHANUMERIC:r?ye.NUMERIC:ye.BYTE}static isOnlyDoubleByteKanji(t){let e;try{e=E.encode(t,y.SJIS)}catch(n){return!1}const r=e.length;if(r%2!=0)return!1;for(let o=0;o<r;o+=2){const t=255&e[o];if((t<129||t>159)&&(t<224||t>235))return!1}return!0}static chooseMaskPattern(t,e,r,n){let o=Number.MAX_SAFE_INTEGER,i=-1;for(let s=0;s<ur.NUM_MASK_PATTERNS;s++){hr.buildMatrix(t,e,r,s,n);let a=this.calculateMaskPenalty(n);a<o&&(o=a,i=s)}return i}static chooseVersion(t,e){for(let r=1;r<=40;r++){const n=pe.getVersionForNumber(r);if(fr.willFit(t,n,e))return n}throw new cr("Data too big")}static willFit(t,e,r){return e.getTotalCodewords()-e.getECBlocksForLevel(r).getTotalECCodewords()>=(t+7)/8}static terminateBits(t,e){const r=8*t;if(e.getSize()>r)throw new cr("data bits cannot fit in the QR Code"+e.getSize()+" > "+r);for(let i=0;i<4&&e.getSize()<r;++i)e.appendBit(!1);const n=7&e.getSize();if(n>0)for(let i=n;i<8;i++)e.appendBit(!1);const o=t-e.getSizeInBytes();for(let i=0;i<o;++i)e.appendBits(0==(1&i)?236:17,8);if(e.getSize()!==r)throw new cr("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,e,r,n,o,i){if(n>=r)throw new cr("Block ID too large");const s=t%r,a=r-s,l=Math.floor(t/r),u=l+1,c=Math.floor(e/r),h=c+1,d=l-c,f=u-h;if(d!==f)throw new cr("EC bytes mismatch");if(r!==a+s)throw new cr("RS blocks mismatch");if(t!==(c+d)*a+(h+f)*s)throw new cr("Total bytes mismatch");n<a?(o[0]=c,i[0]=d):(o[0]=h,i[0]=f)}static interleaveWithECBytes(t,e,r,n){if(t.getSizeInBytes()!==r)throw new cr("Number of bits and data bytes does not match");let o=0,i=0,s=0;const a=new Array;for(let u=0;u<n;++u){const l=new Int32Array(1),c=new Int32Array(1);fr.getNumDataBytesAndNumECBytesForBlockID(e,r,n,u,l,c);const h=l[0],d=new Uint8Array(h);t.toBytes(8*o,d,0,h);const f=fr.generateECBytes(d,c[0]);a.push(new dr(d,f)),i=Math.max(i,h),s=Math.max(s,f.length),o+=l[0]}if(r!==o)throw new cr("Data bytes does not match offset");const l=new p;for(let u=0;u<i;++u)for(const t of a){const e=t.getDataBytes();u<e.length&&l.appendBits(e[u],8)}for(let u=0;u<s;++u)for(const t of a){const e=t.getErrorCorrectionBytes();u<e.length&&l.appendBits(e[u],8)}if(e!==l.getSizeInBytes())throw new cr("Interleaving error: "+e+" and "+l.getSizeInBytes()+" differ.");return l}static generateECBytes(t,e){const r=t.length,n=new Int32Array(r+e);for(let i=0;i<r;i++)n[i]=255&t[i];new sr(K.QR_CODE_FIELD_256).encode(n,e);const o=new Uint8Array(e);for(let i=0;i<e;i++)o[i]=n[r+i];return o}static appendModeInfo(t,e){e.appendBits(t.getBits(),4)}static appendLengthInfo(t,e,r,n){const o=r.getCharacterCountBits(e);if(t>=1<<o)throw new cr(t+" is bigger than "+((1<<o)-1));n.appendBits(t,o)}static appendBytes(t,e,r,n){switch(e){case ye.NUMERIC:fr.appendNumericBytes(t,r);break;case ye.ALPHANUMERIC:fr.appendAlphanumericBytes(t,r);break;case ye.BYTE:fr.append8BitBytes(t,r,n);break;case ye.KANJI:fr.appendKanjiBytes(t,r);break;default:throw new cr("Invalid mode: "+e)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const e=fr.getDigit(t);return e>=0&&e<=9}static appendNumericBytes(t,e){const r=t.length;let n=0;for(;n<r;){const o=fr.getDigit(t.charAt(n));if(n+2<r){const r=fr.getDigit(t.charAt(n+1)),i=fr.getDigit(t.charAt(n+2));e.appendBits(100*o+10*r+i,10),n+=3}else if(n+1<r){const r=fr.getDigit(t.charAt(n+1));e.appendBits(10*o+r,7),n+=2}else e.appendBits(o,4),n++}}static appendAlphanumericBytes(t,e){const r=t.length;let n=0;for(;n<r;){const o=fr.getAlphanumericCode(t.charCodeAt(n));if(-1===o)throw new cr;if(n+1<r){const r=fr.getAlphanumericCode(t.charCodeAt(n+1));if(-1===r)throw new cr;e.appendBits(45*o+r,11),n+=2}else e.appendBits(o,6),n++}}static append8BitBytes(t,e,r){let n;try{n=E.encode(t,r)}catch(o){throw new cr(o)}for(let i=0,s=n.length;i!==s;i++)e.appendBits(n[i],8)}static appendKanjiBytes(t,e){let r;try{r=E.encode(t,y.SJIS)}catch(o){throw new cr(o)}const n=r.length;for(let i=0;i<n;i+=2){const t=(255&r[i])<<8&4294967295|255&r[i+1];let n=-1;if(t>=33088&&t<=40956?n=t-33088:t>=57408&&t<=60351&&(n=t-49472),-1===n)throw new cr("Invalid byte sequence");e.appendBits(192*(n>>8)+(255&n),13)}}static appendECI(t,e){e.appendBits(ye.ECI.getBits(),4),e.appendBits(t.getValue(),8)}}fr.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),fr.DEFAULT_BYTE_MODE_ENCODING=y.UTF8.getName();class gr{write(t,e,r,n=null){if(0===t.length)throw new s("Found empty contents");if(e<0||r<0)throw new s("Requested dimensions are too small: "+e+"x"+r);let o=he.L,i=gr.QUIET_ZONE_SIZE;null!==n&&(void 0!==n.get(ir.ERROR_CORRECTION)&&(o=he.fromString(n.get(ir.ERROR_CORRECTION).toString())),void 0!==n.get(ir.MARGIN)&&(i=Number.parseInt(n.get(ir.MARGIN).toString(),10)));const a=fr.encode(t,o,n);return this.renderResult(a,e,r,i)}writeToDom(t,e,r,n,o=null){"string"==typeof t&&(t=document.querySelector(t));const i=this.write(e,r,n,o);t&&t.appendChild(i)}renderResult(t,e,r,n){const o=t.getMatrix();if(null===o)throw new $;const i=o.getWidth(),s=o.getHeight(),a=i+2*n,l=s+2*n,u=Math.max(e,a),c=Math.max(r,l),h=Math.min(Math.floor(u/a),Math.floor(c/l)),d=Math.floor((u-i*h)/2),f=Math.floor((c-s*h)/2),g=this.createSVGElement(u,c);for(let p=0,w=f;p<s;p++,w+=h)for(let t=0,e=d;t<i;t++,e+=h)if(1===o.get(t,p)){const t=this.createSvgRectElement(e,w,h,h);g.appendChild(t)}return g}createSVGElement(t,e){const r=document.createElementNS(gr.SVG_NS,"svg");return r.setAttributeNS(null,"height",t.toString()),r.setAttributeNS(null,"width",e.toString()),r}createSvgRectElement(t,e,r,n){const o=document.createElementNS(gr.SVG_NS,"rect");return o.setAttributeNS(null,"x",t.toString()),o.setAttributeNS(null,"y",e.toString()),o.setAttributeNS(null,"height",r.toString()),o.setAttributeNS(null,"width",n.toString()),o.setAttributeNS(null,"fill","#000000"),o}}gr.QUIET_ZONE_SIZE=4,gr.SVG_NS="http://www.w3.org/2000/svg";class pr{encode(t,e,r,n,o){if(0===t.length)throw new s("Found empty contents");if(e!==F.QR_CODE)throw new s("Can only encode QR_CODE, but got "+e);if(r<0||n<0)throw new s(`Requested dimensions are too small: ${r}x${n}`);let i=he.L,a=pr.QUIET_ZONE_SIZE;null!==o&&(void 0!==o.get(ir.ERROR_CORRECTION)&&(i=he.fromString(o.get(ir.ERROR_CORRECTION).toString())),void 0!==o.get(ir.MARGIN)&&(a=Number.parseInt(o.get(ir.MARGIN).toString(),10)));const l=fr.encode(t,i,o);return pr.renderResult(l,r,n,a)}static renderResult(t,e,r,n){const o=t.getMatrix();if(null===o)throw new $;const i=o.getWidth(),s=o.getHeight(),a=i+2*n,l=s+2*n,u=Math.max(e,a),c=Math.max(r,l),h=Math.min(Math.floor(u/a),Math.floor(c/l)),d=Math.floor((u-i*h)/2),f=Math.floor((c-s*h)/2),g=new S(u,c);for(let p=0,w=f;p<s;p++,w+=h)for(let t=0,e=d;t<i;t++,e+=h)1===o.get(t,p)&&g.setRegion(e,w,h,h);return g}}pr.QUIET_ZONE_SIZE=4;class wr extends R{constructor(t,e,r,n,o,i,a,l){if(super(i,a),this.yuvData=t,this.dataWidth=e,this.dataHeight=r,this.left=n,this.top=o,n+i>e||o+a>r)throw new s("Crop rectangle does not fit within image data.");l&&this.reverseHorizontal(i,a)}getRow(t,e){if(t<0||t>=this.getHeight())throw new s("Requested row is outside the image: "+t);const r=this.getWidth();return(null==e||e.length<r)&&(e=new Uint8ClampedArray(r)),c.arraycopy(this.yuvData,(t+this.top)*this.dataWidth+this.left,e,0,r),e}getMatrix(){const t=this.getWidth(),e=this.getHeight();if(t===this.dataWidth&&e===this.dataHeight)return this.yuvData;const r=t*e,n=new Uint8ClampedArray(r);let o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return c.arraycopy(this.yuvData,o,n,0,r),n;for(let i=0;i<e;i++)c.arraycopy(this.yuvData,o,n,i*t,t),o+=this.dataWidth;return n}isCropSupported(){return!0}crop(t,e,r,n){return new wr(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+e,r,n,!1)}renderThumbnail(){const t=this.getWidth()/wr.THUMBNAIL_SCALE_FACTOR,e=this.getHeight()/wr.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(t*e),n=this.yuvData;let o=this.top*this.dataWidth+this.left;for(let i=0;i<e;i++){const e=i*t;for(let i=0;i<t;i++)r[e+i]=4278190080|65793*(255&n[o+i*wr.THUMBNAIL_SCALE_FACTOR]);o+=this.dataWidth*wr.THUMBNAIL_SCALE_FACTOR}return r}getThumbnailWidth(){return this.getWidth()/wr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/wr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,e){const r=this.yuvData;for(let n=0,o=this.top*this.dataWidth+this.left;n<e;n++,o+=this.dataWidth){const e=o+t/2;for(let n=o,i=o+t-1;n<e;n++,i--){const t=r[n];r[n]=r[i],r[i]=t}}}invert(){return new O(this)}}wr.THUMBNAIL_SCALE_FACTOR=2;class mr extends R{constructor(t,e,r,n,o,i,a){if(super(e,r),this.dataWidth=n,this.dataHeight=o,this.left=i,this.top=a,4===t.BYTES_PER_ELEMENT){const n=e*r,o=new Uint8ClampedArray(n);for(let e=0;e<n;e++){const r=t[e];o[e]=((r>>16&255)+(r>>7&510)+(255&r))/4&255}this.luminances=o}else this.luminances=t;if(void 0===n&&(this.dataWidth=e),void 0===o&&(this.dataHeight=r),void 0===i&&(this.left=0),void 0===a&&(this.top=0),this.left+e>this.dataWidth||this.top+r>this.dataHeight)throw new s("Crop rectangle does not fit within image data.")}getRow(t,e){if(t<0||t>=this.getHeight())throw new s("Requested row is outside the image: "+t);const r=this.getWidth();return(null==e||e.length<r)&&(e=new Uint8ClampedArray(r)),c.arraycopy(this.luminances,(t+this.top)*this.dataWidth+this.left,e,0,r),e}getMatrix(){const t=this.getWidth(),e=this.getHeight();if(t===this.dataWidth&&e===this.dataHeight)return this.luminances;const r=t*e,n=new Uint8ClampedArray(r);let o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return c.arraycopy(this.luminances,o,n,0,r),n;for(let i=0;i<e;i++)c.arraycopy(this.luminances,o,n,i*t,t),o+=this.dataWidth;return n}isCropSupported(){return!0}crop(t,e,r,n){return new mr(this.luminances,r,n,this.dataWidth,this.dataHeight,this.left+t,this.top+e)}invert(){return new O(this)}}class _r extends y{static forName(t){return this.getCharacterSetECIByName(t)}}class yr{}yr.ISO_8859_1=y.ISO8859_1;class Cr{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class Er{static singletonList(t){return[t]}static min(t,e){return t.sort(e)[0]}}class Ar extends class{constructor(t){this.previous=t}getPrevious(){return this.previous}}{constructor(t,e,r){super(t),this.value=e,this.bitCount=r}appendTo(t,e){t.appendBits(this.value,this.bitCount)}add(t,e){return new Ar(this,t,e)}addBinaryShift(t,e){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ar(this,t,e)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+g.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class vr extends Ar{constructor(t,e,r){super(t,0,0),this.binaryShiftStart=e,this.binaryShiftByteCount=r}appendTo(t,e){for(let r=0;r<this.binaryShiftByteCount;r++)(0===r||31===r&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):t.appendBits(0===r?Math.min(this.binaryShiftByteCount,31):this.binaryShiftByteCount-31,5)),t.appendBits(e[this.binaryShiftStart+r],8)}addBinaryShift(t,e){return new vr(this,t,e)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Sr(t,e,r){return new Ar(t,e,r)}const Ir=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],br=new Ar(null,0,0),Tr=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],Rr=function(t){for(let e of t)f.fill(e,-1);return t[0][4]=0,t[1][4]=0,t[1][0]=28,t[3][4]=0,t[2][4]=0,t[2][0]=15,t}(f.createInt32Array(6,6));class Or{constructor(t,e,r,n){this.token=t,this.mode=e,this.binaryShiftByteCount=r,this.bitCount=n}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,e){let r=this.bitCount,n=this.token;if(t!==this.mode){let e=Tr[this.mode][t];n=Sr(n,65535&e,e>>16),r+=e>>16}let o=2===t?4:5;return n=Sr(n,e,o),new Or(n,t,0,r+o)}shiftAndAppend(t,e){let r=this.token,n=2===this.mode?4:5;return r=Sr(r,Rr[this.mode][t],n),r=Sr(r,e,5),new Or(r,this.mode,0,this.bitCount+n+5)}addBinaryShiftChar(t){let e=this.token,r=this.mode,n=this.bitCount;if(4===this.mode||2===this.mode){let t=Tr[r][0];e=Sr(e,65535&t,t>>16),n+=t>>16,r=0}let o=new Or(e,r,this.binaryShiftByteCount+1,n+(0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8));return 2078===o.binaryShiftByteCount&&(o=o.endBinaryShift(t+1)),o}endBinaryShift(t){if(0===this.binaryShiftByteCount)return this;let e=this.token;return e=function(t,e,r){return new vr(t,e,r)}(e,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new Or(e,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let e=this.bitCount+(Tr[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?e+=Or.calculateBinaryShiftCost(t)-Or.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(e+=10),e<=t.bitCount}toBitArray(t){let e=[];for(let n=this.endBinaryShift(t.length).token;null!==n;n=n.getPrevious())e.unshift(n);let r=new p;for(const n of e)n.appendTo(r,t);return r}toString(){return A.format("%s bits=%d bytes=%d",Ir[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}Or.INITIAL_STATE=new Or(br,0,0,0);const Nr=function(t){const e=A.getCharCode(" "),r=A.getCharCode("."),n=A.getCharCode(",");t[0][e]=1;const o=A.getCharCode("Z"),i=A.getCharCode("A");for(let d=i;d<=o;d++)t[0][d]=d-i+2;t[1][e]=1;const s=A.getCharCode("z"),a=A.getCharCode("a");for(let d=a;d<=s;d++)t[1][d]=d-a+2;t[2][e]=1;const l=A.getCharCode("9"),u=A.getCharCode("0");for(let d=u;d<=l;d++)t[2][d]=d-u+2;t[2][n]=12,t[2][r]=13;const c=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"];for(let d=0;d<c.length;d++)t[3][A.getCharCode(c[d])]=d;const h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let d=0;d<h.length;d++)A.getCharCode(h[d])>0&&(t[4][A.getCharCode(h[d])]=d);return t}(f.createInt32Array(5,256));class Dr{constructor(t){this.text=t}encode(){const t=A.getCharCode(" "),e=A.getCharCode("\n");let r=Er.singletonList(Or.INITIAL_STATE);for(let n=0;n<this.text.length;n++){let o,i=n+1<this.text.length?this.text[n+1]:0;switch(this.text[n]){case A.getCharCode("\r"):o=i===e?2:0;break;case A.getCharCode("."):o=i===t?3:0;break;case A.getCharCode(","):o=i===t?4:0;break;case A.getCharCode(":"):o=i===t?5:0;break;default:o=0}o>0?(r=Dr.updateStateListForPair(r,n,o),n++):r=this.updateStateListForChar(r,n)}return Er.min(r,(t,e)=>t.getBitCount()-e.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,e){const r=[];for(let n of t)this.updateStateForChar(n,e,r);return Dr.simplifyStates(r)}updateStateForChar(t,e,r){let n=255&this.text[e],o=Nr[t.getMode()][n]>0,i=null;for(let s=0;s<=4;s++){let a=Nr[s][n];if(a>0){if(null==i&&(i=t.endBinaryShift(e)),!o||s===t.getMode()||2===s){const t=i.latchAndAppend(s,a);r.push(t)}if(!o&&Rr[t.getMode()][s]>=0){const t=i.shiftAndAppend(s,a);r.push(t)}}}if(t.getBinaryShiftByteCount()>0||0===Nr[t.getMode()][n]){let n=t.addBinaryShiftChar(e);r.push(n)}}static updateStateListForPair(t,e,r){const n=[];for(let o of t)this.updateStateForPair(o,e,r,n);return this.simplifyStates(n)}static updateStateForPair(t,e,r,n){let o=t.endBinaryShift(e);if(n.push(o.latchAndAppend(4,r)),4!==t.getMode()&&n.push(o.shiftAndAppend(4,r)),3===r||4===r){let t=o.latchAndAppend(2,16-r).latchAndAppend(2,1);n.push(t)}if(t.getBinaryShiftByteCount()>0){let r=t.addBinaryShiftChar(e).addBinaryShiftChar(e+1);n.push(r)}}static simplifyStates(t){let e=[];for(const r of t){let t=!0;for(const n of e){if(n.isBetterThanOrEqualTo(r)){t=!1;break}r.isBetterThanOrEqualTo(n)&&(e=e.filter(t=>t!==n))}t&&e.push(r)}return e}}class Mr{constructor(){}static encodeBytes(t){return Mr.encode(t,Mr.DEFAULT_EC_PERCENT,Mr.DEFAULT_AZTEC_LAYERS)}static encode(t,e,r){let n,o,i,a,l,u=new Dr(t).encode(),c=g.truncDivision(u.getSize()*e,100)+11,h=u.getSize()+c;if(r!==Mr.DEFAULT_AZTEC_LAYERS){if(n=r<0,o=Math.abs(r),o>(n?Mr.MAX_NB_BITS_COMPACT:Mr.MAX_NB_BITS))throw new s(A.format("Illegal value %s for layers",r));i=Mr.totalBitsInLayer(o,n),a=Mr.WORD_SIZE[o];let t=i-i%a;if(l=Mr.stuffBits(u,a),l.getSize()+c>t)throw new s("Data to large for user specified layer");if(n&&l.getSize()>64*a)throw new s("Data to large for user specified layer")}else{a=0,l=null;for(let t=0;;t++){if(t>Mr.MAX_NB_BITS)throw new s("Data too large for an Aztec code");if(n=t<=3,o=n?t+1:t,i=Mr.totalBitsInLayer(o,n),h>i)continue;null!=l&&a===Mr.WORD_SIZE[o]||(a=Mr.WORD_SIZE[o],l=Mr.stuffBits(u,a));let e=i-i%a;if(!(n&&l.getSize()>64*a)&&l.getSize()+c<=e)break}}let d,f=Mr.generateCheckWords(l,i,a),p=l.getSize()/a,w=Mr.generateModeMessage(n,o,p),m=(n?11:14)+4*o,_=new Int32Array(m);if(n){d=m;for(let t=0;t<_.length;t++)_[t]=t}else{d=m+1+2*g.truncDivision(g.truncDivision(m,2)-1,15);let t=g.truncDivision(m,2),e=g.truncDivision(d,2);for(let r=0;r<t;r++){let n=r+g.truncDivision(r,15);_[t-r-1]=e-n-1,_[t+r]=e+n+1}}let y=new S(d);for(let s=0,g=0;s<o;s++){let t=4*(o-s)+(n?9:12);for(let e=0;e<t;e++){let r=2*e;for(let n=0;n<2;n++)f.get(g+r+n)&&y.set(_[2*s+n],_[2*s+e]),f.get(g+2*t+r+n)&&y.set(_[2*s+e],_[m-1-2*s-n]),f.get(g+4*t+r+n)&&y.set(_[m-1-2*s-n],_[m-1-2*s-e]),f.get(g+6*t+r+n)&&y.set(_[m-1-2*s-e],_[2*s+n])}g+=8*t}if(Mr.drawModeMessage(y,n,d,w),n)Mr.drawBullsEye(y,g.truncDivision(d,2),5);else{Mr.drawBullsEye(y,g.truncDivision(d,2),7);for(let t=0,e=0;t<g.truncDivision(m,2)-1;t+=15,e+=16)for(let r=1&g.truncDivision(d,2);r<d;r+=2)y.set(g.truncDivision(d,2)-e,r),y.set(g.truncDivision(d,2)+e,r),y.set(r,g.truncDivision(d,2)-e),y.set(r,g.truncDivision(d,2)+e)}let C=new Cr;return C.setCompact(n),C.setSize(d),C.setLayers(o),C.setCodeWords(p),C.setMatrix(y),C}static drawBullsEye(t,e,r){for(let n=0;n<r;n+=2)for(let r=e-n;r<=e+n;r++)t.set(r,e-n),t.set(r,e+n),t.set(e-n,r),t.set(e+n,r);t.set(e-r,e-r),t.set(e-r+1,e-r),t.set(e-r,e-r+1),t.set(e+r,e-r),t.set(e+r,e-r+1),t.set(e+r,e+r-1)}static generateModeMessage(t,e,r){let n=new p;return t?(n.appendBits(e-1,2),n.appendBits(r-1,6),n=Mr.generateCheckWords(n,28,4)):(n.appendBits(e-1,5),n.appendBits(r-1,11),n=Mr.generateCheckWords(n,40,4)),n}static drawModeMessage(t,e,r,n){let o=g.truncDivision(r,2);if(e)for(let i=0;i<7;i++){let e=o-3+i;n.get(i)&&t.set(e,o-5),n.get(i+7)&&t.set(o+5,e),n.get(20-i)&&t.set(e,o+5),n.get(27-i)&&t.set(o-5,e)}else for(let i=0;i<10;i++){let e=o-5+i+g.truncDivision(i,5);n.get(i)&&t.set(e,o-7),n.get(i+10)&&t.set(o+7,e),n.get(29-i)&&t.set(e,o+7),n.get(39-i)&&t.set(o-7,e)}}static generateCheckWords(t,e,r){let n=t.getSize()/r,o=new sr(Mr.getGF(r)),i=g.truncDivision(e,r),s=Mr.bitsToWords(t,r,i);o.encode(s,i-n);let a=e%r,l=new p;l.appendBits(0,a);for(const u of Array.from(s))l.appendBits(u,r);return l}static bitsToWords(t,e,r){let n,o,i=new Int32Array(r);for(n=0,o=t.getSize()/e;n<o;n++){let r=0;for(let o=0;o<e;o++)r|=t.get(n*e+o)?1<<e-o-1:0;i[n]=r}return i}static getGF(t){switch(t){case 4:return K.AZTEC_PARAM;case 6:return K.AZTEC_DATA_6;case 8:return K.AZTEC_DATA_8;case 10:return K.AZTEC_DATA_10;case 12:return K.AZTEC_DATA_12;default:throw new s("Unsupported word size "+t)}}static stuffBits(t,e){let r=new p,n=t.getSize(),o=(1<<e)-2;for(let i=0;i<n;i+=e){let s=0;for(let r=0;r<e;r++)(i+r>=n||t.get(i+r))&&(s|=1<<e-1-r);(s&o)===o?(r.appendBits(s&o,e),i--):0==(s&o)?(r.appendBits(1|s,e),i--):r.appendBits(s,e)}return r}static totalBitsInLayer(t,e){return((e?88:112)+16*t)*t}}Mr.DEFAULT_EC_PERCENT=33,Mr.DEFAULT_AZTEC_LAYERS=0,Mr.MAX_NB_BITS=32,Mr.MAX_NB_BITS_COMPACT=4,Mr.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Pr{encode(t,e,r,n){return this.encodeWithHints(t,e,r,n,null)}encodeWithHints(t,e,r,n,o){let i=yr.ISO_8859_1,s=Mr.DEFAULT_EC_PERCENT,a=Mr.DEFAULT_AZTEC_LAYERS;return null!=o&&(o.has(ir.CHARACTER_SET)&&(i=_r.forName(o.get(ir.CHARACTER_SET).toString())),o.has(ir.ERROR_CORRECTION)&&(s=g.parseInt(o.get(ir.ERROR_CORRECTION).toString())),o.has(ir.AZTEC_LAYERS)&&(a=g.parseInt(o.get(ir.AZTEC_LAYERS).toString()))),Pr.encodeLayers(t,e,r,n,i,s,a)}static encodeLayers(t,e,r,n,o,i,a){if(e!==F.AZTEC)throw new s("Can only encode AZTEC, but got "+e);let l=Mr.encode(A.getBytes(t,o),i,a);return Pr.renderResult(l,r,n)}static renderResult(t,e,r){let n=t.getMatrix();if(null==n)throw new $;let o=n.getWidth(),i=n.getHeight(),s=Math.max(e,o),a=Math.max(r,i),l=Math.min(s/o,a/i),u=(s-o*l)/2,c=(a-i*l)/2,h=new S(s,a);for(let d=0,f=c;d<i;d++,f+=l)for(let t=0,e=u;t<o;t++,e+=l)n.get(t,d)&&h.setRegion(e,f,l,l);return h}}t.ArgumentException=i,t.ArithmeticException=Z,t.AztecCode=Cr,t.AztecCodeReader=dt,t.AztecCodeWriter=Pr,t.AztecDecoder=J,t.AztecDetector=ht,t.AztecDetectorResult=ot,t.AztecEncoder=Mr,t.AztecHighLevelEncoder=Dr,t.AztecPoint=ct,t.BarcodeFormat=F,t.Binarizer=u,t.BinaryBitmap=a,t.BitArray=p,t.BitMatrix=S,t.BitSource=se,t.BrowserAztecCodeReader=class extends B{constructor(t=500){super(new dt,t)}},t.BrowserBarcodeReader=class extends B{constructor(t=500,e){super(new te(e),t,e)}},t.BrowserCodeReader=B,t.BrowserDatamatrixCodeReader=class extends B{constructor(t=500){super(new ce,t)}},t.BrowserMultiFormatReader=class extends B{constructor(t=null,e=500){const r=new nr;r.setHints(t),super(r,e)}decodeBitmap(t){return this.reader.decodeWithState(t)}},t.BrowserPDF417Reader=class extends B{constructor(t=500){super(new er,t)}},t.BrowserQRCodeReader=class extends B{constructor(t=500){super(new Oe,t)}},t.BrowserQRCodeSvgWriter=gr,t.CharacterSetECI=y,t.ChecksumException=l,t.Code128Reader=gt,t.Code39Reader=pt,t.DataMatrixDecodedBitStreamParser=ae,t.DataMatrixReader=ce,t.DecodeHintType=m,t.DecoderResult=X,t.DefaultGridSampler=lt,t.DetectorResult=nt,t.EAN13Reader=At,t.EncodeHintType=ir,t.Exception=o,t.FormatException=_,t.GenericGF=K,t.GenericGFPoly=Y,t.GlobalHistogramBinarizer=b,t.GridSampler=st,t.GridSamplerInstance=ut,t.HTMLCanvasElementLuminanceSource=N,t.HybridBinarizer=T,t.ITFReader=wt,t.IllegalArgumentException=s,t.IllegalStateException=$,t.InvertedLuminanceSource=O,t.LuminanceSource=R,t.MathUtils=tt,t.MultiFormatOneDReader=te,t.MultiFormatReader=nr,t.MultiFormatWriter=class{encode(t,e,r,n,o){let i;switch(e){case F.QR_CODE:i=new pr;break;default:throw new s("No encoder available for format "+e)}return i.encode(t,e,r,n,o)}},t.NotFoundException=I,t.OneDReader=ft,t.PDF417DecodedBitStreamParser=Je,t.PDF417DecoderErrorCorrection=Le,t.PDF417Reader=er,t.PDF417ResultMetadata=Xe,t.PerspectiveTransform=at,t.PlanarYUVLuminanceSource=wr,t.QRCodeByteMatrix=lr,t.QRCodeDataMask=we,t.QRCodeDecodedBitStreamParser=Ce,t.QRCodeDecoderErrorCorrectionLevel=he,t.QRCodeDecoderFormatInformation=de,t.QRCodeEncoder=fr,t.QRCodeEncoderQRCode=ur,t.QRCodeMaskUtil=ar,t.QRCodeMatrixUtil=hr,t.QRCodeMode=ye,t.QRCodeReader=Oe,t.QRCodeVersion=pe,t.QRCodeWriter=pr,t.RGBLuminanceSource=mr,t.RSS14Reader=Jt,t.RSSExpandedReader=$t,t.ReaderException=rr,t.ReedSolomonDecoder=Q,t.ReedSolomonEncoder=sr,t.ReedSolomonException=q,t.Result=L,t.ResultMetadataType=z,t.ResultPoint=rt,t.StringUtils=A,t.UnsupportedOperationException=C,t.VideoInputDevice=D,t.WhiteRectangleDetector=it,t.WriterException=cr,t.ZXingArrays=f,t.ZXingCharset=_r,t.ZXingInteger=g,t.ZXingStandardCharsets=yr,t.ZXingStringBuilder=v,t.ZXingStringEncoding=E,t.ZXingSystem=c,Object.defineProperty(t,"__esModule",{value:!0})}(e)},R7y3:function(t,e,r){!function(t){"use strict";var e,r,n=(e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,r)},function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}),o=function(t){function e(e){var r,n,o,i=this.constructor,s=t.call(this,e)||this;return Object.defineProperty(s,"name",{value:i.name,enumerable:!1,configurable:!0}),r=s,n=i.prototype,(o=Object.setPrototypeOf)?o(r,n):r.__proto__=n,function(t,e){void 0===e&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}(s),s}return n(e,t),e}(Error),i=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),s=function(t){function e(e){void 0===e&&(e=void 0);var r=t.call(this,e)||this;return r.message=e,r}return i(e,t),e}(o),a=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e}(s),u=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e}(s),h=function(){function t(t){if(this.binarizer=t,null===t)throw new c("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(t,e){return this.binarizer.getBlackRow(t,e)},t.prototype.getBlackMatrix=function(){return null==this.matrix&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,o){var i=this.binarizer.getLuminanceSource().crop(e,r,n,o);return new t(this.binarizer.createBinarizer(i))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch(t){return""}},t}(),d=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.getChecksumInstance=function(){return new e},e}(s),g=function(){function t(t){this.source=t}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),p=function(){function t(){}return t.arraycopy=function(t,e,r,n,o){for(;o--;)r[n++]=t[e++]},t.currentTimeMillis=function(){return Date.now()},t}(),w=function(){function t(){}return t.numberOfTrailingZeros=function(t){var e;if(0===t)return 32;var r=31;return 0!=(e=t<<16)&&(r-=16,t=e),0!=(e=t<<8)&&(r-=8,t=e),0!=(e=t<<4)&&(r-=4,t=e),0!=(e=t<<2)&&(r-=2,t=e),r-(t<<1>>>31)},t.numberOfLeadingZeros=function(t){if(0===t)return 32;var e=1;return t>>>16==0&&(e+=16,t<<=16),t>>>24==0&&(e+=8,t<<=8),t>>>28==0&&(e+=4,t<<=4),t>>>30==0&&(e+=2,t<<=2),e-(t>>>31)},t.toHexString=function(t){return t.toString(16)},t.toBinaryString=function(t){return String(parseInt(String(t),2))},t.bitCount=function(t){return t=(t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135,63&(t+=t>>>8)+(t>>>16)},t.truncDivision=function(t,e){return Math.trunc(t/e)},t.parseInt=function(t,e){return void 0===e&&(e=void 0),parseInt(t,e)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),m=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e}(s),y=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),C=function(t){function e(e,r){void 0===e&&(e=void 0),void 0===r&&(r=void 0);var n=t.call(this,r)||this;return n.index=e,n.message=r,n}return y(e,t),e}(_),E=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A=function(){function t(){}return t.fill=function(t,e){for(var r=0,n=t.length;r<n;r++)t[r]=e},t.fillWithin=function(e,r,n,o){t.rangeCheck(e.length,r,n);for(var i=r;i<n;i++)e[i]=o},t.rangeCheck=function(t,e,r){if(e>r)throw new c("fromIndex("+e+") > toIndex("+r+")");if(e<0)throw new C(e);if(r>t)throw new C(r)},t.asList=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},t.create=function(t,e,r){return Array.from({length:t}).map(function(t){return Array.from({length:e}).fill(r)})},t.createInt32Array=function(t,e,r){return Array.from({length:t}).map(function(t){return Int32Array.from({length:e}).fill(r)})},t.equals=function(t,e){if(!t)return!1;if(!e)return!1;if(!t.length)return!1;if(!e.length)return!1;if(t.length!==e.length)return!1;for(var r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0},t.hashCode=function(t){var e,r;if(null===t)return 0;var n=1;try{for(var o=E(t),i=o.next();!i.done;i=o.next())n=31*n+i.value}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},t.fillUint8Array=function(t,e){for(var r=0;r!==t.length;r++)t[r]=e},t.copyOf=function(t,e){return t.slice(0,e)},t.copyOfUint8Array=function(t,e){if(t.length<=e){var r=new Uint8Array(e);return r.set(t),r}return t.slice(0,e)},t.copyOfRange=function(t,e,r){var n=r-e,o=new Int32Array(n);return p.arraycopy(t,e,o,0,n),o},t.binarySearch=function(e,r,n){void 0===n&&(n=t.numberComparator);for(var o=0,i=e.length-1;o<=i;){var s=i+o>>1,a=n(r,e[s]);if(a>0)o=s+1;else{if(!(a<0))return s;i=s-1}}return-o-1},t.numberComparator=function(t,e){return t-e},t}(),v=function(){function t(e,r){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=null==r?t.makeArray(e):r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>32*this.bits.length){var r=t.makeArray(e);p.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(t){return 0!=(this.bits[Math.floor(t/32)]&1<<(31&t))},t.prototype.set=function(t){this.bits[Math.floor(t/32)]|=1<<(31&t)},t.prototype.flip=function(t){this.bits[Math.floor(t/32)]^=1<<(31&t)},t.prototype.getNextSet=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,n=Math.floor(t/32),o=r[n];o&=~((1<<(31&t))-1);for(var i=r.length;0===o;){if(++n===i)return e;o=r[n]}var s=32*n+w.numberOfTrailingZeros(o);return s>e?e:s},t.prototype.getNextUnset=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,n=Math.floor(t/32),o=~r[n];o&=~((1<<(31&t))-1);for(var i=r.length;0===o;){if(++n===i)return e;o=~r[n]}var s=32*n+w.numberOfTrailingZeros(o);return s>e?e:s},t.prototype.setBulk=function(t,e){this.bits[Math.floor(t/32)]=e},t.prototype.setRange=function(t,e){if(e<t||t<0||e>this.size)throw new c;if(e!==t){e--;for(var r=Math.floor(t/32),n=Math.floor(e/32),o=this.bits,i=r;i<=n;i++)o[i]|=(2<<(i<n?31:31&e))-(1<<(i>r?0:31&t))}},t.prototype.clear=function(){for(var t=this.bits.length,e=this.bits,r=0;r<t;r++)e[r]=0},t.prototype.isRange=function(t,e,r){if(e<t||t<0||e>this.size)throw new c;if(e===t)return!0;e--;for(var n=Math.floor(t/32),o=Math.floor(e/32),i=this.bits,s=n;s<=o;s++){var a=(2<<(s<o?31:31&e))-(1<<(s>n?0:31&t))&4294967295;if((i[s]&a)!==(r?a:0))return!1}return!0},t.prototype.appendBit=function(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++},t.prototype.appendBits=function(t,e){if(e<0||e>32)throw new c("Num bits must be between 0 and 32");this.ensureCapacity(this.size+e);for(var r=e;r>0;r--)this.appendBit(1==(t>>r-1&1))},t.prototype.appendBitArray=function(t){var e=t.size;this.ensureCapacity(this.size+e);for(var r=0;r<e;r++)this.appendBit(t.get(r))},t.prototype.xor=function(t){if(this.size!==t.size)throw new c("Sizes don't match");for(var e=this.bits,r=0,n=e.length;r<n;r++)e[r]^=t.bits[r]},t.prototype.toBytes=function(t,e,r,n){for(var o=0;o<n;o++){for(var i=0,s=0;s<8;s++)this.get(t)&&(i|=1<<7-s),t++;e[r+o]=i}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var t=new Int32Array(this.bits.length),e=Math.floor((this.size-1)/32),r=e+1,n=this.bits,o=0;o<r;o++){var i=n[o];t[e-o]=i=(i=(i=(i=(i=i>>1&1431655765|(1431655765&i)<<1)>>2&858993459|(858993459&i)<<2)>>4&252645135|(252645135&i)<<4)>>8&16711935|(16711935&i)<<8)>>16&65535|(65535&i)<<16}if(this.size!==32*r){var s=32*r-this.size,a=t[0]>>>s;for(o=1;o<r;o++){var l=t[o];t[o-1]=a|=l<<32-s,a=l>>>s}t[r-1]=a}this.bits=t},t.makeArray=function(t){return new Int32Array(Math.floor((t+31)/32))},t.prototype.equals=function(e){return e instanceof t&&this.size===e.size&&A.equals(this.bits,e.bits)},t.prototype.hashCode=function(){return 31*this.size+A.hashCode(this.bits)},t.prototype.toString=function(){for(var t="",e=0,r=this.size;e<r;e++)0==(7&e)&&(t+=" "),t+=this.get(e)?"X":".";return t},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t}();!function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ASSUME_GS1=7]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(r||(r={}));var S,I=r,b=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return b(e,t),e.getFormatInstance=function(){return new e},e}(s),R=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"}(S||(S={}));var O,N=function(){function t(e,r,n){for(var o,i,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];this.valueIdentifier=e,this.name=n,this.values="number"==typeof r?Int32Array.from([r]):r,this.otherEncodingNames=s,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var l=this.values,u=0,c=l.length;u!==c;u++){var h=l[u];t.VALUES_TO_ECI.set(h,this)}try{for(var d=R(s),f=d.next();!f.done;f=d.next()){var g=f.value;t.NAME_TO_ECI.set(g,this)}}catch(p){o={error:p}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new T("incorect value");var r=t.VALUES_TO_ECI.get(e);if(void 0===r)throw new T("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(void 0===r)throw new T("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(S.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(S.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(S.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(S.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(S.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(S.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(S.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(S.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(S.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(S.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(S.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(S.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(S.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(S.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(S.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(S.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(S.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(S.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(S.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(S.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(S.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(S.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(S.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(S.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(S.Big5,28,"Big5"),t.GB18030=new t(S.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(S.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),D=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return D(e,t),e}(s),P=function(){function t(){}return t.decode=function(t,e){var r=this.encodingName(e);return this.customDecoder?this.customDecoder(t,r):"undefined"==typeof TextDecoder||this.shouldDecodeOnFallback(r)?this.decodeFallback(t,r):new TextDecoder(r).decode(t)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&"ISO-8859-1"===e},t.encode=function(t,e){var r=this.encodingName(e);return this.customEncoder?this.customEncoder(t,r):"undefined"==typeof TextEncoder?this.encodeFallback(t):(new TextEncoder).encode(t)},t.isBrowser=function(){return"undefined"!=typeof window&&"[object Window]"==={}.toString.call(window)},t.encodingName=function(t){return"string"==typeof t?t:t.getName()},t.encodingCharacterSet=function(t){return t instanceof N?t:N.getCharacterSetECIByName(t)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var o="",i=0,s=e.length;i<s;i++){var a=e[i].toString(16);a.length<2&&(a="0"+a),o+="%"+a}return decodeURIComponent(o)}if(n.equals(N.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new M("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(t){return t.equals(N.UTF8)||t.equals(N.ISO8859_1)||t.equals(N.ASCII)},t.encodeFallback=function(t){for(var e=btoa(unescape(encodeURIComponent(t))).split(""),r=[],n=0;n<e.length;n++)r.push(e[n].charCodeAt(0));return new Uint8Array(r)},t}(),B=function(){function t(){}return t.castAsNonUtf8Char=function(t,e){void 0===e&&(e=null);var r=e?e.getName():this.ISO88591;return P.decode(new Uint8Array([t]),r)},t.guessEncoding=function(e,r){if(null!=r&&void 0!==r.get(I.CHARACTER_SET))return r.get(I.CHARACTER_SET).toString();for(var n=e.length,o=!0,i=!0,s=!0,a=0,l=0,u=0,c=0,h=0,d=0,f=0,g=0,p=0,w=0,m=0,_=e.length>3&&239===e[0]&&187===e[1]&&191===e[2],y=0;y<n&&(o||i||s);y++){var C=255&e[y];s&&(a>0?0==(128&C)?s=!1:a--:0!=(128&C)&&(0==(64&C)?s=!1:(a++,0==(32&C)?l++:(a++,0==(16&C)?u++:(a++,0==(8&C)?c++:s=!1))))),o&&(C>127&&C<160?o=!1:C>159&&(C<192||215===C||247===C)&&m++),i&&(h>0?C<64||127===C||C>252?i=!1:h--:128===C||160===C||C>239?i=!1:C>160&&C<224?(d++,g=0,++f>p&&(p=f)):C>127?(h++,f=0,++g>w&&(w=g)):(f=0,g=0))}return s&&a>0&&(s=!1),i&&h>0&&(i=!1),s&&(_||l+u+c>0)?t.UTF8:i&&(t.ASSUME_SHIFT_JIS||p>=3||w>=3)?t.SHIFT_JIS:o&&i?2===p&&2===d||10*m>=n?t.SHIFT_JIS:t.ISO88591:o?t.ISO88591:i?t.SHIFT_JIS:s?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=-1;function o(t,r,o,i,s,a){if("%%"===t)return"%";if(void 0!==e[++n]){t=i?parseInt(i.substr(1)):void 0;var l,u=s?parseInt(s.substr(1)):void 0;switch(a){case"s":l=e[n];break;case"c":l=e[n][0];break;case"f":l=parseFloat(e[n]).toFixed(t);break;case"p":l=parseFloat(e[n]).toPrecision(t);break;case"e":l=parseFloat(e[n]).toExponential(t);break;case"x":l=parseInt(e[n]).toString(u||16);break;case"d":l=parseFloat(parseInt(e[n],u||10).toPrecision(t)).toFixed(0)}l="object"==typeof l?JSON.stringify(l):(+l).toString(u);for(var c=parseInt(o),h=o&&o[0]+""=="0"?"0":" ";l.length<c;)l=void 0!==r?l+h:h+l;return l}}var i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(i,o)},t.getBytes=function(t,e){return P.encode(t,e)},t.getCharCode=function(t,e){return void 0===e&&(e=0),t.charCodeAt(e)},t.getCharAt=function(t){return String.fromCharCode(t)},t.SHIFT_JIS=N.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=N.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=N.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),L=function(){function t(t){void 0===t&&(t=""),this.value=t}return t.prototype.enableDecoding=function(t){return this.encoding=t,this},t.prototype.append=function(t){return this.value+="string"==typeof t?t.toString():this.encoding?B.castAsNonUtf8Char(t,this.encoding):String.fromCharCode(t),this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(t){return this.value.charAt(t)},t.prototype.deleteCharAt=function(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)},t.prototype.setCharAt=function(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+1)},t.prototype.substring=function(t,e){return this.value.substring(t,e)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+e.length)},t}(),x=function(){function t(t,e,r,n){if(this.width=t,this.height=e,this.rowSize=r,this.bits=n,null==e&&(e=t),this.height=e,t<1||e<1)throw new c("Both dimensions must be greater than 0");null==r&&(r=Math.floor((t+31)/32)),this.rowSize=r,null==n&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,o=new t(n,r),i=0;i<r;i++)for(var s=e[i],a=0;a<n;a++)s[a]&&o.set(a,i);return o},t.parseFromString=function(e,r,n){if(null===e)throw new c("stringRepresentation cannot be null");for(var o=new Array(e.length),i=0,s=0,a=-1,l=0,u=0;u<e.length;)if("\n"===e.charAt(u)||"\r"===e.charAt(u)){if(i>s){if(-1===a)a=i-s;else if(i-s!==a)throw new c("row lengths do not match");s=i,l++}u++}else if(e.substring(u,u+r.length)===r)u+=r.length,o[i]=!0,i++;else{if(e.substring(u,u+n.length)!==n)throw new c("illegal character encountered: "+e.substring(u));u+=n.length,o[i]=!1,i++}if(i>s){if(-1===a)a=i-s;else if(i-s!==a)throw new c("row lengths do not match");l++}for(var h=new t(a,l),d=0;d<i;d++)o[d]&&h.set(Math.floor(d%a),Math.floor(d/a));return h},t.prototype.get=function(t,e){var r=e*this.rowSize+Math.floor(t/32);return 0!=(this.bits[r]>>>(31&t)&1)},t.prototype.set=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]|=1<<(31&t)&4294967295},t.prototype.unset=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]&=~(1<<(31&t)&4294967295)},t.prototype.flip=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]^=1<<(31&t)&4294967295},t.prototype.xor=function(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new c("input matrix dimensions do not match");for(var e=new v(Math.floor(this.width/32)+1),r=this.rowSize,n=this.bits,o=0,i=this.height;o<i;o++)for(var s=o*r,a=t.getRow(o,e).getBitArray(),l=0;l<r;l++)n[s+l]^=a[l]},t.prototype.clear=function(){for(var t=this.bits,e=t.length,r=0;r<e;r++)t[r]=0},t.prototype.setRegion=function(t,e,r,n){if(e<0||t<0)throw new c("Left and top must be nonnegative");if(n<1||r<1)throw new c("Height and width must be at least 1");var o=t+r,i=e+n;if(i>this.height||o>this.width)throw new c("The region must fit inside the matrix");for(var s=this.rowSize,a=this.bits,l=e;l<i;l++)for(var u=l*s,h=t;h<o;h++)a[u+Math.floor(h/32)]|=1<<(31&h)&4294967295},t.prototype.getRow=function(t,e){null==e||e.getSize()<this.width?e=new v(this.width):e.clear();for(var r=this.rowSize,n=this.bits,o=t*r,i=0;i<r;i++)e.setBulk(32*i,n[o+i]);return e},t.prototype.setRow=function(t,e){p.arraycopy(e.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var t=this.getWidth(),e=this.getHeight(),r=new v(t),n=new v(t),o=0,i=Math.floor((e+1)/2);o<i;o++)r=this.getRow(o,r),n=this.getRow(e-1-o,n),r.reverse(),n.reverse(),this.setRow(o,n),this.setRow(e-1-o,r)},t.prototype.getEnclosingRectangle=function(){for(var t=this.height,e=this.rowSize,r=this.bits,n=this.width,o=t,i=-1,s=-1,a=0;a<t;a++)for(var l=0;l<e;l++){var u=r[a*e+l];if(0!==u){if(a<o&&(o=a),a>s&&(s=a),32*l<n){for(var c=0;0==(u<<31-c&4294967295);)c++;32*l+c<n&&(n=32*l+c)}if(32*l+31>i){for(c=31;u>>>c==0;)c--;32*l+c>i&&(i=32*l+c)}}}return i<n||s<o?null:Int32Array.from([n,o,i-n+1,s-o+1])},t.prototype.getTopLeftOnBit=function(){for(var t=this.rowSize,e=this.bits,r=0;r<e.length&&0===e[r];)r++;if(r===e.length)return null;for(var n=r/t,o=r%t*32,i=e[r],s=0;0==(i<<31-s&4294967295);)s++;return Int32Array.from([o+=s,n])},t.prototype.getBottomRightOnBit=function(){for(var t=this.rowSize,e=this.bits,r=e.length-1;r>=0&&0===e[r];)r--;if(r<0)return null;for(var n=Math.floor(r/t),o=32*Math.floor(r%t),i=e[r],s=31;i>>>s==0;)s--;return Int32Array.from([o+=s,n])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){return e instanceof t&&this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&A.equals(this.bits,e.bits)},t.prototype.hashCode=function(){var t=this.width;return 31*(t=31*(t=31*(t=31*t+this.width)+this.height)+this.rowSize)+A.hashCode(this.bits)},t.prototype.toString=function(t,e,r){return void 0===t&&(t="X "),void 0===e&&(e="  "),void 0===r&&(r="\n"),this.buildToString(t,e,r)},t.prototype.buildToString=function(t,e,r){for(var n=new L,o=0,i=this.height;o<i;o++){for(var s=0,a=this.width;s<a;s++)n.append(this.get(s,o)?t:e);n.append(r)}return n.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),F=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.getNotFoundInstance=function(){return new e},e}(s),V=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),U=function(t){function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return V(e,t),e.prototype.getBlackRow=function(t,r){var n=this.getLuminanceSource(),o=n.getWidth();null==r||r.getSize()<o?r=new v(o):r.clear(),this.initArrays(o);for(var i=n.getRow(t,this.luminances),s=this.buckets,a=0;a<o;a++)s[(255&i[a])>>e.LUMINANCE_SHIFT]++;var l=e.estimateBlackPoint(s);if(o<3)for(a=0;a<o;a++)(255&i[a])<l&&r.set(a);else{var u=255&i[0],c=255&i[1];for(a=1;a<o-1;a++){var h=255&i[a+1];(4*c-u-h)/2<l&&r.set(a),u=c,c=h}}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),n=t.getHeight(),o=new x(r,n);this.initArrays(r);for(var i=this.buckets,s=1;s<5;s++)for(var a=Math.floor(n*s/5),l=t.getRow(a,this.luminances),u=Math.floor(4*r/5),c=Math.floor(r/5);c<u;c++)i[(255&l[c])>>e.LUMINANCE_SHIFT]++;var h=e.estimateBlackPoint(i),d=t.getMatrix();for(s=0;s<n;s++){var f=s*r;for(c=0;c<r;c++)(255&d[f+c])<h&&o.set(c,s)}return o},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,n=0;n<e.LUMINANCE_BUCKETS;n++)r[n]=0},e.estimateBlackPoint=function(t){for(var r=t.length,n=0,o=0,i=0,s=0;s<r;s++)t[s]>i&&(o=s,i=t[s]),t[s]>n&&(n=t[s]);var a=0,l=0;for(s=0;s<r;s++){var u=s-o;(f=t[s]*u*u)>l&&(a=s,l=f)}if(o>a){var c=o;o=a,a=c}if(a-o<=r/16)throw new k;var h=a-1,d=-1;for(s=a-1;s>o;s--){var f,g=s-o;(f=g*g*(a-s)*(n-t[s]))>d&&(h=s,d=f)}return h<<e.LUMINANCE_SHIFT},e.LUMINANCE_SHIFT=8-(e.LUMINANCE_BITS=5),e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(g),H=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),G=function(t){function e(e){var r=t.call(this,e)||this;return r.matrix=null,r}return H(e,t),e.prototype.getBlackMatrix=function(){if(null!==this.matrix)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),o=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&o>=e.MINIMUM_DIMENSION){var i=r.getMatrix(),s=n>>e.BLOCK_SIZE_POWER;0!=(n&e.BLOCK_SIZE_MASK)&&s++;var a=o>>e.BLOCK_SIZE_POWER;0!=(o&e.BLOCK_SIZE_MASK)&&a++;var l=e.calculateBlackPoints(i,s,a,n,o),u=new x(n,o);e.calculateThresholdForBlock(i,s,a,n,o,l,u),this.matrix=u}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,n,o,i,s,a){for(var l=i-e.BLOCK_SIZE,u=o-e.BLOCK_SIZE,c=0;c<n;c++){var h=c<<e.BLOCK_SIZE_POWER;h>l&&(h=l);for(var d=e.cap(c,2,n-3),f=0;f<r;f++){var g=f<<e.BLOCK_SIZE_POWER;g>u&&(g=u);for(var p=e.cap(f,2,r-3),w=0,m=-2;m<=2;m++){var _=s[d+m];w+=_[p-2]+_[p-1]+_[p]+_[p+1]+_[p+2]}e.thresholdBlock(t,g,h,w/25,o,a)}}},e.cap=function(t,e,r){return t<e?e:t>r?r:t},e.thresholdBlock=function(t,r,n,o,i,s){for(var a=0,l=n*i+r;a<e.BLOCK_SIZE;a++,l+=i)for(var u=0;u<e.BLOCK_SIZE;u++)(255&t[l+u])<=o&&s.set(r+u,n+a)},e.calculateBlackPoints=function(t,r,n,o,i){for(var s=i-e.BLOCK_SIZE,a=o-e.BLOCK_SIZE,l=new Array(n),u=0;u<n;u++){l[u]=new Int32Array(r);var c=u<<e.BLOCK_SIZE_POWER;c>s&&(c=s);for(var h=0;h<r;h++){var d=h<<e.BLOCK_SIZE_POWER;d>a&&(d=a);for(var f=0,g=255,p=0,w=0,m=c*o+d;w<e.BLOCK_SIZE;w++,m+=o){for(var _=0;_<e.BLOCK_SIZE;_++){var y=255&t[m+_];f+=y,y<g&&(g=y),y>p&&(p=y)}if(p-g>e.MIN_DYNAMIC_RANGE)for(w++,m+=o;w<e.BLOCK_SIZE;w++,m+=o)for(_=0;_<e.BLOCK_SIZE;_++)f+=255&t[m+_]}var C=f>>2*e.BLOCK_SIZE_POWER;if(p-g<=e.MIN_DYNAMIC_RANGE&&(C=g/2,u>0&&h>0)){var E=(l[u-1][h]+2*l[u][h-1]+l[u-1][h-1])/4;g<E&&(C=E)}l[u][h]=C}}return l},e.BLOCK_SIZE_MASK=(e.BLOCK_SIZE=1<<(e.BLOCK_SIZE_POWER=3))-1,e.MINIMUM_DIMENSION=5*e.BLOCK_SIZE,e.MIN_DYNAMIC_RANGE=24,e}(U),W=function(){function t(t,e){this.width=t,this.height=e}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(t,e,r,n){throw new M("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new M("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new M("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var t=new Uint8ClampedArray(this.width),e=new L,r=0;r<this.height;r++){for(var n=this.getRow(r,t),o=0;o<this.width;o++){var i=255&n[o];e.append(i<64?"#":i<128?"+":i<192?".":" ")}e.append("\n")}return e.toString()},t}(),z=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),X=function(t){function e(e){var r=t.call(this,e.getWidth(),e.getHeight())||this;return r.delegate=e,r}return z(e,t),e.prototype.getRow=function(t,e){for(var r=this.delegate.getRow(t,e),n=this.getWidth(),o=0;o<n;o++)r[o]=255-(255&r[o]);return r},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),e=this.getWidth()*this.getHeight(),r=new Uint8ClampedArray(e),n=0;n<e;n++)r[n]=255-(255&t[n]);return r},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,n,o){return new e(this.delegate.crop(t,r,n,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(W),j=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y=function(t){function e(r){var n=t.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(r),n}return j(e,t),e.makeBufferFromCanvasImageData=function(t){var r=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(r.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,e,r){for(var n=new Uint8ClampedArray(e*r),o=0,i=0,s=t.length;o<s;o+=4,i++)n[i]=0===t[o+3]?255:306*t[o]+601*t[o+1]+117*t[o+2]+512>>10;return n},e.prototype.getRow=function(t,e){if(t<0||t>=this.getHeight())throw new c("Requested row is outside the image: "+t);var r=this.getWidth(),n=t*r;return null===e?e=this.buffer.slice(n,n+r):(e.length<r&&(e=new Uint8ClampedArray(r)),e.set(this.buffer.slice(n,n+r))),e},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(e,r,n,o){return t.prototype.crop.call(this,e,r,n,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),n=r.getContext("2d"),o=t*e.DEGREE_TO_RADIANS,i=this.canvas.width,s=this.canvas.height,a=Math.ceil(Math.abs(Math.cos(o))*i+Math.abs(Math.sin(o))*s),l=Math.ceil(Math.abs(Math.sin(o))*i+Math.abs(Math.cos(o))*s);return r.width=a,r.height=l,n.translate(a/2,l/2),n.rotate(o),n.drawImage(this.canvas,i/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new X(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e}(W),Z=function(){function t(t,e,r){this.deviceId=t,this.label=e,this.kind="videoinput",this.groupId=r||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),K=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__awaiter:void 0)||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function s(t){try{l(n.next(t))}catch(e){i(e)}}function a(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(s,a)}l((n=n.apply(t,e||[])).next())})},q=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__generator:void 0)||function(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},$=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Q=function(){function t(t,e,r){void 0===e&&(e=500),this.reader=t,this.timeBetweenScansMillis=e,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return"undefined"!=typeof navigator},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(t){this._timeBetweenDecodingAttempts=t<0?0:t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(t){this._hints=t||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return K(this,void 0,void 0,function(){var t,e,r,n,o,i,s,a;return q(this,function(l){switch(l.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:t=l.sent(),e=[];try{for(r=$(t),n=r.next();!n.done;n=r.next())"videoinput"===(i="video"===(o=n.value).kind?"videoinput":o.kind)&&e.push({deviceId:o.deviceId||o.id,label:o.label||"Video device "+(e.length+1),kind:i,groupId:o.groupId})}catch(u){s={error:u}}finally{try{n&&!n.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}}return[2,e]}})})},t.prototype.getVideoInputDevices=function(){return K(this,void 0,void 0,function(){return q(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return[2,t.sent().map(function(t){return new Z(t.deviceId,t.label)})]}})})},t.prototype.findDeviceById=function(t){return K(this,void 0,void 0,function(){var e;return q(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return(e=r.sent())?[2,e.find(function(e){return e.deviceId===t})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(t,e){return K(this,void 0,void 0,function(){return q(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(t,e)];case 1:return[2,r.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(t,e){return K(this,void 0,void 0,function(){return q(this,function(r){switch(r.label){case 0:return this.reset(),[4,this.decodeOnceFromConstraints({video:t?{deviceId:{exact:t}}:{facingMode:"environment"}},e)];case 1:return[2,r.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(t,e){return K(this,void 0,void 0,function(){var r;return q(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=n.sent(),[4,this.decodeOnceFromStream(r,e)];case 2:return[2,n.sent()]}})})},t.prototype.decodeOnceFromStream=function(t,e){return K(this,void 0,void 0,function(){var r;return q(this,function(n){switch(n.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return r=n.sent(),[4,this.decodeOnce(r)];case 2:return[2,n.sent()]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(t,e,r){return K(this,void 0,void 0,function(){return q(this,function(n){switch(n.label){case 0:return[4,this.decodeFromVideoDevice(t,e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromVideoDevice=function(t,e,r){return K(this,void 0,void 0,function(){return q(this,function(n){switch(n.label){case 0:return[4,this.decodeFromConstraints({video:t?{deviceId:{exact:t}}:{facingMode:"environment"}},e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromConstraints=function(t,e,r){return K(this,void 0,void 0,function(){var n;return q(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return n=o.sent(),[4,this.decodeFromStream(n,e,r)];case 2:return[2,o.sent()]}})})},t.prototype.decodeFromStream=function(t,e,r){return K(this,void 0,void 0,function(){var n;return q(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return n=o.sent(),[4,this.decodeContinuously(n,r)];case 2:return[2,o.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(t,e){return K(this,void 0,void 0,function(){var r;return q(this,function(n){switch(n.label){case 0:return r=this.prepareVideoElement(e),this.addVideoSource(r,t),this.videoElement=r,this.stream=t,[4,this.playVideoOnLoadAsync(r)];case 1:return n.sent(),[2,r]}})})},t.prototype.playVideoOnLoadAsync=function(t){var e=this;return new Promise(function(r,n){return e.playVideoOnLoad(t,function(){return r()})})},t.prototype.playVideoOnLoad=function(t,e){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(t)},t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",e),this.tryPlayVideo(t)},t.prototype.isVideoPlaying=function(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2},t.prototype.tryPlayVideo=function(t){return K(this,void 0,void 0,function(){return q(this,function(e){switch(e.label){case 0:if(this.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t.play()];case 2:return e.sent(),[3,4];case 3:return e.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(t,e){var r=document.getElementById(t);if(!r)throw new l("element with id '"+t+"' not found");if(r.nodeName.toLowerCase()!==e.toLowerCase())throw new l("element with id '"+t+"' must be an "+e+" element");return r},t.prototype.decodeFromImage=function(t,e){if(!t&&!e)throw new l("either imageElement with a src set or an url must be provided");return e&&!t?this.decodeFromImageUrl(e):this.decodeFromImageElement(t)},t.prototype.decodeFromVideo=function(t,e){if(!t&&!e)throw new l("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrl(e):this.decodeFromVideoElement(t)},t.prototype.decodeFromVideoContinuously=function(t,e,r){if(void 0===t&&void 0===e)throw new l("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrlContinuously(e,r):this.decodeFromVideoElementContinuously(t,r)},t.prototype.decodeFromImageElement=function(t){if(!t)throw new l("An image element must be provided.");this.reset();var e=this.prepareImageElement(t);return this.imageElement=e,this.isImageLoaded(e)?this.decodeOnce(e,!1,!0):this._decodeOnLoadImage(e)},t.prototype.decodeFromVideoElement=function(t){var e=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(e)},t.prototype.decodeFromVideoElementContinuously=function(t,e){var r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(r,e)},t.prototype._decodeFromVideoElementSetup=function(t){if(!t)throw new l("A video element must be provided.");this.reset();var e=this.prepareVideoElement(t);return this.videoElement=e,e},t.prototype.decodeFromImageUrl=function(t){if(!t)throw new l("An URL must be provided.");this.reset();var e=this.prepareImageElement();this.imageElement=e;var r=this._decodeOnLoadImage(e);return e.src=t,r},t.prototype.decodeFromVideoUrl=function(t){if(!t)throw new l("An URL must be provided.");this.reset();var e=this.prepareVideoElement(),r=this.decodeFromVideoElement(e);return e.src=t,r},t.prototype.decodeFromVideoUrlContinuously=function(t,e){if(!t)throw new l("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElementContinuously(r,e);return r.src=t,n},t.prototype._decodeOnLoadImage=function(t){var e=this;return new Promise(function(r,n){e.imageLoadedListener=function(){return e.decodeOnce(t,!1,!0).then(r,n)},t.addEventListener("load",e.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(t){return K(this,void 0,void 0,function(){return q(this,function(e){switch(e.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return e.sent(),[4,this.decodeOnce(t)];case 2:return[2,e.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(t,e){return K(this,void 0,void 0,function(){return q(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return r.sent(),this.decodeContinuously(t,e),[2]}})})},t.prototype.isImageLoaded=function(t){return!!t.complete&&0!==t.naturalWidth},t.prototype.prepareImageElement=function(t){var e;return void 0===t&&((e=document.createElement("img")).width=200,e.height=200),"string"==typeof t&&(e=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(e=t),e},t.prototype.prepareVideoElement=function(t){var e;return t||"undefined"==typeof document||((e=document.createElement("video")).width=200,e.height=200),"string"==typeof t&&(e=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(e=t),e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.setAttribute("playsinline","true"),e},t.prototype.decodeOnce=function(t,e,r){var n=this;void 0===e&&(e=!0),void 0===r&&(r=!0),this._stopAsyncDecode=!1;var o=function(i,s){if(n._stopAsyncDecode)return s(new k("Video stream has ended before any code could be detected.")),void(n._stopAsyncDecode=void 0);try{i(n.decode(t))}catch(a){if(e&&a instanceof k||(a instanceof f||a instanceof T)&&r)return setTimeout(o,n._timeBetweenDecodingAttempts,i,s);s(a)}};return new Promise(function(t,e){return o(t,e)})},t.prototype.decodeContinuously=function(t,e){var r=this;this._stopContinuousDecode=!1;var n=function(){if(r._stopContinuousDecode)r._stopContinuousDecode=void 0;else try{var o=r.decode(t);e(o,null),setTimeout(n,r.timeBetweenScansMillis)}catch(i){e(null,i),(i instanceof f||i instanceof T||i instanceof k)&&setTimeout(n,r._timeBetweenDecodingAttempts)}};n()},t.prototype.decode=function(t){var e=this.createBinaryBitmap(t);return this.decodeBitmap(e)},t.prototype.createBinaryBitmap=function(t){var e=this.getCaptureCanvasContext(t);this.drawImageOnCanvas(e,t);var r=this.getCaptureCanvas(t),n=new Y(r),o=new G(n);return new h(o)},t.prototype.getCaptureCanvasContext=function(t){if(!this.captureCanvasContext){var e=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=e}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(t){if(!this.captureCanvas){var e=this.createCaptureCanvas(t);this.captureCanvas=e}return this.captureCanvas},t.prototype.drawImageOnCanvas=function(t,e){t.drawImage(e,0,0)},t.prototype.decodeBitmap=function(t){return this.reader.decode(t,this._hints)},t.prototype.createCaptureCanvas=function(t){if("undefined"==typeof document)return this._destroyCaptureCanvas(),null;var e,r,n=document.createElement("canvas");return void 0!==t&&(t instanceof HTMLVideoElement?(e=t.videoWidth,r=t.videoHeight):t instanceof HTMLImageElement&&(e=t.naturalWidth||t.width,r=t.naturalHeight||t.height)),n.style.width=e+"px",n.style.height=r+"px",n.width=e,n.height=r,n},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(t){return t.stop()}),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(void 0!==this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),void 0!==this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),void 0!==this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(t,e){try{t.srcObject=e}catch(r){t.src=URL.createObjectURL(e)}},t.prototype.cleanVideoSource=function(t){try{t.srcObject=null}catch(e){t.src=""}this.videoElement.removeAttribute("src")},t}(),J=function(){function t(t,e,r,n,o,i){void 0===r&&(r=null==e?0:8*e.length),void 0===i&&(i=p.currentTimeMillis()),this.text=t,this.rawBytes=e,this.numBits=r,this.resultPoints=n,this.format=o,this.timestamp=i,this.text=t,this.rawBytes=e,this.numBits=null==r?null==e?0:8*e.length:r,this.resultPoints=n,this.format=o,this.resultMetadata=null,this.timestamp=null==i?p.currentTimeMillis():i}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(t,e){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(t,e)},t.prototype.putAllMetadata=function(t){null!==t&&(this.resultMetadata=null===this.resultMetadata?t:new Map(t))},t.prototype.addResultPoints=function(t){var e=this.resultPoints;if(null===e)this.resultPoints=t;else if(null!==t&&t.length>0){var r=new Array(e.length+t.length);p.arraycopy(e,0,r,0,e.length),p.arraycopy(t,0,r,e.length,t.length),this.resultPoints=r}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}();!function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(O||(O={}));var tt,et=O;!function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(tt||(tt={}));var rt,nt=tt,ot=function(){function t(t,e,r,n,o,i){void 0===o&&(o=-1),void 0===i&&(i=-1),this.rawBytes=t,this.text=e,this.byteSegments=r,this.ecLevel=n,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=i,this.numBits=null==t?0:8*t.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(t){this.numBits=t},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(t){this.errorsCorrected=t},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(t){this.erasures=t},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(t){this.other=t},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),it=function(){function t(){}return t.prototype.exp=function(t){return this.expTable[t]},t.prototype.log=function(t){if(0===t)throw new c;return this.logTable[t]},t.addOrSubtract=function(t,e){return t^e},t}(),st=function(){function t(t,e){if(0===e.length)throw new c;this.field=t;var r=e.length;if(r>1&&0===e[0]){for(var n=1;n<r&&0===e[n];)n++;n===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-n),p.arraycopy(e,n,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return 0===this.coefficients[0]},t.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},t.prototype.evaluateAt=function(t){if(0===t)return this.getCoefficient(0);var e,r=this.coefficients;if(1===t){e=0;for(var n=0,o=r.length;n!==o;n++)e=it.addOrSubtract(e,r[n]);return e}e=r[0];var i=r.length,s=this.field;for(n=1;n<i;n++)e=it.addOrSubtract(s.multiply(t,e),r[n]);return e},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new c("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var o=r;r=n,n=o}var i=new Int32Array(n.length),s=n.length-r.length;p.arraycopy(n,0,i,0,s);for(var a=s;a<n.length;a++)i[a]=it.addOrSubtract(r[a-s],n[a]);return new t(this.field,i)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new c("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,o=e.coefficients,i=o.length,s=new Int32Array(n+i-1),a=this.field,l=0;l<n;l++)for(var u=r[l],h=0;h<i;h++)s[l+h]=it.addOrSubtract(s[l+h],a.multiply(u,o[h]));return new t(a,s)},t.prototype.multiplyScalar=function(e){if(0===e)return this.field.getZero();if(1===e)return this;for(var r=this.coefficients.length,n=this.field,o=new Int32Array(r),i=this.coefficients,s=0;s<r;s++)o[s]=n.multiply(i[s],e);return new t(n,o)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new c;if(0===r)return this.field.getZero();for(var n=this.coefficients,o=n.length,i=new Int32Array(o+e),s=this.field,a=0;a<o;a++)i[a]=s.multiply(n[a],r);return new t(s,i)},t.prototype.divide=function(t){if(!this.field.equals(t.field))throw new c("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new c("Divide by 0");for(var e=this.field,r=e.getZero(),n=this,o=t.getCoefficient(t.getDegree()),i=e.inverse(o);n.getDegree()>=t.getDegree()&&!n.isZero();){var s=n.getDegree()-t.getDegree(),a=e.multiply(n.getCoefficient(n.getDegree()),i),l=t.multiplyByMonomial(s,a),u=e.buildMonomial(s,a);r=r.addOrSubtract(u),n=n.addOrSubtract(l)}return[r,n]},t.prototype.toString=function(){for(var t="",e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);if(0!==r){if(r<0?(t+=" - ",r=-r):t.length>0&&(t+=" + "),0===e||1!==r){var n=this.field.log(r);0===n?t+="1":1===n?t+="a":(t+="a^",t+=n)}0!==e&&(1===e?t+="x":(t+="x^",t+=e))}}return t},t}(),at=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return at(e,t),e}(s),ut=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ct=function(t){function e(e,r,n){var o=t.call(this)||this;o.primitive=e,o.size=r,o.generatorBase=n;for(var i=new Int32Array(r),s=1,a=0;a<r;a++)i[a]=s,(s*=2)>=r&&(s^=e,s&=r-1);o.expTable=i;var l=new Int32Array(r);for(a=0;a<r-1;a++)l[i[a]]=a;return o.logTable=l,o.zero=new st(o,Int32Array.from([0])),o.one=new st(o,Int32Array.from([1])),o}return ut(e,t),e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,e){if(t<0)throw new c;if(0===e)return this.zero;var r=new Int32Array(t+1);return r[0]=e,new st(this,r)},e.prototype.inverse=function(t){if(0===t)throw new lt;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,e){return 0===t||0===e?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+w.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(it),ht=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ht(e,t),e}(s),ft=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),gt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ft(e,t),e}(s),pt=function(){function t(t){this.field=t}return t.prototype.decode=function(t,e){for(var r=this.field,n=new st(r,t),o=new Int32Array(e),i=!0,s=0;s<e;s++){var a=n.evaluateAt(r.exp(s+r.getGeneratorBase()));o[o.length-1-s]=a,0!==a&&(i=!1)}if(!i){var l=new st(r,o),u=this.runEuclideanAlgorithm(r.buildMonomial(e,1),l,e),c=u[1],h=this.findErrorLocations(u[0]),d=this.findErrorMagnitudes(c,h);for(s=0;s<h.length;s++){var f=t.length-1-r.log(h[s]);if(f<0)throw new dt("Bad error location");t[f]=ct.addOrSubtract(t[f],d[s])}}},t.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var n=t;t=e,e=n}for(var o=this.field,i=t,s=e,a=o.getZero(),l=o.getOne();s.getDegree()>=(r/2|0);){var u=i,c=a;if(a=l,(i=s).isZero())throw new dt("r_{i-1} was zero");s=u;for(var h=o.getZero(),d=i.getCoefficient(i.getDegree()),f=o.inverse(d);s.getDegree()>=i.getDegree()&&!s.isZero();){var g=s.getDegree()-i.getDegree(),p=o.multiply(s.getCoefficient(s.getDegree()),f);h=h.addOrSubtract(o.buildMonomial(g,p)),s=s.addOrSubtract(i.multiplyByMonomial(g,p))}if(l=h.multiply(a).addOrSubtract(c),s.getDegree()>=i.getDegree())throw new gt("Division algorithm failed to reduce polynomial?")}var w=l.getCoefficient(0);if(0===w)throw new dt("sigmaTilde(0) was zero");var m=o.inverse(w);return[l.multiplyScalar(m),s.multiplyScalar(m)]},t.prototype.findErrorLocations=function(t){var e=t.getDegree();if(1===e)return Int32Array.from([t.getCoefficient(1)]);for(var r=new Int32Array(e),n=0,o=this.field,i=1;i<o.getSize()&&n<e;i++)0===t.evaluateAt(i)&&(r[n]=o.inverse(i),n++);if(n!==e)throw new dt("Error locator degree does not match number of roots");return r},t.prototype.findErrorMagnitudes=function(t,e){for(var r=e.length,n=new Int32Array(r),o=this.field,i=0;i<r;i++){for(var s=o.inverse(e[i]),a=1,l=0;l<r;l++)if(i!==l){var u=o.multiply(e[l],s);a=o.multiply(a,0==(1&u)?1|u:-2&u)}n[i]=o.multiply(t.evaluateAt(s),o.inverse(a)),0!==o.getGeneratorBase()&&(n[i]=o.multiply(n[i],s))}return n},t}();!function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"}(rt||(rt={}));var wt,mt,_t=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),o=this.correctBits(n),i=t.convertBoolArrayToByteArray(o),s=t.getEncodedData(o),a=new ot(i,s,null,null);return a.setNumBits(o.length),a},t.highLevelDecode=function(t){return this.getEncodedData(t)},t.getEncodedData=function(e){for(var r=e.length,n=rt.UPPER,o=rt.UPPER,i="",s=0;s<r;)if(o===rt.BINARY){if(r-s<5)break;var a=t.readCode(e,s,5);if(s+=5,0===a){if(r-s<11)break;a=t.readCode(e,s,11)+31,s+=11}for(var l=0;l<a;l++){if(r-s<8){s=r;break}var u=t.readCode(e,s,8);i+=B.castAsNonUtf8Char(u),s+=8}o=n}else{var c=o===rt.DIGIT?4:5;if(r-s<c)break;u=t.readCode(e,s,c),s+=c;var h=t.getCharacter(o,u);h.startsWith("CTRL_")?(n=o,o=t.getTable(h.charAt(5)),"L"===h.charAt(6)&&(n=o)):(i+=h,o=n)}return i},t.getTable=function(t){switch(t){case"L":return rt.LOWER;case"P":return rt.PUNCT;case"M":return rt.MIXED;case"D":return rt.DIGIT;case"B":return rt.BINARY;case"U":default:return rt.UPPER}},t.getCharacter=function(e,r){switch(e){case rt.UPPER:return t.UPPER_TABLE[r];case rt.LOWER:return t.LOWER_TABLE[r];case rt.MIXED:return t.MIXED_TABLE[r];case rt.PUNCT:return t.PUNCT_TABLE[r];case rt.DIGIT:return t.DIGIT_TABLE[r];default:throw new gt("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=ct.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=ct.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=ct.AZTEC_DATA_10):(n=12,r=ct.AZTEC_DATA_12);var o=this.ddata.getNbDatablocks(),i=e.length/n;if(i<o)throw new T;for(var s=e.length%n,a=new Int32Array(i),l=0;l<i;l++,s+=n)a[l]=t.readCode(e,s,n);try{new pt(r).decode(a,i-o)}catch(p){throw new T(p)}var u=(1<<n)-1,c=0;for(l=0;l<o;l++){if(0===(f=a[l])||f===u)throw new T;1!==f&&f!==u-1||c++}var h=new Array(o*n-c),d=0;for(l=0;l<o;l++){var f;if(1===(f=a[l])||f===u-1)h.fill(f>1,d,d+n-1),d+=n-1;else for(var g=n-1;g>=0;--g)h[d++]=0!=(f&1<<g)}return h},t.prototype.extractBits=function(t){var e=this.ddata.isCompact(),r=this.ddata.getNbLayers(),n=(e?11:14)+4*r,o=new Int32Array(n),i=new Array(this.totalBitsInLayer(r,e));if(e)for(var s=0;s<o.length;s++)o[s]=s;else{var a=n+1+2*w.truncDivision(w.truncDivision(n,2)-1,15),l=n/2,u=w.truncDivision(a,2);for(s=0;s<l;s++){var c=s+w.truncDivision(s,15);o[l-s-1]=u-c-1,o[l+s]=u+c+1}}s=0;for(var h=0;s<r;s++){for(var d=4*(r-s)+(e?9:12),f=2*s,g=n-1-f,p=0;p<d;p++)for(var m=2*p,_=0;_<2;_++)i[h+m+_]=t.get(o[f+_],o[f+p]),i[h+2*d+m+_]=t.get(o[f+p],o[g-_]),i[h+4*d+m+_]=t.get(o[g-_],o[g-p]),i[h+6*d+m+_]=t.get(o[g-p],o[f+_]);h+=8*d}return i},t.readCode=function(t,e,r){for(var n=0,o=e;o<e+r;o++)n<<=1,t[o]&&(n|=1);return n},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),yt=function(){function t(){}return t.prototype.MathUtils=function(){},t.round=function(t){return NaN===t?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0},t.distance=function(t,e,r,n){var o=t-r,i=e-n;return Math.sqrt(o*o+i*i)},t.sum=function(t){for(var e=0,r=0,n=t.length;r!==n;r++)e+=t[r];return e},t}(),Ct=function(){function t(){}return t.floatToIntBits=function(t){return t},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Et=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){return e instanceof t&&this.x===e.x&&this.y===e.y},t.prototype.hashCode=function(){return 31*Ct.floatToIntBits(this.x)+Ct.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(t){var e,r,n,o=this.distance(t[0],t[1]),i=this.distance(t[1],t[2]),s=this.distance(t[0],t[2]);if(i>=o&&i>=s?(r=t[0],e=t[1],n=t[2]):s>=i&&s>=o?(r=t[1],e=t[0],n=t[2]):(r=t[2],e=t[0],n=t[1]),this.crossProductZ(e,r,n)<0){var a=e;e=n,n=a}t[0]=e,t[1]=r,t[2]=n},t.distance=function(t,e){return yt.distance(t.x,t.y,e.x,e.y)},t.crossProductZ=function(t,e,r){var n=e.x,o=e.y;return(r.x-n)*(t.y-o)-(r.y-o)*(t.x-n)},t}(),At=function(){function t(t,e){this.bits=t,this.points=e}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),vt=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),St=function(t){function e(e,r,n,o,i){var s=t.call(this,e,r)||this;return s.compact=n,s.nbDatablocks=o,s.nbLayers=i,s}return vt(e,t),e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(At),It=function(){function t(e,r,n,o){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),null==r&&(r=t.INIT_SIZE),null==n&&(n=e.getWidth()/2|0),null==o&&(o=e.getHeight()/2|0);var i=r/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=o-i,this.downInit=o+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new k}return t.prototype.detect=function(){for(var t=this.leftInit,e=this.rightInit,r=this.upInit,n=this.downInit,o=!1,i=!0,s=!1,a=!1,l=!1,u=!1,c=!1,h=this.width,d=this.height;i;){i=!1;for(var f=!0;(f||!a)&&e<h;)(f=this.containsBlackPoint(r,n,e,!1))?(e++,i=!0,a=!0):a||e++;if(e>=h){o=!0;break}for(var g=!0;(g||!l)&&n<d;)(g=this.containsBlackPoint(t,e,n,!0))?(n++,i=!0,l=!0):l||n++;if(n>=d){o=!0;break}for(var p=!0;(p||!u)&&t>=0;)(p=this.containsBlackPoint(r,n,t,!1))?(t--,i=!0,u=!0):u||t--;if(t<0){o=!0;break}for(var w=!0;(w||!c)&&r>=0;)(w=this.containsBlackPoint(t,e,r,!0))?(r--,i=!0,c=!0):c||r--;if(r<0){o=!0;break}i&&(s=!0)}if(!o&&s){for(var m=e-t,_=null,y=1;null===_&&y<m;y++)_=this.getBlackPointOnSegment(t,n-y,t+y,n);if(null==_)throw new k;var C=null;for(y=1;null===C&&y<m;y++)C=this.getBlackPointOnSegment(t,r+y,t+y,r);if(null==C)throw new k;var E=null;for(y=1;null===E&&y<m;y++)E=this.getBlackPointOnSegment(e,r+y,e-y,r);if(null==E)throw new k;var A=null;for(y=1;null===A&&y<m;y++)A=this.getBlackPointOnSegment(e,n-y,e-y,n);if(null==A)throw new k;return this.centerEdges(A,_,E,C)}throw new k},t.prototype.getBlackPointOnSegment=function(t,e,r,n){for(var o=yt.round(yt.distance(t,e,r,n)),i=(r-t)/o,s=(n-e)/o,a=this.image,l=0;l<o;l++){var u=yt.round(t+l*i),c=yt.round(e+l*s);if(a.get(u,c))return new Et(u,c)}return null},t.prototype.centerEdges=function(e,r,n,o){var i=e.getX(),s=e.getY(),a=r.getX(),l=r.getY(),u=n.getX(),c=n.getY(),h=o.getX(),d=o.getY(),f=t.CORR;return i<this.width/2?[new Et(h-f,d+f),new Et(a+f,l+f),new Et(u-f,c-f),new Et(i+f,s-f)]:[new Et(h+f,d+f),new Et(a+f,l-f),new Et(u-f,c+f),new Et(i-f,s-f)]},t.prototype.containsBlackPoint=function(t,e,r,n){var o=this.image;if(n){for(var i=t;i<=e;i++)if(o.get(i,r))return!0}else for(var s=t;s<=e;s++)if(o.get(r,s))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),bt=function(){function t(){}return t.checkAndNudgePoints=function(t,e){for(var r=t.getWidth(),n=t.getHeight(),o=!0,i=0;i<e.length&&o;i+=2){var s=Math.floor(e[i]),a=Math.floor(e[i+1]);if(s<-1||s>r||a<-1||a>n)throw new k;o=!1,-1===s?(e[i]=0,o=!0):s===r&&(e[i]=r-1,o=!0),-1===a?(e[i+1]=0,o=!0):a===n&&(e[i+1]=n-1,o=!0)}for(o=!0,i=e.length-2;i>=0&&o;i-=2){if(s=Math.floor(e[i]),a=Math.floor(e[i+1]),s<-1||s>r||a<-1||a>n)throw new k;o=!1,-1===s?(e[i]=0,o=!0):s===r&&(e[i]=r-1,o=!0),-1===a?(e[i+1]=0,o=!0):a===n&&(e[i+1]=n-1,o=!0)}},t}(),Tt=function(){function t(t,e,r,n,o,i,s,a,l){this.a11=t,this.a21=e,this.a31=r,this.a12=n,this.a22=o,this.a32=i,this.a13=s,this.a23=a,this.a33=l}return t.quadrilateralToQuadrilateral=function(e,r,n,o,i,s,a,l,u,c,h,d,f,g,p,w){var m=t.quadrilateralToSquare(e,r,n,o,i,s,a,l);return t.squareToQuadrilateral(u,c,h,d,f,g,p,w).times(m)},t.prototype.transformPoints=function(t){for(var e=t.length,r=this.a11,n=this.a12,o=this.a13,i=this.a21,s=this.a22,a=this.a23,l=this.a31,u=this.a32,c=this.a33,h=0;h<e;h+=2){var d=t[h],f=t[h+1],g=o*d+a*f+c;t[h]=(r*d+i*f+l)/g,t[h+1]=(n*d+s*f+u)/g}},t.prototype.transformPointsWithValues=function(t,e){for(var r=this.a11,n=this.a12,o=this.a13,i=this.a21,s=this.a22,a=this.a23,l=this.a31,u=this.a32,c=this.a33,h=t.length,d=0;d<h;d++){var f=t[d],g=e[d],p=o*f+a*g+c;t[d]=(r*f+i*g+l)/p,e[d]=(n*f+s*g+u)/p}},t.squareToQuadrilateral=function(e,r,n,o,i,s,a,l){var u=e-n+i-a,c=r-o+s-l;if(0===u&&0===c)return new t(n-e,i-n,e,o-r,s-o,r,0,0,1);var h=n-i,d=a-i,f=o-s,g=l-s,p=h*g-d*f,w=(u*g-d*c)/p,m=(h*c-u*f)/p;return new t(n-e+w*n,a-e+m*a,e,o-r+w*o,l-r+m*l,r,w,m,1)},t.quadrilateralToSquare=function(e,r,n,o,i,s,a,l){return t.squareToQuadrilateral(e,r,n,o,i,s,a,l).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),Rt=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Rt(e,t),e.prototype.sampleGrid=function(t,e,r,n,o,i,s,a,l,u,c,h,d,f,g,p,w,m,_){var y=Tt.quadrilateralToQuadrilateral(n,o,i,s,a,l,u,c,h,d,f,g,p,w,m,_);return this.sampleGridWithTransform(t,e,r,y)},e.prototype.sampleGridWithTransform=function(t,e,r,n){if(e<=0||r<=0)throw new k;for(var o=new x(e,r),i=new Float32Array(2*e),s=0;s<r;s++){for(var a=i.length,l=s+.5,u=0;u<a;u+=2)i[u]=u/2+.5,i[u+1]=l;n.transformPoints(i),bt.checkAndNudgePoints(t,i);try{for(u=0;u<a;u+=2)t.get(Math.floor(i[u]),Math.floor(i[u+1]))&&o.set(u/2,s)}catch(c){throw new k}}return o},e}(bt),Nt=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new Ot,t}(),Dt=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.toResultPoint=function(){return new Et(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),Mt=function(){function t(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(t){var e=this.getMatrixCenter(),r=this.getBullsEyeCorners(e);if(t){var n=r[0];r[0]=r[2],r[2]=n}this.extractParameters(r);var o=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),i=this.getMatrixCornerPoints(r);return new St(o,i,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(t){if(!(this.isValidPoint(t[0])&&this.isValidPoint(t[1])&&this.isValidPoint(t[2])&&this.isValidPoint(t[3])))throw new k;var e=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(t[0],t[1],e),this.sampleLine(t[1],t[2],e),this.sampleLine(t[2],t[3],e),this.sampleLine(t[3],t[0],e)]);this.shift=this.getRotation(r,e);for(var n=0,o=0;o<4;o++){var i=r[(this.shift+o)%4];this.compact?(n<<=7,n+=i>>1&127):(n<<=10,n+=(i>>2&992)+(i>>1&31))}var s=this.getCorrectedParameterData(n,this.compact);this.compact?(this.nbLayers=1+(s>>6),this.nbDataBlocks=1+(63&s)):(this.nbLayers=1+(s>>11),this.nbDataBlocks=1+(2047&s))},t.prototype.getRotation=function(t,e){var r=0;t.forEach(function(t,n,o){r=(t>>e-2<<1)+(1&t)+(r<<3)}),r=((1&r)<<11)+(r>>1);for(var n=0;n<4;n++)if(w.bitCount(r^this.EXPECTED_CORNER_BITS[n])<=2)return n;throw new k},t.prototype.getCorrectedParameterData=function(t,e){var r,n;e?(r=7,n=2):(r=10,n=4);for(var o=r-n,i=new Int32Array(r),s=r-1;s>=0;--s)i[s]=15&t,t>>=4;try{new pt(ct.AZTEC_PARAM).decode(i,o)}catch(l){throw new k}var a=0;for(s=0;s<n;s++)a=(a<<4)+i[s];return a},t.prototype.getBullsEyeCorners=function(t){var e=t,r=t,n=t,o=t,i=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(e,i,1,-1),a=this.getFirstDifferent(r,i,1,1),l=this.getFirstDifferent(n,i,-1,1),u=this.getFirstDifferent(o,i,-1,-1);if(this.nbCenterLayers>2){var c=this.distancePoint(u,s)*this.nbCenterLayers/(this.distancePoint(o,e)*(this.nbCenterLayers+2));if(c<.75||c>1.25||!this.isWhiteOrBlackRectangle(s,a,l,u))break}e=s,r=a,n=l,o=u,i=!i}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new k;this.compact=5===this.nbCenterLayers;var h=new Et(e.getX()+.5,e.getY()-.5),d=new Et(r.getX()+.5,r.getY()+.5),f=new Et(n.getX()-.5,n.getY()+.5),g=new Et(o.getX()-.5,o.getY()-.5);return this.expandSquare([h,d,f,g],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var t,e,r,n;try{t=(l=new It(this.image).detect())[0],e=l[1],r=l[2],n=l[3]}catch(u){var o=this.image.getWidth()/2,i=this.image.getHeight()/2;t=this.getFirstDifferent(new Dt(o+7,i-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new Dt(o+7,i+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Dt(o-7,i+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new Dt(o-7,i-7),!1,-1,-1).toResultPoint()}var s=yt.round((t.getX()+n.getX()+e.getX()+r.getX())/4),a=yt.round((t.getY()+n.getY()+e.getY()+r.getY())/4);try{var l;t=(l=new It(this.image,15,s,a).detect())[0],e=l[1],r=l[2],n=l[3]}catch(u){t=this.getFirstDifferent(new Dt(s+7,a-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new Dt(s+7,a+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Dt(s-7,a+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new Dt(s-7,a-7),!1,-1,-1).toResultPoint()}return s=yt.round((t.getX()+n.getX()+e.getX()+r.getX())/4),a=yt.round((t.getY()+n.getY()+e.getY()+r.getY())/4),new Dt(s,a)},t.prototype.getMatrixCornerPoints=function(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(t,e,r,n,o){var i=Nt.getInstance(),s=this.getDimension(),a=s/2-this.nbCenterLayers,l=s/2+this.nbCenterLayers;return i.sampleGrid(t,s,s,a,a,l,a,l,l,a,l,e.getX(),e.getY(),r.getX(),r.getY(),n.getX(),n.getY(),o.getX(),o.getY())},t.prototype.sampleLine=function(t,e,r){for(var n=0,o=this.distanceResultPoint(t,e),i=o/r,s=t.getX(),a=t.getY(),l=i*(e.getX()-t.getX())/o,u=i*(e.getY()-t.getY())/o,c=0;c<r;c++)this.image.get(yt.round(s+c*l),yt.round(a+c*u))&&(n|=1<<r-c-1);return n},t.prototype.isWhiteOrBlackRectangle=function(t,e,r,n){t=new Dt(t.getX()-3,t.getY()+3),e=new Dt(e.getX()-3,e.getY()-3),r=new Dt(r.getX()+3,r.getY()-3),n=new Dt(n.getX()+3,n.getY()+3);var o=this.getColor(n,t);if(0===o)return!1;var i=this.getColor(t,e);return i===o&&(i=this.getColor(e,r))===o&&(i=this.getColor(r,n))===o},t.prototype.getColor=function(t,e){for(var r=this.distancePoint(t,e),n=(e.getX()-t.getX())/r,o=(e.getY()-t.getY())/r,i=0,s=t.getX(),a=t.getY(),l=this.image.get(t.getX(),t.getY()),u=Math.ceil(r),c=0;c<u;c++)a+=o,this.image.get(yt.round(s+=n),yt.round(a))!==l&&i++;var h=i/r;return h>.1&&h<.9?0:h<=.1===l?1:-1},t.prototype.getFirstDifferent=function(t,e,r,n){for(var o=t.getX()+r,i=t.getY()+n;this.isValid(o,i)&&this.image.get(o,i)===e;)o+=r,i+=n;for(o-=r,i-=n;this.isValid(o,i)&&this.image.get(o,i)===e;)o+=r;for(o-=r;this.isValid(o,i)&&this.image.get(o,i)===e;)i+=n;return new Dt(o,i-=n)},t.prototype.expandSquare=function(t,e,r){var n=r/(2*e),o=t[0].getX()-t[2].getX(),i=t[0].getY()-t[2].getY(),s=(t[0].getX()+t[2].getX())/2,a=(t[0].getY()+t[2].getY())/2,l=new Et(s+n*o,a+n*i),u=new Et(s-n*o,a-n*i);return o=t[1].getX()-t[3].getX(),i=t[1].getY()-t[3].getY(),s=(t[1].getX()+t[3].getX())/2,a=(t[1].getY()+t[3].getY())/2,[l,new Et(s+n*o,a+n*i),u,new Et(s-n*o,a-n*i)]},t.prototype.isValid=function(t,e){return t>=0&&t<this.image.getWidth()&&e>0&&e<this.image.getHeight()},t.prototype.isValidPoint=function(t){var e=yt.round(t.getX()),r=yt.round(t.getY());return this.isValid(e,r)},t.prototype.distancePoint=function(t,e){return yt.distance(t.getX(),t.getY(),e.getX(),e.getY())},t.prototype.distanceResultPoint=function(t,e){return yt.distance(t.getX(),t.getY(),e.getX(),e.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(w.truncDivision(this.nbLayers-4,8)+1)+15},t}(),Pt=function(){function t(){}return t.prototype.decode=function(t,e){void 0===e&&(e=null);var r=null,n=new Mt(t.getBlackMatrix()),o=null,i=null;try{o=(s=n.detectMirror(!1)).getPoints(),this.reportFoundResultPoints(e,o),i=(new _t).decode(s)}catch(c){r=c}if(null==i)try{var s;o=(s=n.detectMirror(!0)).getPoints(),this.reportFoundResultPoints(e,o),i=(new _t).decode(s)}catch(c){if(null!=r)throw r;throw c}var a=new J(i.getText(),i.getRawBytes(),i.getNumBits(),o,et.AZTEC,p.currentTimeMillis()),l=i.getByteSegments();null!=l&&a.putMetadata(nt.BYTE_SEGMENTS,l);var u=i.getECLevel();return null!=u&&a.putMetadata(nt.ERROR_CORRECTION_LEVEL,u),a},t.prototype.reportFoundResultPoints=function(t,e){if(null!=t){var r=t.get(I.NEED_RESULT_POINT_CALLBACK);null!=r&&e.forEach(function(t,e,n){r.foundPossibleResultPoint(t)})}},t.prototype.reset=function(){},t}(),Bt=(((globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}())(function(t){return void 0===t&&(t=500),mt.call(this,new Pt,t)||this},mt=Q),function(){function t(){}return t.prototype.decode=function(t,e){try{return this.doDecode(t,e)}catch(u){if(e&&!0===e.get(I.TRY_HARDER)&&t.isRotateSupported()){var r=t.rotateCounterClockwise(),n=this.doDecode(r,e),o=n.getResultMetadata(),i=270;null!==o&&!0===o.get(nt.ORIENTATION)&&(i+=o.get(nt.ORIENTATION)%360),n.putMetadata(nt.ORIENTATION,i);var s=n.getResultPoints();if(null!==s)for(var a=r.getHeight(),l=0;l<s.length;l++)s[l]=new Et(a-s[l].getY()-1,s[l].getX());return n}throw new k}},t.prototype.reset=function(){},t.prototype.doDecode=function(t,e){var r,n=t.getWidth(),o=t.getHeight(),i=new v(n),s=e&&!0===e.get(I.TRY_HARDER),a=Math.max(1,o>>(s?8:5));r=s?o:15;for(var l=Math.trunc(o/2),u=0;u<r;u++){var c=Math.trunc((u+1)/2),h=l+a*(0==(1&u)?c:-c);if(h<0||h>=o)break;try{i=t.getBlackRow(h,i)}catch(w){continue}for(var d=function(t){if(1===t&&(i.reverse(),e&&!0===e.get(I.NEED_RESULT_POINT_CALLBACK))){var r=new Map;e.forEach(function(t,e){return r.set(e,t)}),r.delete(I.NEED_RESULT_POINT_CALLBACK),e=r}try{var o=f.decodeRow(h,i,e);if(1===t){o.putMetadata(nt.ORIENTATION,180);var s=o.getResultPoints();null!==s&&(s[0]=new Et(n-s[0].getX()-1,s[0].getY()),s[1]=new Et(n-s[1].getX()-1,s[1].getY()))}return{value:o}}catch(a){}},f=this,g=0;g<2;g++){var p=d(g);if("object"==typeof p)return p.value}}throw new k},t.recordPattern=function(t,e,r){for(var n=r.length,o=0;o<n;o++)r[o]=0;var i=t.getSize();if(e>=i)throw new k;for(var s=!t.get(e),a=0,l=e;l<i;){if(t.get(l)!==s)r[a]++;else{if(++a===n)break;r[a]=1,s=!s}l++}if(a!==n&&(a!==n-1||l!==i))throw new k},t.recordPatternInReverse=function(e,r,n){for(var o=n.length,i=e.get(r);r>0&&o>=0;)e.get(--r)!==i&&(o--,i=!i);if(o>=0)throw new k;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(t,e,r){for(var n=t.length,o=0,i=0,s=0;s<n;s++)o+=t[s],i+=e[s];if(o<i)return Number.POSITIVE_INFINITY;var a=o/i;r*=a;for(var l=0,u=0;u<n;u++){var c=t[u],h=e[u]*a,d=c>h?c-h:h-c;if(d>r)return Number.POSITIVE_INFINITY;l+=d}return l/o},t}()),Lt=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xt=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ft=function(t){function e(e,r){void 0===e&&(e=!1),void 0===r&&(r=!1);var n=t.call(this)||this;return n.usingCheckDigit=e,n.extendedMode=r,n.decodeRowResult="",n.counters=new Array(9),n}return Lt(e,t),e.prototype.decodeRow=function(t,r,n){var o,i,s,a,l=this.counters;l.fill(0),this.decodeRowResult="";var u,c,h=e.findAsteriskPattern(r,l),d=r.getNextSet(h[1]),g=r.getSize();do{e.recordPattern(r,d,l);var p=e.toNarrowWidePattern(l);if(p<0)throw new k;u=e.patternToChar(p),this.decodeRowResult+=u,c=d;try{for(var w=(o=void 0,xt(l)),m=w.next();!m.done;m=w.next())d+=m.value}catch(b){o={error:b}}finally{try{m&&!m.done&&(i=w.return)&&i.call(w)}finally{if(o)throw o.error}}d=r.getNextSet(d)}while("*"!==u);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var _,y=0;try{for(var C=xt(l),E=C.next();!E.done;E=C.next())y+=E.value}catch(T){s={error:T}}finally{try{E&&!E.done&&(a=C.return)&&a.call(C)}finally{if(s)throw s.error}}if(d!==g&&2*(d-c-y)<y)throw new k;if(this.usingCheckDigit){for(var A=this.decodeRowResult.length-1,v=0,S=0;S<A;S++)v+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(S));if(this.decodeRowResult.charAt(A)!==e.ALPHABET_STRING.charAt(v%43))throw new f;this.decodeRowResult=this.decodeRowResult.substring(0,A)}if(0===this.decodeRowResult.length)throw new k;_=this.extendedMode?e.decodeExtended(this.decodeRowResult):this.decodeRowResult;var I=c+y/2;return new J(_,null,0,[new Et((h[1]+h[0])/2,t),new Et(I,t)],et.CODE_39,(new Date).getTime())},e.findAsteriskPattern=function(t,r){for(var n=t.getSize(),o=t.getNextSet(0),i=0,s=o,a=!1,l=r.length,u=o;u<n;u++)if(t.get(u)!==a)r[i]++;else{if(i===l-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,s-Math.floor((u-s)/2)),s,!1))return[s,u];s+=r[0]+r[1],r.copyWithin(0,2,2+i-1),r[i-1]=0,r[i]=0,i--}else i++;r[i]=1,a=!a}throw new k},e.toNarrowWidePattern=function(t){var e,r,n,o=t.length,i=0;do{var s=2147483647;try{for(var a=(e=void 0,xt(t)),l=a.next();!l.done;l=a.next())(d=l.value)<s&&d>i&&(s=d)}catch(f){e={error:f}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}i=s,n=0;for(var u=0,c=0,h=0;h<o;h++)(d=t[h])>i&&(c|=1<<o-1-h,n++,u+=d);if(3===n){for(h=0;h<o&&n>0;h++){var d;if((d=t[h])>i&&(n--,2*d>=u))return-1}return c}}while(n>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new k},e.decodeExtended=function(t){for(var e=t.length,r="",n=0;n<e;n++){var o=t.charAt(n);if("+"===o||"$"===o||"%"===o||"/"===o){var i=t.charAt(n+1),s="\0";switch(o){case"+":if(!(i>="A"&&i<="Z"))throw new T;s=String.fromCharCode(i.charCodeAt(0)+32);break;case"$":if(!(i>="A"&&i<="Z"))throw new T;s=String.fromCharCode(i.charCodeAt(0)-64);break;case"%":if(i>="A"&&i<="E")s=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")s=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")s=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")s=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)s="\0";else if("V"===i)s="@";else if("W"===i)s="`";else{if("X"!==i&&"Y"!==i&&"Z"!==i)throw new T;s="\x7f"}break;case"/":if(i>="A"&&i<="O")s=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new T;s=":"}}r+=s,n++}else r+=o}return r},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Bt),kt=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return kt(e,t),e.findStartPattern=function(t){for(var r=t.getSize(),n=t.getNextSet(0),o=0,i=[0,0,0,0,0,0],s=n,a=!1,l=n;l<r;l++)if(t.get(l)!==a)i[o]++;else{if(5===o){for(var u=e.MAX_AVG_VARIANCE,c=-1,h=e.CODE_START_A;h<=e.CODE_START_C;h++){var d=Bt.patternMatchVariance(i,e.CODE_PATTERNS[h],e.MAX_INDIVIDUAL_VARIANCE);d<u&&(u=d,c=h)}if(c>=0&&t.isRange(Math.max(0,s-(l-s)/2),s,!1))return[s,l,c];s+=i[0]+i[1],i.splice(0,2),i[o-1]=0,i[o]=0,o--}else o++;i[o]=1,a=!a}throw new k},e.decodeCode=function(t,r,n){Bt.recordPattern(t,n,r);for(var o=e.MAX_AVG_VARIANCE,i=-1,s=0;s<e.CODE_PATTERNS.length;s++){var a=this.patternMatchVariance(r,e.CODE_PATTERNS[s],e.MAX_INDIVIDUAL_VARIANCE);a<o&&(o=a,i=s)}if(i>=0)return i;throw new k},e.prototype.decodeRow=function(t,r,n){var o,i=n&&!0===n.get(I.ASSUME_GS1),s=e.findStartPattern(r),a=s[2],l=0,u=new Uint8Array(20);switch(u[l++]=a,a){case e.CODE_START_A:o=e.CODE_CODE_A;break;case e.CODE_START_B:o=e.CODE_CODE_B;break;case e.CODE_START_C:o=e.CODE_CODE_C;break;default:throw new T}for(var c=!1,h=!1,d="",g=s[0],p=s[1],w=[0,0,0,0,0,0],m=0,_=0,y=a,C=0,E=!0,A=!1,v=!1;!c;){var S=h;switch(h=!1,m=_,_=e.decodeCode(r,w,p),u[l++]=_,_!==e.CODE_STOP&&(E=!0),_!==e.CODE_STOP&&(y+=++C*_),g=p,p+=w.reduce(function(t,e){return t+e},0),_){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new T}switch(o){case e.CODE_CODE_A:if(_<64)d+=String.fromCharCode(v===A?" ".charCodeAt(0)+_:" ".charCodeAt(0)+_+128),v=!1;else if(_<96)d+=String.fromCharCode(v===A?_-64:_+64),v=!1;else switch(_!==e.CODE_STOP&&(E=!1),_){case e.CODE_FNC_1:i&&(d+=0===d.length?"]C1":String.fromCharCode(29));break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!A&&v?(A=!0,v=!1):A&&v?(A=!1,v=!1):v=!0;break;case e.CODE_SHIFT:h=!0,o=e.CODE_CODE_B;break;case e.CODE_CODE_B:o=e.CODE_CODE_B;break;case e.CODE_CODE_C:o=e.CODE_CODE_C;break;case e.CODE_STOP:c=!0}break;case e.CODE_CODE_B:if(_<96)d+=String.fromCharCode(v===A?" ".charCodeAt(0)+_:" ".charCodeAt(0)+_+128),v=!1;else switch(_!==e.CODE_STOP&&(E=!1),_){case e.CODE_FNC_1:i&&(d+=0===d.length?"]C1":String.fromCharCode(29));break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!A&&v?(A=!0,v=!1):A&&v?(A=!1,v=!1):v=!0;break;case e.CODE_SHIFT:h=!0,o=e.CODE_CODE_A;break;case e.CODE_CODE_A:o=e.CODE_CODE_A;break;case e.CODE_CODE_C:o=e.CODE_CODE_C;break;case e.CODE_STOP:c=!0}break;case e.CODE_CODE_C:if(_<100)_<10&&(d+="0"),d+=_;else switch(_!==e.CODE_STOP&&(E=!1),_){case e.CODE_FNC_1:i&&(d+=0===d.length?"]C1":String.fromCharCode(29));break;case e.CODE_CODE_A:o=e.CODE_CODE_A;break;case e.CODE_CODE_B:o=e.CODE_CODE_B;break;case e.CODE_STOP:c=!0}}S&&(o=o===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var b=p-g;if(p=r.getNextUnset(p),!r.isRange(p,Math.min(r.getSize(),p+(p-g)/2),!1))throw new k;if((y-=C*m)%103!==m)throw new f;var R=d.length;if(0===R)throw new k;R>0&&E&&(d=d.substring(0,o===e.CODE_CODE_C?R-2:R-1));for(var O=(s[1]+s[0])/2,N=g+b/2,D=u.length,M=new Uint8Array(D),P=0;P<D;P++)M[P]=u[P];var B=[new Et(O,t),new Et(N,t)];return new J(d,M,0,B,et.CODE_128,(new Date).getTime())},e.CODE_PATTERNS=[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Bt),Ut=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ht=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gt=function(t){function e(){var e=t.call(this)||this;return e.decodeFinderCounters=new Array(4),e.dataCharacterCounters=new Array(8),e.oddRoundingErrors=new Array(4),e.evenRoundingErrors=new Array(4),e.oddCounts=new Array(e.dataCharacterCounters.length/2),e.evenCounts=new Array(e.dataCharacterCounters.length/2),e}return Ut(e,t),e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var n=0;n<r.length;n++)if(Bt.patternMatchVariance(t,r[n],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return n;throw new k},e.count=function(t){return yt.sum(new Int32Array(t))},e.increment=function(t,e){for(var r=0,n=e[0],o=1;o<t.length;o++)e[o]>n&&(n=e[o],r=o);t[r]++},e.decrement=function(t,e){for(var r=0,n=e[0],o=1;o<t.length;o++)e[o]<n&&(n=e[o],r=o);t[r]--},e.isFinderPattern=function(t){var r,n,o=t[0]+t[1],i=o/(o+t[2]+t[3]);if(i>=e.MIN_FINDER_PATTERN_RATIO&&i<=e.MAX_FINDER_PATTERN_RATIO){var s=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER;try{for(var l=Ht(t),u=l.next();!u.done;u=l.next()){var c=u.value;c>a&&(a=c),c<s&&(s=c)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return a<10*s}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Bt),Wt=function(){function t(t,e){this.value=t,this.checksumPortion=e}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){return e instanceof t&&this.value===e.value&&this.checksumPortion===e.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),zt=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xt=function(t){function e(e,r,n){var o=t.call(this,e,r)||this;return o.count=0,o.finderPattern=n,o}return zt(e,t),e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(Wt),jt=function(){function t(t,e,r,n,o){this.value=t,this.startEnd=e,this.value=t,this.startEnd=e,this.resultPoints=new Array,this.resultPoints.push(new Et(r,o)),this.resultPoints.push(new Et(n,o))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){return e instanceof t&&this.value===e.value},t.prototype.hashCode=function(){return this.value},t}(),Yt=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zt=function(){function t(){}return t.prototype.RSSUtils=function(){},t.getRSSvalue=function(e,r,n){var o,i,s=0;try{for(var a=Yt(e),l=a.next();!l.done;l=a.next())s+=l.value}catch(m){o={error:m}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}for(var u=0,c=0,h=e.length,d=0;d<h-1;d++){var f=void 0;for(f=1,c|=1<<d;f<e[d];f++,c&=~(1<<d)){var g=t.combins(s-f-1,h-d-2);if(n&&0===c&&s-f-(h-d-1)>=h-d-1&&(g-=t.combins(s-f-(h-d),h-d-2)),h-d-1>1){for(var p=0,w=s-f-(h-d-2);w>r;w--)p+=t.combins(s-f-w-1,h-d-3);g-=p*(h-1-d)}else s-f>r&&g--;u+=g}s-=f}return u},t.combins=function(t,e){var r,n;t-e>e?(n=e,r=t-e):(n=t-e,r=e);for(var o=1,i=1,s=t;s>r;s--)o*=s,i<=n&&(o/=i,i++);for(;i<=n;)o/=i,i++;return o},t}(),Kt=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qt=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$t=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.possibleLeftPairs=[],e.possibleRightPairs=[],e}return Kt(e,t),e.prototype.decodeRow=function(t,r,n){var o,i,s,a,l=this.decodePair(r,!1,t,n);e.addOrTally(this.possibleLeftPairs,l),r.reverse();var u=this.decodePair(r,!0,t,n);e.addOrTally(this.possibleRightPairs,u),r.reverse();try{for(var c=qt(this.possibleLeftPairs),h=c.next();!h.done;h=c.next()){var d=h.value;if(d.getCount()>1)try{for(var f=(s=void 0,qt(this.possibleRightPairs)),g=f.next();!g.done;g=f.next()){var p=g.value;if(p.getCount()>1&&e.checkChecksum(d,p))return e.constructResult(d,p)}}catch(w){s={error:w}}finally{try{g&&!g.done&&(a=f.return)&&a.call(f)}finally{if(s)throw s.error}}}}catch(m){o={error:m}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}throw new k},e.addOrTally=function(t,e){var r,n;if(null!=e){var o=!1;try{for(var i=qt(t),s=i.next();!s.done;s=i.next()){var a=s.value;if(a.getValue()===e.getValue()){a.incrementCount(),o=!0;break}}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}o||t.push(e)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,e){for(var r=4537077*t.getValue()+e.getValue(),n=new String(r).toString(),o=new L,i=13-n.length;i>0;i--)o.append("0");o.append(n);var s=0;for(i=0;i<13;i++){var a=o.charAt(i).charCodeAt(0)-"0".charCodeAt(0);s+=0==(1&i)?3*a:a}10==(s=10-s%10)&&(s=0),o.append(s.toString());var l=t.getFinderPattern().getResultPoints(),u=e.getFinderPattern().getResultPoints();return new J(o.toString(),null,0,[l[0],l[1],u[0],u[1]],et.RSS_14,(new Date).getTime())},e.checkChecksum=function(t,e){var r=(t.getChecksumPortion()+16*e.getChecksumPortion())%79,n=9*t.getFinderPattern().getValue()+e.getFinderPattern().getValue();return n>72&&n--,n>8&&n--,r===n},e.prototype.decodePair=function(t,e,r,n){try{var o=this.findFinderPattern(t,e),i=this.parseFoundFinderPattern(t,r,e,o),s=null==n?null:n.get(I.NEED_RESULT_POINT_CALLBACK);if(null!=s){var a=(o[0]+o[1])/2;e&&(a=t.getSize()-1-a),s.foundPossibleResultPoint(new Et(a,r))}var l=this.decodeDataCharacter(t,i,!0),u=this.decodeDataCharacter(t,i,!1);return new Xt(1597*l.getValue()+u.getValue(),l.getChecksumPortion()+4*u.getChecksumPortion(),i)}catch(c){return null}},e.prototype.decodeDataCharacter=function(t,r,n){for(var o=this.getDataCharacterCounters(),i=0;i<o.length;i++)o[i]=0;if(n)Bt.recordPatternInReverse(t,r.getStartEnd()[0],o);else{Bt.recordPattern(t,r.getStartEnd()[1]+1,o);for(var s=0,a=o.length-1;s<a;s++,a--){var l=o[s];o[s]=o[a],o[a]=l}}var u=n?16:15,c=yt.sum(new Int32Array(o))/u,h=this.getOddCounts(),d=this.getEvenCounts(),f=this.getOddRoundingErrors(),g=this.getEvenRoundingErrors();for(s=0;s<o.length;s++){var p=o[s]/c,w=Math.floor(p+.5);w<1?w=1:w>8&&(w=8);var m=Math.floor(s/2);0==(1&s)?(h[m]=w,f[m]=p-w):(d[m]=w,g[m]=p-w)}this.adjustOddEvenCounts(n,u);var _=0,y=0;for(s=h.length-1;s>=0;s--)y*=9,y+=h[s],_+=h[s];var C=0,E=0;for(s=d.length-1;s>=0;s--)C*=9,C+=d[s],E+=d[s];var A,v,S=y+3*C;if(n){if(0!=(1&_)||_>12||_<4)throw new k;var I=9-(v=e.OUTSIDE_ODD_WIDEST[A=(12-_)/2]),b=Zt.getRSSvalue(h,v,!1),T=Zt.getRSSvalue(d,I,!0);return new Wt(b*e.OUTSIDE_EVEN_TOTAL_SUBSET[A]+T+e.OUTSIDE_GSUM[A],S)}if(0!=(1&E)||E>10||E<4)throw new k;return I=9-(v=e.INSIDE_ODD_WIDEST[A=(10-E)/2]),b=Zt.getRSSvalue(h,v,!0),T=Zt.getRSSvalue(d,I,!1),new Wt(T*e.INSIDE_ODD_TOTAL_SUBSET[A]+b+e.INSIDE_GSUM[A],S)},e.prototype.findFinderPattern=function(t,e){var r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;for(var n=t.getSize(),o=!1,i=0;i<n&&e!==(o=!t.get(i));)i++;for(var s=0,a=i,l=i;l<n;l++)if(t.get(l)!==o)r[s]++;else{if(3===s){if(Gt.isFinderPattern(r))return[a,l];a+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,s--}else s++;r[s]=1,o=!o}throw new k},e.prototype.parseFoundFinderPattern=function(t,r,n,o){for(var i=t.get(o[0]),s=o[0]-1;s>=0&&i!==t.get(s);)s--;s++;var a=o[0]-s,l=this.getDecodeFinderCounters(),u=new Array(l.length);p.arraycopy(l,0,u,1,l.length-1),u[0]=a;var c=this.parseFinderValue(u,e.FINDER_PATTERNS),h=s,d=o[1];return n&&(h=t.getSize()-1-h,d=t.getSize()-1-d),new jt(c,[s,o[1]],h,d,r)},e.prototype.adjustOddEvenCounts=function(t,e){var r=yt.sum(new Int32Array(this.getOddCounts())),n=yt.sum(new Int32Array(this.getEvenCounts())),o=!1,i=!1,s=!1,a=!1;t?(r>12?i=!0:r<4&&(o=!0),n>12?a=!0:n<4&&(s=!0)):(r>11?i=!0:r<5&&(o=!0),n>10?a=!0:n<4&&(s=!0));var l=r+n-e,u=(1&r)==(t?1:0),c=1==(1&n);if(1===l)if(u){if(c)throw new k;i=!0}else{if(!c)throw new k;a=!0}else if(-1===l)if(u){if(c)throw new k;o=!0}else{if(!c)throw new k;s=!0}else{if(0!==l)throw new k;if(u){if(!c)throw new k;r<n?(o=!0,a=!0):(i=!0,s=!0)}else if(c)throw new k}if(o){if(i)throw new k;Gt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&Gt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(a)throw new k;Gt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&Gt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[[3,8,2,1],[3,5,5,1],[3,3,7,1],[3,1,9,1],[2,7,4,1],[2,5,6,1],[2,3,8,1],[1,5,7,1],[1,3,9,1]],e}(Gt),Qt=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jt=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},te=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.narrowLineWidth=-1,e}return Qt(e,t),e.prototype.decodeRow=function(t,r,n){var o,i,s=this.decodeStart(r),a=this.decodeEnd(r),l=new L;e.decodeMiddle(r,s[1],a[0],l);var u=l.toString(),c=null;null!=n&&(c=n.get(I.ALLOWED_LENGTHS)),null==c&&(c=e.DEFAULT_ALLOWED_LENGTHS);var h=u.length,d=!1,f=0;try{for(var g=Jt(c),p=g.next();!p.done;p=g.next()){var w=p.value;if(h===w){d=!0;break}w>f&&(f=w)}}catch(_){o={error:_}}finally{try{p&&!p.done&&(i=g.return)&&i.call(g)}finally{if(o)throw o.error}}if(!d&&h>f&&(d=!0),!d)throw new T;var m=[new Et(s[1],t),new Et(a[0],t)];return new J(u,null,0,m,et.ITF,(new Date).getTime())},e.decodeMiddle=function(t,r,n,o){var i=new Array(10),s=new Array(5),a=new Array(5);for(i.fill(0),s.fill(0),a.fill(0);r<n;){Bt.recordPattern(t,r,i);for(var l=0;l<5;l++){var u=2*l;s[l]=i[u],a[l]=i[u+1]}var c=e.decodeDigit(s);o.append(c.toString()),c=this.decodeDigit(a),o.append(c.toString()),i.forEach(function(t){r+=t})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),n=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(t,n[0]),n},e.prototype.validateQuietZone=function(t,e){var r=10*this.narrowLineWidth;r=r<e?r:e;for(var n=e-1;r>0&&n>=0&&!t.get(n);n--)r--;if(0!==r)throw new k},e.skipWhiteSpace=function(t){var e=t.getSize(),r=t.getNextSet(0);if(r===e)throw new k;return r},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),n=void 0;try{n=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(k){n=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1])}this.validateQuietZone(t,n[0]);var o=n[0];return n[0]=t.getSize()-n[1],n[1]=t.getSize()-o,n}finally{t.reverse()}},e.findGuardPattern=function(t,r,n){var o=n.length,i=new Array(o),s=t.getSize(),a=!1,l=0,u=r;i.fill(0);for(var c=r;c<s;c++)if(t.get(c)!==a)i[l]++;else{if(l===o-1){if(Bt.patternMatchVariance(i,n,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[u,c];u+=i[0]+i[1],p.arraycopy(i,2,i,0,l-1),i[l-1]=0,i[l]=0,l--}else l++;i[l]=1,a=!a}throw new k},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,n=-1,o=e.PATTERNS.length,i=0;i<o;i++){var s=Bt.patternMatchVariance(t,e.PATTERNS[i],e.MAX_INDIVIDUAL_VARIANCE);s<r?(r=s,n=i):s===r&&(n=-1)}if(n>=0)return n%10;throw new k},e.W=3,e.w=2,e.N=1,e.PATTERNS=[[1,1,2,2,1],[2,1,1,1,2],[1,2,1,1,2],[2,2,1,1,1],[1,1,2,1,2],[2,1,2,1,1],[1,2,2,1,1],[1,1,1,2,2],[2,1,1,2,1],[1,2,1,2,1],[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=[1,1,1,1],e.END_PATTERN_REVERSED=[[1,1,2],[1,1,3]],e}(Bt),ee=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),re=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.decodeRowStringBuffer="",e}return ee(e,t),e.findStartGuardPattern=function(t){for(var r=!1,n=null,o=0;!r;){var i=(n=e.findGuardPattern(t,o,!1,this.START_END_PATTERN,[0,0,0]))[0],s=i-((o=n[1])-i);s>=0&&(r=t.isRange(s,i,!1))}return n},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(0===r)return!1;var n=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===n},e.getStandardUPCEANChecksum=function(t){for(var e=t.length,r=0,n=e-1;n>=0;n-=2){if((o=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new T;r+=o}for(r*=3,n=e-2;n>=0;n-=2){var o;if((o=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new T;r+=o}return(1e3-r)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPattern=function(t,r,n,o,i){for(var s=t.getSize(),a=0,l=r=n?t.getNextUnset(r):t.getNextSet(r),u=o.length,c=n,h=r;h<s;h++)if(t.get(h)!==c)i[a]++;else{if(a===u-1){if(Bt.patternMatchVariance(i,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[l,h];l+=i[0]+i[1];for(var d=i.slice(2,i.length),f=0;f<a-1;f++)i[f]=d[f];i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,c=!c}throw new k},e.decodeDigit=function(t,r,n,o){this.recordPattern(t,n,r);for(var i=this.MAX_AVG_VARIANCE,s=-1,a=o.length,l=0;l<a;l++){var u=Bt.patternMatchVariance(r,o[l],e.MAX_INDIVIDUAL_VARIANCE);u<i&&(i=u,s=l)}if(s>=0)return s;throw new k},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=[1,1,1],e.MIDDLE_PATTERN=[1,1,1,1,1],e.END_PATTERN=[1,1,1,1,1,1],e.L_PATTERNS=[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2]],e}(Bt),ne=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oe=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=[0,0,0,0],this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var o=this.decodeRowStringBuffer,i=this.decodeMiddle(r,n,o),s=o.toString(),a=t.parseExtensionString(s),l=[new Et((n[0]+n[1])/2,e),new Et(i,e)],u=new J(s,null,0,l,et.UPC_EAN_EXTENSION,(new Date).getTime());return null!=a&&u.putAllMetadata(a),u},t.prototype.decodeMiddle=function(e,r,n){var o,i,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),l=r[1],u=0,c=0;c<5&&l<a;c++){var h=re.decodeDigit(e,s,l,re.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+h%10);try{for(var d=(o=void 0,ne(s)),f=d.next();!f.done;f=d.next())l+=f.value}catch(p){o={error:p}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}h>=10&&(u|=1<<4-c),4!==c&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(5!==n.length)throw new k;var g=this.determineCheckDigit(u);if(t.extensionChecksum(n.toString())!==g)throw new k;return l},t.extensionChecksum=function(t){for(var e=t.length,r=0,n=e-2;n>=0;n-=2)r+=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0);for(r*=3,n=e-1;n>=0;n-=2)r+=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0);return(r*=3)%10},t.prototype.determineCheckDigit=function(t){for(var e=0;e<10;e++)if(t===this.CHECK_DIGIT_ENCODINGS[e])return e;throw new k},t.parseExtensionString=function(e){if(5!==e.length)return null;var r=t.parseExtension5String(e);return null==r?null:new Map([[nt.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(t){var e;switch(t.charAt(0)){case"0":e="\xa3";break;case"5":e="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}e="";break;default:e=""}var r=parseInt(t.substring(1)),n=r%100;return e+(r/100).toString()+"."+(n<10?"0"+n:n.toString())},t}(),ie=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},se=function(){function t(){this.decodeMiddleCounters=[0,0,0,0],this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var o=this.decodeRowStringBuffer,i=this.decodeMiddle(r,n,o),s=o.toString(),a=t.parseExtensionString(s),l=[new Et((n[0]+n[1])/2,e),new Et(i,e)],u=new J(s,null,0,l,et.UPC_EAN_EXTENSION,(new Date).getTime());return null!=a&&u.putAllMetadata(a),u},t.prototype.decodeMiddle=function(t,e,r){var n,o,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var s=t.getSize(),a=e[1],l=0,u=0;u<2&&a<s;u++){var c=re.decodeDigit(t,i,a,re.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+c%10);try{for(var h=(n=void 0,ie(i)),d=h.next();!d.done;d=h.next())a+=d.value}catch(f){n={error:f}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}c>=10&&(l|=1<<1-u),1!==u&&(a=t.getNextSet(a),a=t.getNextUnset(a))}if(2!==r.length)throw new k;if(parseInt(r.toString())%4!==l)throw new k;return a},t.parseExtensionString=function(t){return 2!==t.length?null:new Map([[nt.ISSUE_NUMBER,parseInt(t)]])},t}(),ae=function(){function t(){}return t.decodeRow=function(t,e,r){var n=re.findGuardPattern(e,r,!1,this.EXTENSION_START_PATTERN,new Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new oe).decodeRow(t,e,n)}catch(o){return(new se).decodeRow(t,e,n)}},t.EXTENSION_START_PATTERN=[1,1,2],t}(),le=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ue=function(t){function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(t){return t.slice()});for(var n=10;n<20;n++){for(var o=e.L_PATTERNS[n-10],i=new Array(o.length),s=0;s<o.length;s++)i[s]=o[o.length-s-1];e.L_AND_G_PATTERNS[n]=i}return r}return le(e,t),e.prototype.decodeRow=function(t,r,n){var o=e.findStartGuardPattern(r),i=null==n?null:n.get(I.NEED_RESULT_POINT_CALLBACK);if(null!=i){var s=new Et((o[0]+o[1])/2,t);i.foundPossibleResultPoint(s)}var a=this.decodeMiddle(r,o,this.decodeRowStringBuffer),l=a.rowOffset,u=a.resultString;if(null!=i){var c=new Et(l,t);i.foundPossibleResultPoint(c)}var h=e.decodeEnd(r,l);if(null!=i){var d=new Et((h[0]+h[1])/2,t);i.foundPossibleResultPoint(d)}var g=h[1],p=g+(g-h[0]);if(p>=r.getSize()||!r.isRange(g,p,!1))throw new k;var w=u.toString();if(w.length<8)throw new T;if(!e.checkChecksum(w))throw new f;var m=(o[1]+o[0])/2,_=(h[1]+h[0])/2,y=this.getBarcodeFormat(),C=[new Et(m,t),new Et(_,t)],E=new J(w,null,0,C,y,(new Date).getTime()),A=0;try{var v=ae.decodeRow(t,r,h[1]);E.putMetadata(nt.UPC_EAN_EXTENSION,v.getText()),E.putAllMetadata(v.getResultMetadata()),E.addResultPoints(v.getResultPoints()),A=v.getText().length}catch(O){}var S=null==n?null:n.get(I.ALLOWED_EAN_EXTENSIONS);if(null!=S){var b=!1;for(var R in S)if(A.toString()===R){b=!0;break}if(!b)throw new k}return E},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(0===r)return!1;var n=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===n},e.getStandardUPCEANChecksum=function(t){for(var e=t.length,r=0,n=e-1;n>=0;n-=2){if((o=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new T;r+=o}for(r*=3,n=e-2;n>=0;n-=2){var o;if((o=t.charAt(n).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new T;r+=o}return(1e3-r)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Array(e.START_END_PATTERN.length).fill(0))},e}(re),ce=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),he=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},de=function(t){function e(){var e=t.call(this)||this;return e.decodeMiddleCounters=[0,0,0,0],e}return ce(e,t),e.prototype.decodeMiddle=function(t,r,n){var o,i,s,a,l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var u=t.getSize(),c=r[1],h=0,d=0;d<6&&c<u;d++){var f=ue.decodeDigit(t,l,c,ue.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+f%10);try{for(var g=(o=void 0,he(l)),p=g.next();!p.done;p=g.next())c+=p.value}catch(_){o={error:_}}finally{try{p&&!p.done&&(i=g.return)&&i.call(g)}finally{if(o)throw o.error}}f>=10&&(h|=1<<5-d)}for(n=e.determineFirstDigit(n,h),c=ue.findGuardPattern(t,c,!0,ue.MIDDLE_PATTERN,new Array(ue.MIDDLE_PATTERN.length).fill(0))[1],d=0;d<6&&c<u;d++){f=ue.decodeDigit(t,l,c,ue.L_PATTERNS),n+=String.fromCharCode("0".charCodeAt(0)+f);try{for(var w=(s=void 0,he(l)),m=w.next();!m.done;m=w.next())c+=m.value}catch(y){s={error:y}}finally{try{m&&!m.done&&(a=w.return)&&a.call(w)}finally{if(s)throw s.error}}}return{rowOffset:c,resultString:n}},e.prototype.getBarcodeFormat=function(){return et.EAN_13},e.determineFirstDigit=function(t,e){for(var r=0;r<10;r++)if(e===this.FIRST_DIGIT_ENCODINGS[r])return String.fromCharCode("0".charCodeAt(0)+r)+t;throw new k},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(ue),fe=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ge=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pe=function(t){function e(){var e=t.call(this)||this;return e.decodeMiddleCounters=[0,0,0,0],e}return fe(e,t),e.prototype.decodeMiddle=function(t,e,r){var n,o,i,s,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var l=t.getSize(),u=e[1],c=0;c<4&&u<l;c++){var h=ue.decodeDigit(t,a,u,ue.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+h);try{for(var d=(n=void 0,ge(a)),f=d.next();!f.done;f=d.next())u+=f.value}catch(w){n={error:w}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}}for(u=ue.findGuardPattern(t,u,!0,ue.MIDDLE_PATTERN,new Array(ue.MIDDLE_PATTERN.length).fill(0))[1],c=0;c<4&&u<l;c++){h=ue.decodeDigit(t,a,u,ue.L_PATTERNS),r+=String.fromCharCode("0".charCodeAt(0)+h);try{for(var g=(i=void 0,ge(a)),p=g.next();!p.done;p=g.next())u+=p.value}catch(m){i={error:m}}finally{try{p&&!p.done&&(s=g.return)&&s.call(g)}finally{if(i)throw i.error}}}return{rowOffset:u,resultString:r}},e.prototype.getBarcodeFormat=function(){return et.EAN_8},e}(ue),we=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),me=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_e=function(t){function e(e){var r=t.call(this)||this,n=null==e?null:e.get(I.POSSIBLE_FORMATS),o=[];return null!=n&&(n.indexOf(et.EAN_13)>-1&&o.push(new de),n.indexOf(et.EAN_8)>-1&&o.push(new pe)),0===o.length&&(o.push(new de),o.push(new pe)),r.readers=o,r}return we(e,t),e.prototype.decodeRow=function(t,e,r){var n,o;try{for(var i=me(this.readers),s=i.next();!s.done;s=i.next()){var a=s.value;try{return a.decodeRow(t,e,r)}catch(l){}}}catch(u){n={error:u}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}throw new k},e.prototype.reset=function(){var t,e;try{for(var r=me(this.readers),n=r.next();!n.done;n=r.next())n.value.reset()}catch(o){t={error:o}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},e}(Bt),ye=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ce=function(t){function e(e){var r=t.call(this)||this;r.readers=[];var n=e?e.get(I.POSSIBLE_FORMATS):null,o=e&&void 0!==e.get(I.ASSUME_CODE_39_CHECK_DIGIT);return n&&((n.includes(et.EAN_13)||n.includes(et.EAN_8))&&r.readers.push(new _e(e)),n.includes(et.CODE_39)&&r.readers.push(new Ft(o)),n.includes(et.CODE_128)&&r.readers.push(new Vt),n.includes(et.ITF)&&r.readers.push(new te),n.includes(et.RSS_14)&&r.readers.push(new $t)),0===r.readers.length&&(r.readers.push(new Ft),r.readers.push(new _e(e)),r.readers.push(new Vt),r.readers.push(new te),r.readers.push(new $t)),r}return ye(e,t),e.prototype.decodeRow=function(t,e,r){for(var n=0;n<this.readers.length;n++)try{return this.readers[n].decodeRow(t,e,r)}catch(o){}throw new k},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(Bt),Ee=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ae=(function(t){Ee(function(e,r){return void 0===e&&(e=500),t.call(this,new Ce(r),e,r)||this},t)}(Q),(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}),ve=function(){function t(t,e,r){this.ecCodewords=t,this.ecBlocks=[e],r&&this.ecBlocks.push(r)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Se=function(){function t(t,e){this.count=t,this.dataCodewords=e}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),Ie=function(){function t(t,e,r,n,o,i){var s,a;this.versionNumber=t,this.symbolSizeRows=e,this.symbolSizeColumns=r,this.dataRegionSizeRows=n,this.dataRegionSizeColumns=o,this.ecBlocks=i;var l=0,u=i.getECCodewords(),c=i.getECBlocks();try{for(var h=Ae(c),d=h.next();!d.done;d=h.next()){var f=d.value;l+=f.getCount()*(f.getDataCodewords()+u)}}catch(g){s={error:g}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}this.totalCodewords=l}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,o;if(0!=(1&e)||0!=(1&r))throw new T;try{for(var i=Ae(t.VERSIONS),s=i.next();!s.done;s=i.next()){var a=s.value;if(a.symbolSizeRows===e&&a.symbolSizeColumns===r)return a}}catch(l){n={error:l}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}throw new T},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new ve(5,new Se(1,3))),new t(2,12,12,10,10,new ve(7,new Se(1,5))),new t(3,14,14,12,12,new ve(10,new Se(1,8))),new t(4,16,16,14,14,new ve(12,new Se(1,12))),new t(5,18,18,16,16,new ve(14,new Se(1,18))),new t(6,20,20,18,18,new ve(18,new Se(1,22))),new t(7,22,22,20,20,new ve(20,new Se(1,30))),new t(8,24,24,22,22,new ve(24,new Se(1,36))),new t(9,26,26,24,24,new ve(28,new Se(1,44))),new t(10,32,32,14,14,new ve(36,new Se(1,62))),new t(11,36,36,16,16,new ve(42,new Se(1,86))),new t(12,40,40,18,18,new ve(48,new Se(1,114))),new t(13,44,44,20,20,new ve(56,new Se(1,144))),new t(14,48,48,22,22,new ve(68,new Se(1,174))),new t(15,52,52,24,24,new ve(42,new Se(2,102))),new t(16,64,64,14,14,new ve(56,new Se(2,140))),new t(17,72,72,16,16,new ve(36,new Se(4,92))),new t(18,80,80,18,18,new ve(48,new Se(4,114))),new t(19,88,88,20,20,new ve(56,new Se(4,144))),new t(20,96,96,22,22,new ve(68,new Se(4,174))),new t(21,104,104,24,24,new ve(56,new Se(6,136))),new t(22,120,120,18,18,new ve(68,new Se(6,175))),new t(23,132,132,20,20,new ve(62,new Se(8,163))),new t(24,144,144,22,22,new ve(62,new Se(8,156),new Se(2,155))),new t(25,8,18,6,16,new ve(7,new Se(1,5))),new t(26,8,32,6,14,new ve(11,new Se(1,10))),new t(27,12,26,10,24,new ve(14,new Se(1,16))),new t(28,12,36,10,16,new ve(18,new Se(1,22))),new t(29,16,36,14,16,new ve(24,new Se(1,32))),new t(30,16,48,14,22,new ve(28,new Se(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),be=function(){function t(e){var r=e.getHeight();if(r<8||r>144||0!=(1&r))throw new T;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new x(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(t){var e=t.getHeight(),r=t.getWidth();return Ie.getVersionForDimensions(e,r)},t.prototype.readCodewords=function(){var t=new Int8Array(this.version.getTotalCodewords()),e=0,r=4,n=0,o=this.mappingBitMatrix.getHeight(),i=this.mappingBitMatrix.getWidth(),s=!1,a=!1,l=!1,u=!1;do{if(r!==o||0!==n||s)if(r!==o-2||0!==n||0==(3&i)||a)if(r!==o+4||2!==n||0!=(7&i)||l)if(r!==o-2||0!==n||4!=(7&i)||u){do{r<o&&n>=0&&!this.readMappingMatrix.get(n,r)&&(t[e++]=255&this.readUtah(r,n,o,i)),r-=2,n+=2}while(r>=0&&n<i);r+=1,n+=3;do{r>=0&&n<i&&!this.readMappingMatrix.get(n,r)&&(t[e++]=255&this.readUtah(r,n,o,i)),r+=2,n-=2}while(r<o&&n>=0);r+=3,n+=1}else t[e++]=255&this.readCorner4(o,i),r-=2,n+=2,u=!0;else t[e++]=255&this.readCorner3(o,i),r-=2,n+=2,l=!0;else t[e++]=255&this.readCorner2(o,i),r-=2,n+=2,a=!0;else t[e++]=255&this.readCorner1(o,i),r-=2,n+=2,s=!0}while(r<o||n<i);if(e!==this.version.getTotalCodewords())throw new T;return t},t.prototype.readModule=function(t,e,r,n){return t<0&&(t+=r,e+=4-(r+4&7)),e<0&&(e+=n,t+=4-(n+4&7)),this.readMappingMatrix.set(e,t),this.mappingBitMatrix.get(e,t)},t.prototype.readUtah=function(t,e,r,n){var o=0;return this.readModule(t-2,e-2,r,n)&&(o|=1),o<<=1,this.readModule(t-2,e-1,r,n)&&(o|=1),o<<=1,this.readModule(t-1,e-2,r,n)&&(o|=1),o<<=1,this.readModule(t-1,e-1,r,n)&&(o|=1),o<<=1,this.readModule(t-1,e,r,n)&&(o|=1),o<<=1,this.readModule(t,e-2,r,n)&&(o|=1),o<<=1,this.readModule(t,e-1,r,n)&&(o|=1),o<<=1,this.readModule(t,e,r,n)&&(o|=1),o},t.prototype.readCorner1=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,1,t,e)&&(r|=1),r<<=1,this.readModule(t-1,2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},t.prototype.readCorner2=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-4,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},t.prototype.readCorner3=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-3,t,e)&&(r|=1),r<<=1,this.readModule(1,e-2,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},t.prototype.readCorner4=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},t.prototype.extractDataRegion=function(t){var e=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(t.getHeight()!==e)throw new c("Dimension of bitMatrix must match the version size");for(var n=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),i=e/n|0,s=r/o|0,a=new x(s*o,i*n),l=0;l<i;++l)for(var u=l*n,h=0;h<s;++h)for(var d=h*o,f=0;f<n;++f)for(var g=l*(n+2)+1+f,p=u+f,w=0;w<o;++w)t.get(h*(o+2)+1+w,g)&&a.set(d+w,p);return a},t}(),Te=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Re=function(){function t(t,e){this.numDataCodewords=t,this.codewords=e}return t.getDataBlocks=function(e,r){var n,o,i,s,a=r.getECBlocks(),l=0,u=a.getECBlocks();try{for(var h=Te(u),d=h.next();!d.done;d=h.next())l+=(m=d.value).getCount()}catch(O){n={error:O}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}var f=new Array(l),g=0;try{for(var p=Te(u),w=p.next();!w.done;w=p.next())for(var m=w.value,_=0;_<m.getCount();_++){var y=m.getDataCodewords(),C=a.getECCodewords()+y;f[g++]=new t(y,new Uint8Array(C))}}catch(N){i={error:N}}finally{try{w&&!w.done&&(s=p.return)&&s.call(p)}finally{if(i)throw i.error}}var E=f[0].codewords.length-a.getECCodewords(),A=E-1,v=0;for(_=0;_<A;_++)for(var S=0;S<g;S++)f[S].codewords[_]=e[v++];var I=24===r.getVersionNumber(),b=I?8:g;for(S=0;S<b;S++)f[S].codewords[E-1]=e[v++];var T=f[0].codewords.length;for(_=E;_<T;_++)for(S=0;S<g;S++){var R=I?(S+8)%g:S;f[R].codewords[I&&R>7?_-1:_]=e[v++]}if(v!==e.length)throw new c;return f},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Oe=function(){function t(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(t){if(t<1||t>32||t>this.available())throw new c(""+t);var e=0,r=this.bitOffset,n=this.byteOffset,o=this.bytes;if(r>0){var i=8-r,s=t<i?t:i;e=(o[n]&255>>8-s<<(a=i-s))>>a,t-=s,8===(r+=s)&&(r=0,n++)}if(t>0){for(;t>=8;)e=e<<8|255&o[n],n++,t-=8;var a;t>0&&(e=e<<t|(o[n]&255>>(a=8-t)<<a)>>a,r+=t)}return this.bitOffset=r,this.byteOffset=n,e},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}();!function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"}(wt||(wt={}));var Ne,De=function(){function t(){}return t.decode=function(t){var e=new Oe(t),r=new L,n=new L,o=new Array,i=wt.ASCII_ENCODE;do{if(i===wt.ASCII_ENCODE)i=this.decodeAsciiSegment(e,r,n);else{switch(i){case wt.C40_ENCODE:this.decodeC40Segment(e,r);break;case wt.TEXT_ENCODE:this.decodeTextSegment(e,r);break;case wt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(e,r);break;case wt.EDIFACT_ENCODE:this.decodeEdifactSegment(e,r);break;case wt.BASE256_ENCODE:this.decodeBase256Segment(e,r,o);break;default:throw new T}i=wt.ASCII_ENCODE}}while(i!==wt.PAD_ENCODE&&e.available()>0);return n.length()>0&&r.append(n.toString()),new ot(t,r.toString(),0===o.length?null:o,null)},t.decodeAsciiSegment=function(t,e,r){var n=!1;do{var o=t.readBits(8);if(0===o)throw new T;if(o<=128)return n&&(o+=128),e.append(String.fromCharCode(o-1)),wt.ASCII_ENCODE;if(129===o)return wt.PAD_ENCODE;if(o<=229){var i=o-130;i<10&&e.append("0"),e.append(""+i)}else switch(o){case 230:return wt.C40_ENCODE;case 231:return wt.BASE256_ENCODE;case 232:e.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:n=!0;break;case 236:e.append("[)>\x1e05\x1d"),r.insert(0,"\x1e\x04");break;case 237:e.append("[)>\x1e06\x1d"),r.insert(0,"\x1e\x04");break;case 238:return wt.ANSIX12_ENCODE;case 239:return wt.TEXT_ENCODE;case 240:return wt.EDIFACT_ENCODE;case 241:break;default:if(254!==o||0!==t.available())throw new T}}while(t.available()>0);return wt.ASCII_ENCODE},t.decodeC40Segment=function(t,e){var r=!1,n=[],o=0;do{if(8===t.available())return;var i=t.readBits(8);if(254===i)return;this.parseTwoBytes(i,t.readBits(8),n);for(var s=0;s<3;s++){var a=n[s];switch(o){case 0:if(a<3)o=a+1;else{if(!(a<this.C40_BASIC_SET_CHARS.length))throw new T;var l=this.C40_BASIC_SET_CHARS[a];r?(e.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):e.append(l)}break;case 1:r?(e.append(String.fromCharCode(a+128)),r=!1):e.append(String.fromCharCode(a)),o=0;break;case 2:if(a<this.C40_SHIFT2_SET_CHARS.length)l=this.C40_SHIFT2_SET_CHARS[a],r?(e.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):e.append(l);else switch(a){case 27:e.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new T}o=0;break;case 3:r?(e.append(String.fromCharCode(a+224)),r=!1):e.append(String.fromCharCode(a+96)),o=0;break;default:throw new T}}}while(t.available()>0)},t.decodeTextSegment=function(t,e){var r=!1,n=[],o=0;do{if(8===t.available())return;var i=t.readBits(8);if(254===i)return;this.parseTwoBytes(i,t.readBits(8),n);for(var s=0;s<3;s++){var a=n[s];switch(o){case 0:if(a<3)o=a+1;else{if(!(a<this.TEXT_BASIC_SET_CHARS.length))throw new T;var l=this.TEXT_BASIC_SET_CHARS[a];r?(e.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):e.append(l)}break;case 1:r?(e.append(String.fromCharCode(a+128)),r=!1):e.append(String.fromCharCode(a)),o=0;break;case 2:if(a<this.TEXT_SHIFT2_SET_CHARS.length)l=this.TEXT_SHIFT2_SET_CHARS[a],r?(e.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):e.append(l);else switch(a){case 27:e.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new T}o=0;break;case 3:if(!(a<this.TEXT_SHIFT3_SET_CHARS.length))throw new T;l=this.TEXT_SHIFT3_SET_CHARS[a],r?(e.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):e.append(l),o=0;break;default:throw new T}}}while(t.available()>0)},t.decodeAnsiX12Segment=function(t,e){var r=[];do{if(8===t.available())return;var n=t.readBits(8);if(254===n)return;this.parseTwoBytes(n,t.readBits(8),r);for(var o=0;o<3;o++){var i=r[o];switch(i){case 0:e.append("\r");break;case 1:e.append("*");break;case 2:e.append(">");break;case 3:e.append(" ");break;default:if(i<14)e.append(String.fromCharCode(i+44));else{if(!(i<40))throw new T;e.append(String.fromCharCode(i+51))}}}}while(t.available()>0)},t.parseTwoBytes=function(t,e,r){var n=(t<<8)+e-1,o=Math.floor(n/1600);r[0]=o,n-=1600*o,o=Math.floor(n/40),r[1]=o,r[2]=n-40*o},t.decodeEdifactSegment=function(t,e){do{if(t.available()<=16)return;for(var r=0;r<4;r++){var n=t.readBits(6);if(31===n){var o=8-t.getBitOffset();return void(8!==o&&t.readBits(o))}0==(32&n)&&(n|=64),e.append(String.fromCharCode(n))}}while(t.available()>0)},t.decodeBase256Segment=function(t,e,r){var n,o=1+t.getByteOffset(),i=this.unrandomize255State(t.readBits(8),o++);if((n=0===i?t.available()/8|0:i<250?i:250*(i-249)+this.unrandomize255State(t.readBits(8),o++))<0)throw new T;for(var s=new Uint8Array(n),a=0;a<n;a++){if(t.available()<8)throw new T;s[a]=this.unrandomize255State(t.readBits(8),o++)}r.push(s);try{e.append(P.decode(s,B.ISO88591))}catch(l){throw new gt("Platform does not support required encoding: "+l.message)}},t.unrandomize255State=function(t,e){var r=t-(149*e%255+1);return r>=0?r:r+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],t}(),Me=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pe=function(){function t(){this.rsDecoder=new pt(ct.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(t){var e,r,n=new be(t),o=n.getVersion(),i=n.readCodewords(),s=Re.getDataBlocks(i,o),a=0;try{for(var l=Me(s),u=l.next();!u.done;u=l.next())a+=u.value.getNumDataCodewords()}catch(m){e={error:m}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}for(var c=new Uint8Array(a),h=s.length,d=0;d<h;d++){var f=s[d],g=f.getCodewords(),p=f.getNumDataCodewords();this.correctErrors(g,p);for(var w=0;w<p;w++)c[w*h+d]=g[w]}return De.decode(c)},t.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch(o){throw new f}for(var n=0;n<e;n++)t[n]=r[n]},t}(),Be=function(){function t(t){this.image=t,this.rectangleDetector=new It(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if((r=this.detectSolid2(r))[3]=this.correctTopRight(r),!r[3])throw new k;var n=(r=this.shiftToModuleCenter(r))[0],o=r[1],i=r[2],s=r[3],a=this.transitionsBetween(n,s)+1,l=this.transitionsBetween(i,s)+1;1==(1&a)&&(a+=1),1==(1&l)&&(l+=1),4*a<7*l&&4*l<7*a&&(a=l=Math.max(a,l));var u=t.sampleGrid(this.image,n,o,i,s,a,l);return new At(u,[n,o,i,s])},t.shiftPoint=function(t,e,r){var n=(e.getX()-t.getX())/(r+1),o=(e.getY()-t.getY())/(r+1);return new Et(t.getX()+n,t.getY()+o)},t.moveAway=function(t,e,r){var n=t.getX(),o=t.getY();return n<e?n-=1:n+=1,o<r?o-=1:o+=1,new Et(n,o)},t.prototype.detectSolid1=function(t){var e=t[0],r=t[1],n=t[3],o=t[2],i=this.transitionsBetween(e,r),s=this.transitionsBetween(r,n),a=this.transitionsBetween(n,o),l=this.transitionsBetween(o,e),u=i,c=[o,e,r,n];return u>s&&(u=s,c[0]=e,c[1]=r,c[2]=n,c[3]=o),u>a&&(u=a,c[0]=r,c[1]=n,c[2]=o,c[3]=e),u>l&&(c[0]=n,c[1]=o,c[2]=e,c[3]=r),c},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],o=e[2],i=e[3],s=this.transitionsBetween(r,i),a=t.shiftPoint(n,o,4*(s+1)),l=t.shiftPoint(o,n,4*(s+1));return this.transitionsBetween(a,r)<this.transitionsBetween(l,i)?(e[0]=r,e[1]=n,e[2]=o,e[3]=i):(e[0]=n,e[1]=o,e[2]=i,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],o=e[2],i=e[3],s=this.transitionsBetween(r,i),a=this.transitionsBetween(n,i),l=t.shiftPoint(r,n,4*(a+1)),u=t.shiftPoint(o,n,4*(s+1));s=this.transitionsBetween(l,i),a=this.transitionsBetween(u,i);var c=new Et(i.getX()+(o.getX()-n.getX())/(s+1),i.getY()+(o.getY()-n.getY())/(s+1)),h=new Et(i.getX()+(r.getX()-n.getX())/(a+1),i.getY()+(r.getY()-n.getY())/(a+1));return this.isValid(c)?this.isValid(h)?this.transitionsBetween(l,c)+this.transitionsBetween(u,c)>this.transitionsBetween(l,h)+this.transitionsBetween(u,h)?c:h:c:this.isValid(h)?h:null},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],o=e[2],i=e[3],s=this.transitionsBetween(r,i)+1,a=this.transitionsBetween(o,i)+1,l=t.shiftPoint(r,n,4*a),u=t.shiftPoint(o,n,4*s);1==(1&(s=this.transitionsBetween(l,i)+1))&&(s+=1),1==(1&(a=this.transitionsBetween(u,i)+1))&&(a+=1);var c,h,d=(r.getX()+n.getX()+o.getX()+i.getX())/4,f=(r.getY()+n.getY()+o.getY()+i.getY())/4;return r=t.moveAway(r,d,f),n=t.moveAway(n,d,f),o=t.moveAway(o,d,f),i=t.moveAway(i,d,f),l=t.shiftPoint(r,n,4*a),l=t.shiftPoint(l,i,4*s),c=t.shiftPoint(n,r,4*a),c=t.shiftPoint(c,o,4*s),u=t.shiftPoint(o,i,4*a),u=t.shiftPoint(u,n,4*s),h=t.shiftPoint(i,o,4*a),[l,c,u,h=t.shiftPoint(h,r,4*s)]},t.prototype.isValid=function(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()},t.sampleGrid=function(t,e,r,n,o,i,s){return Nt.getInstance().sampleGrid(t,i,s,.5,.5,i-.5,.5,i-.5,s-.5,.5,s-.5,e.getX(),e.getY(),o.getX(),o.getY(),n.getX(),n.getY(),r.getX(),r.getY())},t.prototype.transitionsBetween=function(t,e){var r=Math.trunc(t.getX()),n=Math.trunc(t.getY()),o=Math.trunc(e.getX()),i=Math.trunc(e.getY()),s=Math.abs(i-n)>Math.abs(o-r);if(s){var a=r;r=n,n=a,a=o,o=i,i=a}for(var l=Math.abs(o-r),u=Math.abs(i-n),c=-l/2,h=n<i?1:-1,d=r<o?1:-1,f=0,g=this.image.get(s?n:r,s?r:n),p=r,w=n;p!==o;p+=d){var m=this.image.get(s?w:p,s?p:w);if(m!==g&&(f++,g=m),(c+=u)>0){if(w===i)break;w+=h,c-=l}}return f},t}(),Le=function(){function t(){this.decoder=new Pe}return t.prototype.decode=function(e,r){var n,o;if(void 0===r&&(r=null),null!=r&&r.has(I.PURE_BARCODE)){var i=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(i),o=t.NO_POINTS}else{var s=new Be(e.getBlackMatrix()).detect();n=this.decoder.decode(s.getBits()),o=s.getPoints()}var a=n.getRawBytes(),l=new J(n.getText(),a,8*a.length,o,et.DATA_MATRIX,p.currentTimeMillis()),u=n.getByteSegments();null!=u&&l.putMetadata(nt.BYTE_SEGMENTS,u);var c=n.getECLevel();return null!=c&&l.putMetadata(nt.ERROR_CORRECTION_LEVEL,c),l},t.prototype.reset=function(){},t.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(null==e||null==r)throw new k;var n=this.moduleSize(e,t),o=e[1],i=e[0],s=(r[0]-i+1)/n,a=(r[1]-o+1)/n;if(s<=0||a<=0)throw new k;var l=n/2;o+=l,i+=l;for(var u=new x(s,a),c=0;c<a;c++)for(var h=o+c*n,d=0;d<s;d++)t.get(i+d*n,h)&&u.set(d,c);return u},t.moduleSize=function(t,e){for(var r=e.getWidth(),n=t[0],o=t[1];n<r&&e.get(n,o);)n++;if(n===r)throw new k;var i=n-t[0];if(0===i)throw new k;return i},t.NO_POINTS=[],t}(),xe=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(t){xe(function(e){return void 0===e&&(e=500),t.call(this,new Le,e)||this},t)}(Q),function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"}(Ne||(Ne={}));var Fe,ke=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new l(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){return e instanceof t&&this.value===e.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new c;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(Ne.L,"L",1),t.M=new t(Ne.M,"M",0),t.Q=new t(Ne.Q,"Q",3),t.H=new t(Ne.H,"H",2),t}(),Ve=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ue=function(){function t(t){this.errorCorrectionLevel=ke.forBits(t>>3&3),this.dataMask=7&t}return t.numBitsDiffering=function(t,e){return w.bitCount(t^e)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return null!==n?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,o,i=Number.MAX_SAFE_INTEGER,s=0;try{for(var a=Ve(t.FORMAT_INFO_DECODE_LOOKUP),l=a.next();!l.done;l=a.next()){var u=l.value,c=u[0];if(c===e||c===r)return new t(u[1]);var h=t.numBitsDiffering(e,c);h<i&&(s=u[1],i=h),e!==r&&(h=t.numBitsDiffering(r,c))<i&&(s=u[1],i=h)}}catch(d){n={error:d}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return i<=3?new t(s):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){return e instanceof t&&this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),He=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ge=function(){function t(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.ecCodewordsPerBlock=t,this.ecBlocks=e}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var t,e,r=0,n=this.ecBlocks;try{for(var o=He(n),i=o.next();!i.done;i=o.next())r+=i.value.getCount()}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return r},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),We=function(){function t(t,e){this.count=t,this.dataCodewords=e}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),ze=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xe=function(){function t(t,e){for(var r,n,o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];this.versionNumber=t,this.alignmentPatternCenters=e,this.ecBlocks=o;var s=0,a=o[0].getECCodewordsPerBlock(),l=o[0].getECBlocks();try{for(var u=ze(l),c=u.next();!c.done;c=u.next()){var h=c.value;s+=h.getCount()*(h.getDataCodewords()+a)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}this.totalCodewords=s}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(t){return this.ecBlocks[t.getValue()]},t.getProvisionalVersionForDimension=function(t){if(t%4!=1)throw new T;try{return this.getVersionForNumber((t-17)/4)}catch(e){throw new T}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new c;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,o=0;o<t.VERSION_DECODE_INFO.length;o++){var i=t.VERSION_DECODE_INFO[o];if(i===e)return t.getVersionForNumber(o+7);var s=Ue.numBitsDiffering(e,i);s<r&&(n=o+7,r=s)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var t=this.getDimensionForVersion(),e=new x(t);e.setRegion(0,0,9,9),e.setRegion(t-8,0,8,9),e.setRegion(0,t-8,9,8);for(var r=this.alignmentPatternCenters.length,n=0;n<r;n++)for(var o=this.alignmentPatternCenters[n]-2,i=0;i<r;i++)0===n&&(0===i||i===r-1)||n===r-1&&0===i||e.setRegion(this.alignmentPatternCenters[i]-2,o,5,5);return e.setRegion(6,9,1,t-17),e.setRegion(9,6,t-17,1),this.versionNumber>6&&(e.setRegion(t-11,0,3,6),e.setRegion(0,t-11,6,3)),e},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new Ge(7,new We(1,19)),new Ge(10,new We(1,16)),new Ge(13,new We(1,13)),new Ge(17,new We(1,9))),new t(2,Int32Array.from([6,18]),new Ge(10,new We(1,34)),new Ge(16,new We(1,28)),new Ge(22,new We(1,22)),new Ge(28,new We(1,16))),new t(3,Int32Array.from([6,22]),new Ge(15,new We(1,55)),new Ge(26,new We(1,44)),new Ge(18,new We(2,17)),new Ge(22,new We(2,13))),new t(4,Int32Array.from([6,26]),new Ge(20,new We(1,80)),new Ge(18,new We(2,32)),new Ge(26,new We(2,24)),new Ge(16,new We(4,9))),new t(5,Int32Array.from([6,30]),new Ge(26,new We(1,108)),new Ge(24,new We(2,43)),new Ge(18,new We(2,15),new We(2,16)),new Ge(22,new We(2,11),new We(2,12))),new t(6,Int32Array.from([6,34]),new Ge(18,new We(2,68)),new Ge(16,new We(4,27)),new Ge(24,new We(4,19)),new Ge(28,new We(4,15))),new t(7,Int32Array.from([6,22,38]),new Ge(20,new We(2,78)),new Ge(18,new We(4,31)),new Ge(18,new We(2,14),new We(4,15)),new Ge(26,new We(4,13),new We(1,14))),new t(8,Int32Array.from([6,24,42]),new Ge(24,new We(2,97)),new Ge(22,new We(2,38),new We(2,39)),new Ge(22,new We(4,18),new We(2,19)),new Ge(26,new We(4,14),new We(2,15))),new t(9,Int32Array.from([6,26,46]),new Ge(30,new We(2,116)),new Ge(22,new We(3,36),new We(2,37)),new Ge(20,new We(4,16),new We(4,17)),new Ge(24,new We(4,12),new We(4,13))),new t(10,Int32Array.from([6,28,50]),new Ge(18,new We(2,68),new We(2,69)),new Ge(26,new We(4,43),new We(1,44)),new Ge(24,new We(6,19),new We(2,20)),new Ge(28,new We(6,15),new We(2,16))),new t(11,Int32Array.from([6,30,54]),new Ge(20,new We(4,81)),new Ge(30,new We(1,50),new We(4,51)),new Ge(28,new We(4,22),new We(4,23)),new Ge(24,new We(3,12),new We(8,13))),new t(12,Int32Array.from([6,32,58]),new Ge(24,new We(2,92),new We(2,93)),new Ge(22,new We(6,36),new We(2,37)),new Ge(26,new We(4,20),new We(6,21)),new Ge(28,new We(7,14),new We(4,15))),new t(13,Int32Array.from([6,34,62]),new Ge(26,new We(4,107)),new Ge(22,new We(8,37),new We(1,38)),new Ge(24,new We(8,20),new We(4,21)),new Ge(22,new We(12,11),new We(4,12))),new t(14,Int32Array.from([6,26,46,66]),new Ge(30,new We(3,115),new We(1,116)),new Ge(24,new We(4,40),new We(5,41)),new Ge(20,new We(11,16),new We(5,17)),new Ge(24,new We(11,12),new We(5,13))),new t(15,Int32Array.from([6,26,48,70]),new Ge(22,new We(5,87),new We(1,88)),new Ge(24,new We(5,41),new We(5,42)),new Ge(30,new We(5,24),new We(7,25)),new Ge(24,new We(11,12),new We(7,13))),new t(16,Int32Array.from([6,26,50,74]),new Ge(24,new We(5,98),new We(1,99)),new Ge(28,new We(7,45),new We(3,46)),new Ge(24,new We(15,19),new We(2,20)),new Ge(30,new We(3,15),new We(13,16))),new t(17,Int32Array.from([6,30,54,78]),new Ge(28,new We(1,107),new We(5,108)),new Ge(28,new We(10,46),new We(1,47)),new Ge(28,new We(1,22),new We(15,23)),new Ge(28,new We(2,14),new We(17,15))),new t(18,Int32Array.from([6,30,56,82]),new Ge(30,new We(5,120),new We(1,121)),new Ge(26,new We(9,43),new We(4,44)),new Ge(28,new We(17,22),new We(1,23)),new Ge(28,new We(2,14),new We(19,15))),new t(19,Int32Array.from([6,30,58,86]),new Ge(28,new We(3,113),new We(4,114)),new Ge(26,new We(3,44),new We(11,45)),new Ge(26,new We(17,21),new We(4,22)),new Ge(26,new We(9,13),new We(16,14))),new t(20,Int32Array.from([6,34,62,90]),new Ge(28,new We(3,107),new We(5,108)),new Ge(26,new We(3,41),new We(13,42)),new Ge(30,new We(15,24),new We(5,25)),new Ge(28,new We(15,15),new We(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new Ge(28,new We(4,116),new We(4,117)),new Ge(26,new We(17,42)),new Ge(28,new We(17,22),new We(6,23)),new Ge(30,new We(19,16),new We(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new Ge(28,new We(2,111),new We(7,112)),new Ge(28,new We(17,46)),new Ge(30,new We(7,24),new We(16,25)),new Ge(24,new We(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new Ge(30,new We(4,121),new We(5,122)),new Ge(28,new We(4,47),new We(14,48)),new Ge(30,new We(11,24),new We(14,25)),new Ge(30,new We(16,15),new We(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new Ge(30,new We(6,117),new We(4,118)),new Ge(28,new We(6,45),new We(14,46)),new Ge(30,new We(11,24),new We(16,25)),new Ge(30,new We(30,16),new We(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new Ge(26,new We(8,106),new We(4,107)),new Ge(28,new We(8,47),new We(13,48)),new Ge(30,new We(7,24),new We(22,25)),new Ge(30,new We(22,15),new We(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new Ge(28,new We(10,114),new We(2,115)),new Ge(28,new We(19,46),new We(4,47)),new Ge(28,new We(28,22),new We(6,23)),new Ge(30,new We(33,16),new We(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new Ge(30,new We(8,122),new We(4,123)),new Ge(28,new We(22,45),new We(3,46)),new Ge(30,new We(8,23),new We(26,24)),new Ge(30,new We(12,15),new We(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new Ge(30,new We(3,117),new We(10,118)),new Ge(28,new We(3,45),new We(23,46)),new Ge(30,new We(4,24),new We(31,25)),new Ge(30,new We(11,15),new We(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new Ge(30,new We(7,116),new We(7,117)),new Ge(28,new We(21,45),new We(7,46)),new Ge(30,new We(1,23),new We(37,24)),new Ge(30,new We(19,15),new We(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new Ge(30,new We(5,115),new We(10,116)),new Ge(28,new We(19,47),new We(10,48)),new Ge(30,new We(15,24),new We(25,25)),new Ge(30,new We(23,15),new We(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new Ge(30,new We(13,115),new We(3,116)),new Ge(28,new We(2,46),new We(29,47)),new Ge(30,new We(42,24),new We(1,25)),new Ge(30,new We(23,15),new We(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new Ge(30,new We(17,115)),new Ge(28,new We(10,46),new We(23,47)),new Ge(30,new We(10,24),new We(35,25)),new Ge(30,new We(19,15),new We(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new Ge(30,new We(17,115),new We(1,116)),new Ge(28,new We(14,46),new We(21,47)),new Ge(30,new We(29,24),new We(19,25)),new Ge(30,new We(11,15),new We(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new Ge(30,new We(13,115),new We(6,116)),new Ge(28,new We(14,46),new We(23,47)),new Ge(30,new We(44,24),new We(7,25)),new Ge(30,new We(59,16),new We(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new Ge(30,new We(12,121),new We(7,122)),new Ge(28,new We(12,47),new We(26,48)),new Ge(30,new We(39,24),new We(14,25)),new Ge(30,new We(22,15),new We(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new Ge(30,new We(6,121),new We(14,122)),new Ge(28,new We(6,47),new We(34,48)),new Ge(30,new We(46,24),new We(10,25)),new Ge(30,new We(2,15),new We(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new Ge(30,new We(17,122),new We(4,123)),new Ge(28,new We(29,46),new We(14,47)),new Ge(30,new We(49,24),new We(10,25)),new Ge(30,new We(24,15),new We(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new Ge(30,new We(4,122),new We(18,123)),new Ge(28,new We(13,46),new We(32,47)),new Ge(30,new We(48,24),new We(14,25)),new Ge(30,new We(42,15),new We(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new Ge(30,new We(20,117),new We(4,118)),new Ge(28,new We(40,47),new We(7,48)),new Ge(30,new We(43,24),new We(22,25)),new Ge(30,new We(10,15),new We(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new Ge(30,new We(19,118),new We(6,119)),new Ge(28,new We(18,47),new We(31,48)),new Ge(30,new We(34,24),new We(34,25)),new Ge(30,new We(20,15),new We(61,16)))],t}();!function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"}(Fe||(Fe={}));var je,Ye=function(){function t(t,e){this.value=t,this.isMasked=e}return t.prototype.unmaskBitMatrix=function(t,e){for(var r=0;r<e;r++)for(var n=0;n<e;n++)this.isMasked(r,n)&&t.flip(n,r)},t.values=new Map([[Fe.DATA_MASK_000,new t(Fe.DATA_MASK_000,function(t,e){return 0==(t+e&1)})],[Fe.DATA_MASK_001,new t(Fe.DATA_MASK_001,function(t,e){return 0==(1&t)})],[Fe.DATA_MASK_010,new t(Fe.DATA_MASK_010,function(t,e){return e%3==0})],[Fe.DATA_MASK_011,new t(Fe.DATA_MASK_011,function(t,e){return(t+e)%3==0})],[Fe.DATA_MASK_100,new t(Fe.DATA_MASK_100,function(t,e){return 0==(Math.floor(t/2)+Math.floor(e/3)&1)})],[Fe.DATA_MASK_101,new t(Fe.DATA_MASK_101,function(t,e){return t*e%6==0})],[Fe.DATA_MASK_110,new t(Fe.DATA_MASK_110,function(t,e){return t*e%6<3})],[Fe.DATA_MASK_111,new t(Fe.DATA_MASK_111,function(t,e){return 0==(t+e+t*e%3&1)})]]),t}(),Ze=function(){function t(t){var e=t.getHeight();if(e<21||1!=(3&e))throw new T;this.bitMatrix=t}return t.prototype.readFormatInformation=function(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var t=0,e=0;e<6;e++)t=this.copyBit(e,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(var r=5;r>=0;r--)t=this.copyBit(8,r,t);var n=this.bitMatrix.getHeight(),o=0,i=n-7;for(r=n-1;r>=i;r--)o=this.copyBit(8,r,o);for(e=n-8;e<n;e++)o=this.copyBit(e,8,o);if(this.parsedFormatInfo=Ue.decodeFormatInformation(t,o),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new T},t.prototype.readVersion=function(){if(null!=this.parsedVersion)return this.parsedVersion;var t=this.bitMatrix.getHeight(),e=Math.floor((t-17)/4);if(e<=6)return Xe.getVersionForNumber(e);for(var r=0,n=t-11,o=5;o>=0;o--)for(var i=t-9;i>=n;i--)r=this.copyBit(i,o,r);var s=Xe.decodeVersionInformation(r);if(null!==s&&s.getDimensionForVersion()===t)return this.parsedVersion=s,s;for(r=0,i=5;i>=0;i--)for(o=t-9;o>=n;o--)r=this.copyBit(i,o,r);if(null!==(s=Xe.decodeVersionInformation(r))&&s.getDimensionForVersion()===t)return this.parsedVersion=s,s;throw new T},t.prototype.copyBit=function(t,e,r){return(this.isMirror?this.bitMatrix.get(e,t):this.bitMatrix.get(t,e))?r<<1|1:r<<1},t.prototype.readCodewords=function(){var t=this.readFormatInformation(),e=this.readVersion(),r=Ye.values.get(t.getDataMask()),n=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,n);for(var o=e.buildFunctionPattern(),i=!0,s=new Uint8Array(e.getTotalCodewords()),a=0,l=0,u=0,c=n-1;c>0;c-=2){6===c&&c--;for(var h=0;h<n;h++)for(var d=i?n-1-h:h,f=0;f<2;f++)o.get(c-f,d)||(u++,l<<=1,this.bitMatrix.get(c-f,d)&&(l|=1),8===u&&(s[a++]=l,u=0,l=0));i=!i}if(a!==e.getTotalCodewords())throw new T;return s},t.prototype.remask=function(){if(null!==this.parsedFormatInfo){var t=Ye.values[this.parsedFormatInfo.getDataMask()],e=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,e)}},t.prototype.setMirror=function(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t},t.prototype.mirror=function(){for(var t=this.bitMatrix,e=0,r=t.getWidth();e<r;e++)for(var n=e+1,o=t.getHeight();n<o;n++)t.get(e,n)!==t.get(n,e)&&(t.flip(n,e),t.flip(e,n))},t}(),Ke=function(){function t(t){this.mirrored=t}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(t){if(this.mirrored&&null!==t&&!(t.length<3)){var e=t[0];t[0]=t[2],t[2]=e}},t}(),qe=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$e=function(){function t(t,e){this.numDataCodewords=t,this.codewords=e}return t.getDataBlocks=function(e,r,n){var o,i,s,a;if(e.length!==r.getTotalCodewords())throw new c;var l=r.getECBlocksForLevel(n),u=0,h=l.getECBlocks();try{for(var d=qe(h),f=d.next();!f.done;f=d.next())u+=(_=f.value).getCount()}catch(R){o={error:R}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}var g=new Array(u),p=0;try{for(var w=qe(h),m=w.next();!m.done;m=w.next())for(var _=m.value,y=0;y<_.getCount();y++){var C=_.getDataCodewords(),E=l.getECCodewordsPerBlock()+C;g[p++]=new t(C,new Uint8Array(E))}}catch(O){s={error:O}}finally{try{m&&!m.done&&(a=w.return)&&a.call(w)}finally{if(s)throw s.error}}for(var A=g[0].codewords.length,v=g.length-1;v>=0&&g[v].codewords.length!==A;)v--;v++;var S=A-l.getECCodewordsPerBlock(),I=0;for(y=0;y<S;y++)for(var b=0;b<p;b++)g[b].codewords[y]=e[I++];for(b=v;b<p;b++)g[b].codewords[S]=e[I++];var T=g[0].codewords.length;for(y=S;y<T;y++)for(b=0;b<p;b++)g[b].codewords[b<v?y:y+1]=e[I++];return g},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}();!function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"}(je||(je={}));var Qe,Je,tr=function(){function t(e,r,n,o){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=o,t.FOR_BITS.set(o,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(void 0===r)throw new c;return r},t.prototype.getCharacterCountBits=function(t){var e=t.getVersionNumber();return this.characterCountBitsForVersions[e<=9?0:e<=26?1:2]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){return e instanceof t&&this.value===e.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(je.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(je.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(je.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(je.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(je.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(je.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(je.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(je.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(je.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(je.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),er=function(){function t(){}return t.decode=function(e,r,n,o){var i=new Oe(e),s=new L,a=new Array,l=-1,u=-1;try{var c=null,h=!1,d=void 0;do{if(i.available()<4)d=tr.TERMINATOR;else{var f=i.readBits(4);d=tr.forBits(f)}switch(d){case tr.TERMINATOR:break;case tr.FNC1_FIRST_POSITION:case tr.FNC1_SECOND_POSITION:h=!0;break;case tr.STRUCTURED_APPEND:if(i.available()<16)throw new T;l=i.readBits(8),u=i.readBits(8);break;case tr.ECI:var g=t.parseECIValue(i);if(null===(c=N.getCharacterSetECIByValue(g)))throw new T;break;case tr.HANZI:var p=i.readBits(4),w=i.readBits(d.getCharacterCountBits(r));p===t.GB2312_SUBSET&&t.decodeHanziSegment(i,s,w);break;default:var m=i.readBits(d.getCharacterCountBits(r));switch(d){case tr.NUMERIC:t.decodeNumericSegment(i,s,m);break;case tr.ALPHANUMERIC:t.decodeAlphanumericSegment(i,s,m,h);break;case tr.BYTE:t.decodeByteSegment(i,s,m,c,a,o);break;case tr.KANJI:t.decodeKanjiSegment(i,s,m);break;default:throw new T}}}while(d!==tr.TERMINATOR)}catch(_){throw new T}return new ot(e,s.toString(),0===a.length?null:a,null===n?null:n.toString(),l,u)},t.decodeHanziSegment=function(t,e,r){if(13*r>t.available())throw new T;for(var n=new Uint8Array(2*r),o=0;r>0;){var i=t.readBits(13),s=i/96<<8&4294967295|i%96;n[o]=(s+=s<959?41377:42657)>>8&255,n[o+1]=255&s,o+=2,r--}try{e.append(P.decode(n,B.GB2312))}catch(a){throw new T(a)}},t.decodeKanjiSegment=function(t,e,r){if(13*r>t.available())throw new T;for(var n=new Uint8Array(2*r),o=0;r>0;){var i=t.readBits(13),s=i/192<<8&4294967295|i%192;n[o]=(s+=s<7936?33088:49472)>>8,n[o+1]=s,o+=2,r--}try{e.append(P.decode(n,B.SHIFT_JIS))}catch(a){throw new T(a)}},t.decodeByteSegment=function(t,e,r,n,o,i){if(8*r>t.available())throw new T;for(var s,a=new Uint8Array(r),l=0;l<r;l++)a[l]=t.readBits(8);s=null===n?B.guessEncoding(a,i):n.getName();try{e.append(P.decode(a,s))}catch(u){throw new T(u)}o.push(a)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new T;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,o){for(var i=r.length();n>1;){if(e.available()<11)throw new T;var s=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(s/45))),r.append(t.toAlphaNumericChar(s%45)),n-=2}if(1===n){if(e.available()<6)throw new T;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(o)for(var a=i;a<r.length();a++)"%"===r.charAt(a)&&(a<r.length()-1&&"%"===r.charAt(a+1)?r.deleteCharAt(a+1):r.setCharAt(a,String.fromCharCode(29)))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new T;var o=e.readBits(10);if(o>=1e3)throw new T;r.append(t.toAlphaNumericChar(Math.floor(o/100))),r.append(t.toAlphaNumericChar(Math.floor(o/10)%10)),r.append(t.toAlphaNumericChar(o%10)),n-=3}if(2===n){if(e.available()<7)throw new T;var i=e.readBits(7);if(i>=100)throw new T;r.append(t.toAlphaNumericChar(Math.floor(i/10))),r.append(t.toAlphaNumericChar(i%10))}else if(1===n){if(e.available()<4)throw new T;var s=e.readBits(4);if(s>=10)throw new T;r.append(t.toAlphaNumericChar(s))}},t.parseECIValue=function(t){var e=t.readBits(8);if(0==(128&e))return 127&e;if(128==(192&e))return(63&e)<<8&4294967295|t.readBits(8);if(192==(224&e))return(31&e)<<16&4294967295|t.readBits(16);throw new T},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),rr=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nr=function(){function t(){this.rsDecoder=new pt(ct.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(t,e){return this.decodeBitMatrix(x.parseFromBooleanArray(t),e)},t.prototype.decodeBitMatrix=function(t,e){var r=new Ze(t),n=null;try{return this.decodeBitMatrixParser(r,e)}catch(i){n=i}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var o=this.decodeBitMatrixParser(r,e);return o.setOther(new Ke(!0)),o}catch(i){if(null!==n)throw n;throw i}},t.prototype.decodeBitMatrixParser=function(t,e){var r,n,o,i,s=t.readVersion(),a=t.readFormatInformation().getErrorCorrectionLevel(),l=t.readCodewords(),u=$e.getDataBlocks(l,s,a),c=0;try{for(var h=rr(u),d=h.next();!d.done;d=h.next())c+=(m=d.value).getNumDataCodewords()}catch(E){r={error:E}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}var f=new Uint8Array(c),g=0;try{for(var p=rr(u),w=p.next();!w.done;w=p.next()){var m,_=(m=w.value).getCodewords(),y=m.getNumDataCodewords();this.correctErrors(_,y);for(var C=0;C<y;C++)f[g++]=_[C]}}catch(A){o={error:A}}finally{try{w&&!w.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}return er.decode(f,s,a,e)},t.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch(o){throw new f}for(var n=0;n<e;n++)t[n]=r[n]},t}(),or=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ir=function(t){function e(e,r,n,o){var i=t.call(this,e,r)||this;return i.estimatedModuleSize=n,i.count=o,void 0===o&&(i.count=1),i}return or(e,t),e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,e,r){if(Math.abs(e-this.getY())<=t&&Math.abs(r-this.getX())<=t){var n=Math.abs(t-this.estimatedModuleSize);return n<=1||n<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,n){var o=this.count+1;return new e((this.count*this.getX()+r)/o,(this.count*this.getY()+t)/o,(this.count*this.estimatedModuleSize+n)/o,o)},e}(Et),sr=function(){function t(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),ar=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lr=function(){function t(t,e){this.image=t,this.resultPointCallback=e,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=e}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=null!=e&&void 0!==e.get(I.TRY_HARDER),n=null!=e&&void 0!==e.get(I.PURE_BARCODE),o=this.image,i=o.getHeight(),s=o.getWidth(),a=Math.floor(3*i/(4*t.MAX_MODULES));(a<t.MIN_SKIP||r)&&(a=t.MIN_SKIP);for(var l=!1,u=new Int32Array(5),c=a-1;c<i&&!l;c+=a){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var h=0,d=0;d<s;d++)if(o.get(d,c))1==(1&h)&&h++,u[h]++;else if(0==(1&h))if(4===h)if(t.foundPatternCross(u)){if(!0!==this.handlePossibleCenter(u,c,d,n)){u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,h=3;continue}if(a=2,!0===this.hasSkipped)l=this.haveMultiplyConfirmedCenters();else{var f=this.findRowSkip();f>u[2]&&(c+=f-u[2]-a,d=s-1)}h=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,h=3;else u[++h]++;else u[h]++;t.foundPatternCross(u)&&!0===this.handlePossibleCenter(u,c,s,n)&&(a=u[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}var g=this.selectBestPatterns();return Et.orderBestPatterns(g),new sr(g)},t.centerFromEnd=function(t,e){return e-t[4]-t[3]-t[2]/2},t.foundPatternCross=function(t){for(var e=0,r=0;r<5;r++){var n=t[r];if(0===n)return!1;e+=n}if(e<7)return!1;var o=e/7,i=o/2;return Math.abs(o-t[0])<i&&Math.abs(o-t[1])<i&&Math.abs(3*o-t[2])<3*i&&Math.abs(o-t[3])<i&&Math.abs(o-t[4])<i},t.prototype.getCrossCheckStateCount=function(){var t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t},t.prototype.crossCheckDiagonal=function(e,r,n,o){for(var i=this.getCrossCheckStateCount(),s=0,a=this.image;e>=s&&r>=s&&a.get(r-s,e-s);)i[2]++,s++;if(e<s||r<s)return!1;for(;e>=s&&r>=s&&!a.get(r-s,e-s)&&i[1]<=n;)i[1]++,s++;if(e<s||r<s||i[1]>n)return!1;for(;e>=s&&r>=s&&a.get(r-s,e-s)&&i[0]<=n;)i[0]++,s++;if(i[0]>n)return!1;var l=a.getHeight(),u=a.getWidth();for(s=1;e+s<l&&r+s<u&&a.get(r+s,e+s);)i[2]++,s++;if(e+s>=l||r+s>=u)return!1;for(;e+s<l&&r+s<u&&!a.get(r+s,e+s)&&i[3]<n;)i[3]++,s++;if(e+s>=l||r+s>=u||i[3]>=n)return!1;for(;e+s<l&&r+s<u&&a.get(r+s,e+s)&&i[4]<n;)i[4]++,s++;return!(i[4]>=n)&&Math.abs(i[0]+i[1]+i[2]+i[3]+i[4]-o)<2*o&&t.foundPatternCross(i)},t.prototype.crossCheckVertical=function(e,r,n,o){for(var i=this.image,s=i.getHeight(),a=this.getCrossCheckStateCount(),l=e;l>=0&&i.get(r,l);)a[2]++,l--;if(l<0)return NaN;for(;l>=0&&!i.get(r,l)&&a[1]<=n;)a[1]++,l--;if(l<0||a[1]>n)return NaN;for(;l>=0&&i.get(r,l)&&a[0]<=n;)a[0]++,l--;if(a[0]>n)return NaN;for(l=e+1;l<s&&i.get(r,l);)a[2]++,l++;if(l===s)return NaN;for(;l<s&&!i.get(r,l)&&a[3]<n;)a[3]++,l++;if(l===s||a[3]>=n)return NaN;for(;l<s&&i.get(r,l)&&a[4]<n;)a[4]++,l++;return a[4]>=n||5*Math.abs(a[0]+a[1]+a[2]+a[3]+a[4]-o)>=2*o?NaN:t.foundPatternCross(a)?t.centerFromEnd(a,l):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,o){for(var i=this.image,s=i.getWidth(),a=this.getCrossCheckStateCount(),l=e;l>=0&&i.get(l,r);)a[2]++,l--;if(l<0)return NaN;for(;l>=0&&!i.get(l,r)&&a[1]<=n;)a[1]++,l--;if(l<0||a[1]>n)return NaN;for(;l>=0&&i.get(l,r)&&a[0]<=n;)a[0]++,l--;if(a[0]>n)return NaN;for(l=e+1;l<s&&i.get(l,r);)a[2]++,l++;if(l===s)return NaN;for(;l<s&&!i.get(l,r)&&a[3]<n;)a[3]++,l++;if(l===s||a[3]>=n)return NaN;for(;l<s&&i.get(l,r)&&a[4]<n;)a[4]++,l++;return a[4]>=n||5*Math.abs(a[0]+a[1]+a[2]+a[3]+a[4]-o)>=o?NaN:t.foundPatternCross(a)?t.centerFromEnd(a,l):NaN},t.prototype.handlePossibleCenter=function(e,r,n,o){var i=e[0]+e[1]+e[2]+e[3]+e[4],s=t.centerFromEnd(e,n),a=this.crossCheckVertical(r,Math.floor(s),e[2],i);if(!isNaN(a)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(a),e[2],i),!isNaN(s)&&(!o||this.crossCheckDiagonal(Math.floor(a),Math.floor(s),e[2],i)))){for(var l=i/7,u=!1,c=this.possibleCenters,h=0,d=c.length;h<d;h++){var f=c[h];if(f.aboutEquals(l,a,s)){c[h]=f.combineEstimate(a,s,l),u=!0;break}}if(!u){var g=new ir(s,a,l);c.push(g),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(g)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r;if(this.possibleCenters.length<=1)return 0;var n=null;try{for(var o=ar(this.possibleCenters),i=o.next();!i.done;i=o.next()){var s=i.value;if(s.getCount()>=t.CENTER_QUORUM){if(null!=n)return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-s.getX())-Math.abs(n.getY()-s.getY()))/2);n=s}}}catch(a){e={error:a}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,o,i=0,s=0,a=this.possibleCenters.length;try{for(var l=ar(this.possibleCenters),u=l.next();!u.done;u=l.next())(g=u.value).getCount()>=t.CENTER_QUORUM&&(i++,s+=g.getEstimatedModuleSize())}catch(p){e={error:p}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}if(i<3)return!1;var c=s/a,h=0;try{for(var d=ar(this.possibleCenters),f=d.next();!f.done;f=d.next()){var g=f.value;h+=Math.abs(g.getEstimatedModuleSize()-c)}}catch(w){n={error:w}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}return h<=.05*s},t.prototype.selectBestPatterns=function(){var t,e,r,n,o=this.possibleCenters.length;if(o<3)throw new k;var i,s=this.possibleCenters;if(o>3){var a=0,l=0;try{for(var u=ar(this.possibleCenters),c=u.next();!c.done;c=u.next()){var h=c.value.getEstimatedModuleSize();a+=h,l+=h*h}}catch(m){t={error:m}}finally{try{c&&!c.done&&(e=u.return)&&e.call(u)}finally{if(t)throw t.error}}i=a/o;var d=Math.sqrt(l/o-i*i);s.sort(function(t,e){var r=Math.abs(e.getEstimatedModuleSize()-i),n=Math.abs(t.getEstimatedModuleSize()-i);return r<n?-1:r>n?1:0});for(var f=Math.max(.2*i,d),g=0;g<s.length&&s.length>3;g++)Math.abs(s[g].getEstimatedModuleSize()-i)>f&&(s.splice(g,1),g--)}if(s.length>3){a=0;try{for(var p=ar(s),w=p.next();!w.done;w=p.next())a+=w.value.getEstimatedModuleSize()}catch(_){r={error:_}}finally{try{w&&!w.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}i=a/s.length,s.sort(function(t,e){if(e.getCount()===t.getCount()){var r=Math.abs(e.getEstimatedModuleSize()-i),n=Math.abs(t.getEstimatedModuleSize()-i);return r<n?1:r>n?-1:0}return e.getCount()-t.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),ur=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),cr=function(t){function e(e,r,n){var o=t.call(this,e,r)||this;return o.estimatedModuleSize=n,o}return ur(e,t),e.prototype.aboutEquals=function(t,e,r){if(Math.abs(e-this.getY())<=t&&Math.abs(r-this.getX())<=t){var n=Math.abs(t-this.estimatedModuleSize);return n<=1||n<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,n){return new e((this.getX()+r)/2,(this.getY()+t)/2,(this.estimatedModuleSize+n)/2)},e}(Et),hr=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dr=function(){function t(t,e,r,n,o,i,s){this.image=t,this.startX=e,this.startY=r,this.width=n,this.height=o,this.moduleSize=i,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var t=this.startX,e=this.height,r=t+this.width,n=this.startY+e/2,o=new Int32Array(3),i=this.image,s=0;s<e;s++){var a=n+(0==(1&s)?Math.floor((s+1)/2):-Math.floor((s+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var l=t;l<r&&!i.get(l,a);)l++;for(var u=0;l<r;){if(i.get(l,a))if(1===u)o[1]++;else if(2===u){var c;if(this.foundPatternCross(o)&&null!==(c=this.handlePossibleCenter(o,a,l)))return c;o[0]=o[2],o[1]=1,o[2]=0,u=1}else o[++u]++;else 1===u&&u++,o[u]++;l++}if(this.foundPatternCross(o)&&null!==(c=this.handlePossibleCenter(o,a,r)))return c}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new k},t.centerFromEnd=function(t,e){return e-t[2]-t[1]/2},t.prototype.foundPatternCross=function(t){for(var e=this.moduleSize,r=e/2,n=0;n<3;n++)if(Math.abs(e-t[n])>=r)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,o){var i=this.image,s=i.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;for(var l=e;l>=0&&i.get(r,l)&&a[1]<=n;)a[1]++,l--;if(l<0||a[1]>n)return NaN;for(;l>=0&&!i.get(r,l)&&a[0]<=n;)a[0]++,l--;if(a[0]>n)return NaN;for(l=e+1;l<s&&i.get(r,l)&&a[1]<=n;)a[1]++,l++;if(l===s||a[1]>n)return NaN;for(;l<s&&!i.get(r,l)&&a[2]<=n;)a[2]++,l++;return a[2]>n||5*Math.abs(a[0]+a[1]+a[2]-o)>=2*o?NaN:this.foundPatternCross(a)?t.centerFromEnd(a,l):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var o,i,s=e[0]+e[1]+e[2],a=t.centerFromEnd(e,n),l=this.crossCheckVertical(r,a,2*e[1],s);if(!isNaN(l)){var u=(e[0]+e[1]+e[2])/3;try{for(var c=hr(this.possibleCenters),h=c.next();!h.done;h=c.next()){var d=h.value;if(d.aboutEquals(u,l,a))return d.combineEstimate(l,a,u)}}catch(g){o={error:g}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}var f=new cr(a,l,u);this.possibleCenters.push(f),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(f)}return null},t}(),fr=function(){function t(t){this.image=t}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(t){this.resultPointCallback=null==t?null:t.get(I.NEED_RESULT_POINT_CALLBACK);var e=new lr(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(e)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),o=e.getBottomLeft(),i=this.calculateModuleSize(r,n,o);if(i<1)throw new k("No pattern found in proccess finder.");var s=t.computeDimension(r,n,o,i),a=Xe.getProvisionalVersionForDimension(s),l=a.getDimensionForVersion()-7,u=null;if(a.getAlignmentPatternCenters().length>0)for(var c=n.getX()-r.getX()+o.getX(),h=n.getY()-r.getY()+o.getY(),d=1-3/l,f=Math.floor(r.getX()+d*(c-r.getX())),g=Math.floor(r.getY()+d*(h-r.getY())),p=4;p<=16;p<<=1)try{u=this.findAlignmentInRegion(i,f,g,p);break}catch(_){if(!(_ instanceof k))throw _}var w=t.createTransform(r,n,o,u,s),m=t.sampleGrid(this.image,w,s);return new At(m,null===u?[o,r,n]:[o,r,n,u])},t.createTransform=function(t,e,r,n,o){var i,s,a,l,u=o-3.5;return null!==n?(i=n.getX(),s=n.getY(),l=a=u-3):(i=e.getX()-t.getX()+r.getX(),s=e.getY()-t.getY()+r.getY(),a=u,l=u),Tt.quadrilateralToQuadrilateral(3.5,3.5,u,3.5,a,l,3.5,u,t.getX(),t.getY(),e.getX(),e.getY(),i,s,r.getX(),r.getY())},t.sampleGrid=function(t,e,r){return Nt.getInstance().sampleGridWithTransform(t,r,r,e)},t.computeDimension=function(t,e,r,n){var o=yt.round(Et.distance(t,e)/n),i=yt.round(Et.distance(t,r)/n),s=Math.floor((o+i)/2)+7;switch(3&s){case 0:s++;break;case 2:s--;break;case 3:throw new k("Dimensions could be not found.")}return s},t.prototype.calculateModuleSize=function(t,e,r){return(this.calculateModuleSizeOneWay(t,e)+this.calculateModuleSizeOneWay(t,r))/2},t.prototype.calculateModuleSizeOneWay=function(t,e){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY())),n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(r)?n/7:isNaN(n)?r/7:(r+n)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(t,e,r,n){var o=this.sizeOfBlackWhiteBlackRun(t,e,r,n),i=1,s=t-(r-t);s<0?(i=t/(t-s),s=0):s>=this.image.getWidth()&&(i=(this.image.getWidth()-1-t)/(s-t),s=this.image.getWidth()-1);var a=Math.floor(e-(n-e)*i);return i=1,a<0?(i=e/(e-a),a=0):a>=this.image.getHeight()&&(i=(this.image.getHeight()-1-e)/(a-e),a=this.image.getHeight()-1),s=Math.floor(t+(s-t)*i),(o+=this.sizeOfBlackWhiteBlackRun(t,e,s,a))-1},t.prototype.sizeOfBlackWhiteBlackRun=function(t,e,r,n){var o=Math.abs(n-e)>Math.abs(r-t);if(o){var i=t;t=e,e=i,i=r,r=n,n=i}for(var s=Math.abs(r-t),a=Math.abs(n-e),l=-s/2,u=t<r?1:-1,c=e<n?1:-1,h=0,d=r+u,f=t,g=e;f!==d;f+=u){if(1===h===this.image.get(o?g:f,o?f:g)){if(2===h)return yt.distance(f,g,t,e);h++}if((l+=a)>0){if(g===n)break;g+=c,l-=s}}return 2===h?yt.distance(r+u,n,t,e):NaN},t.prototype.findAlignmentInRegion=function(t,e,r,n){var o=Math.floor(n*t),i=Math.max(0,e-o),s=Math.min(this.image.getWidth()-1,e+o);if(s-i<3*t)throw new k("Alignment top exceeds estimated module size.");var a=Math.max(0,r-o),l=Math.min(this.image.getHeight()-1,r+o);if(l-a<3*t)throw new k("Alignment bottom exceeds estimated module size.");return new dr(this.image,i,a,s-i,l-a,t,this.resultPointCallback).find()},t}(),gr=function(){function t(){this.decoder=new nr}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,o;if(null!=r&&void 0!==r.get(I.PURE_BARCODE)){var i=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,r),o=t.NO_POINTS}else{var s=new fr(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(s.getBits(),r),o=s.getPoints()}n.getOther()instanceof Ke&&n.getOther().applyMirroredCorrection(o);var a=new J(n.getText(),n.getRawBytes(),void 0,o,et.QR_CODE,void 0),l=n.getByteSegments();null!==l&&a.putMetadata(nt.BYTE_SEGMENTS,l);var u=n.getECLevel();return null!==u&&a.putMetadata(nt.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(a.putMetadata(nt.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),a.putMetadata(nt.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),a},t.prototype.reset=function(){},t.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(null===e||null===r)throw new k;var n=this.moduleSize(e,t),o=e[1],i=r[1],s=e[0],a=r[0];if(s>=a||o>=i)throw new k;if(i-o!=a-s&&(a=s+(i-o))>=t.getWidth())throw new k;var l=Math.round((a-s+1)/n),u=Math.round((i-o+1)/n);if(l<=0||u<=0)throw new k;if(u!==l)throw new k;var c=Math.floor(n/2);o+=c;var h=(s+=c)+Math.floor((l-1)*n)-a;if(h>0){if(h>c)throw new k;s-=h}var d=o+Math.floor((u-1)*n)-i;if(d>0){if(d>c)throw new k;o-=d}for(var f=new x(l,u),g=0;g<u;g++)for(var p=o+Math.floor(g*n),w=0;w<l;w++)t.get(s+Math.floor(w*n),p)&&f.set(w,g);return f},t.moduleSize=function(t,e){for(var r=e.getHeight(),n=e.getWidth(),o=t[0],i=t[1],s=!0,a=0;o<n&&i<r;){if(s!==e.get(o,i)){if(5==++a)break;s=!s}o++,i++}if(o===n||i===r)throw new k;return(o-t[0])/7},t.NO_POINTS=new Array,t}(),pr=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wr=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(t){return yt.sum(t)},t.toIntArray=function(e){var r,n;if(null==e||!e.length)return t.EMPTY_INT_ARRAY;var o=new Int32Array(e.length),i=0;try{for(var s=pr(e),a=s.next();!a.done;a=s.next())o[i++]=a.value}catch(l){r={error:l}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o},t.getCodeword=function(e){var r=A.binarySearch(t.SYMBOL_TABLE,262143&e);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.MAX_CODEWORDS_IN_BARCODE=(t.NUMBER_OF_CODEWORDS=929)-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),mr=function(){function t(t,e){this.bits=t,this.points=e}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),_r=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yr=function(){function t(){}return t.detectMultiple=function(e,r,n){var o=e.getBlackMatrix(),i=t.detect(n,o);return i.length||((o=o.clone()).rotate180(),i=t.detect(n,o)),new mr(o,i)},t.detect=function(e,r){for(var n,o,i=new Array,s=0,a=0,l=!1;s<r.getHeight();){var u=t.findVertices(r,s,a);if(null!=u[0]||null!=u[3]){if(l=!0,i.push(u),!e)break;null!=u[2]?(a=Math.trunc(u[2].getX()),s=Math.trunc(u[2].getY())):(a=Math.trunc(u[4].getX()),s=Math.trunc(u[4].getY()))}else{if(!l)break;l=!1,a=0;try{for(var c=(n=void 0,_r(i)),h=c.next();!h.done;h=c.next()){var d=h.value;null!=d[1]&&(s=Math.trunc(Math.max(s,d[1].getY()))),null!=d[3]&&(s=Math.max(s,Math.trunc(d[3].getY())))}}catch(f){n={error:f}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}s+=t.ROW_STEP}}return i},t.findVertices=function(e,r,n){var o=e.getHeight(),i=e.getWidth(),s=new Array(8);return t.copyToResult(s,t.findRowsWithPattern(e,o,i,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),null!=s[4]&&(n=Math.trunc(s[4].getX()),r=Math.trunc(s[4].getY())),t.copyToResult(s,t.findRowsWithPattern(e,o,i,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),s},t.copyToResult=function(t,e,r){for(var n=0;n<r.length;n++)t[r[n]]=e[n]},t.findRowsWithPattern=function(e,r,n,o,i,s){for(var a=new Array(4),l=!1,u=new Int32Array(s.length);o<r;o+=t.ROW_STEP)if(null!=(f=t.findGuardPattern(e,i,o,n,!1,s,u))){for(;o>0;){if(null==(d=t.findGuardPattern(e,i,--o,n,!1,s,u))){o++;break}f=d}a[0]=new Et(f[0],o),a[1]=new Et(f[1],o),l=!0;break}var c=o+1;if(l){for(var h=0,d=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);c<r;c++){var f;if(null!=(f=t.findGuardPattern(e,d[0],c,n,!1,s,u))&&Math.abs(d[0]-f[0])<t.MAX_PATTERN_DRIFT&&Math.abs(d[1]-f[1])<t.MAX_PATTERN_DRIFT)d=f,h=0;else{if(h>t.SKIPPED_ROW_COUNT_MAX)break;h++}}a[2]=new Et(d[0],c-=h+1),a[3]=new Et(d[1],c)}return c-o<t.BARCODE_MIN_HEIGHT&&A.fill(a,null),a},t.findGuardPattern=function(e,r,n,o,i,s,a){A.fillWithin(a,0,a.length,0);for(var l=r,u=0;e.get(l,n)&&l>0&&u++<t.MAX_PIXEL_DRIFT;)l--;for(var c=l,h=0,d=s.length,f=i;c<o;c++)if(e.get(c,n)!==f)a[h]++;else{if(h===d-1){if(t.patternMatchVariance(a,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([l,c]);l+=a[0]+a[1],p.arraycopy(a,2,a,0,h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,f=!f}return h===d-1&&t.patternMatchVariance(a,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([l,c-1]):null},t.patternMatchVariance=function(t,e,r){for(var n=t.length,o=0,i=0,s=0;s<n;s++)o+=t[s],i+=e[s];if(o<i)return 1/0;var a=o/i;r*=a;for(var l=0,u=0;u<n;u++){var c=t[u],h=e[u]*a,d=c>h?c-h:h-c;if(d>r)return 1/0;l+=d}return l/o},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),Cr=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Er=function(){function t(t,e){if(0===e.length)throw new c;this.field=t;var r=e.length;if(r>1&&0===e[0]){for(var n=1;n<r&&0===e[n];)n++;n===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-n),p.arraycopy(e,n,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return 0===this.coefficients[0]},t.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},t.prototype.evaluateAt=function(t){var e,r;if(0===t)return this.getCoefficient(0);if(1===t){var n=0;try{for(var o=Cr(this.coefficients),i=o.next();!i.done;i=o.next())n=this.field.add(n,i.value)}catch(u){e={error:u}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n}for(var s=this.coefficients[0],a=this.coefficients.length,l=1;l<a;l++)s=this.field.add(this.field.multiply(t,s),this.coefficients[l]);return s},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new c("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var o=r;r=n,n=o}var i=new Int32Array(n.length),s=n.length-r.length;p.arraycopy(n,0,i,0,s);for(var a=s;a<n.length;a++)i[a]=this.field.add(r[a-s],n[a]);return new t(this.field,i)},t.prototype.subtract=function(t){if(!this.field.equals(t.field))throw new c("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new c("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,o=e.coefficients,i=o.length,s=new Int32Array(n+i-1),a=0;a<n;a++)for(var l=r[a],u=0;u<i;u++)s[a+u]=this.field.add(s[a+u],this.field.multiply(l,o[u]));return new t(this.field,s)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(0===e)return new t(this.field,new Int32Array([0]));if(1===e)return this;for(var r=this.coefficients.length,n=new Int32Array(r),o=0;o<r;o++)n[o]=this.field.multiply(this.coefficients[o],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new c;if(0===r)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,o=new Int32Array(n+e),i=0;i<n;i++)o[i]=this.field.multiply(this.coefficients[i],r);return new t(this.field,o)},t.prototype.toString=function(){for(var t=new L,e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);0!==r&&(r<0?(t.append(" - "),r=-r):t.length()>0&&t.append(" + "),0!==e&&1===r||t.append(r),0!==e&&(1===e?t.append("x"):(t.append("x^"),t.append(e))))}return t.toString()},t}(),Ar=function(){function t(){}return t.prototype.add=function(t,e){return(t+e)%this.modulus},t.prototype.subtract=function(t,e){return(this.modulus+t-e)%this.modulus},t.prototype.exp=function(t){return this.expTable[t]},t.prototype.log=function(t){if(0===t)throw new c;return this.logTable[t]},t.prototype.inverse=function(t){if(0===t)throw new lt;return this.expTable[this.modulus-this.logTable[t]-1]},t.prototype.multiply=function(t,e){return 0===t||0===e?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(t){return t===this},t}(),vr=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sr=function(t){function e(e,r){var n=t.call(this)||this;n.modulus=e,n.expTable=new Int32Array(e),n.logTable=new Int32Array(e);for(var o=1,i=0;i<e;i++)n.expTable[i]=o,o=o*r%e;for(i=0;i<e-1;i++)n.logTable[n.expTable[i]]=i;return n.zero=new Er(n,new Int32Array([0])),n.one=new Er(n,new Int32Array([1])),n}return vr(e,t),e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,e){if(t<0)throw new c;if(0===e)return this.zero;var r=new Int32Array(t+1);return r[0]=e,new Er(this,r)},e.PDF417_GF=new e(wr.NUMBER_OF_CODEWORDS,3),e}(Ar),Ir=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},br=function(){function t(){this.field=Sr.PDF417_GF}return t.prototype.decode=function(t,e,r){for(var n,o,i=new Er(this.field,t),s=new Int32Array(e),a=!1,l=e;l>0;l--){var u=i.evaluateAt(this.field.exp(l));s[e-l]=u,0!==u&&(a=!0)}if(!a)return 0;var c=this.field.getOne();if(null!=r)try{for(var h=Ir(r),d=h.next();!d.done;d=h.next()){var g=this.field.exp(t.length-1-d.value),p=new Er(this.field,new Int32Array([this.field.subtract(0,g),1]));c=c.multiply(p)}}catch(v){n={error:v}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}var w=new Er(this.field,s),m=this.runEuclideanAlgorithm(this.field.buildMonomial(e,1),w,e),_=m[0],y=m[1],C=this.findErrorLocations(_),E=this.findErrorMagnitudes(y,_,C);for(l=0;l<C.length;l++){var A=t.length-1-this.field.log(C[l]);if(A<0)throw f.getChecksumInstance();t[A]=this.field.subtract(t[A],E[l])}return C.length},t.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var n=t;t=e,e=n}for(var o=t,i=e,s=this.field.getZero(),a=this.field.getOne();i.getDegree()>=Math.round(r/2);){var l=o,u=s;if(s=a,(o=i).isZero())throw f.getChecksumInstance();i=l;for(var c=this.field.getZero(),h=o.getCoefficient(o.getDegree()),d=this.field.inverse(h);i.getDegree()>=o.getDegree()&&!i.isZero();){var g=i.getDegree()-o.getDegree(),p=this.field.multiply(i.getCoefficient(i.getDegree()),d);c=c.add(this.field.buildMonomial(g,p)),i=i.subtract(o.multiplyByMonomial(g,p))}a=c.multiply(s).subtract(u).negative()}var w=a.getCoefficient(0);if(0===w)throw f.getChecksumInstance();var m=this.field.inverse(w);return[a.multiply(m),i.multiply(m)]},t.prototype.findErrorLocations=function(t){for(var e=t.getDegree(),r=new Int32Array(e),n=0,o=1;o<this.field.getSize()&&n<e;o++)0===t.evaluateAt(o)&&(r[n]=this.field.inverse(o),n++);if(n!==e)throw f.getChecksumInstance();return r},t.prototype.findErrorMagnitudes=function(t,e,r){for(var n=e.getDegree(),o=new Int32Array(n),i=1;i<=n;i++)o[n-i]=this.field.multiply(i,e.getCoefficient(i));var s=new Er(this.field,o),a=r.length,l=new Int32Array(a);for(i=0;i<a;i++){var u=this.field.inverse(r[i]),c=this.field.subtract(0,t.evaluateAt(u)),h=this.field.inverse(s.evaluateAt(u));l[i]=this.field.multiply(c,h)}return l},t}(),Tr=function(){function t(e,r,n,o,i){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,o,i)}return t.prototype.constructor_1=function(t,e,r,n,o){var i=null==e||null==r,s=null==n||null==o;if(i&&s)throw new k;i?(e=new Et(0,n.getY()),r=new Et(0,o.getY())):s&&(n=new Et(t.getWidth()-1,e.getY()),o=new Et(t.getWidth()-1,r.getY())),this.image=t,this.topLeft=e,this.bottomLeft=r,this.topRight=n,this.bottomRight=o,this.minX=Math.trunc(Math.min(e.getX(),r.getX())),this.maxX=Math.trunc(Math.max(n.getX(),o.getX())),this.minY=Math.trunc(Math.min(e.getY(),n.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))},t.prototype.constructor_2=function(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()},t.merge=function(e,r){return null==e?r:null==r?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var o=this.topLeft,i=this.bottomLeft,s=this.topRight,a=this.bottomRight;if(e>0){var l=n?this.topLeft:this.topRight,u=Math.trunc(l.getY()-e);u<0&&(u=0);var c=new Et(l.getX(),u);n?o=c:s=c}if(r>0){var h=n?this.bottomLeft:this.bottomRight,d=Math.trunc(h.getY()+r);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);var f=new Et(h.getX(),d);n?i=f:a=f}return new t(this.image,o,i,s,a)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),Rr=function(){function t(t,e,r,n){this.columnCount=t,this.errorCorrectionLevel=n,this.rowCountUpperPart=e,this.rowCountLowerPart=r,this.rowCount=e+r}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),Or=function(){function t(){this.buffer=""}return t.form=function(t,e){var r=-1;return t.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(t,n,o,i,s,a){if("%%"===t)return"%";if(void 0!==e[++r]){t=i?parseInt(i.substr(1)):void 0;var l,u=s?parseInt(s.substr(1)):void 0;switch(a){case"s":l=e[r];break;case"c":l=e[r][0];break;case"f":l=parseFloat(e[r]).toFixed(t);break;case"p":l=parseFloat(e[r]).toPrecision(t);break;case"e":l=parseFloat(e[r]).toExponential(t);break;case"x":l=parseInt(e[r]).toString(u||16);break;case"d":l=parseFloat(parseInt(e[r],u||10).toPrecision(t)).toFixed(0)}l="object"==typeof l?JSON.stringify(l):(+l).toString(u);for(var c=parseInt(o),h=o&&o[0]+""=="0"?"0":" ";l.length<c;)l=void 0!==n?l+h:h+l;return l}})},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),Nr=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dr=function(){function t(t){this.boundingBox=new Tr(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(null!=r)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var o=this.imageRowToCodewordIndex(e)-n;if(o>=0&&null!=(r=this.codewords[o]))return r;if((o=this.imageRowToCodewordIndex(e)+n)<this.codewords.length&&null!=(r=this.codewords[o]))return r}return null},t.prototype.imageRowToCodewordIndex=function(t){return t-this.boundingBox.getMinY()},t.prototype.setCodeword=function(t,e){this.codewords[this.imageRowToCodewordIndex(t)]=e},t.prototype.getCodeword=function(t){return this.codewords[this.imageRowToCodewordIndex(t)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var t,e,r=new Or,n=0;try{for(var o=Nr(this.codewords),i=o.next();!i.done;i=o.next()){var s=i.value;null!=s?r.format("%3d: %3d|%3d%n",n++,s.getRowNumber(),s.getValue()):r.format("%3d:    |   %n",n++)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return r.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),Mr=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pr=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__read:void 0)||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(a){o={error:a}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},Br=function(){function t(){this.values=new Map}return t.prototype.setValue=function(t){t=Math.trunc(t);var e=this.values.get(t);null==e&&(e=0),e++,this.values.set(t,e)},t.prototype.getValue=function(){var t,e,r=-1,n=new Array,o=function(t,e){var o=function(){return t},i=function(){return e};i()>r?(r=i(),(n=[]).push(o())):i()===r&&n.push(o())};try{for(var i=Mr(this.values.entries()),s=i.next();!s.done;s=i.next()){var a=Pr(s.value,2);o(a[0],a[1])}}catch(l){t={error:l}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return wr.toIntArray(n)},t.prototype.getConfidence=function(t){return this.values.get(t)},t}(),Lr=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xr=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fr=function(t){function e(e,r){var n=t.call(this,e)||this;return n._isLeft=r,n}return Lr(e,t),e.prototype.setRowNumbers=function(){var t,e;try{for(var r=xr(this.getCodewords()),n=r.next();!n.done;n=r.next()){var o=n.value;null!=o&&o.setRowNumberAsRowIndicatorColumn()}}catch(i){t={error:i}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var e=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(e,t);for(var r=this.getBoundingBox(),n=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),s=this.imageRowToCodewordIndex(Math.trunc(o.getY())),a=-1,l=1,u=0,c=i;c<s;c++)if(null!=e[c]){var h=e[c],d=h.getRowNumber()-a;if(0===d)u++;else if(1===d)l=Math.max(l,u),u=1,a=h.getRowNumber();else if(d<0||h.getRowNumber()>=t.getRowCount()||d>c)e[c]=null;else{for(var f,g=(f=l>2?(l-2)*d:d)>=c,p=1;p<=f&&!g;p++)g=null!=e[c-p];g?e[c]=null:(a=h.getRowNumber(),u=1)}}},e.prototype.getRowHeights=function(){var t,e,r=this.getBarcodeMetadata();if(null==r)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);var n=new Int32Array(r.getRowCount());try{for(var o=xr(this.getCodewords()),i=o.next();!i.done;i=o.next()){var s=i.value;if(null!=s){var a=s.getRowNumber();if(a>=n.length)continue;n[a]++}}}catch(l){t={error:l}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return n},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var e=this.getBoundingBox(),r=this._isLeft?e.getTopLeft():e.getTopRight(),n=this._isLeft?e.getBottomLeft():e.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),s=this.getCodewords(),a=-1,l=o;l<i;l++)if(null!=s[l]){var u=s[l];u.setRowNumberAsRowIndicatorColumn();var c=u.getRowNumber()-a;0===c||(1===c?a=u.getRowNumber():u.getRowNumber()>=t.getRowCount()?s[l]=null:a=u.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,e,r=this.getCodewords(),n=new Br,o=new Br,i=new Br,s=new Br;try{for(var a=xr(r),l=a.next();!l.done;l=a.next()){var u=l.value;if(null!=u){u.setRowNumberAsRowIndicatorColumn();var c=u.getValue()%30,h=u.getRowNumber();switch(this._isLeft||(h+=2),h%3){case 0:o.setValue(3*c+1);break;case 1:s.setValue(c/3),i.setValue(c%3);break;case 2:n.setValue(c+1)}}}}catch(f){t={error:f}}finally{try{l&&!l.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}if(0===n.getValue().length||0===o.getValue().length||0===i.getValue().length||0===s.getValue().length||n.getValue()[0]<1||o.getValue()[0]+i.getValue()[0]<wr.MIN_ROWS_IN_BARCODE||o.getValue()[0]+i.getValue()[0]>wr.MAX_ROWS_IN_BARCODE)return null;var d=new Rr(n.getValue()[0],o.getValue()[0],i.getValue()[0],s.getValue()[0]);return this.removeIncorrectCodewords(r,d),d},e.prototype.removeIncorrectCodewords=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(null!=t[r]){var o=n.getValue()%30,i=n.getRowNumber();if(i>e.getRowCount())t[r]=null;else switch(this._isLeft||(i+=2),i%3){case 0:3*o+1!==e.getRowCountUpperPart()&&(t[r]=null);break;case 1:Math.trunc(o/3)===e.getErrorCorrectionLevel()&&o%3===e.getRowCountLowerPart()||(t[r]=null);break;case 2:o+1!==e.getColumnCount()&&(t[r]=null)}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+"\n"+t.prototype.toString.call(this)},e}(Dr),kr=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vr=function(){function t(t,e){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=e,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var t,e=wr.MAX_CODEWORDS_IN_BARCODE;do{t=e,e=this.adjustRowNumbersAndGetCount()}while(e>0&&e<t);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(t){null!=t&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var t=this.adjustRowNumbersByRow();if(0===t)return 0;for(var e=1;e<this.barcodeColumnCount+1;e++)for(var r=this.detectionResultColumns[e].getCodewords(),n=0;n<r.length;n++)null!=r[n]&&(r[n].hasValidRowNumber()||this.adjustRowNumbers(e,n,r));return t},t.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(null!=this.detectionResultColumns[0]&&null!=this.detectionResultColumns[this.barcodeColumnCount+1])for(var t=this.detectionResultColumns[0].getCodewords(),e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(null!=t[r]&&null!=e[r]&&t[r].getRowNumber()===e[r].getRowNumber())for(var n=1;n<=this.barcodeColumnCount;n++){var o=this.detectionResultColumns[n].getCodewords()[r];null!=o&&(o.setRowNumber(t[r].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[n].getCodewords()[r]=null))}},t.prototype.adjustRowNumbersFromRRI=function(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(null!=r[n])for(var o=r[n].getRowNumber(),i=0,s=this.barcodeColumnCount+1;s>0&&i<this.ADJUST_ROW_NUMBER_SKIP;s--){var a=this.detectionResultColumns[s].getCodewords()[n];null!=a&&(i=t.adjustRowNumberIfValid(o,i,a),a.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(null==this.detectionResultColumns[0])return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(null!=r[n])for(var o=r[n].getRowNumber(),i=0,s=1;s<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;s++){var a=this.detectionResultColumns[s].getCodewords()[n];null!=a&&(i=t.adjustRowNumberIfValid(o,i,a),a.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(t,e,r){return null==r||r.hasValidRowNumber()||(r.isValidRowNumber(t)?(r.setRowNumber(t),e=0):++e),e},t.prototype.adjustRowNumbers=function(e,r,n){var o,i,s=n[r],a=this.detectionResultColumns[e-1].getCodewords(),l=a;null!=this.detectionResultColumns[e+1]&&(l=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=a[r],u[3]=l[r],r>0&&(u[0]=n[r-1],u[4]=a[r-1],u[5]=l[r-1]),r>1&&(u[8]=n[r-2],u[10]=a[r-2],u[11]=l[r-2]),r<n.length-1&&(u[1]=n[r+1],u[6]=a[r+1],u[7]=l[r+1]),r<n.length-2&&(u[9]=n[r+2],u[12]=a[r+2],u[13]=l[r+2]);try{for(var c=kr(u),h=c.next();!h.done;h=c.next())if(t.adjustRowNumber(s,h.value))return}catch(d){o={error:d}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}},t.adjustRowNumber=function(t,e){return!(null==e||!e.hasValidRowNumber()||e.getBucket()!==t.getBucket()||(t.setRowNumber(e.getRowNumber()),0))},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(t){this.boundingBox=t},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(t,e){this.detectionResultColumns[t]=e},t.prototype.getDetectionResultColumn=function(t){return this.detectionResultColumns[t]},t.prototype.toString=function(){var t=this.detectionResultColumns[0];null==t&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var e=new Or,r=0;r<t.getCodewords().length;r++){e.format("CW %3d:",r);for(var n=0;n<this.barcodeColumnCount+2;n++)if(null!=this.detectionResultColumns[n]){var o=this.detectionResultColumns[n].getCodewords()[r];null!=o?e.format(" %3d|%3d",o.getRowNumber(),o.getValue()):e.format("    |   ")}else e.format("    |   ");e.format("%n")}return e.toString()},t}(),Ur=function(){function t(e,r,n,o){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(o)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(t){this.rowNumber=t},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),Hr=function(){function t(){}return t.initialize=function(){for(var e=0;e<wr.SYMBOL_TABLE.length;e++)for(var r=wr.SYMBOL_TABLE[e],n=1&r,o=0;o<wr.BARS_IN_MODULE;o++){for(var i=0;(1&r)===n;)i+=1,r>>=1;n=1&r,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(wr.BARS_IN_MODULE)),t.RATIOS_TABLE[e][wr.BARS_IN_MODULE-o-1]=Math.fround(i/wr.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return-1!==r?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(t){for(var e=yt.sum(t),r=new Int32Array(wr.BARS_IN_MODULE),n=0,o=0,i=0;i<wr.MODULES_IN_CODEWORD;i++)o+t[n]<=e/(2*wr.MODULES_IN_CODEWORD)+i*e/wr.MODULES_IN_CODEWORD&&(o+=t[n],n++),r[n]++;return r},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return-1===wr.getCodeword(r)?-1:r},t.getBitValue=function(t){for(var e=0,r=0;r<t.length;r++)for(var n=0;n<t[r];n++)e=e<<1|(r%2==0?1:0);return Math.trunc(e)},t.getClosestDecodedValue=function(e){var r=yt.sum(e),n=new Array(wr.BARS_IN_MODULE);if(r>1)for(var o=0;o<n.length;o++)n[o]=Math.fround(e[o]/r);var i=Ct.MAX_VALUE,s=-1;this.bSymbolTableReady||t.initialize();for(var a=0;a<t.RATIOS_TABLE.length;a++){for(var l=0,u=t.RATIOS_TABLE[a],c=0;c<wr.BARS_IN_MODULE;c++){var h=Math.fround(u[c]-n[c]);if((l+=Math.fround(h*h))>=i)break}l<i&&(i=l,s=wr.SYMBOL_TABLE[a])}return s},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(wr.SYMBOL_TABLE.length).map(function(t){return new Array(wr.BARS_IN_MODULE)}),t}(),Gr=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(t){this.segmentIndex=t},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(t){this.fileId=t},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(t){this.optionalData=t},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(t){this.lastSegment=t},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(t){this.segmentCount=t},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(t){this.sender=t},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(t){this.addressee=t},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(t){this.fileName=t},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(t){this.fileSize=t},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(t){this.checksum=t},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(t){this.timestamp=t},t}(),Wr=function(){function t(){}return t.parseLong=function(t,e){return void 0===e&&(e=void 0),parseInt(t,e)},t}(),zr=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zr(e,t),e}(s),jr=function(){function t(){}return t.prototype.writeBytes=function(t){this.writeBytesOffset(t,0,t.length)},t.prototype.writeBytesOffset=function(t,e,r){if(null==t)throw new Xr;if(e<0||e>t.length||r<0||e+r>t.length||e+r<0)throw new _;if(0!==r)for(var n=0;n<r;n++)this.write(t[e+n])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),Yr=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yr(e,t),e}(s),Kr=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qr=function(t){function e(e){void 0===e&&(e=32);var r=t.call(this)||this;if(r.count=0,e<0)throw new c("Negative initial size: "+e);return r.buf=new Uint8Array(e),r}return Kr(e,t),e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var e=this.buf.length<<1;if(e-t<0&&(e=t),e<0){if(t<0)throw new Zr;e=w.MAX_VALUE}this.buf=A.copyOfUint8Array(this.buf,e)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,e,r){if(e<0||e>t.length||r<0||e+r-t.length>0)throw new _;this.ensureCapacity(this.count+r),p.arraycopy(t,e,this.buf,this.count,r),this.count+=r},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return A.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?"string"==typeof t?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(jr);function $r(){if("undefined"!=typeof window)return window.BigInt||null;if("undefined"!=typeof global)return global.BigInt||null;if("undefined"!=typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}function Qr(t){if(void 0===Je&&(Je=$r()),null===Je)throw new Error("BigInt is not supported!");return Je(t)}!function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(Qe||(Qe={}));var Jr,tn=function(){function t(){}return t.decode=function(e,r){var n=new L(""),o=N.ISO8859_1;n.enableDecoding(o);for(var i=1,s=e[i++],a=new Gr;i<e[0];){switch(s){case t.TEXT_COMPACTION_MODE_LATCH:i=t.textCompaction(e,i,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:i=t.byteCompaction(s,e,o,i,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:i=t.numericCompaction(e,i,n);break;case t.ECI_CHARSET:N.getCharacterSetECIByValue(e[i++]);break;case t.ECI_GENERAL_PURPOSE:i+=2;break;case t.ECI_USER_DEFINED:i++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=t.decodeMacroBlock(e,i,a);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new T;default:i--,i=t.textCompaction(e,i,n)}if(!(i<e.length))throw T.getFormatInstance();s=e[i++]}if(0===n.length())throw T.getFormatInstance();var l=new ot(null,n.toString(),null,r);return l.setOther(a),l},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw T.getFormatInstance();for(var o=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),i=0;i<t.NUMBER_OF_SEQUENCE_CODEWORDS;i++,r++)o[i]=e[r];n.setSegmentIndex(w.parseInt(t.decodeBase900toBase10(o,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new L;r=t.textCompaction(e,r,s),n.setFileId(s.toString());var a=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(a=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new L;r=t.textCompaction(e,r+1,l),n.setFileName(l.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new L;r=t.textCompaction(e,r+1,u),n.setSender(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var c=new L;r=t.textCompaction(e,r+1,c),n.setAddressee(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var h=new L;r=t.numericCompaction(e,r+1,h),n.setSegmentCount(w.parseInt(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var d=new L;r=t.numericCompaction(e,r+1,d),n.setTimestamp(Wr.parseLong(d.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var f=new L;r=t.numericCompaction(e,r+1,f),n.setChecksum(w.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var g=new L;r=t.numericCompaction(e,r+1,g),n.setFileSize(Wr.parseLong(g.toString()));break;default:throw T.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw T.getFormatInstance()}if(-1!==a){var p=r-a;n.isLastSegment()&&p--,n.setOptionalData(A.copyOfRange(e,a,a+p))}return r},t.textCompaction=function(e,r,n){for(var o=new Int32Array(2*(e[0]-r)),i=new Int32Array(2*(e[0]-r)),s=0,a=!1;r<e[0]&&!a;){var l=e[r++];if(l<t.TEXT_COMPACTION_MODE_LATCH)o[s]=l/30,o[s+1]=l%30,s+=2;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:o[s++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,a=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o[s]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=e[r++],i[s]=l,s++}}return t.decodeTextCompaction(o,i,s,n),r},t.decodeTextCompaction=function(e,r,n,o){for(var i=Qe.ALPHA,s=Qe.ALPHA,a=0;a<n;){var l=e[a],u="";switch(i){case Qe.ALPHA:if(l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case t.LL:i=Qe.LOWER;break;case t.ML:i=Qe.MIXED;break;case t.PS:s=i,i=Qe.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=Qe.ALPHA}break;case Qe.LOWER:if(l<26)u=String.fromCharCode(97+l);else switch(l){case 26:u=" ";break;case t.AS:s=i,i=Qe.ALPHA_SHIFT;break;case t.ML:i=Qe.MIXED;break;case t.PS:s=i,i=Qe.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=Qe.ALPHA}break;case Qe.MIXED:if(l<t.PL)u=t.MIXED_CHARS[l];else switch(l){case t.PL:i=Qe.PUNCT;break;case 26:u=" ";break;case t.LL:i=Qe.LOWER;break;case t.AL:i=Qe.ALPHA;break;case t.PS:s=i,i=Qe.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=Qe.ALPHA}break;case Qe.PUNCT:if(l<t.PAL)u=t.PUNCT_CHARS[l];else switch(l){case t.PAL:i=Qe.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=Qe.ALPHA}break;case Qe.ALPHA_SHIFT:if(i=s,l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:i=Qe.ALPHA}break;case Qe.PUNCT_SHIFT:if(i=s,l<t.PAL)u=t.PUNCT_CHARS[l];else switch(l){case t.PAL:i=Qe.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=Qe.ALPHA}}""!==u&&o.append(u),a++}},t.byteCompaction=function(e,r,n,o,i){var s=new qr,a=0,l=0,u=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var c=new Int32Array(6),h=r[o++];o<r[0]&&!u;)switch(c[a++]=h,l=900*l+h,h=r[o++]){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:o--,u=!0;break;default:if(a%5==0&&a>0){for(var d=0;d<6;++d)s.write(Number(Qr(l)>>Qr(8*(5-d))));l=0,a=0}}o===r[0]&&h<t.TEXT_COMPACTION_MODE_LATCH&&(c[a++]=h);for(var f=0;f<a;f++)s.write(c[f]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;o<r[0]&&!u;){var g=r[o++];if(g<t.TEXT_COMPACTION_MODE_LATCH)a++,l=900*l+g;else switch(g){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:o--,u=!0}if(a%5==0&&a>0){for(d=0;d<6;++d)s.write(Number(Qr(l)>>Qr(8*(5-d))));l=0,a=0}}}return i.append(P.decode(s.toByteArray(),n)),o},t.numericCompaction=function(e,r,n){for(var o=0,i=!1,s=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!i;){var a=e[r++];if(r===e[0]&&(i=!0),a<t.TEXT_COMPACTION_MODE_LATCH)s[o]=a,o++;else switch(a){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,i=!0}(o%t.MAX_NUMERIC_CODEWORDS==0||a===t.NUMERIC_COMPACTION_MODE_LATCH||i)&&o>0&&(n.append(t.decodeBase900toBase10(s,o)),o=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=Qr(0),o=0;o<r;o++)n+=t.EXP900[r-o-1]*Qr(e[o]);var i=n.toString();if("1"!==i.charAt(0))throw new T;return i.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",t.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",t.EXP900=$r()?function(){var t=[];t[0]=Qr(1);var e=Qr(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),en=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rn=function(){function t(){}return t.decode=function(e,r,n,o,i,s,a){for(var l,u=new Tr(e,r,n,o,i),c=null,h=null,d=!0;;d=!1){if(null!=r&&(c=t.getRowIndicatorColumn(e,u,r,!0,s,a)),null!=o&&(h=t.getRowIndicatorColumn(e,u,o,!1,s,a)),null==(l=t.merge(c,h)))throw k.getNotFoundInstance();var f=l.getBoundingBox();if(!d||null==f||!(f.getMinY()<u.getMinY()||f.getMaxY()>u.getMaxY()))break;u=f}l.setBoundingBox(u);var g=l.getBarcodeColumnCount()+1;l.setDetectionResultColumn(0,c),l.setDetectionResultColumn(g,h);for(var p=null!=c,w=1;w<=g;w++){var m=p?w:g-w;if(void 0===l.getDetectionResultColumn(m)){var _=void 0;_=0===m||m===g?new Fr(u,0===m):new Dr(u),l.setDetectionResultColumn(m,_);for(var y=-1,C=y,E=u.getMinY();E<=u.getMaxY();E++){if((y=t.getStartColumn(l,m,E,p))<0||y>u.getMaxX()){if(-1===C)continue;y=C}var A=t.detectCodeword(e,u.getMinX(),u.getMaxX(),p,y,E,s,a);null!=A&&(_.setCodeword(E,A),C=y,s=Math.min(s,A.getWidth()),a=Math.max(a,A.getWidth()))}}}return t.createDecoderResult(l)},t.merge=function(e,r){if(null==e&&null==r)return null;var n=t.getBarcodeMetadata(e,r);if(null==n)return null;var o=Tr.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new Vr(n,o)},t.adjustBoundingBox=function(e){var r,n;if(null==e)return null;var o=e.getRowHeights();if(null==o)return null;var i=t.getMax(o),s=0;try{for(var a=en(o),l=a.next();!l.done;l=a.next()){var u=l.value;if(s+=i-u,u>0)break}}catch(f){r={error:f}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}for(var c=e.getCodewords(),h=0;s>0&&null==c[h];h++)s--;var d=0;for(h=o.length-1;h>=0&&(d+=i-o[h],!(o[h]>0));h--);for(h=c.length-1;d>0&&null==c[h];h--)d--;return e.getBoundingBox().addMissingRows(s,d,e.isLeft())},t.getMax=function(t){var e,r,n=-1;try{for(var o=en(t),i=o.next();!i.done;i=o.next())n=Math.max(n,i.value)}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},t.getBarcodeMetadata=function(t,e){var r,n;return null==t||null==(r=t.getBarcodeMetadata())?null==e?null:e.getBarcodeMetadata():null==e||null==(n=e.getBarcodeMetadata())?r:r.getColumnCount()!==n.getColumnCount()&&r.getErrorCorrectionLevel()!==n.getErrorCorrectionLevel()&&r.getRowCount()!==n.getRowCount()?null:r},t.getRowIndicatorColumn=function(e,r,n,o,i,s){for(var a=new Fr(r,o),l=0;l<2;l++)for(var u=0===l?1:-1,c=Math.trunc(Math.trunc(n.getX())),h=Math.trunc(Math.trunc(n.getY()));h<=r.getMaxY()&&h>=r.getMinY();h+=u){var d=t.detectCodeword(e,0,e.getWidth(),o,c,h,i,s);null!=d&&(a.setCodeword(h,d),c=o?d.getStartX():d.getEndX())}return a},t.adjustCodewordCount=function(e,r){var n=r[0][1],o=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===o.length){if(i<1||i>wr.MAX_CODEWORDS_IN_BARCODE)throw k.getNotFoundInstance();n.setValue(i)}else o[0]!==i&&n.setValue(i)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,o=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],s=new Array,a=0;a<e.getBarcodeRowCount();a++)for(var l=0;l<e.getBarcodeColumnCount();l++){var u=r[a][l+1].getValue(),c=a*e.getBarcodeColumnCount()+l;0===u.length?n.push(c):1===u.length?o[c]=u[0]:(s.push(c),i.push(u))}for(var h=new Array(i.length),d=0;d<h.length;d++)h[d]=i[d];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),o,wr.toIntArray(n),wr.toIntArray(s),h)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,o,i){for(var s=new Int32Array(o.length),a=100;a-- >0;){for(var l=0;l<s.length;l++)r[o[l]]=i[l][s[l]];try{return t.decodeCodewords(r,e,n)}catch(u){if(!(u instanceof f))throw u}if(0===s.length)throw f.getChecksumInstance();for(l=0;l<s.length;l++){if(s[l]<i[l].length-1){s[l]++;break}if(s[l]=0,l===s.length-1)throw f.getChecksumInstance()}}throw f.getChecksumInstance()},t.createBarcodeMatrix=function(t){for(var e,r,n,o,i=Array.from({length:t.getBarcodeRowCount()},function(){return new Array(t.getBarcodeColumnCount()+2)}),s=0;s<i.length;s++)for(var a=0;a<i[s].length;a++)i[s][a]=new Br;var l=0;try{for(var u=en(t.getDetectionResultColumns()),c=u.next();!c.done;c=u.next()){var h=c.value;if(null!=h)try{for(var d=(n=void 0,en(h.getCodewords())),f=d.next();!f.done;f=d.next()){var g=f.value;if(null!=g){var p=g.getRowNumber();if(p>=0){if(p>=i.length)continue;i[p][l].setValue(g.getValue())}}}}catch(w){n={error:w}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}l++}}catch(m){e={error:m}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}return i},t.isValidBarcodeColumn=function(t,e){return e>=0&&e<=t.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,o){var i,s,a=o?1:-1,l=null;if(t.isValidBarcodeColumn(e,r-a)&&(l=e.getDetectionResultColumn(r-a).getCodeword(n)),null!=l)return o?l.getEndX():l.getStartX();if(null!=(l=e.getDetectionResultColumn(r).getCodewordNearby(n)))return o?l.getStartX():l.getEndX();if(t.isValidBarcodeColumn(e,r-a)&&(l=e.getDetectionResultColumn(r-a).getCodewordNearby(n)),null!=l)return o?l.getEndX():l.getStartX();for(var u=0;t.isValidBarcodeColumn(e,r-a);){r-=a;try{for(var c=(i=void 0,en(e.getDetectionResultColumn(r).getCodewords())),h=c.next();!h.done;h=c.next()){var d=h.value;if(null!=d)return(o?d.getEndX():d.getStartX())+a*u*(d.getEndX()-d.getStartX())}}catch(f){i={error:f}}finally{try{h&&!h.done&&(s=c.return)&&s.call(c)}finally{if(i)throw i.error}}u++}return o?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,o,i,s,a,l){i=t.adjustCodewordStartColumn(e,r,n,o,i,s);var u,c=t.getModuleBitCount(e,r,n,o,i,s);if(null==c)return null;var h=yt.sum(c);if(o)u=i+h;else{for(var d=0;d<c.length/2;d++){var f=c[d];c[d]=c[c.length-1-d],c[c.length-1-d]=f}i=(u=i)-h}if(!t.checkCodewordSkew(h,a,l))return null;var g=Hr.getDecodedValue(c),p=wr.getCodeword(g);return-1===p?null:new Ur(i,u,t.getCodewordBucketNumber(g),p)},t.getModuleBitCount=function(t,e,r,n,o,i){for(var s=o,a=new Int32Array(8),l=0,u=n?1:-1,c=n;(n?s<r:s>=e)&&l<a.length;)t.get(s,i)===c?(a[l]++,s+=u):(l++,c=!c);return l===a.length||s===(n?r:e)&&l===a.length-1?a:null},t.getNumberOfECCodeWords=function(t){return 2<<t},t.adjustCodewordStartColumn=function(e,r,n,o,i,s){for(var a=i,l=o?-1:1,u=0;u<2;u++){for(;(o?a>=r:a<n)&&o===e.get(a,s);){if(Math.abs(i-a)>t.CODEWORD_SKEW_SIZE)return i;a+=l}l=-l,o=!o}return a},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(0===e.length)throw T.getFormatInstance();var o=1<<r+1,i=t.correctErrors(e,n,o);t.verifyCodewordCount(e,o);var s=tn.decode(e,""+r);return s.setErrorsCorrected(i),s.setErasures(n.length),s},t.correctErrors=function(e,r,n){if(null!=r&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw f.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(t,e){if(t.length<4)throw T.getFormatInstance();var r=t[0];if(r>t.length)throw T.getFormatInstance();if(0===r){if(!(e<t.length))throw T.getFormatInstance();t[0]=t.length-e}},t.getBitCountForCodeword=function(t){for(var e=new Int32Array(8),r=0,n=e.length-1;!((1&t)!==r&&(r=1&t,--n<0));)e[n]++,t>>=1;return e},t.getCodewordBucketNumber=function(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(t){return(t[0]-t[2]+t[4]-t[6]+9)%9},t.toString=function(t){for(var e=new Or,r=0;r<t.length;r++){e.format("Row %2d: ",r);for(var n=0;n<t[r].length;n++){var o=t[r][n];0===o.getValue().length?e.format("        ",null):e.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}e.format("%n")}return e.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new br,t}(),nn=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},on=function(){function t(){}return t.prototype.decode=function(e,r){void 0===r&&(r=null);var n=t.decode(e,r,!1);if(null==n||0===n.length||null==n[0])throw k.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){void 0===r&&(r=null);try{return t.decode(e,r,!0)}catch(n){if(n instanceof T||n instanceof f)throw k.getNotFoundInstance();throw n}},t.decode=function(e,r,n){var o,i,s=new Array,a=yr.detectMultiple(e,r,n);try{for(var l=nn(a.getPoints()),u=l.next();!u.done;u=l.next()){var c=u.value,h=rn.decode(a.getBits(),c[4],c[5],c[6],c[7],t.getMinCodewordWidth(c),t.getMaxCodewordWidth(c)),d=new J(h.getText(),h.getRawBytes(),void 0,c,et.PDF_417);d.putMetadata(nt.ERROR_CORRECTION_LEVEL,h.getECLevel());var f=h.getOther();null!=f&&d.putMetadata(nt.PDF417_EXTRA_METADATA,f),s.push(d)}}catch(g){o={error:g}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}return s.map(function(t){return t})},t.getMaxWidth=function(t,e){return null==t||null==e?0:Math.trunc(Math.abs(t.getX()-e.getX()))},t.getMinWidth=function(t,e){return null==t||null==e?w.MAX_VALUE:Math.trunc(Math.abs(t.getX()-e.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*wr.MODULES_IN_CODEWORD/wr.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*wr.MODULES_IN_CODEWORD/wr.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*wr.MODULES_IN_CODEWORD/wr.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*wr.MODULES_IN_CODEWORD/wr.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),sn=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),an=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return sn(e,t),e}(s),ln=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},un=function(){function t(){}return t.prototype.decode=function(t,e){return this.setHints(e),this.decodeInternal(t)},t.prototype.decodeWithState=function(t){return null==this.readers&&this.setHints(null),this.decodeInternal(t)},t.prototype.setHints=function(t){this.hints=t;var e=null!=t&&void 0!==t.get(I.TRY_HARDER),r=null==t?null:t.get(I.POSSIBLE_FORMATS),n=new Array;if(null!=r){var o=r.some(function(t){return t===et.UPC_A||t===et.UPC_E||t===et.EAN_13||t===et.EAN_8||t===et.CODABAR||t===et.CODE_39||t===et.CODE_93||t===et.CODE_128||t===et.ITF||t===et.RSS_14||t===et.RSS_EXPANDED});o&&!e&&n.push(new Ce(t)),r.includes(et.QR_CODE)&&n.push(new gr),r.includes(et.DATA_MATRIX)&&n.push(new Le),r.includes(et.AZTEC)&&n.push(new Pt),r.includes(et.PDF_417)&&n.push(new on),o&&e&&n.push(new Ce(t))}0===n.length&&(e||n.push(new Ce(t)),n.push(new gr),n.push(new Le),n.push(new Pt),n.push(new on),e&&n.push(new Ce(t))),this.readers=n},t.prototype.reset=function(){var t,e;if(null!==this.readers)try{for(var r=ln(this.readers),n=r.next();!n.done;n=r.next())n.value.reset()}catch(o){t={error:o}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t.prototype.decodeInternal=function(t){var e,r;if(null===this.readers)throw new an("No readers where selected, nothing can be read.");try{for(var n=ln(this.readers),o=n.next();!o.done;o=n.next()){var i=o.value;try{return i.decode(t,this.hints)}catch(s){if(s instanceof an)continue}}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}throw new k("No MultiFormat Readers were able to detect the code.")},t}(),cn=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hn=(function(t){function e(e,r){void 0===e&&(e=null),void 0===r&&(r=500);var n=new un;return n.setHints(e),t.call(this,n,r)||this}cn(e,t),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)}}(Q),(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),dn=(function(t){hn(function(e){return void 0===e&&(e=500),t.call(this,new on,e)||this},t)}(Q),(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}());!function(t){dn(function(e){return void 0===e&&(e=500),t.call(this,new gr,e)||this},t)}(Q),function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.MIN_SIZE=3]="MIN_SIZE",t[t.MAX_SIZE=4]="MAX_SIZE",t[t.MARGIN=5]="MARGIN",t[t.PDF417_COMPACT=6]="PDF417_COMPACT",t[t.PDF417_COMPACTION=7]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=9]="AZTEC_LAYERS",t[t.QR_VERSION=10]="QR_VERSION"}(Jr||(Jr={}));var fn=Jr,gn=function(){function t(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new st(t,Int32Array.from([1])))}return t.prototype.buildGenerator=function(t){var e=this.cachedGenerators;if(t>=e.length)for(var r=e[e.length-1],n=this.field,o=e.length;o<=t;o++){var i=r.multiply(new st(n,Int32Array.from([1,n.exp(o-1+n.getGeneratorBase())])));e.push(i),r=i}return e[t]},t.prototype.encode=function(t,e){if(0===e)throw new c("No error correction bytes");var r=t.length-e;if(r<=0)throw new c("No data bytes provided");var n=this.buildGenerator(e),o=new Int32Array(r);p.arraycopy(t,0,o,0,r);for(var i=new st(this.field,o),s=(i=i.multiplyByMonomial(e,1)).divide(n)[1].getCoefficients(),a=e-s.length,l=0;l<a;l++)t[r+l]=0;p.arraycopy(s,0,t,r+a,s.length)},t}(),pn=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),o=e.getWidth(),i=e.getHeight(),s=0;s<i-1;s++)for(var a=n[s],l=0;l<o-1;l++){var u=a[l];u===a[l+1]&&u===n[s+1][l]&&u===n[s+1][l+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),o=e.getWidth(),i=e.getHeight(),s=0;s<i;s++)for(var a=0;a<o;a++){var l=n[s];a+6<o&&1===l[a]&&0===l[a+1]&&1===l[a+2]&&1===l[a+3]&&1===l[a+4]&&0===l[a+5]&&1===l[a+6]&&(t.isWhiteHorizontal(l,a-4,a)||t.isWhiteHorizontal(l,a+7,a+11))&&r++,s+6<i&&1===n[s][a]&&0===n[s+1][a]&&1===n[s+2][a]&&1===n[s+3][a]&&1===n[s+4][a]&&0===n[s+5][a]&&1===n[s+6][a]&&(t.isWhiteVertical(n,a,s-4,s)||t.isWhiteVertical(n,a,s+7,s+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(t,e,r){e=Math.max(e,0),r=Math.min(r,t.length);for(var n=e;n<r;n++)if(1===t[n])return!1;return!0},t.isWhiteVertical=function(t,e,r,n){r=Math.max(r,0),n=Math.min(n,t.length);for(var o=r;o<n;o++)if(1===t[o][e])return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),o=e.getWidth(),i=e.getHeight(),s=0;s<i;s++)for(var a=n[s],l=0;l<o;l++)1===a[l]&&r++;var u=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*r-u)/u)*t.N4},t.getDataMaskBit=function(t,e,r){var n,o;switch(t){case 0:n=r+e&1;break;case 1:n=1&r;break;case 2:n=e%3;break;case 3:n=(r+e)%3;break;case 4:n=Math.floor(r/2)+Math.floor(e/3)&1;break;case 5:n=(1&(o=r*e))+o%3;break;case 6:n=(1&(o=r*e))+o%3&1;break;case 7:n=(o=r*e)%3+(r+e&1)&1;break;default:throw new c("Invalid mask pattern: "+t)}return 0===n},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,o=r?e.getHeight():e.getWidth(),i=r?e.getWidth():e.getHeight(),s=e.getArray(),a=0;a<o;a++){for(var l=0,u=-1,c=0;c<i;c++){var h=r?s[a][c]:s[c][a];h===u?l++:(l>=5&&(n+=t.N1+(l-5)),l=1,u=h)}l>=5&&(n+=t.N1+(l-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),wn=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mn=function(){function t(t,e){this.width=t,this.height=e;for(var r=new Array(e),n=0;n!==e;n++)r[n]=new Uint8Array(t);this.bytes=r}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(t,e){return this.bytes[e][t]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(t,e,r){this.bytes[e][t]=r},t.prototype.setBoolean=function(t,e,r){this.bytes[e][t]=r?1:0},t.prototype.clear=function(t){var e,r;try{for(var n=wn(this.bytes),o=n.next();!o.done;o=n.next())A.fill(o.value,t)}catch(i){e={error:i}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width)return!1;if(this.height!==r.height)return!1;for(var n=0,o=this.height;n<o;++n)for(var i=this.bytes[n],s=r.bytes[n],a=0,l=this.width;a<l;++a)if(i[a]!==s[a])return!1;return!0},t.prototype.toString=function(){for(var t=new L,e=0,r=this.height;e<r;++e){for(var n=this.bytes[e],o=0,i=this.width;o<i;++o)switch(n[o]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ")}t.append("\n")}return t.toString()},t}(),_n=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var t=new L;return t.append("<<\n"),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append("\n ecLevel: "),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append("\n version: "),t.append(this.version?this.version.toString():"null"),t.append("\n maskPattern: "),t.append(this.maskPattern.toString()),this.matrix?(t.append("\n matrix:\n"),t.append(this.matrix.toString())):t.append("\n matrix: null\n"),t.append(">>\n"),t.toString()},t.prototype.setMode=function(t){this.mode=t},t.prototype.setECLevel=function(t){this.ecLevel=t},t.prototype.setVersion=function(t){this.version=t},t.prototype.setMaskPattern=function(t){this.maskPattern=t},t.prototype.setMatrix=function(t){this.matrix=t},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),yn=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yn(e,t),e}(s),En=function(){function t(){}return t.clearMatrix=function(t){t.clear(255)},t.buildMatrix=function(e,r,n,o,i){t.clearMatrix(i),t.embedBasicPatterns(n,i),t.embedTypeInfo(r,o,i),t.maybeEmbedVersionInfo(n,i),t.embedDataBits(e,o,i)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var o=new v;t.makeTypeInfoBits(e,r,o);for(var i=0,s=o.getSize();i<s;++i){var a=o.get(o.getSize()-1-i),l=t.TYPE_INFO_COORDINATES[i];if(n.setBoolean(l[0],l[1],a),i<8){var u=n.getWidth()-i-1;n.setBoolean(u,c=8,a)}else{u=8;var c=n.getHeight()-7+(i-8);n.setBoolean(u,c,a)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new v;t.makeVersionInfoBits(e,n);for(var o=17,i=0;i<6;++i)for(var s=0;s<3;++s){var a=n.get(o);o--,r.setBoolean(i,r.getHeight()-11+s,a),r.setBoolean(r.getHeight()-11+s,i,a)}}},t.embedDataBits=function(e,r,n){for(var o=0,i=-1,s=n.getWidth()-1,a=n.getHeight()-1;s>0;){for(6===s&&(s-=1);a>=0&&a<n.getHeight();){for(var l=0;l<2;++l){var u=s-l;if(t.isEmpty(n.get(u,a))){var c=void 0;o<e.getSize()?(c=e.get(o),++o):c=!1,255!==r&&pn.getDataMaskBit(r,u,a)&&(c=!c),n.setBoolean(u,a,c)}}a+=i}a+=i=-i,s-=2}if(o!==e.getSize())throw new Cn("Not all bits consumed: "+o+"/"+e.getSize())},t.findMSBSet=function(t){return 32-w.numberOfLeadingZeros(t)},t.calculateBCHCode=function(e,r){if(0===r)throw new c("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!_n.isValidMaskPattern(r))throw new Cn("Invalid mask pattern");var o=e.getBits()<<3|r;n.appendBits(o,5);var i=t.calculateBCHCode(o,t.TYPE_INFO_POLY);n.appendBits(i,10);var s=new v;if(s.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(s),15!==n.getSize())throw new Cn("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),18!==r.getSize())throw new Cn("should not happen but we got: "+r.getSize())},t.isEmpty=function(t){return 255===t},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(t){if(0===t.get(8,t.getHeight()-8))throw new Cn;t.setNumber(8,t.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var o=0;o<8;++o){if(!t.isEmpty(n.get(e+o,r)))throw new Cn;n.setNumber(e+o,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var o=0;o<7;++o){if(!t.isEmpty(n.get(e,r+o)))throw new Cn;n.setNumber(e,r+o,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var o=0;o<5;++o)for(var i=t.POSITION_ADJUSTMENT_PATTERN[o],s=0;s<5;++s)n.setNumber(e+s,r+o,i[s])},t.embedPositionDetectionPattern=function(e,r,n){for(var o=0;o<7;++o)for(var i=t.POSITION_DETECTION_PATTERN[o],s=0;s<7;++s)n.setNumber(e+s,r+o,i[s])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e),t.embedHorizontalSeparationPattern(0,7,e),t.embedHorizontalSeparationPattern(e.getWidth()-8,7,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-8,e),t.embedVerticalSeparationPattern(7,0,e),t.embedVerticalSeparationPattern(e.getHeight()-7-1,0,e),t.embedVerticalSeparationPattern(7,e.getHeight()-7,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,o=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],i=0,s=o.length;i!==s;i++){var a=o[i];if(a>=0)for(var l=0;l!==s;l++){var u=o[l];u>=0&&t.isEmpty(r.get(u,a))&&t.embedPositionAdjustmentPattern(u-2,a-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),An=function(){function t(t,e){this.dataBytes=t,this.errorCorrectionBytes=e}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),vn=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Sn=function(){function t(){}return t.calculateMaskPenalty=function(t){return pn.applyMaskPenaltyRule1(t)+pn.applyMaskPenaltyRule2(t)+pn.applyMaskPenaltyRule3(t)+pn.applyMaskPenaltyRule4(t)},t.encode=function(e,r,n){void 0===n&&(n=null);var o=t.DEFAULT_BYTE_MODE_ENCODING,i=null!==n&&void 0!==n.get(fn.CHARACTER_SET);i&&(o=n.get(fn.CHARACTER_SET).toString());var s=this.chooseMode(e,o),a=new v;if(s===tr.BYTE&&(i||t.DEFAULT_BYTE_MODE_ENCODING!==o)){var l=N.getCharacterSetECIByName(o);void 0!==l&&this.appendECI(l,a)}this.appendModeInfo(s,a);var u,c=new v;if(this.appendBytes(e,s,c,o),null!==n&&void 0!==n.get(fn.QR_VERSION)){var h=Number.parseInt(n.get(fn.QR_VERSION).toString(),10);u=Xe.getVersionForNumber(h);var d=this.calculateBitsNeeded(s,a,c,u);if(!this.willFit(d,u,r))throw new Cn("Data too big for requested version")}else u=this.recommendVersion(r,s,a,c);var f=new v;f.appendBitArray(a);var g=s===tr.BYTE?c.getSizeInBytes():e.length;this.appendLengthInfo(g,u,s,f),f.appendBitArray(c);var p=u.getECBlocksForLevel(r),w=u.getTotalCodewords()-p.getTotalECCodewords();this.terminateBits(w,f);var m=this.interleaveWithECBytes(f,u.getTotalCodewords(),w,p.getNumBlocks()),_=new _n;_.setECLevel(r),_.setMode(s),_.setVersion(u);var y=u.getDimensionForVersion(),C=new mn(y,y),E=this.chooseMaskPattern(m,r,u,C);return _.setMaskPattern(E),En.buildMatrix(m,r,u,E,C),_.setMatrix(C),_},t.recommendVersion=function(t,e,r,n){var o=this.calculateBitsNeeded(e,r,n,Xe.getVersionForNumber(1)),i=this.chooseVersion(o,t),s=this.calculateBitsNeeded(e,r,n,i);return this.chooseVersion(s,t)},t.calculateBitsNeeded=function(t,e,r,n){return e.getSize()+t.getCharacterCountBits(n)+r.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(void 0===r&&(r=null),N.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return tr.KANJI;for(var n=!1,o=!1,i=0,s=e.length;i<s;++i){var a=e.charAt(i);if(t.isDigit(a))n=!0;else{if(-1===this.getAlphanumericCode(a.charCodeAt(0)))return tr.BYTE;o=!0}}return o?tr.ALPHANUMERIC:n?tr.NUMERIC:tr.BYTE},t.isOnlyDoubleByteKanji=function(t){var e;try{e=P.encode(t,N.SJIS)}catch(i){return!1}var r=e.length;if(r%2!=0)return!1;for(var n=0;n<r;n+=2){var o=255&e[n];if((o<129||o>159)&&(o<224||o>235))return!1}return!0},t.chooseMaskPattern=function(t,e,r,n){for(var o=Number.MAX_SAFE_INTEGER,i=-1,s=0;s<_n.NUM_MASK_PATTERNS;s++){En.buildMatrix(t,e,r,s,n);var a=this.calculateMaskPenalty(n);a<o&&(o=a,i=s)}return i},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var o=Xe.getVersionForNumber(n);if(t.willFit(e,o,r))return o}throw new Cn("Data too big")},t.willFit=function(t,e,r){return e.getTotalCodewords()-e.getECBlocksForLevel(r).getTotalECCodewords()>=(t+7)/8},t.terminateBits=function(t,e){var r=8*t;if(e.getSize()>r)throw new Cn("data bits cannot fit in the QR Code"+e.getSize()+" > "+r);for(var n=0;n<4&&e.getSize()<r;++n)e.appendBit(!1);var o=7&e.getSize();if(o>0)for(n=o;n<8;n++)e.appendBit(!1);var i=t-e.getSizeInBytes();for(n=0;n<i;++n)e.appendBits(0==(1&n)?236:17,8);if(e.getSize()!==r)throw new Cn("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(t,e,r,n,o,i){if(n>=r)throw new Cn("Block ID too large");var s=t%r,a=r-s,l=Math.floor(t/r),u=l+1,c=Math.floor(e/r),h=c+1,d=l-c,f=u-h;if(d!==f)throw new Cn("EC bytes mismatch");if(r!==a+s)throw new Cn("RS blocks mismatch");if(t!==(c+d)*a+(h+f)*s)throw new Cn("Total bytes mismatch");n<a?(o[0]=c,i[0]=d):(o[0]=h,i[0]=f)},t.interleaveWithECBytes=function(e,r,n,o){var i,s,a,l;if(e.getSizeInBytes()!==n)throw new Cn("Number of bits and data bytes does not match");for(var u=0,c=0,h=0,d=new Array,f=0;f<o;++f){var g=new Int32Array(1),p=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,o,f,g,p);var w=g[0],m=new Uint8Array(w);e.toBytes(8*u,m,0,w);var _=t.generateECBytes(m,p[0]);d.push(new An(m,_)),c=Math.max(c,w),h=Math.max(h,_.length),u+=g[0]}if(n!==u)throw new Cn("Data bytes does not match offset");var y=new v;for(f=0;f<c;++f)try{for(var C=(i=void 0,vn(d)),E=C.next();!E.done;E=C.next())f<(m=E.value.getDataBytes()).length&&y.appendBits(m[f],8)}catch(I){i={error:I}}finally{try{E&&!E.done&&(s=C.return)&&s.call(C)}finally{if(i)throw i.error}}for(f=0;f<h;++f)try{for(var A=(a=void 0,vn(d)),S=A.next();!S.done;S=A.next())f<(_=S.value.getErrorCorrectionBytes()).length&&y.appendBits(_[f],8)}catch(b){a={error:b}}finally{try{S&&!S.done&&(l=A.return)&&l.call(A)}finally{if(a)throw a.error}}if(r!==y.getSizeInBytes())throw new Cn("Interleaving error: "+r+" and "+y.getSizeInBytes()+" differ.");return y},t.generateECBytes=function(t,e){for(var r=t.length,n=new Int32Array(r+e),o=0;o<r;o++)n[o]=255&t[o];new gn(ct.QR_CODE_FIELD_256).encode(n,e);var i=new Uint8Array(e);for(o=0;o<e;o++)i[o]=n[r+o];return i},t.appendModeInfo=function(t,e){e.appendBits(t.getBits(),4)},t.appendLengthInfo=function(t,e,r,n){var o=r.getCharacterCountBits(e);if(t>=1<<o)throw new Cn(t+" is bigger than "+((1<<o)-1));n.appendBits(t,o)},t.appendBytes=function(e,r,n,o){switch(r){case tr.NUMERIC:t.appendNumericBytes(e,n);break;case tr.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case tr.BYTE:t.append8BitBytes(e,n,o);break;case tr.KANJI:t.appendKanjiBytes(e,n);break;default:throw new Cn("Invalid mode: "+r)}},t.getDigit=function(t){return t.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,o=0;o<n;){var i=t.getDigit(e.charAt(o));if(o+2<n){var s=t.getDigit(e.charAt(o+1)),a=t.getDigit(e.charAt(o+2));r.appendBits(100*i+10*s+a,10),o+=3}else o+1<n?(s=t.getDigit(e.charAt(o+1)),r.appendBits(10*i+s,7),o+=2):(r.appendBits(i,4),o++)}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,o=0;o<n;){var i=t.getAlphanumericCode(e.charCodeAt(o));if(-1===i)throw new Cn;if(o+1<n){var s=t.getAlphanumericCode(e.charCodeAt(o+1));if(-1===s)throw new Cn;r.appendBits(45*i+s,11),o+=2}else r.appendBits(i,6),o++}},t.append8BitBytes=function(t,e,r){var n;try{n=P.encode(t,r)}catch(s){throw new Cn(s)}for(var o=0,i=n.length;o!==i;o++)e.appendBits(n[o],8)},t.appendKanjiBytes=function(t,e){var r;try{r=P.encode(t,N.SJIS)}catch(a){throw new Cn(a)}for(var n=r.length,o=0;o<n;o+=2){var i=(255&r[o])<<8&4294967295|255&r[o+1],s=-1;if(i>=33088&&i<=40956?s=i-33088:i>=57408&&i<=60351&&(s=i-49472),-1===s)throw new Cn("Invalid byte sequence");e.appendBits(192*(s>>8)+(255&s),13)}},t.appendECI=function(t,e){e.appendBits(tr.ECI.getBits(),4),e.appendBits(t.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=N.UTF8.getName(),t}(),In=(function(){function t(){}t.prototype.encode=function(e,r,n,o,i){if(0===e.length)throw new c("Found empty contents");if(r!==et.QR_CODE)throw new c("Can only encode QR_CODE, but got "+r);if(n<0||o<0)throw new c("Requested dimensions are too small: "+n+"x"+o);var s=ke.L,a=t.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(fn.ERROR_CORRECTION)&&(s=ke.fromString(i.get(fn.ERROR_CORRECTION).toString())),void 0!==i.get(fn.MARGIN)&&(a=Number.parseInt(i.get(fn.MARGIN).toString(),10)));var l=Sn.encode(e,s,i);return t.renderResult(l,n,o,a)},t.renderResult=function(t,e,r,n){var o=t.getMatrix();if(null===o)throw new gt;for(var i=o.getWidth(),s=o.getHeight(),a=i+2*n,l=s+2*n,u=Math.max(e,a),c=Math.max(r,l),h=Math.min(Math.floor(u/a),Math.floor(c/l)),d=Math.floor((u-i*h)/2),f=Math.floor((c-s*h)/2),g=new x(u,c),p=0,w=f;p<s;p++,w+=h)for(var m=0,_=d;m<i;m++,_+=h)1===o.get(m,p)&&g.setRegion(_,w,h,h);return g},t.QUIET_ZONE_SIZE=4}(),(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),bn=(function(t){function e(e,r,n,o,i,s,a,l){var u=t.call(this,s,a)||this;if(u.yuvData=e,u.dataWidth=r,u.dataHeight=n,u.left=o,u.top=i,o+s>r||i+a>n)throw new c("Crop rectangle does not fit within image data.");return l&&u.reverseHorizontal(s,a),u}In(e,t),e.prototype.getRow=function(t,e){if(t<0||t>=this.getHeight())throw new c("Requested row is outside the image: "+t);var r=this.getWidth();return(null==e||e.length<r)&&(e=new Uint8ClampedArray(r)),p.arraycopy(this.yuvData,(t+this.top)*this.dataWidth+this.left,e,0,r),e},e.prototype.getMatrix=function(){var t=this.getWidth(),e=this.getHeight();if(t===this.dataWidth&&e===this.dataHeight)return this.yuvData;var r=t*e,n=new Uint8ClampedArray(r),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return p.arraycopy(this.yuvData,o,n,0,r),n;for(var i=0;i<e;i++)p.arraycopy(this.yuvData,o,n,i*t,t),o+=this.dataWidth;return n},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,n,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,n,o,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(t*r),o=this.yuvData,i=this.top*this.dataWidth+this.left,s=0;s<r;s++){for(var a=s*t,l=0;l<t;l++)n[a+l]=4278190080|65793*(255&o[i+l*e.THUMBNAIL_SCALE_FACTOR]);i+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return n},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,e){for(var r=this.yuvData,n=0,o=this.top*this.dataWidth+this.left;n<e;n++,o+=this.dataWidth)for(var i=o+t/2,s=o,a=o+t-1;s<i;s++,a--){var l=r[s];r[s]=r[a],r[a]=l}},e.prototype.invert=function(){return new X(this)},e.THUMBNAIL_SCALE_FACTOR=2}(W),(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),Tn=(function(t){function e(e,r,n,o,i,s,a){var l=t.call(this,r,n)||this;if(l.dataWidth=o,l.dataHeight=i,l.left=s,l.top=a,4===e.BYTES_PER_ELEMENT){for(var u=r*n,h=new Uint8ClampedArray(u),d=0;d<u;d++){var f=e[d];h[d]=((f>>16&255)+(f>>7&510)+(255&f))/4&255}l.luminances=h}else l.luminances=e;if(void 0===o&&(l.dataWidth=r),void 0===i&&(l.dataHeight=n),void 0===s&&(l.left=0),void 0===a&&(l.top=0),l.left+r>l.dataWidth||l.top+n>l.dataHeight)throw new c("Crop rectangle does not fit within image data.");return l}bn(e,t),e.prototype.getRow=function(t,e){if(t<0||t>=this.getHeight())throw new c("Requested row is outside the image: "+t);var r=this.getWidth();return(null==e||e.length<r)&&(e=new Uint8ClampedArray(r)),p.arraycopy(this.luminances,(t+this.top)*this.dataWidth+this.left,e,0,r),e},e.prototype.getMatrix=function(){var t=this.getWidth(),e=this.getHeight();if(t===this.dataWidth&&e===this.dataHeight)return this.luminances;var r=t*e,n=new Uint8ClampedArray(r),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return p.arraycopy(this.luminances,o,n,0,r),n;for(var i=0;i<e;i++)p.arraycopy(this.luminances,o,n,i*t,t),o+=this.dataWidth;return n},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,n,o){return new e(this.luminances,n,o,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new X(this)}}(W),(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),Rn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Tn(e,t),e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(N),On=function(){function t(){}return t.ISO_8859_1=N.ISO8859_1,t}(),Nn=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(t){this.compact=t},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(t){this.size=t},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(t){this.layers=t},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(t){this.codeWords=t},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(t){this.matrix=t},t}(),Dn=function(){function t(){}return t.singletonList=function(t){return[t]},t.min=function(t,e){return t.sort(e)[0]},t}(),Mn=function(){function t(t){this.previous=t}return t.prototype.getPrevious=function(){return this.previous},t}(),Pn=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bn=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.value=r,o.bitCount=n,o}return Pn(e,t),e.prototype.appendTo=function(t,e){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return"<"+w.toBinaryString((t|=1<<this.bitCount)|1<<this.bitCount).substring(1)+">"},e}(Mn),Ln=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xn=function(t){function e(e,r,n){var o=t.call(this,e,0,0)||this;return o.binaryShiftStart=r,o.binaryShiftByteCount=n,o}return Ln(e,t),e.prototype.appendTo=function(t,e){for(var r=0;r<this.binaryShiftByteCount;r++)(0===r||31===r&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):t.appendBits(0===r?Math.min(this.binaryShiftByteCount,31):this.binaryShiftByteCount-31,5)),t.appendBits(e[this.binaryShiftStart+r],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(Bn);function Fn(t,e,r){return new Bn(t,e,r)}var kn=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Vn=new Bn(null,0,0),Un=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],Hn=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gn=function(t){var e,r;try{for(var n=Hn(t),o=n.next();!o.done;o=n.next())A.fill(o.value,-1)}catch(i){e={error:i}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[0][4]=0,t[1][4]=0,t[1][0]=28,t[3][4]=0,t[2][4]=0,t[2][0]=15,t}(A.createInt32Array(6,6)),Wn=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zn=function(){function t(t,e,r,n){this.token=t,this.mode=e,this.binaryShiftByteCount=r,this.bitCount=n}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,o=this.token;if(e!==this.mode){var i=Un[this.mode][e];o=Fn(o,65535&i,i>>16),n+=i>>16}var s=2===e?4:5;return new t(o=Fn(o,r,s),e,0,n+s)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,o=2===this.mode?4:5;return n=Fn(n,Gn[this.mode][e],o),new t(n=Fn(n,r,5),this.mode,0,this.bitCount+o+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,o=this.bitCount;if(4===this.mode||2===this.mode){var i=Un[n][0];r=Fn(r,65535&i,i>>16),o+=i>>16,n=0}var s=new t(r,n,this.binaryShiftByteCount+1,o+(0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8));return 2078===s.binaryShiftByteCount&&(s=s.endBinaryShift(e+1)),s},t.prototype.endBinaryShift=function(e){if(0===this.binaryShiftByteCount)return this;var r=this.token;return new t(r=function(t,e,r){return new xn(t,e,r)}(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(Un[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(t){for(var e,r,n=[],o=this.endBinaryShift(t.length).token;null!==o;o=o.getPrevious())n.unshift(o);var i=new v;try{for(var s=Wn(n),a=s.next();!a.done;a=s.next())a.value.appendTo(i,t)}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i},t.prototype.toString=function(){return B.format("%s bits=%d bytes=%d",kn[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(Vn,0,0,0),t}(),Xn=function(t){var e=B.getCharCode(" "),r=B.getCharCode("."),n=B.getCharCode(",");t[0][e]=1;for(var o=B.getCharCode("Z"),i=B.getCharCode("A"),s=i;s<=o;s++)t[0][s]=s-i+2;t[1][e]=1;var a=B.getCharCode("z"),l=B.getCharCode("a");for(s=l;s<=a;s++)t[1][s]=s-l+2;t[2][e]=1;var u=B.getCharCode("9"),c=B.getCharCode("0");for(s=c;s<=u;s++)t[2][s]=s-c+2;t[2][n]=12,t[2][r]=13;for(var h=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"],d=0;d<h.length;d++)t[3][B.getCharCode(h[d])]=d;var f=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(d=0;d<f.length;d++)B.getCharCode(f[d])>0&&(t[4][B.getCharCode(f[d])]=d);return t}(A.createInt32Array(5,256)),jn=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yn=function(){function t(t){this.text=t}return t.prototype.encode=function(){for(var e=B.getCharCode(" "),r=B.getCharCode("\n"),n=Dn.singletonList(zn.INITIAL_STATE),o=0;o<this.text.length;o++){var i=void 0,s=o+1<this.text.length?this.text[o+1]:0;switch(this.text[o]){case B.getCharCode("\r"):i=s===r?2:0;break;case B.getCharCode("."):i=s===e?3:0;break;case B.getCharCode(","):i=s===e?4:0;break;case B.getCharCode(":"):i=s===e?5:0;break;default:i=0}i>0?(n=t.updateStateListForPair(n,o,i),o++):n=this.updateStateListForChar(n,o)}return Dn.min(n,function(t,e){return t.getBitCount()-e.getBitCount()}).toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,o,i=[];try{for(var s=jn(e),a=s.next();!a.done;a=s.next())this.updateStateForChar(a.value,r,i)}catch(l){n={error:l}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return t.simplifyStates(i)},t.prototype.updateStateForChar=function(t,e,r){for(var n=255&this.text[e],o=Xn[t.getMode()][n]>0,i=null,s=0;s<=4;s++){var a=Xn[s][n];if(a>0){if(null==i&&(i=t.endBinaryShift(e)),!o||s===t.getMode()||2===s){var l=i.latchAndAppend(s,a);r.push(l)}if(!o&&Gn[t.getMode()][s]>=0){var u=i.shiftAndAppend(s,a);r.push(u)}}}if(t.getBinaryShiftByteCount()>0||0===Xn[t.getMode()][n]){var c=t.addBinaryShiftChar(e);r.push(c)}},t.updateStateListForPair=function(t,e,r){var n,o,i=[];try{for(var s=jn(t),a=s.next();!a.done;a=s.next())this.updateStateForPair(a.value,e,r,i)}catch(l){n={error:l}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return this.simplifyStates(i)},t.updateStateForPair=function(t,e,r,n){var o=t.endBinaryShift(e);if(n.push(o.latchAndAppend(4,r)),4!==t.getMode()&&n.push(o.shiftAndAppend(4,r)),3===r||4===r){var i=o.latchAndAppend(2,16-r).latchAndAppend(2,1);n.push(i)}if(t.getBinaryShiftByteCount()>0){var s=t.addBinaryShiftChar(e).addBinaryShiftChar(e+1);n.push(s)}},t.simplifyStates=function(t){var e,r,n,o,i=[];try{for(var s=jn(t),a=s.next();!a.done;a=s.next()){var l=a.value,u=!0,c=function(t){if(t.isBetterThanOrEqualTo(l))return u=!1,"break";l.isBetterThanOrEqualTo(t)&&(i=i.filter(function(e){return e!==t}))};try{for(var h=(n=void 0,jn(i)),d=h.next();!d.done&&"break"!==c(d.value);d=h.next());}catch(f){n={error:f}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}u&&i.push(l)}}catch(g){e={error:g}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i},t}(),Zn=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kn=function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var o,i,s,a,l,u=new Yn(e).encode(),h=w.truncDivision(u.getSize()*r,100)+11,d=u.getSize()+h;if(n!==t.DEFAULT_AZTEC_LAYERS){if(o=n<0,(i=Math.abs(n))>(o?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new c(B.format("Illegal value %s for layers",n));var f=(s=t.totalBitsInLayer(i,o))-s%(a=t.WORD_SIZE[i]);if((l=t.stuffBits(u,a)).getSize()+h>f)throw new c("Data to large for user specified layer");if(o&&l.getSize()>64*a)throw new c("Data to large for user specified layer")}else{a=0,l=null;for(var g=0;;g++){if(g>t.MAX_NB_BITS)throw new c("Data too large for an Aztec code");if(!(d>(s=t.totalBitsInLayer(i=(o=g<=3)?g+1:g,o)))&&(null!=l&&a===t.WORD_SIZE[i]||(l=t.stuffBits(u,a=t.WORD_SIZE[i])),f=s-s%a,!(o&&l.getSize()>64*a)&&l.getSize()+h<=f))break}}var p,m=t.generateCheckWords(l,s,a),_=l.getSize()/a,y=t.generateModeMessage(o,i,_),C=(o?11:14)+4*i,E=new Int32Array(C);if(o)for(p=C,g=0;g<E.length;g++)E[g]=g;else{p=C+1+2*w.truncDivision(w.truncDivision(C,2)-1,15);var A=w.truncDivision(C,2),v=w.truncDivision(p,2);for(g=0;g<A;g++){var S=g+w.truncDivision(g,15);E[A-g-1]=v-S-1,E[A+g]=v+S+1}}for(var I=new x(p),b=(g=0,0);g<i;g++){for(var T=4*(i-g)+(o?9:12),R=0;R<T;R++)for(var O=2*R,N=0;N<2;N++)m.get(b+O+N)&&I.set(E[2*g+N],E[2*g+R]),m.get(b+2*T+O+N)&&I.set(E[2*g+R],E[C-1-2*g-N]),m.get(b+4*T+O+N)&&I.set(E[C-1-2*g-N],E[C-1-2*g-R]),m.get(b+6*T+O+N)&&I.set(E[C-1-2*g-R],E[2*g+N]);b+=8*T}if(t.drawModeMessage(I,o,p,y),o)t.drawBullsEye(I,w.truncDivision(p,2),5);else for(t.drawBullsEye(I,w.truncDivision(p,2),7),g=0,R=0;g<w.truncDivision(C,2)-1;g+=15,R+=16)for(N=1&w.truncDivision(p,2);N<p;N+=2)I.set(w.truncDivision(p,2)-R,N),I.set(w.truncDivision(p,2)+R,N),I.set(N,w.truncDivision(p,2)-R),I.set(N,w.truncDivision(p,2)+R);var D=new Nn;return D.setCompact(o),D.setSize(p),D.setLayers(i),D.setCodeWords(_),D.setMatrix(I),D},t.drawBullsEye=function(t,e,r){for(var n=0;n<r;n+=2)for(var o=e-n;o<=e+n;o++)t.set(o,e-n),t.set(o,e+n),t.set(e-n,o),t.set(e+n,o);t.set(e-r,e-r),t.set(e-r+1,e-r),t.set(e-r,e-r+1),t.set(e+r,e-r),t.set(e+r,e-r+1),t.set(e+r,e+r-1)},t.generateModeMessage=function(e,r,n){var o=new v;return e?(o.appendBits(r-1,2),o.appendBits(n-1,6),o=t.generateCheckWords(o,28,4)):(o.appendBits(r-1,5),o.appendBits(n-1,11),o=t.generateCheckWords(o,40,4)),o},t.drawModeMessage=function(t,e,r,n){var o=w.truncDivision(r,2);if(e)for(var i=0;i<7;i++){var s=o-3+i;n.get(i)&&t.set(s,o-5),n.get(i+7)&&t.set(o+5,s),n.get(20-i)&&t.set(s,o+5),n.get(27-i)&&t.set(o-5,s)}else for(i=0;i<10;i++)s=o-5+i+w.truncDivision(i,5),n.get(i)&&t.set(s,o-7),n.get(i+10)&&t.set(o+7,s),n.get(29-i)&&t.set(s,o+7),n.get(39-i)&&t.set(o-7,s)},t.generateCheckWords=function(e,r,n){var o,i,s=e.getSize()/n,a=new gn(t.getGF(n)),l=w.truncDivision(r,n),u=t.bitsToWords(e,n,l);a.encode(u,l-s);var c=r%n,h=new v;h.appendBits(0,c);try{for(var d=Zn(Array.from(u)),f=d.next();!f.done;f=d.next())h.appendBits(f.value,n)}catch(g){o={error:g}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}return h},t.bitsToWords=function(t,e,r){var n,o,i=new Int32Array(r);for(n=0,o=t.getSize()/e;n<o;n++){for(var s=0,a=0;a<e;a++)s|=t.get(n*e+a)?1<<e-a-1:0;i[n]=s}return i},t.getGF=function(t){switch(t){case 4:return ct.AZTEC_PARAM;case 6:return ct.AZTEC_DATA_6;case 8:return ct.AZTEC_DATA_8;case 10:return ct.AZTEC_DATA_10;case 12:return ct.AZTEC_DATA_12;default:throw new c("Unsupported word size "+t)}},t.stuffBits=function(t,e){for(var r=new v,n=t.getSize(),o=(1<<e)-2,i=0;i<n;i+=e){for(var s=0,a=0;a<e;a++)(i+a>=n||t.get(i+a))&&(s|=1<<e-1-a);(s&o)===o?(r.appendBits(s&o,e),i--):0==(s&o)?(r.appendBits(1|s,e),i--):r.appendBits(s,e)}return r},t.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t}(),qn=(function(){function t(){}t.prototype.encode=function(t,e,r,n){return this.encodeWithHints(t,e,r,n,null)},t.prototype.encodeWithHints=function(e,r,n,o,i){var s=On.ISO_8859_1,a=Kn.DEFAULT_EC_PERCENT,l=Kn.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(fn.CHARACTER_SET)&&(s=Rn.forName(i.get(fn.CHARACTER_SET).toString())),i.has(fn.ERROR_CORRECTION)&&(a=w.parseInt(i.get(fn.ERROR_CORRECTION).toString())),i.has(fn.AZTEC_LAYERS)&&(l=w.parseInt(i.get(fn.AZTEC_LAYERS).toString()))),t.encodeLayers(e,r,n,o,s,a,l)},t.encodeLayers=function(e,r,n,o,i,s,a){if(r!==et.AZTEC)throw new c("Can only encode AZTEC, but got "+r);var l=Kn.encode(B.getBytes(e,i),s,a);return t.renderResult(l,n,o)},t.renderResult=function(t,e,r){var n=t.getMatrix();if(null==n)throw new gt;for(var o=n.getWidth(),i=n.getHeight(),s=Math.max(e,o),a=Math.max(r,i),l=Math.min(s/o,a/i),u=(s-o*l)/2,c=(a-i*l)/2,h=new x(s,a),d=0,f=c;d<i;d++,f+=l)for(var g=0,p=u;g<o;g++,p+=l)n.get(g,d)&&h.setRegion(p,f,l,l);return h}}(),function(){function t(t){this.newPosition=t}return t.prototype.getNewPosition=function(){return this.newPosition},t}()),$n=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qn=function(t){function e(e,r){var n=t.call(this,e)||this;return n.value=r,n}return $n(e,t),e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(qn),Jn=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),to=function(t){function e(e,r,n){var o=t.call(this,e)||this;if(r<0||r>10||n<0||n>10)throw new T;return o.firstDigit=r,o.secondDigit=n,o}return Jn(e,t),e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return 10*this.firstDigit+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit==e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit==e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(qn),eo=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ro=function(t){function e(e,r,n){var o=t.call(this,e)||this;return n?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=r,o}return eo(e,t),e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(qn),no=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oo=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,o,i,s,a,l,u;if(!e)return null;if(e.length<2)throw new k;var c=e.substring(0,2);try{for(var h=no(t.TWO_DIGIT_DATA_LENGTH),d=h.next();!d.done;d=h.next())if((E=d.value)[0]===c)return E[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,E[2],e):t.processFixedAI(2,E[1],e)}catch(A){r={error:A}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}if(e.length<3)throw new k;var f=e.substring(0,3);try{for(var g=no(t.THREE_DIGIT_DATA_LENGTH),p=g.next();!p.done;p=g.next())if((E=p.value)[0]===f)return E[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,E[2],e):t.processFixedAI(3,E[1],e)}catch(v){o={error:v}}finally{try{p&&!p.done&&(i=g.return)&&i.call(g)}finally{if(o)throw o.error}}try{for(var w=no(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),m=w.next();!m.done;m=w.next())if((E=m.value)[0]===f)return E[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,E[2],e):t.processFixedAI(4,E[1],e)}catch(S){s={error:S}}finally{try{m&&!m.done&&(a=w.return)&&a.call(w)}finally{if(s)throw s.error}}if(e.length<4)throw new k;var _=e.substring(0,4);try{for(var y=no(t.FOUR_DIGIT_DATA_LENGTH),C=y.next();!C.done;C=y.next()){var E;if((E=C.value)[0]===_)return E[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,E[2],e):t.processFixedAI(4,E[1],e)}}catch(I){l={error:I}}finally{try{C&&!C.done&&(u=y.return)&&u.call(y)}finally{if(l)throw l.error}}throw new k},t.processFixedAI=function(e,r,n){if(n.length<e)throw new k;var o=n.substring(0,e);if(n.length<e+r)throw new k;var i=n.substring(e,e+r),s=n.substring(e+r),a="("+o+")"+i,l=t.parseFieldsInGeneralPurpose(s);return null==l?a:a+l},t.processVariableAI=function(e,r,n){var o,i=n.substring(0,e),s=n.substring(e,o=n.length<e+r?n.length:e+r),a=n.substring(o),l="("+i+")"+s,u=t.parseFieldsInGeneralPurpose(a);return null==u?l:l+u},t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH=[],20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),io=function(){function t(t,e){e?this.decodedInformation=null:(this.finished=t,this.decodedInformation=e)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),so=function(){function t(t){this.buffer=new L,this.information=t}return t.prototype.decodeAllCodes=function(t,e){for(var r=e,n=null;;){var o=this.decodeGeneralPurposeField(r,n),i=oo.parseFieldsInGeneralPurpose(o.getNewString());if(null!=i&&t.append(i),n=o.isRemaining()?""+o.getRemainingValue():null,r==o.getNewPosition())break;r=o.getNewPosition()}return t.toString()},t.prototype.isStillNumeric=function(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(var e=t;e<t+3;++e)if(this.information.get(e))return!0;return this.information.get(t+3)},t.prototype.decodeNumeric=function(t){if(t+7>this.information.getSize()){var e=this.extractNumericValueFromBitArray(t,4);return new to(this.information.getSize(),0==e?to.FNC1:e-1,to.FNC1)}var r=this.extractNumericValueFromBitArray(t,7);return new to(t+7,(r-8)/11,(r-8)%11)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(t,e,r){for(var n=0,o=0;o<r;++o)t.get(e+o)&&(n|=1<<r-o-1);return n},t.prototype.decodeGeneralPurposeField=function(t,e){this.buffer.setLengthToZero(),null!=e&&this.buffer.append(e),this.current.setPosition(t);var r=this.parseBlocks();return null!=r&&r.isRemaining()?new ro(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new ro(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var t,e;do{var r=this.current.getPosition();if(t=this.current.isAlpha()?(e=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(e=this.parseIsoIec646Block()).isFinished():(e=this.parseNumericBlock()).isFinished(),r==this.current.getPosition()&&!t)break}while(!t);return e.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){var e=void 0;return e=t.isSecondDigitFNC1()?new ro(this.current.getPosition(),this.buffer.toString()):new ro(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new io(!0,e)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1())return e=new ro(this.current.getPosition(),this.buffer.toString()),new io(!0,e);this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new io(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var e=new ro(this.current.getPosition(),this.buffer.toString());return new io(!0,e)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new io(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var e=new ro(this.current.getPosition(),this.buffer.toString());return new io(!0,e)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new io(!1)},t.prototype.isStillIsoIec646=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<116)return!0;if(t+8>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(t,8);return n>=232&&n<253},t.prototype.decodeIsoIec646=function(t){var e=this.extractNumericValueFromBitArray(t,5);if(15==e)return new Qn(t+5,Qn.FNC1);if(e>=5&&e<15)return new Qn(t+5,"0"+(e-5));var r,n=this.extractNumericValueFromBitArray(t,7);if(n>=64&&n<90)return new Qn(t+7,""+(n+1));if(n>=90&&n<116)return new Qn(t+7,""+(n+7));switch(this.extractNumericValueFromBitArray(t,8)){case 232:r="!";break;case 233:r='"';break;case 234:r="%";break;case 235:r="&";break;case 236:r="'";break;case 237:r="(";break;case 238:r=")";break;case 239:r="*";break;case 240:r="+";break;case 241:r=",";break;case 242:r="-";break;case 243:r=".";break;case 244:r="/";break;case 245:r=":";break;case 246:r=";";break;case 247:r="<";break;case 248:r="=";break;case 249:r=">";break;case 250:r="?";break;case 251:r="_";break;case 252:r=" ";break;default:throw new T}return new Qn(t+8,r)},t.prototype.isStillAlpha=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,6);return r>=16&&r<63},t.prototype.decodeAlphanumeric=function(t){var e=this.extractNumericValueFromBitArray(t,5);if(15==e)return new Qn(t+5,Qn.FNC1);if(e>=5&&e<15)return new Qn(t+5,"0"+(e-5));var r,n=this.extractNumericValueFromBitArray(t,6);if(n>=32&&n<58)return new Qn(t+6,""+(n+33));switch(n){case 58:r="*";break;case 59:r=",";break;case 60:r="-";break;case 61:r=".";break;case 62:r="/";break;default:throw new gt("Decoding invalid alphanumeric value: "+n)}return new Qn(t+6,r)},t.prototype.isAlphaTo646ToAlphaLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<5&&e+t<this.information.getSize();++e)if(2==e){if(!this.information.get(t+2))return!1}else if(this.information.get(t+e))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(t){if(t+3>this.information.getSize())return!1;for(var e=t;e<t+3;++e)if(this.information.get(e))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<4&&e+t<this.information.getSize();++e)if(this.information.get(t+e))return!1;return!0},t}(),ao=function(){function t(t){this.information=t,this.generalDecoder=new so(t)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),lo=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),uo=function(t){function e(e){return t.call(this,e)||this}return lo(e,t),e.prototype.encodeCompressedGtin=function(t,e){t.append("(01)");var r=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,e,r)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,n){for(var o=0;o<4;++o){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);i/100==0&&t.append("0"),i/10==0&&t.append("0"),t.append(i)}e.appendCheckDigit(t,n)},e.appendCheckDigit=function(t,e){for(var r=0,n=0;n<13;n++){var o=t.charAt(n+e).charCodeAt(0)-"0".charCodeAt(0);r+=0==(1&n)?3*o:o}10==(r=10-r%10)&&(r=0),t.append(r)},e.GTIN_SIZE=40,e}(ao),co=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ho=function(t){function e(e){return t.call(this,e)||this}return co(e,t),e.prototype.parseInformation=function(){var t=new L;t.append("(01)");var r=t.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(n),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(uo),fo=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),go=function(t){function e(e){return t.call(this,e)||this}return fo(e,t),e.prototype.parseInformation=function(){var t=new L;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(ao),po=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wo=function(t){function e(e){return t.call(this,e)||this}return po(e,t),e.prototype.encodeCompressedWeight=function(t,e,r){var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e,r);this.addWeightCode(t,n);for(var o=this.checkWeight(n),i=1e5,s=0;s<5;++s)o/i==0&&t.append("0"),i/=10;t.append(o)},e}(uo),mo=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_o=function(t){function e(e){return t.call(this,e)||this}return mo(e,t),e.prototype.parseInformation=function(){if(this.getInformation().getSize()!=e.HEADER_SIZE+wo.GTIN_SIZE+e.WEIGHT_SIZE)throw new k;var t=new L;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+wo.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(wo),yo=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Co=function(t){function e(e){return t.call(this,e)||this}return yo(e,t),e.prototype.addWeightCode=function(t,e){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(_o),Eo=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ao=function(t){function e(e){return t.call(this,e)||this}return Eo(e,t),e.prototype.addWeightCode=function(t,e){t.append(e<1e4?"(3202)":"(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(_o),vo=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),So=function(t){function e(e){return t.call(this,e)||this}return vo(e,t),e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+uo.GTIN_SIZE)throw new k;var t=new L;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+uo.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var n=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+uo.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(n.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(uo),Io=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bo=function(t){function e(e){return t.call(this,e)||this}return Io(e,t),e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+uo.GTIN_SIZE)throw new k;var t=new L;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+uo.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+uo.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);n/100==0&&t.append("0"),n/10==0&&t.append("0"),t.append(n);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+uo.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(uo),To=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ro=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.dateCode=n,o.firstAIdigits=r,o}return To(e,t),e.prototype.parseInformation=function(){if(this.getInformation().getSize()!=e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new k;var t=new L;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var n=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(38400!=n){t.append("("),t.append(this.dateCode),t.append(")");var o=n%32,i=(n/=32)%12+1,s=n/=12;s/10==0&&t.append("0"),t.append(s),i/10==0&&t.append("0"),t.append(i),o/10==0&&t.append("0"),t.append(o)}},e.prototype.addWeightCode=function(t,e){t.append("("),t.append(this.firstAIdigits),t.append(e/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(wo),Oo=function(){function t(t,e,r,n){this.leftchar=t,this.rightchar=e,this.finderpattern=r,this.maybeLast=n}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return null==this.rightchar},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t&&t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern)},t.equalsOrNull=function(e,r){return null===e?null===r:t.equals(e,r)},t.prototype.hashCode=function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()},t.hashNotNull=function(t){return null===t?0:t.hashCode()},t}(),No=function(){function t(t,e,r){this.pairs=t,this.rowNumber=e,this.wasReversed=r}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(t){return this.checkEqualitity(this,t)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t&&this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed},t.prototype.checkEqualitity=function(t,e){var r;if(t&&e)return t.forEach(function(t,n){e.forEach(function(e){t.getLeftChar().getValue()===e.getLeftChar().getValue()&&t.getRightChar().getValue()===e.getRightChar().getValue()&&t.getFinderPatter().getValue()===e.getFinderPatter().getValue()&&(r=!0)})}),r},t}(),Do=function(){function t(){}return t.buildBitArray=function(t){var e=2*t.length-1;null==t[t.length-1].getRightChar()&&(e-=1);for(var r=new v(12*e),n=0,o=t[0].getRightChar().getValue(),i=11;i>=0;--i)0!=(o&1<<i)&&r.set(n),n++;for(i=1;i<t.length;++i){for(var s=t[i],a=s.getLeftChar().getValue(),l=11;l>=0;--l)0!=(a&1<<l)&&r.set(n),n++;if(null!=s.getRightChar()){var u=s.getRightChar().getValue();for(l=11;l>=0;--l)0!=(u&1<<l)&&r.set(n),n++}}return r},t}(),Mo=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Po=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(t){function e(){var r=null!==t&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}Mo(e,t),e.prototype.decodeRow=function(t,r,n){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch(o){console.log(o)}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,e){for(var r,n=!1;!n;)try{this.pairs.push(this.retrieveNextPair(e,this.pairs,t))}catch(k){if(!this.pairs.length)throw new k;n=!0}if(this.checkChecksum())return this.pairs;if(r=!!this.rows.length,this.storeRow(t,!1),r){var o=this.checkRowsBoolean(!1);if(null!=o)return o;if(null!=(o=this.checkRowsBoolean(!0)))return o}throw new k},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var e=null;try{e=this.checkRows(new Array,0)}catch(r){console.log(r)}return t&&(this.rows=this.rows.reverse()),e},e.prototype.checkRows=function(t,r){for(var n,o,i=r;i<this.rows.length;i++){var s=this.rows[i];this.pairs.length=0;try{for(var a=(n=void 0,Po(t)),l=a.next();!l.done;l=a.next())this.pairs.push(l.value.getPairs())}catch(c){n={error:c}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}if(this.pairs.push(s.getPairs()),e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var u=new Array(t);u.push(s);try{return this.checkRows(u,i+1)}catch(h){console.log(h)}}}throw new k},e.isValidSequence=function(t){var r,n;try{for(var o=Po(e.FINDER_PATTERN_SEQUENCES),i=o.next();!i.done;i=o.next()){var s=i.value;if(!(t.length>s.length)){for(var a=!0,l=0;l<t.length;l++)if(t[l].getFinderPattern().getValue()!=s[l]){a=!1;break}if(a)return!0}}}catch(u){r={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var n=0,o=!1,i=!1;n<this.rows.length;){var s=this.rows[n];if(s.getRowNumber()>t){i=s.isEquivalent(this.pairs);break}o=s.isEquivalent(this.pairs),n++}i||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new No(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,e){var r,n,o,i,s,a;try{for(var l=Po(e),u=l.next();!u.done;u=l.next()){var c=u.value;if(c.getPairs().length!==t.length)try{for(var h=(o=void 0,Po(c.getPairs())),d=h.next();!d.done;d=h.next()){var f=d.value;try{for(var g=(s=void 0,Po(t)),p=g.next();!p.done&&!Oo.equals(f,p.value);p=g.next());}catch(w){s={error:w}}finally{try{p&&!p.done&&(a=g.return)&&a.call(g)}finally{if(s)throw s.error}}}}catch(m){o={error:m}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(o)throw o.error}}}}catch(_){r={error:_}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}},e.isPartialRow=function(t,e){var r,n,o,i,s,a;try{for(var l=Po(e),u=l.next();!u.done;u=l.next()){var c=u.value,h=!0;try{for(var d=(o=void 0,Po(t)),f=d.next();!f.done;f=d.next()){var g=f.value,p=!1;try{for(var w=(s=void 0,Po(c.getPairs())),m=w.next();!m.done;m=w.next())if(g.equals(m.value)){p=!0;break}}catch(_){s={error:_}}finally{try{m&&!m.done&&(a=w.return)&&a.call(w)}finally{if(s)throw s.error}}if(!p){h=!1;break}}}catch(y){o={error:y}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}if(h)return!0}}catch(C){r={error:C}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var e=function(t){try{if(t.get(1))return new ho(t);if(!t.get(2))return new go(t);switch(so.extractNumericValueFromBitArray(t,1,4)){case 4:return new Co(t);case 5:return new Ao(t)}switch(so.extractNumericValueFromBitArray(t,1,5)){case 12:return new So(t);case 13:return new bo(t)}switch(so.extractNumericValueFromBitArray(t,1,7)){case 56:return new Ro(t,"310","11");case 57:return new Ro(t,"320","11");case 58:return new Ro(t,"310","13");case 59:return new Ro(t,"320","13");case 60:return new Ro(t,"310","15");case 61:return new Ro(t,"320","15");case 62:return new Ro(t,"310","17");case 63:return new Ro(t,"320","17")}}catch(e){throw console.log(e),new gt("unknown decoder: "+t)}}(Do.buildBitArray(t)).parseInformation(),r=t[0].getFinderPattern().getResultPoints(),n=t[t.length-1].getFinderPattern().getResultPoints();return new J(e,null,null,[r[0],r[1],n[0],n[1]],et.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),e=t.getLeftChar(),r=t.getRightChar();if(null==r)return!1;for(var n=r.getChecksumPortion(),o=2,i=1;i<this.pairs.size();++i){var s=this.pairs.get(i);n+=s.getLeftChar().getChecksumPortion(),o++;var a=s.getRightChar();null!=a&&(n+=a.getChecksumPortion(),o++)}return 211*(o-4)+(n%=211)==e.getValue()},e.getNextSecondBar=function(t,e){var r;return t.get(e)?(r=t.getNextUnset(e),r=t.getNextSet(r)):(r=t.getNextSet(e),r=t.getNextUnset(r)),r},e.prototype.retrieveNextPair=function(t,r,n){var o,i=r.length%2==0;this.startFromEven&&(i=!i);var s=!0,a=-1;do{this.findNextPair(t,r,a),null==(o=this.parseFoundFinderPattern(t,n,i))?a=e.getNextSecondBar(t,this.startEnd[0]):s=!1}while(s);var l,u=this.decodeDataCharacter(t,o,i,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new k;try{l=this.decodeDataCharacter(t,o,i,!1)}catch(c){l=null,console.log(c)}return new Oo(u,l,o,!0)},e.prototype.isEmptyPair=function(t){return 0===t.length},e.prototype.findNextPair=function(t,r,n){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var i,s=t.getSize();i=n>=0?n:this.isEmptyPair(r)?0:r[r.length-1].getFinderPattern().getStartEnd()[1];var a=r.length%2!=0;this.startFromEven&&(a=!a);for(var l=!1;i<s&&(l=!t.get(i));)i++;for(var u=0,c=i,h=i;h<s;h++)if(t.get(h)!=l)o[u]++;else{if(3==u){if(a&&e.reverseCounters(o),e.isFinderPattern(o))return this.startEnd[0]=c,void(this.startEnd[1]=h);a&&e.reverseCounters(o),c+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,u--}else u++;o[u]=1,l=!l}throw new k},e.reverseCounters=function(t){for(var e=t.length,r=0;r<e/2;++r){var n=t[r];t[r]=t[e-r-1],t[e-r-1]=n}},e.prototype.parseFoundFinderPattern=function(t,r,n){var o,i,s;if(n){for(var a=this.startEnd[0]-1;a>=0&&!t.get(a);)a--;a++,o=this.startEnd[0]-a,i=a,s=this.startEnd[1]}else i=this.startEnd[0],o=(s=t.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var l,u=this.getDecodeFinderCounters();p.arraycopy(u,0,u,1,u.length-1),u[0]=o;try{l=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch(c){return null}return new jt(l,[i,s],i,s,r)},e.prototype.decodeDataCharacter=function(t,r,n,o){for(var i=this.getDataCharacterCounters(),s=0;s<i.length;s++)i[s]=0;if(o)e.recordPatternInReverse(t,r.getStartEnd()[0],i);else{e.recordPattern(t,r.getStartEnd()[1],i);for(var a=0,l=i.length-1;a<l;a++,l--){var u=i[a];i[a]=i[l],i[l]=u}}var c=yt.sum(new Int32Array(i))/17,h=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(c-h)/h>.3)throw new k;var d=this.getOddCounts(),f=this.getEvenCounts(),g=this.getOddRoundingErrors(),p=this.getEvenRoundingErrors();for(a=0;a<i.length;a++){var w=1*i[a]/c,m=w+.5;if(m<1){if(w<.3)throw new k;m=1}else if(m>8){if(w>8.7)throw new k;m=8}var _=a/2;0==(1&a)?(d[_]=m,g[_]=w-m):(f[_]=m,p[_]=w-m)}this.adjustOddEvenCounts(17);var y=4*r.getValue()+(n?0:2)+(o?0:1)-1,C=0,E=0;for(a=d.length-1;a>=0;a--)e.isNotA1left(r,n,o)&&(E+=d[a]*e.WEIGHTS[y][2*a]),C+=d[a];var A=0;for(a=f.length-1;a>=0;a--)e.isNotA1left(r,n,o)&&(A+=f[a]*e.WEIGHTS[y][2*a+1]);var v=E+A;if(0!=(1&C)||C>13||C<4)throw new k;var S=(13-C)/2,I=e.SYMBOL_WIDEST[S],b=9-I,T=Zt.getRSSvalue(d,I,!0),R=Zt.getRSSvalue(f,b,!1);return new Wt(T*e.EVEN_TOTAL_SUBSET[S]+R+e.GSUM[S],v)},e.isNotA1left=function(t,e,r){return!(0==t.getValue()&&e&&r)},e.prototype.adjustOddEvenCounts=function(t){var r=yt.sum(new Int32Array(this.getOddCounts())),n=yt.sum(new Int32Array(this.getEvenCounts())),o=!1,i=!1;r>13?i=!0:r<4&&(o=!0);var s=!1,a=!1;n>13?a=!0:n<4&&(s=!0);var l=r+n-t,u=1==(1&r),c=0==(1&n);if(1==l)if(u){if(c)throw new k;i=!0}else{if(!c)throw new k;a=!0}else if(-1==l)if(u){if(c)throw new k;o=!0}else{if(!c)throw new k;s=!0}else{if(0!=l)throw new k;if(u){if(!c)throw new k;r<n?(o=!0,a=!0):(i=!0,s=!0)}else if(c)throw new k}if(o){if(i)throw new k;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(a)throw new k;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[[1,8,4,1],[3,6,4,1],[3,4,6,1],[3,2,8,1],[2,6,5,1],[2,2,9,1]],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A=0,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B=1,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C=2,e.FINDER_PAT_B,e.FINDER_PAT_D=3],[e.FINDER_PAT_A,e.FINDER_PAT_E=4,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F=5],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11}(Gt);class Bo extends W{constructor(t){super(t.width,t.height),this.canvas=t,this.buffer=Bo.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const e=t.getContext("2d");if(!e)throw new Error("Couldn't get canvas context.");const r=e.getImageData(0,0,t.width,t.height);return Bo.toGrayscaleBuffer(r.data,t.width,t.height)}static toGrayscaleBuffer(t,e,r){const n=new Uint8ClampedArray(e*r);for(let o=0,i=0,s=t.length;o<s;o+=4,i++){let e;e=0===t[o+3]?255:306*t[o]+601*t[o+1]+117*t[o+2]+512>>10,n[i]=e}return n}getRow(t,e){if(t<0||t>=this.getHeight())throw new c("Requested row is outside the image: "+t);const r=this.getWidth(),n=t*r;return null===e?e=this.buffer.slice(n,n+r):(e.length<r&&(e=new Uint8ClampedArray(r)),e.set(this.buffer.slice(n,n+r))),e}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,e,r,n){return super.crop(t,e,r,n),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}invert(){return new X(this)}getTempCanvasElement(){if(null===this.tempCanvasElement){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const e=this.getTempCanvasElement();if(!e)throw new Error("Could not create a Canvas element.");const r=t*Bo.DEGREE_TO_RADIANS,n=this.canvas.width,o=this.canvas.height,i=Math.ceil(Math.abs(Math.cos(r))*n+Math.abs(Math.sin(r))*o),s=Math.ceil(Math.abs(Math.sin(r))*n+Math.abs(Math.cos(r))*o);e.width=i,e.height=s;const a=e.getContext("2d");if(!a)throw new Error("Could not create a Convas Context element.");return a.translate(i/2,s/2),a.rotate(r),a.drawImage(this.canvas,n/-2,o/-2),this.buffer=Bo.makeBufferFromCanvasImageData(e),this}}function Lo(){return"undefined"!=typeof navigator}Bo.DEGREE_TO_RADIANS=Math.PI/180;var xo=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__awaiter:void 0)||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function s(t){try{l(n.next(t))}catch(e){i(e)}}function a(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(s,a)}l((n=n.apply(t,e||[])).next())})};const Fo={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3};class ko{constructor(t,e=new Map,r={}){this.reader=t,this.hints=e,this.options=Object.assign(Object.assign({},Fo),r)}set possibleFormats(t){this.hints.set(I.POSSIBLE_FORMATS,t)}static addVideoSource(t,e){try{t.srcObject=e}catch(r){t.src=URL.createObjectURL(e)}}static mediaStreamSetTorch(t,e){return xo(this,void 0,void 0,function*(){yield t.applyConstraints({advanced:[{fillLightMode:e?"flash":"off",torch:!!e}]})})}static mediaStreamIsTorchCompatible(t){const e=t.getVideoTracks();for(const r of e)if(ko.mediaStreamIsTorchCompatibleTrack(r))return!0;return!1}static mediaStreamIsTorchCompatibleTrack(t){try{return"torch"in t.getCapabilities()}catch(e){return console.error(e),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}}static isVideoPlaying(t){return t.currentTime>0&&!t.paused&&t.readyState>2}static getMediaElement(t,e){const r=document.getElementById(t);if(!r)throw new l(`element with id '${t}' not found`);if(r.nodeName.toLowerCase()!==e.toLowerCase())throw new l(`element with id '${t}' must be an ${e} element`);return r}static createVideoElement(t){if(t instanceof HTMLVideoElement)return t;if("string"==typeof t)return ko.getMediaElement(t,"video");if(!t&&"undefined"!=typeof document){const t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")}static prepareImageElement(t){if(t instanceof HTMLImageElement)return t;if("string"==typeof t)return ko.getMediaElement(t,"img");if(void 0===t){const t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")}static prepareVideoElement(t){const e=ko.createVideoElement(t);return e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.setAttribute("playsinline","true"),e}static isImageLoaded(t){return!!t.complete&&0!==t.naturalWidth}static createBinaryBitmapFromCanvas(t){const e=new Bo(t),r=new G(e);return new h(r)}static drawImageOnCanvas(t,e){t.drawImage(e,0,0)}static getMediaElementDimensions(t){if(t instanceof HTMLVideoElement)return{height:t.videoHeight,width:t.videoWidth};if(t instanceof HTMLImageElement)return{height:t.naturalHeight||t.height,width:t.naturalWidth||t.width};throw new Error("Couldn't find the Source's dimentions!")}static createCaptureCanvas(t){if(!t)throw new l("Cannot create a capture canvas without a media element.");if("undefined"==typeof document)throw new Error('The page "Document" is undefined, make sure you\'re running in a browser.');const e=document.createElement("canvas"),{width:r,height:n}=ko.getMediaElementDimensions(t);return e.style.width=r+"px",e.style.height=n+"px",e.width=r,e.height=n,e}static tryPlayVideo(t){return xo(this,void 0,void 0,function*(){if(null==t?void 0:t.ended)return console.error("Trying to play video that has ended."),!1;if(ko.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),!0;try{return yield t.play(),!0}catch(e){return console.warn("It was not possible to play the video.",e),!1}})}static createCanvasFromMediaElement(t){const e=ko.createCaptureCanvas(t),r=e.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return ko.drawImageOnCanvas(r,t),e}static createBinaryBitmapFromMediaElem(t){const e=ko.createCanvasFromMediaElement(t);return ko.createBinaryBitmapFromCanvas(e)}static destroyImageElement(t){t.src="",t.removeAttribute("src"),t=void 0}static listVideoInputDevices(){return xo(this,void 0,void 0,function*(){if(!Lo())throw new Error("Can't enumerate devices, navigator is not present.");if(!(Lo()&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices))throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),e=[];for(const r of t){const t="video"===r.kind?"videoinput":r.kind;"videoinput"===t&&e.push({deviceId:r.deviceId||r.id,label:r.label||"Video device "+(e.length+1),kind:t,groupId:r.groupId})}return e})}static findDeviceById(t){return xo(this,void 0,void 0,function*(){const e=yield ko.listVideoInputDevices();if(e)return e.find(e=>e.deviceId===t)})}static cleanVideoSource(t){if(t){try{t.srcObject=null}catch(e){t.src=""}t&&t.removeAttribute("src")}}static playVideoOnLoadAsync(t,e){return xo(this,void 0,void 0,function*(){return!!(yield ko.tryPlayVideo(t))||new Promise((r,n)=>{const o=setTimeout(()=>{ko.isVideoPlaying(t)||(n(!1),t.removeEventListener("canplay",i))},e),i=()=>{ko.tryPlayVideo(t).then(e=>{clearTimeout(o),t.removeEventListener("canplay",i),r(e)})};t.addEventListener("canplay",i)})})}static attachStreamToVideo(t,e,r=5e3){return xo(this,void 0,void 0,function*(){const n=ko.prepareVideoElement(e);return ko.addVideoSource(n,t),yield ko.playVideoOnLoadAsync(n,r),n})}static _waitImageLoad(t){return new Promise((e,r)=>{const n=setTimeout(()=>{ko.isImageLoaded(t)||(t.removeEventListener("load",o),r())},1e4),o=()=>{clearTimeout(n),t.removeEventListener("load",o),e()};t.addEventListener("load",o)})}static checkCallbackFnOrThrow(t){if(!t)throw new l("`callbackFn` is a required parameter, you cannot capture results without it.")}static disposeMediaStream(t){t.getVideoTracks().forEach(t=>t.stop()),t=void 0}decode(t){const e=ko.createCanvasFromMediaElement(t);return this.decodeFromCanvas(e)}decodeBitmap(t){return this.reader.decode(t,this.hints)}decodeFromCanvas(t){const e=ko.createBinaryBitmapFromCanvas(t);return this.decodeBitmap(e)}decodeFromImageElement(t){return xo(this,void 0,void 0,function*(){if(!t)throw new l("An image element must be provided.");const e=ko.prepareImageElement(t);return yield this._decodeOnLoadImage(e)})}decodeFromImageUrl(t){return xo(this,void 0,void 0,function*(){if(!t)throw new l("An URL must be provided.");const e=ko.prepareImageElement();e.src=t;try{return yield this.decodeFromImageElement(e)}finally{ko.destroyImageElement(e)}})}decodeFromConstraints(t,e,r){return xo(this,void 0,void 0,function*(){ko.checkCallbackFnOrThrow(r);const n=yield navigator.mediaDevices.getUserMedia(t);try{return yield this.decodeFromStream(n,e,r)}catch(o){throw ko.disposeMediaStream(n),o}})}decodeFromStream(t,e,r){return xo(this,void 0,void 0,function*(){ko.checkCallbackFnOrThrow(r);const n=this.options.tryPlayVideoTimeout,o=yield ko.attachStreamToVideo(t,e,n),i=this.scan(o,r,()=>{(()=>{for(const e of t.getVideoTracks())e.stop();t=void 0})(),ko.cleanVideoSource(o)}),s=t.getVideoTracks(),a=Object.assign(Object.assign({},i),{stop(){i.stop()},streamVideoConstraintsApply(t,e){return xo(this,void 0,void 0,function*(){const r=e?s.filter(e):s;for(const e of r)yield e.applyConstraints(t)})},streamVideoConstraintsGet:t=>s.find(t).getConstraints(),streamVideoSettingsGet:t=>s.find(t).getSettings(),streamVideoCapabilitiesGet:t=>s.find(t).getCapabilities()});if(ko.mediaStreamIsTorchCompatible(t)){const t=null==s?void 0:s.find(t=>ko.mediaStreamIsTorchCompatibleTrack(t)),e=e=>xo(this,void 0,void 0,function*(){yield ko.mediaStreamSetTorch(t,e)});a.switchTorch=e,a.stop=()=>{i.stop(),e(!1)}}return a})}decodeFromVideoDevice(t,e,r){return xo(this,void 0,void 0,function*(){let n;ko.checkCallbackFnOrThrow(r),n=t?{deviceId:{exact:t}}:{facingMode:"environment"};const o={video:n};return yield this.decodeFromConstraints(o,e,r)})}decodeFromVideoElement(t,e){return xo(this,void 0,void 0,function*(){if(ko.checkCallbackFnOrThrow(e),!t)throw new l("A video element must be provided.");const r=ko.prepareVideoElement(t),n=this.options.tryPlayVideoTimeout;return yield ko.playVideoOnLoadAsync(r,n),this.scan(r,e)})}decodeFromVideoUrl(t,e){return xo(this,void 0,void 0,function*(){if(ko.checkCallbackFnOrThrow(e),!t)throw new l("An URL must be provided.");const r=ko.prepareVideoElement();r.src=t;const n=this.options.tryPlayVideoTimeout;return yield ko.playVideoOnLoadAsync(r,n),this.scan(r,e,()=>{ko.cleanVideoSource(r)})})}decodeOnceFromConstraints(t,e){return xo(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(r,e)})}decodeOnceFromStream(t,e){return xo(this,void 0,void 0,function*(){const r=Boolean(e),n=yield ko.attachStreamToVideo(t,e);try{return yield this.scanOneResult(n)}finally{r||ko.cleanVideoSource(n)}})}decodeOnceFromVideoDevice(t,e){return xo(this,void 0,void 0,function*(){let r;r=t?{deviceId:{exact:t}}:{facingMode:"environment"};const n={video:r};return yield this.decodeOnceFromConstraints(n,e)})}decodeOnceFromVideoElement(t){return xo(this,void 0,void 0,function*(){if(!t)throw new l("A video element must be provided.");const e=ko.prepareVideoElement(t),r=this.options.tryPlayVideoTimeout;return yield ko.playVideoOnLoadAsync(e,r),yield this.scanOneResult(e)})}decodeOnceFromVideoUrl(t){return xo(this,void 0,void 0,function*(){if(!t)throw new l("An URL must be provided.");const e=ko.prepareVideoElement();e.src=t;const r=this.decodeOnceFromVideoElement(e);try{return yield r}finally{ko.cleanVideoSource(e)}})}scanOneResult(t,e=!0,r=!0,n=!0){return new Promise((o,i)=>{this.scan(t,(t,s,a)=>{if(t)return o(t),void a.stop();if(s){if(s instanceof k&&e)return;if(s instanceof f&&r)return;if(s instanceof T&&n)return;a.stop(),i(s)}})})}scan(t,e,r){ko.checkCallbackFnOrThrow(e);let n=ko.createCaptureCanvas(t),o=n.getContext("2d");if(!o)throw new Error("Couldn't create canvas for visual element scan.");const i=()=>{o=void 0,n=void 0};let s,a=!1;const l={stop:()=>{a=!0,clearTimeout(s),i(),r&&r()}},u=()=>{if(!a)try{ko.drawImageOnCanvas(o,t);const r=this.decodeFromCanvas(n);e(r,void 0,l),s=window.setTimeout(u,this.options.delayBetweenScanSuccess)}catch(c){e(void 0,c,l);const t=c instanceof T,n=c instanceof k;if(c instanceof f||t||n)return void(s=window.setTimeout(u,this.options.delayBetweenScanAttempts));i(),r&&r(c)}};return u(),l}_decodeOnLoadImage(t){return xo(this,void 0,void 0,function*(){return ko.isImageLoaded(t)||(yield ko._waitImageLoad(t)),this.decode(t)})}}const Vo="http://www.w3.org/2000/svg";class Uo{constructor(t){if("string"==typeof t){const e=document.getElementById(t);if(!e)throw new Error(`Could not find a Container element with '${t}'.`);this.containerElement=e}else this.containerElement=t}write(t,e,r,n){if(0===t.length)throw new c("Found empty contents");if(e<0||r<0)throw new c("Requested dimensions are too small: "+e+"x"+r);const o=n&&void 0!==n.get(fn.MARGIN)?Number.parseInt(n.get(fn.MARGIN).toString(),10):Uo.QUIET_ZONE_SIZE,i=this.encode(n,t);return this.renderResult(i,e,r,o)}createSVGElement(t,e){const r=document.createElementNS(Uo.SVG_NS,"svg");return r.setAttributeNS(Vo,"width",e.toString()),r.setAttributeNS(Vo,"height",t.toString()),r}createSvgPathPlaceholderElement(t,e){const r=document.createElementNS(Uo.SVG_NS,"path");return r.setAttributeNS(Vo,"d",`M0 0h${t}v${e}H0z`),r.setAttributeNS(Vo,"fill","none"),r}createSvgRectElement(t,e,r,n){const o=document.createElementNS(Uo.SVG_NS,"rect");return o.setAttributeNS(Vo,"x",t.toString()),o.setAttributeNS(Vo,"y",e.toString()),o.setAttributeNS(Vo,"height",r.toString()),o.setAttributeNS(Vo,"width",n.toString()),o.setAttributeNS(Vo,"fill","#000000"),o}encode(t,e){let r=ke.L;if(t&&void 0!==t.get(fn.ERROR_CORRECTION)){const e=t.get(fn.ERROR_CORRECTION).toString();r=ke.fromString(e)}return Sn.encode(e,r,t)}renderResult(t,e,r,n){const o=t.getMatrix();if(null===o)throw new gt;const i=o.getWidth(),s=o.getHeight(),a=i+2*n,l=s+2*n,u=Math.max(e,a),c=Math.max(r,l),h=Math.min(Math.floor(u/a),Math.floor(c/l)),d=Math.floor((u-i*h)/2),f=Math.floor((c-s*h)/2),g=this.createSVGElement(u,c),p=this.createSvgPathPlaceholderElement(e,r);g.appendChild(p),this.containerElement.appendChild(g);for(let w=0,m=f;w<s;w++,m+=h)for(let t=0,e=d;t<i;t++,e+=h)if(1===o.get(t,w)){const t=this.createSvgRectElement(e,m,h,h);g.appendChild(t)}return g}}Uo.QUIET_ZONE_SIZE=4,Uo.SVG_NS="http://www.w3.org/2000/svg";const Ho="http://www.w3.org/2000/svg";class Go{write(t,e,r,n){if(0===t.length)throw new c("Found empty contents");if(e<0||r<0)throw new c("Requested dimensions are too small: "+e+"x"+r);let o=ke.L,i=Go.QUIET_ZONE_SIZE;if(n){if(void 0!==n.get(fn.ERROR_CORRECTION)){const t=n.get(fn.ERROR_CORRECTION).toString();o=ke.fromString(t)}void 0!==n.get(fn.MARGIN)&&(i=Number.parseInt(n.get(fn.MARGIN).toString(),10))}const s=Sn.encode(t,o,n);return this.renderResult(s,e,r,i)}writeToDom(t,e,r,n,o){if("string"==typeof t){const e=document.querySelector(t);if(!e)throw new Error("Could no find the target HTML element.");t=e}const i=this.write(e,r,n,o);t instanceof HTMLElement&&t.appendChild(i)}renderResult(t,e,r,n){const o=t.getMatrix();if(null===o)throw new gt;const i=o.getWidth(),s=o.getHeight(),a=i+2*n,l=s+2*n,u=Math.max(e,a),c=Math.max(r,l),h=Math.min(Math.floor(u/a),Math.floor(c/l)),d=Math.floor((u-i*h)/2),f=Math.floor((c-s*h)/2),g=this.createSVGElement(u,c);for(let p=0,w=f;p<s;p++,w+=h)for(let t=0,e=d;t<i;t++,e+=h)if(1===o.get(t,p)){const t=this.createSvgRectElement(e,w,h,h);g.appendChild(t)}return g}createSVGElement(t,e){const r=document.createElementNS(Go.SVG_NS,"svg");return r.setAttributeNS(Ho,"height",t.toString()),r.setAttributeNS(Ho,"width",e.toString()),r}createSvgRectElement(t,e,r,n){const o=document.createElementNS(Go.SVG_NS,"rect");return o.setAttributeNS(Ho,"x",t.toString()),o.setAttributeNS(Ho,"y",e.toString()),o.setAttributeNS(Ho,"height",r.toString()),o.setAttributeNS(Ho,"width",n.toString()),o.setAttributeNS(Ho,"fill","#000000"),o}}Go.QUIET_ZONE_SIZE=4,Go.SVG_NS="http://www.w3.org/2000/svg",t.BarcodeFormat=et,t.BrowserAztecCodeReader=class extends ko{constructor(t,e){super(new Pt,t,e)}},t.BrowserCodeReader=ko,t.BrowserCodeSvgWriter=Uo,t.BrowserDatamatrixCodeReader=class extends ko{constructor(t,e){super(new Le,t,e)}},t.BrowserMultiFormatOneDReader=class extends ko{constructor(t,e){super(new Ce(t),t,e)}},t.BrowserMultiFormatReader=class extends ko{constructor(t,e){const r=new un;r.setHints(t),super(r,t,e),this.reader=r}set possibleFormats(t){this.hints.set(I.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)}decodeBitmap(t){return this.reader.decodeWithState(t)}setHints(t){this.hints=t,this.reader.setHints(this.hints)}},t.BrowserPDF417Reader=class extends ko{constructor(t,e){super(new on,t,e)}},t.BrowserQRCodeReader=class extends ko{constructor(t,e){super(new gr,t,e)}},t.BrowserQRCodeSvgWriter=Go,t.HTMLCanvasElementLuminanceSource=Bo,Object.defineProperty(t,"__esModule",{value:!0})}(e)},zUnb:function(t,e,r){"use strict";function n(t){return"function"==typeof t}r.r(e);let o=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else o&&console.log("RxJS: Back to a better error behavior. Thank you. <3");o=t},get useDeprecatedSynchronousErrorHandling(){return o}};function s(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(i.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete(){}},l=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function u(t){return null!==t&&"object"==typeof t}const c=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let h=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:r,_unsubscribe:o,_subscriptions:i}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof t)r.remove(this);else if(null!==r)for(let t=0;t<r.length;++t)r[t].remove(this);if(n(o))try{o.call(this)}catch(s){e=s instanceof c?d(s.errors):[s]}if(l(i)){let t=-1,r=i.length;for(;++t<r;){const r=i[t];if(u(r))try{r.unsubscribe()}catch(s){e=e||[],s instanceof c?e=e.concat(d(s.errors)):e.push(s)}}}if(e)throw new c(e)}add(e){let r=e;if(!e)return t.EMPTY;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){const e=r;r=new t,r._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:n}=r;if(null===n)r._parentOrParents=this;else if(n instanceof t){if(n===this)return r;r._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return r;n.push(this)}const o=this._subscriptions;return null===o?this._subscriptions=[r]:o.push(r),r}remove(t){const e=this._subscriptions;if(e){const r=e.indexOf(t);-1!==r&&e.splice(r,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function d(t){return t.reduce((t,e)=>t.concat(e instanceof c?e.errors:e),[])}const f=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class g extends h{constructor(t,e,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof g?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new p(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new p(this,t,e,r)}}[f](){return this}static create(t,e,r){const n=new g(t,e,r);return n.syncErrorThrowable=!1,n}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class p extends g{constructor(t,e,r,o){let i;super(),this._parentSubscriber=t;let s=this;n(e)?i=e:e&&(i=e.next,r=e.error,o=e.complete,e!==a&&(s=Object.create(e),n(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=i,this._error=r,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;i.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:r}=i;if(this._error)r&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;s(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);i.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(r){if(this.unsubscribe(),i.useDeprecatedSynchronousErrorHandling)throw r;s(r)}}__tryOrSetError(t,e,r){if(!i.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,r)}catch(n){return i.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=n,t.syncErrorThrown=!0,!0):(s(n),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const w=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function m(t){return t}let _=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const r=new t;return r.source=this,r.operator=e,r}subscribe(t,e,r){const{operator:n}=this,o=function(t,e,r){if(t){if(t instanceof g)return t;if(t[f])return t[f]()}return t||e||r?new g(t,e,r):new g(a)}(t,e,r);if(o.add(n?n.call(o,this.source):this.source||i.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),i.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(e){i.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:r,isStopped:n}=t;if(e||n)return!1;t=r&&r instanceof g?r:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=y(e))((e,r)=>{let n;n=this.subscribe(e=>{try{t(e)}catch(o){r(o),n&&n.unsubscribe()}},r,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[w](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?m:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=y(t))((t,e)=>{let r;this.subscribe(t=>r=t,t=>e(t),()=>t(r))})}}return t.create=e=>new t(e),t})();function y(t){if(t||(t=i.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const C=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class E extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}class A extends g{constructor(t){super(t),this.destination=t}}let v=(()=>{class t extends _{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new A(this)}lift(t){const e=new S(this,this);return e.operator=t,e}next(t){if(this.closed)throw new C;if(!this.isStopped){const{observers:e}=this,r=e.length,n=e.slice();for(let o=0;o<r;o++)n[o].next(t)}}error(t){if(this.closed)throw new C;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,r=e.length,n=e.slice();for(let o=0;o<r;o++)n[o].error(t);this.observers.length=0}complete(){if(this.closed)throw new C;this.isStopped=!0;const{observers:t}=this,e=t.length,r=t.slice();for(let n=0;n<e;n++)r[n].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new C;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new C;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new E(this,t))}asObservable(){const t=new _;return t.source=this,t}}return t.create=(t,e)=>new S(t,e),t})();class S extends v{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}function I(t){return t&&"function"==typeof t.schedule}class b extends g{constructor(t,e,r){super(),this.parent=t,this.outerValue=e,this.outerIndex=r,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const T=t=>e=>{for(let r=0,n=t.length;r<n&&!e.closed;r++)e.next(t[r]);e.complete()};function R(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const O=R(),N=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function D(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const M=t=>{if(t&&"function"==typeof t[w])return n=t,t=>{const e=n[w]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(N(t))return T(t);if(D(t))return r=t,t=>(r.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,s),t);if(t&&"function"==typeof t[O])return e=t,t=>{const r=e[O]();for(;;){const e=r.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof r.return&&t.add(()=>{r.return&&r.return()}),t};{const e=u(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,r,n};function P(t,e,r,n,o=new b(t,r,n)){if(!o.closed)return e instanceof _?e.subscribe(o):M(e)(o)}class B extends g{notifyNext(t,e,r,n,o){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}function L(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new x(t,e))}}class x{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new F(t,this.project,this.thisArg))}}class F extends g{constructor(t,e,r){super(t),this.project=e,this.count=0,this.thisArg=r||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}function k(t,e){return new _(r=>{const n=new h;let o=0;return n.add(e.schedule(function(){o!==t.length?(r.next(t[o++]),r.closed||n.add(this.schedule())):r.complete()})),n})}function V(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[w]}(t))return function(t,e){return new _(r=>{const n=new h;return n.add(e.schedule(()=>{const o=t[w]();n.add(o.subscribe({next(t){n.add(e.schedule(()=>r.next(t)))},error(t){n.add(e.schedule(()=>r.error(t)))},complete(){n.add(e.schedule(()=>r.complete()))}}))})),n})}(t,e);if(D(t))return function(t,e){return new _(r=>{const n=new h;return n.add(e.schedule(()=>t.then(t=>{n.add(e.schedule(()=>{r.next(t),n.add(e.schedule(()=>r.complete()))}))},t=>{n.add(e.schedule(()=>r.error(t)))}))),n})}(t,e);if(N(t))return k(t,e);if(function(t){return t&&"function"==typeof t[O]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new _(r=>{const n=new h;let o;return n.add(()=>{o&&"function"==typeof o.return&&o.return()}),n.add(e.schedule(()=>{o=t[O](),n.add(e.schedule(function(){if(r.closed)return;let t,e;try{const r=o.next();t=r.value,e=r.done}catch(n){return void r.error(n)}e?r.complete():(r.next(t),this.schedule())}))})),n})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof _?t:new _(M(t))}function U(t,e,r=Number.POSITIVE_INFINITY){return"function"==typeof e?n=>n.pipe(U((r,n)=>V(t(r,n)).pipe(L((t,o)=>e(r,t,n,o))),r)):("number"==typeof e&&(r=e),e=>e.lift(new H(t,r)))}class H{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new G(t,this.project,this.concurrent))}}class G extends B{constructor(t,e,r=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const r=this.index++;try{e=this.project(t,r)}catch(n){return void this.destination.error(n)}this.active++,this._innerSub(e,t,r)}_innerSub(t,e,r){const n=new b(this,e,r),o=this.destination;o.add(n);const i=P(this,t,void 0,void 0,n);i!==n&&o.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,r,n,o){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function W(t=Number.POSITIVE_INFINITY){return U(m,t)}function z(t,e){return e?k(t,e):new _(T(t))}function X(){return function(t){return t.lift(new j(t))}}class j{constructor(t){this.connectable=t}call(t,e){const{connectable:r}=this;r._refCount++;const n=new Y(t,r),o=e.subscribe(n);return n.closed||(n.connection=r.connect()),o}}class Y extends g{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:r}=this,n=t._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}class Z extends _{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new h,t.add(this.source.subscribe(new q(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return X()(this)}}const K=(()=>{const t=Z.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class q extends A{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function $(){return new v}function Q(t){return{toString:t}.toString()}const J="__parameters__";function tt(t,e,r){return Q(()=>{const n=function(t){return function(...e){if(t){const r=t(...e);for(const t in r)this[t]=r[t]}}}(e);function o(...t){if(this instanceof o)return n.apply(this,t),this;const e=new o(...t);return r.annotation=e,r;function r(t,r,n){const o=t.hasOwnProperty(J)?t[J]:Object.defineProperty(t,J,{value:[]})[J];for(;o.length<=n;)o.push(null);return(o[n]=o[n]||[]).push(e),t}}return r&&(o.prototype=Object.create(r.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o})}const et=tt("Inject",t=>({token:t})),rt=tt("Optional"),nt=tt("Self"),ot=tt("SkipSelf");var it=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function st(t){for(let e in t)if(t[e]===st)return e;throw Error("Could not find renamed property on target object.")}function at(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function lt(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function ut(t){return ct(t,t[dt])||ct(t,t[pt])}function ct(t,e){return e&&e.token===t?e:null}function ht(t){return t&&(t.hasOwnProperty(ft)||t.hasOwnProperty(wt))?t[ft]:null}const dt=st({"\u0275prov":st}),ft=st({"\u0275inj":st}),gt=st({"\u0275provFallback":st}),pt=st({ngInjectableDef:st}),wt=st({ngInjectorDef:st});function mt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(mt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const r=e.indexOf("\n");return-1===r?e:e.substring(0,r)}function _t(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const yt=st({__forward_ref__:st});function Ct(t){return t.__forward_ref__=Ct,t.toString=function(){return mt(this())},t}function Et(t){return"function"==typeof(e=t)&&e.hasOwnProperty(yt)&&e.__forward_ref__===Ct?t():t;var e}const At="undefined"!=typeof globalThis&&globalThis,vt="undefined"!=typeof window&&window,St="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,It="undefined"!=typeof global&&global,bt=At||It||vt||St,Tt=st({"\u0275cmp":st}),Rt=st({"\u0275dir":st}),Ot=st({"\u0275pipe":st}),Nt=st({"\u0275mod":st}),Dt=st({"\u0275loc":st}),Mt=st({"\u0275fac":st}),Pt=st({__NG_ELEMENT_ID__:st});class Bt{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=at({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const Lt=new Bt("INJECTOR",-1),xt={},Ft=/\n/gm,kt="__source",Vt=st({provide:String,useValue:st});let Ut,Ht=void 0;function Gt(t){const e=Ht;return Ht=t,e}function Wt(t){const e=Ut;return Ut=t,e}function zt(t,e=it.Default){if(void 0===Ht)throw new Error("inject() must be called from an injection context");return null===Ht?jt(t,void 0,e):Ht.get(t,e&it.Optional?null:void 0,e)}function Xt(t,e=it.Default){return(Ut||zt)(Et(t),e)}function jt(t,e,r){const n=ut(t);if(n&&"root"==n.providedIn)return void 0===n.value?n.value=n.factory():n.value;if(r&it.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${mt(t)}]`)}function Yt(t){const e=[];for(let r=0;r<t.length;r++){const n=Et(t[r]);if(Array.isArray(n)){if(0===n.length)throw new Error("Arguments array must have arguments.");let t=void 0,r=it.Default;for(let e=0;e<n.length;e++){const o=n[e];o instanceof rt||"Optional"===o.ngMetadataName||o===rt?r|=it.Optional:o instanceof ot||"SkipSelf"===o.ngMetadataName||o===ot?r|=it.SkipSelf:o instanceof nt||"Self"===o.ngMetadataName||o===nt?r|=it.Self:t=o instanceof et||o===et?o.token:o}e.push(Xt(t,r))}else e.push(Xt(n))}return e}class Zt{get(t,e=xt){if(e===xt){const e=new Error(`NullInjectorError: No provider for ${mt(t)}!`);throw e.name="NullInjectorError",e}return e}}class Kt{}class qt{}function $t(t,e){void 0===e&&(e=t);for(let r=0;r<t.length;r++){let n=t[r];Array.isArray(n)?(e===t&&(e=t.slice(0,r)),$t(n,e)):e!==t&&e.push(n)}return e}function Qt(t,e){t.forEach(t=>Array.isArray(t)?Qt(t,e):e(t))}function Jt(t,e,r){e>=t.length?t.push(r):t.splice(e,0,r)}function te(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ee(t,e,r){let n=ne(t,e);return n>=0?t[1|n]=r:(n=~n,function(t,e,r,n){let o=t.length;if(o==e)t.push(r,n);else if(1===o)t.push(n,t[0]),t[0]=r;else{for(o--,t.push(t[o-1],t[o]);o>e;)t[o]=t[o-2],o--;t[e]=r,t[e+1]=n}}(t,n,e,r)),n}function re(t,e){const r=ne(t,e);if(r>=0)return t[1|r]}function ne(t,e){return function(t,e,r){let n=0,o=t.length>>1;for(;o!==n;){const r=n+(o-n>>1),i=t[r<<1];if(e===i)return r<<1;i>e?o=r:n=r+1}return~(o<<1)}(t,e)}var oe=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),ie=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const se={},ae=[];let le=0;function ue(t){return Q(()=>{const e={},r={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===oe.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||ae,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||ie.Emulated,id:"c",styles:t.styles||ae,_:null,setInput:null,schemas:t.schemas||null,tView:null},n=t.directives,o=t.features,i=t.pipes;return r.id+=le++,r.inputs=ge(t.inputs,e),r.outputs=ge(t.outputs),o&&o.forEach(t=>t(r)),r.directiveDefs=n?()=>("function"==typeof n?n():n).map(ce):null,r.pipeDefs=i?()=>("function"==typeof i?i():i).map(he):null,r})}function ce(t){return we(t)||function(t){return t[Rt]||null}(t)}function he(t){return function(t){return t[Ot]||null}(t)}const de={};function fe(t){const e={type:t.type,bootstrap:t.bootstrap||ae,declarations:t.declarations||ae,imports:t.imports||ae,exports:t.exports||ae,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&Q(()=>{de[t.id]=t.type}),e}function ge(t,e){if(null==t)return se;const r={};for(const n in t)if(t.hasOwnProperty(n)){let o=t[n],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),r[o]=n,e&&(e[o]=i)}return r}const pe=ue;function we(t){return t[Tt]||null}function me(t,e){return t.hasOwnProperty(Mt)?t[Mt]:null}function _e(t,e){const r=t[Nt]||null;if(!r&&!0===e)throw new Error(`Type ${mt(t)} does not have '\u0275mod' property.`);return r}const ye=20,Ce=10;function Ee(t){return Array.isArray(t)&&"object"==typeof t[1]}function Ae(t){return Array.isArray(t)&&!0===t[1]}function ve(t){return 0!=(8&t.flags)}function Se(t){return 2==(2&t.flags)}function Ie(t){return 1==(1&t.flags)}function be(t){return null!==t.template}function Te(t){return 0!=(512&t[2])}class Re{constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}}function Oe(){const t=De(this),e=null==t?void 0:t.current;if(e){const r=t.previous;if(r===se)t.previous=e;else for(let t in e)r[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Ne(t,e,r,n){const o=De(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:se,current:null}),i=o.current||(o.current={}),s=o.previous,a=this.declaredInputs[r],l=s[a];i[a]=new Re(l&&l.currentValue,e,s===se),t[n]=e}function De(t){return t.__ngSimpleChanges__||null}let Me=void 0;function Pe(t){return!!t.listen}const Be={createRenderer:(t,e)=>void 0!==Me?Me:"undefined"!=typeof document?document:void 0};function Le(t){for(;Array.isArray(t);)t=t[0];return t}function xe(t,e){return Le(e[t+ye])}function Fe(t,e){return Le(e[t.index])}function ke(t,e){return t.data[e+ye]}function Ve(t,e){const r=e[t];return Ee(r)?r:r[0]}function Ue(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function He(t){return 4==(4&t[2])}function Ge(t){return 128==(128&t[2])}function We(t,e){return null===t||null==e?null:t[e]}function ze(t){t[18]=0}function Xe(t,e){t[5]+=e;let r=t,n=t[3];for(;null!==n&&(1===e&&1===r[5]||-1===e&&0===r[5]);)n[5]+=e,r=n,n=n[3]}const je={lFrame:cr(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Ye(){return je.bindingsEnabled}function Ze(){return je.lFrame.lView}function Ke(){return je.lFrame.tView}function qe(t){je.lFrame.contextLView=t}function $e(){return je.lFrame.previousOrParentTNode}function Qe(t,e){je.lFrame.previousOrParentTNode=t,je.lFrame.isParent=e}function Je(){return je.lFrame.isParent}function tr(){return je.checkNoChangesMode}function er(t){je.checkNoChangesMode=t}function rr(){return je.lFrame.bindingIndex++}function nr(t,e){const r=je.lFrame;r.bindingIndex=r.bindingRootIndex=t,or(e)}function or(t){je.lFrame.currentDirectiveIndex=t}function ir(){return je.lFrame.currentQueryIndex}function sr(t){je.lFrame.currentQueryIndex=t}function ar(t,e){const r=ur();je.lFrame=r,r.previousOrParentTNode=e,r.lView=t}function lr(t,e){const r=ur(),n=t[1];je.lFrame=r,r.previousOrParentTNode=e,r.lView=t,r.tView=n,r.contextLView=t,r.bindingIndex=n.bindingStartIndex}function ur(){const t=je.lFrame,e=null===t?null:t.child;return null===e?cr(t):e}function cr(t){const e={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function hr(){const t=je.lFrame;return je.lFrame=t.parent,t.previousOrParentTNode=null,t.lView=null,t}const dr=hr;function fr(){const t=hr();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function gr(){return je.lFrame.selectedIndex}function pr(t){je.lFrame.selectedIndex=t}function wr(t,e){for(let r=e.directiveStart,n=e.directiveEnd;r<n;r++){const e=t.data[r].type.prototype,{ngAfterContentInit:n,ngAfterContentChecked:o,ngAfterViewInit:i,ngAfterViewChecked:s,ngOnDestroy:a}=e;n&&(t.contentHooks||(t.contentHooks=[])).push(-r,n),o&&((t.contentHooks||(t.contentHooks=[])).push(r,o),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(r,o)),i&&(t.viewHooks||(t.viewHooks=[])).push(-r,i),s&&((t.viewHooks||(t.viewHooks=[])).push(r,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(r,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(r,a)}}function mr(t,e,r){Cr(t,e,3,r)}function _r(t,e,r,n){(3&t[2])===r&&Cr(t,e,r,n)}function yr(t,e){let r=t[2];(3&r)===e&&(r&=2047,r+=1,t[2]=r)}function Cr(t,e,r,n){const o=null!=n?n:-1;let i=0;for(let s=void 0!==n?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(i=e[s],null!=n&&i>=n)break}else e[s]<0&&(t[18]+=65536),(i<o||-1==o)&&(Er(t,r,e,s),t[18]=(4294901760&t[18])+s+2),s++}function Er(t,e,r,n){const o=r[n]<0,i=r[n+1],s=t[o?-r[n]:r[n]];o?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,i.call(s)):i.call(s)}class Ar{constructor(t,e,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r}}function vr(t,e,r){const n=Pe(t);let o=0;for(;o<r.length;){const i=r[o];if("number"==typeof i){if(0!==i)break;o++;const s=r[o++],a=r[o++],l=r[o++];n?t.setAttribute(e,a,l,s):e.setAttributeNS(s,a,l)}else{const s=i,a=r[++o];Ir(s)?n&&t.setProperty(e,s,a):n?t.setAttribute(e,s,a):e.setAttribute(s,a),o++}}return o}function Sr(t){return 3===t||4===t||6===t}function Ir(t){return 64===t.charCodeAt(0)}function br(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let r=-1;for(let n=0;n<e.length;n++){const o=e[n];"number"==typeof o?r=o:0===r||Tr(t,r,o,null,-1===r||2===r?e[++n]:null)}}return t}function Tr(t,e,r,n,o){let i=0,s=t.length;if(-1===e)s=-1;else for(;i<t.length;){const r=t[i++];if("number"==typeof r){if(r===e){s=-1;break}if(r>e){s=i-1;break}}}for(;i<t.length;){const e=t[i];if("number"==typeof e)break;if(e===r){if(null===n)return void(null!==o&&(t[i+1]=o));if(n===t[i+1])return void(t[i+2]=o)}i++,null!==n&&i++,null!==o&&i++}-1!==s&&(t.splice(s,0,e),i=s+1),t.splice(i++,0,r),null!==n&&t.splice(i++,0,n),null!==o&&t.splice(i++,0,o)}function Rr(t){return-1!==t}function Or(t){return 32767&t}function Nr(t){return t>>16}function Dr(t,e){let r=Nr(t),n=e;for(;r>0;)n=n[15],r--;return n}function Mr(t){return"string"==typeof t?t:null==t?"":""+t}function Pr(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Mr(t)}const Br=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(bt))();function Lr(t){return t instanceof Function?t():t}let xr=!0;function Fr(t){const e=xr;return xr=t,e}let kr=0;function Vr(t,e){const r=Hr(t,e);if(-1!==r)return r;const n=e[1];n.firstCreatePass&&(t.injectorIndex=e.length,Ur(n.data,t),Ur(e,null),Ur(n.blueprint,null));const o=Gr(t,e),i=t.injectorIndex;if(Rr(o)){const t=Or(o),r=Dr(o,e),n=r[1].data;for(let o=0;o<8;o++)e[i+o]=r[t+o]|n[t+o]}return e[i+8]=o,i}function Ur(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Hr(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null==e[t.injectorIndex+8]?-1:t.injectorIndex}function Gr(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let r=e[6],n=1;for(;r&&-1===r.injectorIndex;)r=(e=e[15])?e[6]:null,n++;return r?r.injectorIndex|n<<16:-1}function Wr(t,e,r){!function(t,e,r){let n;"string"==typeof r?n=r.charCodeAt(0)||0:r.hasOwnProperty(Pt)&&(n=r[Pt]),null==n&&(n=r[Pt]=kr++);const o=255&n,i=1<<o,s=64&o,a=32&o,l=e.data;128&o?s?a?l[t+7]|=i:l[t+6]|=i:a?l[t+5]|=i:l[t+4]|=i:s?a?l[t+3]|=i:l[t+2]|=i:a?l[t+1]|=i:l[t]|=i}(t,e,r)}function zr(t,e,r,n=it.Default,o){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Pt)?t[Pt]:void 0;return"number"==typeof e&&e>0?255&e:e}(r);if("function"==typeof o){ar(e,t);try{const t=o();if(null!=t||n&it.Optional)return t;throw new Error(`No provider for ${Pr(r)}!`)}finally{dr()}}else if("number"==typeof o){if(-1===o)return new $r(t,e);let i=null,s=Hr(t,e),a=-1,l=n&it.Host?e[16][6]:null;for((-1===s||n&it.SkipSelf)&&(a=-1===s?Gr(t,e):e[s+8],qr(n,!1)?(i=e[1],s=Or(a),e=Dr(a,e)):s=-1);-1!==s;){a=e[s+8];const t=e[1];if(Kr(o,s,t.data)){const t=jr(s,e,r,i,n,l);if(t!==Xr)return t}qr(n,e[1].data[s+8]===l)&&Kr(o,s,e)?(i=t,s=Or(a),e=Dr(a,e)):s=-1}}}if(n&it.Optional&&void 0===o&&(o=null),0==(n&(it.Self|it.Host))){const t=e[9],i=Wt(void 0);try{return t?t.get(r,o,n&it.Optional):jt(r,o,n&it.Optional)}finally{Wt(i)}}if(n&it.Optional)return o;throw new Error(`NodeInjector: NOT_FOUND [${Pr(r)}]`)}const Xr={};function jr(t,e,r,n,o,i){const s=e[1],a=s.data[t+8],l=Yr(a,s,r,null==n?Se(a)&&xr:n!=s&&3===a.type,o&it.Host&&i===a);return null!==l?Zr(e,s,l,a):Xr}function Yr(t,e,r,n,o){const i=t.providerIndexes,s=e.data,a=1048575&i,l=t.directiveStart,u=i>>20,c=o?a+u:t.directiveEnd;for(let h=n?a:a+u;h<c;h++){const t=s[h];if(h<l&&r===t||h>=l&&t.type===r)return h}if(o){const t=s[l];if(t&&be(t)&&t.type===r)return l}return null}function Zr(t,e,r,n){let o=t[r];const i=e.data;if(o instanceof Ar){const s=o;if(s.resolving)throw new Error("Circular dep for "+Pr(i[r]));const a=Fr(s.canSeeViewProviders);let l;s.resolving=!0,s.injectImpl&&(l=Wt(s.injectImpl)),ar(t,n);try{o=t[r]=s.factory(void 0,i,t,n),e.firstCreatePass&&r>=n.directiveStart&&function(t,e,r){const{ngOnChanges:n,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(n){const n=((s=e).type.prototype.ngOnChanges&&(s.setInput=Ne),Oe);(r.preOrderHooks||(r.preOrderHooks=[])).push(t,n),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(t,n)}var s;o&&(r.preOrderHooks||(r.preOrderHooks=[])).push(0-t,o),i&&((r.preOrderHooks||(r.preOrderHooks=[])).push(t,i),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(t,i))}(r,i[r],e)}finally{s.injectImpl&&Wt(l),Fr(a),s.resolving=!1,dr()}}return o}function Kr(t,e,r){const n=64&t,o=32&t;let i;return i=128&t?n?o?r[e+7]:r[e+6]:o?r[e+5]:r[e+4]:n?o?r[e+3]:r[e+2]:o?r[e+1]:r[e],!!(i&1<<t)}function qr(t,e){return!(t&it.Self||t&it.Host&&e)}class $r{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return zr(this._tNode,this._lView,t,void 0,e)}}function Qr(t){return t.ngDebugContext}function Jr(t){return t.ngOriginalError}function tn(t,...e){t.error(...e)}class en{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),r=this._findContext(t),n=function(t){return t.ngErrorLogger||tn}(t);n(this._console,"ERROR",t),e&&n(this._console,"ORIGINAL ERROR",e),r&&n(this._console,"ERROR CONTEXT",r)}_findContext(t){return t?Qr(t)?Qr(t):this._findContext(Jr(t)):null}_findOriginalError(t){let e=Jr(t);for(;e&&Jr(e);)e=Jr(e);return e}}let rn=!0,nn=!1;function on(){return nn=!0,rn}function sn(t,e){t.__ngContext__=e}function an(t){throw new Error("Multiple components match node with tagname "+t.tagName)}function ln(){throw new Error("Cannot mix multi providers and regular providers")}function un(t,e,r){let n=t.length;for(;;){const o=t.indexOf(e,r);if(-1===o)return o;if(0===o||t.charCodeAt(o-1)<=32){const r=e.length;if(o+r===n||t.charCodeAt(o+r)<=32)return o}r=o+1}}const cn="ng-template";function hn(t,e,r){let n=0;for(;n<t.length;){let o=t[n++];if(r&&"class"===o){if(o=t[n],-1!==un(o.toLowerCase(),e,0))return!0}else if(1===o){for(;n<t.length&&"string"==typeof(o=t[n++]);)if(o.toLowerCase()===e)return!0;return!1}}return!1}function dn(t){return 0===t.type&&t.tagName!==cn}function fn(t,e,r){return e===(0!==t.type||r?t.tagName:cn)}function gn(t,e,r){let n=4;const o=t.attrs||[],i=function(t){for(let e=0;e<t.length;e++)if(Sr(t[e]))return e;return t.length}(o);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&n){if(n=2|1&n,""!==l&&!fn(t,l,r)||""===l&&1===e.length){if(pn(n))return!1;s=!0}}else{const u=8&n?l:e[++a];if(8&n&&null!==t.attrs){if(!hn(t.attrs,u,r)){if(pn(n))return!1;s=!0}continue}const c=wn(8&n?"class":l,o,dn(t),r);if(-1===c){if(pn(n))return!1;s=!0;continue}if(""!==u){let t;t=c>i?"":o[c+1].toLowerCase();const e=8&n?t:null;if(e&&-1!==un(e,u,0)||2&n&&u!==t){if(pn(n))return!1;s=!0}}}}else{if(!s&&!pn(n)&&!pn(l))return!1;if(s&&pn(l))continue;s=!1,n=l|1&n}}return pn(n)||s}function pn(t){return 0==(1&t)}function wn(t,e,r,n){if(null===e)return-1;let o=0;if(n||!r){let r=!1;for(;o<e.length;){const n=e[o];if(n===t)return o;if(3===n||6===n)r=!0;else{if(1===n||2===n){let t=e[++o];for(;"string"==typeof t;)t=e[++o];continue}if(4===n)break;if(0===n){o+=4;continue}}o+=r?1:2}return-1}return function(t,e){let r=t.indexOf(4);if(r>-1)for(r++;r<t.length;){const n=t[r];if("number"==typeof n)return-1;if(n===e)return r;r++}return-1}(e,t)}function mn(t,e,r=!1){for(let n=0;n<e.length;n++)if(gn(t,e[n],r))return!0;return!1}function _n(t,e){return t?":not("+e.trim()+")":e}function yn(t){let e=t[0],r=1,n=2,o="",i=!1;for(;r<t.length;){let s=t[r];if("string"==typeof s)if(2&n){const e=t[++r];o+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&n?o+="."+s:4&n&&(o+=" "+s);else""===o||pn(s)||(e+=_n(i,o),o=""),n=s,i=i||!pn(n);r++}return""!==o&&(e+=_n(i,o)),e}const Cn={};function En(t){const e=t[3];return Ae(e)?e[3]:e}function An(t){return Sn(t[13])}function vn(t){return Sn(t[4])}function Sn(t){for(;null!==t&&!Ae(t);)t=t[4];return t}function In(t){bn(Ke(),Ze(),gr()+t,tr())}function bn(t,e,r,n){if(!n)if(3==(3&e[2])){const n=t.preOrderCheckHooks;null!==n&&mr(e,n,r)}else{const n=t.preOrderHooks;null!==n&&_r(e,n,0,r)}pr(r)}function Tn(t,e){return t<<17|e<<2}function Rn(t){return t>>17&32767}function On(t){return 2|t}function Nn(t){return(131068&t)>>2}function Dn(t,e){return-131069&t|e<<2}function Mn(t){return 1|t}function Pn(t,e){const r=t.contentQueries;if(null!==r)for(let n=0;n<r.length;n+=2){const o=r[n],i=r[n+1];if(-1!==i){const r=t.data[i];sr(o),r.contentQueries(2,e[i],i)}}}function Bn(t,e,r){return Pe(e)?e.createElement(t,r):null===r?e.createElement(t):e.createElementNS(r,t)}function Ln(t,e,r,n,o,i,s,a,l,u){const c=e.blueprint.slice();return c[0]=o,c[2]=140|n,ze(c),c[3]=c[15]=t,c[8]=r,c[10]=s||t&&t[10],c[11]=a||t&&t[11],c[12]=l||t&&t[12]||null,c[9]=u||t&&t[9]||null,c[6]=i,c[16]=2==e.type?t[16]:c,c}function xn(t,e,r,n,o,i){const s=r+ye,a=t.data[s]||function(t,e,r,n,o,i){const s=$e(),a=Je(),l=a?s:s&&s.parent,u=t.data[r]=jn(0,l&&l!==e?l:null,n,r,o,i);return null===t.firstChild&&(t.firstChild=u),s&&(!a||null!=s.child||null===u.parent&&2!==s.type?a||(s.next=u):s.child=u),u}(t,e,s,n,o,i);return Qe(a,!0),a}function Fn(t,e,r){lr(e,e[6]);try{const n=t.viewQuery;null!==n&&po(1,n,r);const o=t.template;null!==o&&Un(t,e,o,1,r),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Pn(t,e),t.staticViewQueries&&po(2,t.viewQuery,r);const i=t.components;null!==i&&function(t,e){for(let r=0;r<e.length;r++)uo(t,e[r])}(e,i)}catch(n){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),n}finally{e[2]&=-5,fr()}}function kn(t,e,r,n){const o=e[2];if(256==(256&o))return;lr(e,e[6]);const i=tr();try{ze(e),je.lFrame.bindingIndex=t.bindingStartIndex,null!==r&&Un(t,e,r,2,n);const s=3==(3&o);if(!i)if(s){const r=t.preOrderCheckHooks;null!==r&&mr(e,r,null)}else{const r=t.preOrderHooks;null!==r&&_r(e,r,0,null),yr(e,0)}if(function(t){for(let e=An(t);null!==e;e=vn(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const r=t[e],n=r[3];0==(1024&r[2])&&Xe(n,1),r[2]|=1024}}}(e),function(t){for(let e=An(t);null!==e;e=vn(e))for(let t=Ce;t<e.length;t++){const r=e[t],n=r[1];Ge(r)&&kn(n,r,n.template,r[8])}}(e),null!==t.contentQueries&&Pn(t,e),!i)if(s){const r=t.contentCheckHooks;null!==r&&mr(e,r)}else{const r=t.contentHooks;null!==r&&_r(e,r,1),yr(e,1)}!function(t,e){try{const r=t.expandoInstructions;if(null!==r){let n=t.expandoStartIndex,o=-1,i=-1;for(let t=0;t<r.length;t++){const s=r[t];"number"==typeof s?s<=0?(i=0-s,pr(i),n+=9+r[++t],o=n):n+=s:(null!==s&&(nr(n,o),s(2,e[o])),o++)}}}finally{pr(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let r=0;r<e.length;r++)ao(t,e[r])}(e,a);const l=t.viewQuery;if(null!==l&&po(2,l,n),!i)if(s){const r=t.viewCheckHooks;null!==r&&mr(e,r)}else{const r=t.viewHooks;null!==r&&_r(e,r,2),yr(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),i||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Xe(e[3],-1))}finally{fr()}}function Vn(t,e,r,n){const o=e[10],i=!tr(),s=He(e);try{i&&!s&&o.begin&&o.begin(),s&&Fn(t,e,n),kn(t,e,r,n)}finally{i&&!s&&o.end&&o.end()}}function Un(t,e,r,n,o){const i=gr();try{pr(-1),2&n&&e.length>ye&&bn(t,e,0,tr()),r(n,o)}finally{pr(i)}}function Hn(t,e,r){Ye()&&(function(t,e,r,n){const o=r.directiveStart,i=r.directiveEnd;t.firstCreatePass||Vr(r,e),sn(n,e);const s=r.initialInputs;for(let a=o;a<i;a++){const n=t.data[a],i=be(n);i&&no(e,r,n);const l=Zr(e,t,a,r);sn(l,e),null!==s&&oo(0,a-o,l,n,0,s),i&&(Ve(r.index,e)[8]=l)}}(t,e,r,Fe(r,e)),128==(128&r.flags)&&function(t,e,r){const n=r.directiveStart,o=r.directiveEnd,i=t.expandoInstructions,s=t.firstCreatePass,a=r.index-ye,l=je.lFrame.currentDirectiveIndex;try{pr(a);for(let r=n;r<o;r++){const n=t.data[r],o=e[r];or(r),null!==n.hostBindings||0!==n.hostVars||null!==n.hostAttrs?$n(n,o):s&&i.push(null)}}finally{pr(-1),or(l)}}(t,e,r))}function Gn(t,e,r=Fe){const n=e.localNames;if(null!==n){let o=e.index+1;for(let i=0;i<n.length;i+=2){const s=n[i+1],a=-1===s?r(e,t):t[s];t[o++]=a}}}function Wn(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=zn(1,-1,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function zn(t,e,r,n,o,i,s,a,l,u){const c=ye+n,h=c+o,d=function(t,e){const r=[];for(let n=0;n<e;n++)r.push(n<t?null:Cn);return r}(c,h);return d[1]={type:t,id:e,blueprint:d,template:r,queries:null,viewQuery:a,node:null,data:d.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:u,incompleteFirstPass:!1}}function Xn(t,e,r,n){const o=mo(e);o.push(r),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(n,o.length-1)}function jn(t,e,r,n,o,i){return{type:r,index:n,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Yn(t,e,r){for(let n in t)if(t.hasOwnProperty(n)){const o=t[n];(r=null===r?{}:r).hasOwnProperty(n)?r[n].push(e,o):r[n]=[e,o]}return r}function Zn(t,e,r,n){let o=!1;if(Ye()){const i=function(t,e,r){const n=t.directiveRegistry;let o=null;if(n)for(let i=0;i<n.length;i++){const s=n[i];mn(r,s.selectors,!1)&&(o||(o=[]),Wr(Vr(r,e),t,s.type),be(s)?(2&r.flags&&an(r),Jn(t,r),o.unshift(s)):o.push(s))}return o}(t,e,r),s=null===n?null:{"":-1};if(null!==i){let n=0;o=!0,eo(r,t.data.length,i.length);for(let t=0;t<i.length;t++){const e=i[t];e.providersResolver&&e.providersResolver(e)}Qn(t,r,i.length);let a=!1,l=!1;for(let o=0;o<i.length;o++){const u=i[o];r.mergedAttrs=br(r.mergedAttrs,u.hostAttrs),ro(t,e,u),to(t.data.length-1,u,s),null!==u.contentQueries&&(r.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(r.flags|=128);const c=u.type.prototype;!a&&(c.ngOnChanges||c.ngOnInit||c.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(r.index-ye),a=!0),l||!c.ngOnChanges&&!c.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(r.index-ye),l=!0),Kn(t,u),n+=u.hostVars}!function(t,e){const r=e.directiveEnd,n=t.data,o=e.attrs,i=[];let s=null,a=null;for(let l=e.directiveStart;l<r;l++){const t=n[l],r=t.inputs,u=null===o||dn(e)?null:io(r,o);i.push(u),s=Yn(r,l,s),a=Yn(t.outputs,l,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=i,e.inputs=s,e.outputs=a}(t,r),qn(t,e,n)}s&&function(t,e,r){if(e){const n=t.localNames=[];for(let t=0;t<e.length;t+=2){const o=r[e[t+1]];if(null==o)throw new Error(`Export of name '${e[t+1]}' not found!`);n.push(e[t],o)}}}(r,n,s)}return r.mergedAttrs=br(r.mergedAttrs,r.attrs),o}function Kn(t,e){const r=t.expandoInstructions;r.push(e.hostBindings),0!==e.hostVars&&r.push(e.hostVars)}function qn(t,e,r){for(let n=0;n<r;n++)e.push(Cn),t.blueprint.push(Cn),t.data.push(null)}function $n(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Qn(t,e,r){const n=ye-e.index,o=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(n,o,r)}function Jn(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function to(t,e,r){if(r){if(e.exportAs)for(let n=0;n<e.exportAs.length;n++)r[e.exportAs[n]]=t;be(e)&&(r[""]=t)}}function eo(t,e,r){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+r,t.providerIndexes=e}function ro(t,e,r){t.data.push(r);const n=r.factory||(r.factory=me(r.type)),o=new Ar(n,be(r),null);t.blueprint.push(o),e.push(o)}function no(t,e,r){const n=Fe(e,t),o=Wn(r),i=t[10],s=co(t,Ln(t,o,null,r.onPush?64:16,n,e,i,i.createRenderer(n,r)));t[e.index]=s}function oo(t,e,r,n,o,i){const s=i[e];if(null!==s){const t=n.setInput;for(let e=0;e<s.length;){const o=s[e++],i=s[e++],a=s[e++];null!==t?n.setInput(r,a,o,i):r[i]=a}}}function io(t,e){let r=null,n=0;for(;n<e.length;){const o=e[n];if(0!==o)if(5!==o){if("number"==typeof o)break;t.hasOwnProperty(o)&&(null===r&&(r=[]),r.push(o,t[o],e[n+1])),n+=2}else n+=2;else n+=4}return r}function so(t,e,r,n){return new Array(t,!0,!1,e,null,0,n,r,null,null)}function ao(t,e){const r=Ve(e,t);if(Ge(r)){const t=r[1];80&r[2]?kn(t,r,t.template,r[8]):r[5]>0&&lo(r)}}function lo(t){for(let r=An(t);null!==r;r=vn(r))for(let t=Ce;t<r.length;t++){const e=r[t];if(1024&e[2]){const t=e[1];kn(t,e,t.template,e[8])}else e[5]>0&&lo(e)}const e=t[1].components;if(null!==e)for(let r=0;r<e.length;r++){const n=Ve(e[r],t);Ge(n)&&n[5]>0&&lo(n)}}function uo(t,e){const r=Ve(e,t),n=r[1];!function(t,e){for(let r=e.length;r<t.blueprint.length;r++)e.push(t.blueprint[r])}(n,r),Fn(n,r,r[8])}function co(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function ho(t){for(;t;){t[2]|=64;const e=En(t);if(Te(t)&&!e)return t;t=e}return null}function fo(t,e,r){const n=e[10];n.begin&&n.begin();try{kn(t,e,t.template,r)}catch(o){throw _o(e,o),o}finally{n.end&&n.end()}}function go(t){!function(t){for(let e=0;e<t.components.length;e++){const r=t.components[e],n=Ue(r),o=n[1];Vn(o,n,o.template,r)}}(t[8])}function po(t,e,r){sr(0),e(t,r)}const wo=(()=>Promise.resolve(null))();function mo(t){return t[7]||(t[7]=[])}function _o(t,e){const r=t[9],n=r?r.get(en,null):null;n&&n.handleError(e)}function yo(t,e,r,n,o){for(let i=0;i<r.length;){const s=r[i++],a=r[i++],l=e[s],u=t.data[s];null!==u.setInput?u.setInput(l,o,n,a):l[a]=o}}function Co(t,e){const r=e[3];return-1===t.index?Ae(r)?r:null:r}function Eo(t,e){const r=Co(t,e);return r?Mo(e[11],r[7]):null}function Ao(t,e,r,n,o){if(null!=n){let i,s=!1;Ae(n)?i=n:Ee(n)&&(s=!0,n=n[0]);const a=Le(n);0===t&&null!==r?null==o?No(e,r,a):Oo(e,r,a,o||null):1===t&&null!==r?Oo(e,r,a,o||null):2===t?function(t,e,r){const n=Mo(t,e);n&&function(t,e,r,n){Pe(t)?t.removeChild(e,r,n):e.removeChild(r)}(t,n,e,r)}(e,a,s):3===t&&e.destroyNode(a),null!=i&&function(t,e,r,n,o){const i=r[7];i!==Le(r)&&Ao(e,t,n,i,o);for(let s=Ce;s<r.length;s++){const o=r[s];Fo(o[1],o,t,e,n,i)}}(e,t,i,r,o)}}function vo(t,e,r,n){const o=Eo(t.node,e);o&&Fo(t,e,e[11],r?1:2,o,n)}function So(t,e){const r=t[9],n=r.indexOf(e);1024&e[2]&&Xe(e[3],-1),r.splice(n,1)}function Io(t,e){if(t.length<=Ce)return;const r=Ce+e,n=t[r];if(n){const o=n[17];null!==o&&o!==t&&So(o,n),e>0&&(t[r-1][4]=n[4]);const i=te(t,Ce+e);vo(n[1],n,!1,null);const s=i[19];null!==s&&s.detachView(i[1]),n[3]=null,n[4]=null,n[2]&=-129}return n}function bo(t,e){if(!(256&e[2])){const r=e[11];Pe(r)&&r.destroyNode&&Fo(t,e,r,3,null,null),function(t){let e=t[13];if(!e)return Ro(t[1],t);for(;e;){let r=null;if(Ee(e))r=e[13];else{const t=e[10];t&&(r=t)}if(!r){for(;e&&!e[4]&&e!==t;)Ee(e)&&Ro(e[1],e),e=To(e,t);null===e&&(e=t),Ee(e)&&Ro(e[1],e),r=e&&e[4]}e=r}}(e)}}function To(t,e){let r;return Ee(t)&&(r=t[6])&&2===r.type?Co(r,t):t[3]===e?null:t[3]}function Ro(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let r;if(null!=t&&null!=(r=t.destroyHooks))for(let n=0;n<r.length;n+=2){const t=e[r[n]];if(!(t instanceof Ar)){const e=r[n+1];if(Array.isArray(e))for(let r=0;r<e.length;r+=2)e[r+1].call(t[e[r]]);else e.call(t)}}}(t,e),function(t,e){const r=t.cleanup;if(null!==r){const t=e[7];for(let n=0;n<r.length-1;n+=2)if("string"==typeof r[n]){const o=r[n+1],i="function"==typeof o?o(e):Le(e[o]),s=t[r[n+2]],a=r[n+3];"boolean"==typeof a?i.removeEventListener(r[n],s,a):a>=0?t[a]():t[-a].unsubscribe(),n+=2}else r[n].call(t[r[n+1]]);e[7]=null}}(t,e);const r=e[6];r&&3===r.type&&Pe(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&Ae(e[3])){n!==e[3]&&So(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Oo(t,e,r,n){Pe(t)?t.insertBefore(e,r,n):e.insertBefore(r,n,!0)}function No(t,e,r){Pe(t)?t.appendChild(e,r):e.appendChild(r)}function Do(t,e,r,n){null!==n?Oo(t,e,r,n):No(t,e,r)}function Mo(t,e){return Pe(t)?t.parentNode(e):e.parentNode}function Po(t,e,r,n){const o=function(t,e,r){let n=e.parent;for(;null!=n&&(4===n.type||5===n.type);)n=(e=n).parent;if(null==n){const t=r[6];return 2===t.type?Eo(t,r):r[0]}if(e&&5===e.type&&4&e.flags)return Fe(e,r).parentNode;if(2&n.flags){const e=t.data,r=e[e[n.index].directiveStart].encapsulation;if(r!==ie.ShadowDom&&r!==ie.Native)return null}return Fe(n,r)}(t,n,e);if(null!=o){const t=e[11],i=function(t,e){if(2===t.type){const r=Co(t,e);return null===r?null:Lo(r.indexOf(e,Ce)-Ce,r)}return 4===t.type||5===t.type?Fe(t,e):null}(n.parent||e[6],e);if(Array.isArray(r))for(let e=0;e<r.length;e++)Do(t,o,r[e],i);else Do(t,o,r,i)}}function Bo(t,e){if(null!==e){const r=e.type;if(3===r)return Fe(e,t);if(0===r)return Lo(-1,t[e.index]);if(4===r||5===r){const r=e.child;if(null!==r)return Bo(t,r);{const r=t[e.index];return Ae(r)?Lo(-1,r):Le(r)}}{const r=t[16],n=r[6],o=En(r),i=n.projection[e.projection];return null!=i?Bo(o,i):Bo(t,e.next)}}return null}function Lo(t,e){const r=Ce+t+1;if(r<e.length){const t=e[r],n=t[1].firstChild;if(null!==n)return Bo(t,n)}return e[7]}function xo(t,e,r,n,o,i,s){for(;null!=r;){const a=n[r.index],l=r.type;s&&0===e&&(a&&sn(Le(a),n),r.flags|=4),64!=(64&r.flags)&&(4===l||5===l?(xo(t,e,r.child,n,o,i,!1),Ao(e,t,o,a,i)):1===l?ko(t,e,n,r,o,i):Ao(e,t,o,a,i)),r=s?r.projectionNext:r.next}}function Fo(t,e,r,n,o,i){xo(r,n,t.node.child,e,o,i,!1)}function ko(t,e,r,n,o,i){const s=r[16],a=s[6].projection[n.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)Ao(e,t,o,a[l],i);else xo(t,e,a,s[3],o,i,!0)}function Vo(t,e,r){Pe(t)?t.setAttribute(e,"style",r):e.style.cssText=r}function Uo(t,e,r){Pe(t)?""===r?t.removeAttribute(e,"class"):t.setAttribute(e,"class",r):e.className=r}class Ho{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView;return null==t[0]?Wo(t[1],t,t[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}bo(this._lView[1],this._lView)}onDestroy(t){Xn(this._lView[1],this._lView,null,t)}markForCheck(){ho(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){fo(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,r){er(!0);try{fo(t,e,r)}finally{er(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Fo(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Go extends Ho{constructor(t){super(t),this._view=t}detectChanges(){go(this._view)}checkNoChanges(){!function(t){er(!0);try{go(t)}finally{er(!1)}}(this._view)}get context(){return null}}function Wo(t,e,r,n,o=!1){for(;null!==r;){const i=e[r.index];if(null!==i&&n.push(Le(i)),Ae(i))for(let t=Ce;t<i.length;t++){const e=i[t],r=e[1].firstChild;null!==r&&Wo(e[1],e,r,n)}const s=r.type;if(4===s||5===s)Wo(t,e,r.child,n);else if(1===s){const t=e[16],o=t[6].projection[r.projection];if(Array.isArray(o))n.push(...o);else{const e=En(t);Wo(e[1],e,o,n,!0)}}r=o?r.projectionNext:r.next}return n}let zo,Xo,jo;function Yo(t,e,r){return zo||(zo=class extends t{}),new zo(Fe(e,r))}function Zo(t,e,r,n){return Xo||(Xo=class extends t{constructor(t,e,r){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=r}createEmbeddedView(t){const e=this._declarationTContainer.tViews,r=Ln(this._declarationView,e,t,16,null,e.node);r[17]=this._declarationView[this._declarationTContainer.index];const n=this._declarationView[19];return null!==n&&(r[19]=n.createEmbeddedView(e)),Fn(e,r,t),new Ho(r)}}),0===r.type?new Xo(n,r,Yo(e,r,n)):null}function Ko(t,e,r,n){let o;jo||(jo=class extends t{constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostView=r}get element(){return Yo(e,this._hostTNode,this._hostView)}get injector(){return new $r(this._hostTNode,this._hostView)}get parentInjector(){const t=Gr(this._hostTNode,this._hostView),e=Dr(t,this._hostView),r=function(t,e,r){if(r.parent&&-1!==r.parent.injectorIndex){const t=r.parent.injectorIndex;let e=r.parent;for(;null!=e.parent&&t==e.parent.injectorIndex;)e=e.parent;return e}let n=Nr(t),o=e,i=e[6];for(;n>1;)o=o[15],i=o[6],n--;return i}(t,this._hostView,this._hostTNode);return Rr(t)&&null!=r?new $r(r,e):new $r(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-Ce}createEmbeddedView(t,e,r){const n=t.createEmbeddedView(e||{});return this.insert(n,r),n}createComponent(t,e,r,n,o){const i=r||this.parentInjector;if(!o&&null==t.ngModule&&i){const t=i.get(Kt,null);t&&(o=t)}const s=t.create(i,n,void 0,o);return this.insert(s.hostView,e),s}insert(t,e){const r=t._lView,n=r[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Ae(r[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=r[3],n=new jo(e,e[6],e[3]);n.detach(n.indexOf(t))}}const o=this._adjustIndex(e);return function(t,e,r,n){const o=Ce+n,i=r.length;n>0&&(r[o-1][4]=e),n<i-Ce?(e[4]=r[o],Jt(r,Ce+n,e)):(r.push(e),e[4]=null),e[3]=r;const s=e[17];null!==s&&r!==s&&function(t,e){const r=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===r?t[9]=[e]:r.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(n,r,this._lContainer,o),vo(n,r,!0,Lo(o,this._lContainer)),t.attachToViewContainerRef(this),Jt(this._lContainer[8],o,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),r=Io(this._lContainer,e);r&&(te(this._lContainer[8],e),bo(r[1],r))}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),r=Io(this._lContainer,e);return r&&null!=te(this._lContainer[8],e)?new Ho(r):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const i=n[r.index];if(Ae(i))o=i;else{let t;if(4===r.type)t=Le(i);else if(t=n[11].createComment(""),Te(n)){const e=n[11],o=Fe(r,n);Oo(e,Mo(e,o),t,function(t,e){return Pe(t)?t.nextSibling(e):e.nextSibling}(e,o))}else Po(n[1],n,t,r);n[r.index]=o=so(i,n,t,r),co(n,o)}return new jo(o,r,n)}let qo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>$o(),t})();const $o=function(t=!1){return function(t,e,r){if(!r&&Se(t)){const r=Ve(t.index,e);return new Ho(r,r)}return 3===t.type||0===t.type||4===t.type||5===t.type?new Ho(e[16],e):null}($e(),Ze(),t)},Qo=Function,Jo=new Bt("Set Injector scope."),ti={},ei={},ri=[];let ni=void 0;function oi(){return void 0===ni&&(ni=new Zt),ni}function ii(t,e=null,r=null,n){return new si(t,r,e||oi(),n)}class si{constructor(t,e,r,n=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const o=[];e&&Qt(e,r=>this.processProvider(r,t,e)),Qt([t],t=>this.processInjectorType(t,[],o)),this.records.set(Lt,li(void 0,this));const i=this.records.get(Jo);this.scope=null!=i?i.value:null,this.source=n||("object"==typeof t?null:mt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=xt,r=it.Default){this.assertNotDestroyed();const n=Gt(this);try{if(!(r&it.SkipSelf)){let e=this.records.get(t);if(void 0===e){const r=("function"==typeof(o=t)||"object"==typeof o&&o instanceof Bt)&&ut(t);e=r&&this.injectableDefInScope(r)?li(ai(t),ti):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(r&it.Self?oi():this.parent).get(t,e=r&it.Optional&&e===xt?null:e)}catch(i){if("NullInjectorError"===i.name){if((i.ngTempTokenPath=i.ngTempTokenPath||[]).unshift(mt(t)),n)throw i;return function(t,e,r,n){const o=t.ngTempTokenPath;throw e[kt]&&o.unshift(e[kt]),t.message=function(t,e,r,n=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let o=mt(e);if(Array.isArray(e))o=e.map(mt).join(" -> ");else if("object"==typeof e){let t=[];for(let r in e)if(e.hasOwnProperty(r)){let n=e[r];t.push(r+":"+("string"==typeof n?JSON.stringify(n):mt(n)))}o=`{${t.join(", ")}}`}return`${r}${n?"("+n+")":""}[${o}]: ${t.replace(Ft,"\n  ")}`}("\n"+t.message,o,r,n),t.ngTokenPath=o,t.ngTempTokenPath=null,t}(i,t,"R3InjectorError",this.source)}throw i}finally{Gt(n)}var o}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,r)=>t.push(mt(r))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,r){if(!(t=Et(t)))return!1;let n=ht(t);const o=null==n&&t.ngModule||void 0,i=void 0===o?t:o,s=-1!==r.indexOf(i);if(void 0!==o&&(n=ht(o)),null==n)return!1;if(null!=n.imports&&!s){let t;r.push(i);try{Qt(n.imports,n=>{this.processInjectorType(n,e,r)&&(void 0===t&&(t=[]),t.push(n))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:r,providers:n}=t[e];Qt(n,t=>this.processProvider(t,r,n||ri))}}this.injectorDefTypes.add(i),this.records.set(i,li(n.factory,ti));const a=n.providers;if(null!=a&&!s){const e=t;Qt(a,t=>this.processProvider(t,e,a))}return void 0!==o&&void 0!==t.providers}processProvider(t,e,r){let n=ci(t=Et(t))?t:Et(t&&t.provide);const o=function(t,e,r){return ui(t)?li(void 0,t.useValue):li(function(t,e,r){let n=void 0;if(ci(t)){const e=Et(t);return me(e)||ai(e)}if(ui(t))n=()=>Et(t.useValue);else if((o=t)&&o.useFactory)n=()=>t.useFactory(...Yt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))n=()=>Xt(Et(t.useExisting));else{const o=Et(t&&(t.useClass||t.provide));if(o||function(t,e,r){let n="";throw t&&e&&(n=` - only instances of Provider and Type are allowed, got: [${e.map(t=>t==r?"?"+r+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${mt(t)}'`+n)}(e,r,t),!function(t){return!!t.deps}(t))return me(o)||ai(o);n=()=>new o(...Yt(t.deps))}var o;return n}(t,e,r),ti)}(t,e,r);if(ci(t)||!0!==t.multi){const t=this.records.get(n);t&&void 0!==t.multi&&ln()}else{let e=this.records.get(n);e?void 0===e.multi&&ln():(e=li(void 0,ti,!0),e.factory=()=>Yt(e.multi),this.records.set(n,e)),n=t,e.multi.push(t)}this.records.set(n,o)}hydrate(t,e){var r;return e.value===ei?function(t){throw new Error("Cannot instantiate cyclic dependency! "+t)}(mt(t)):e.value===ti&&(e.value=ei,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(r=e.value)&&"object"==typeof r&&"function"==typeof r.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function ai(t){const e=ut(t),r=null!==e?e.factory:me(t);if(null!==r)return r;const n=ht(t);if(null!==n)return n.factory;if(t instanceof Bt)throw new Error(`Token ${mt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const r=function(t,e){const r=[];for(let n=0;n<t;n++)r.push("?");return r}(e);throw new Error(`Can't resolve all parameters for ${mt(t)}: (${r.join(", ")}).`)}const r=function(t){const e=t&&(t[dt]||t[pt]||t[gt]&&t[gt]());if(e){const r=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${r}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${r}" class.`),e}return null}(t);return null!==r?()=>r.factory(t):()=>new t}(t);throw new Error("unreachable")}function li(t,e,r=!1){return{factory:t,value:e,multi:r?[]:void 0}}function ui(t){return null!==t&&"object"==typeof t&&Vt in t}function ci(t){return"function"==typeof t}const hi=function(t,e,r){return function(t,e=null,r=null,n){const o=ii(t,e,r,n);return o._resolveInjectorDefTypes(),o}({name:r},e,t,r)};let di=(()=>{class t{static create(t,e){return Array.isArray(t)?hi(t,e,""):hi(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=xt,t.NULL=new Zt,t.\u0275prov=at({token:t,providedIn:"any",factory:()=>Xt(Lt)}),t.__NG_ELEMENT_ID__=-1,t})();const fi=new Bt("AnalyzeForEntryComponents");function gi(t,e,r){let n=r?t.styles:null,o=r?t.classes:null,i=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?i=t:1==i?o=_t(o,t):2==i&&(n=_t(n,t+": "+e[++s]+";"))}r?t.styles=n:t.stylesWithoutHost=n,r?t.classes=o:t.classesWithoutHost=o}let pi=null;function wi(){if(!pi){const t=bt.Symbol;if(t&&t.iterator)pi=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const r=t[e];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(pi=r)}}}return pi}function mi(t){return!!_i(t)&&(Array.isArray(t)||!(t instanceof Map)&&wi()in t)}function _i(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function yi(t,e,r){return!Object.is(t[e],r)&&(t[e]=r,!0)}function Ci(t,e,r,n,o,i,s,a){const l=Ze(),u=Ke(),c=t+ye,h=u.firstCreatePass?function(t,e,r,n,o,i,s,a,l){const u=e.consts,c=xn(e,r[6],t,0,s||null,We(u,a));Zn(e,r,c,We(u,l)),wr(e,c);const h=c.tViews=zn(2,-1,n,o,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u),d=jn(0,null,2,-1,null,null);return d.injectorIndex=c.injectorIndex,h.node=d,null!==e.queries&&(e.queries.template(e,c),h.queries=e.queries.embeddedTView(c)),c}(t,u,l,e,r,n,o,i,s):u.data[c];Qe(h,!1);const d=l[11].createComment("");Po(u,l,d,h),sn(d,l),co(l,l[c]=so(d,l,d,h)),Ie(h)&&Hn(u,l,h),null!=s&&Gn(l,h,a)}function Ei(t,e=it.Default){const r=Ze();return null==r?Xt(t,e):zr($e(),r,Et(t),e)}function Ai(t,e,r){const n=Ze();return yi(n,rr(),e)&&function(t,e,r,n,o,i,s,a){const l=Fe(e,r);let u,c=e.inputs;var h;null!=c&&(u=c[n])?(yo(t,r,u,n,o),Se(e)&&function(t,e){const r=Ve(e,t);16&r[2]||(r[2]|=64)}(r,e.index)):3===e.type&&(n="class"===(h=n)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,o=null!=s?s(o,e.tagName||"",n):o,Pe(i)?i.setProperty(l,n,o):Ir(n)||(l.setProperty?l.setProperty(n,o):l[n]=o))}(Ke(),function(){const t=je.lFrame;return ke(t.tView,t.selectedIndex)}(),n,t,e,n[11],r),Ai}function vi(t,e,r,n,o){const i=o?"class":"style";yo(t,r,e.inputs[i],i,n)}function Si(t,e,r,n){const o=Ze(),i=Ke(),s=ye+t,a=o[11],l=o[s]=Bn(e,a,je.lFrame.currentNamespace),u=i.firstCreatePass?function(t,e,r,n,o,i,s){const a=e.consts,l=We(a,i),u=xn(e,r[6],t,3,o,l);return Zn(e,r,u,We(a,s)),null!==u.attrs&&gi(u,u.attrs,!1),null!==u.mergedAttrs&&gi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(t,i,o,0,e,r,n):i.data[s];Qe(u,!0);const c=u.mergedAttrs;null!==c&&vr(a,l,c);const h=u.classes;null!==h&&Uo(a,l,h);const d=u.styles;null!==d&&Vo(a,l,d),Po(i,o,l,u),0===je.lFrame.elementDepthCount&&sn(l,o),je.lFrame.elementDepthCount++,Ie(u)&&(Hn(i,o,u),function(t,e,r){if(ve(e)){const n=e.directiveEnd;for(let o=e.directiveStart;o<n;o++){const e=t.data[o];e.contentQueries&&e.contentQueries(1,r[o],o)}}}(i,u,o)),null!==n&&Gn(o,u)}function Ii(){let t=$e();Je()?je.lFrame.isParent=!1:(t=t.parent,Qe(t,!1));const e=t;je.lFrame.elementDepthCount--;const r=Ke();r.firstCreatePass&&(wr(r,t),ve(t)&&r.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&vi(r,e,Ze(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&vi(r,e,Ze(),e.stylesWithoutHost,!1)}function bi(){return Ze()}function Ti(t){return!!t&&"function"==typeof t.then}function Ri(t,e,r=!1,n){const o=Ze(),i=Ke(),s=$e();return function(t,e,r,n,o,i,s=!1,a){const l=Ie(n),u=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),c=mo(e);let h=!0;if(3===n.type){const d=Fe(n,e),f=a?a(d):se,g=f.target||d,p=c.length,w=a?t=>a(Le(t[n.index])).target:n.index;if(Pe(r)){let s=null;if(!a&&l&&(s=function(t,e,r,n){const o=t.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const t=o[i];if(t===r&&o[i+1]===n){const t=e[7],r=o[i+2];return t.length>r?t[r]:null}"string"==typeof t&&(i+=2)}return null}(t,e,o,n.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=i,s.__ngLastListenerFn__=i,h=!1;else{i=Ni(n,e,i,!1);const t=r.listen(f.name||g,o,i);c.push(i,t),u&&u.push(o,w,p,p+1)}}else i=Ni(n,e,i,!0),g.addEventListener(o,i,s),c.push(i),u&&u.push(o,w,p,s)}const d=n.outputs;let f;if(h&&null!==d&&(f=d[o])){const t=f.length;if(t)for(let r=0;r<t;r+=2){const t=e[f[r]][f[r+1]].subscribe(i),s=c.length;c.push(i,t),u&&u.push(o,n.index,s,-(s+1))}}}(i,o,o[11],s,t,e,r,n),Ri}function Oi(t,e,r){try{return!1!==e(r)}catch(n){return _o(t,n),!1}}function Ni(t,e,r,n){return function o(i){if(i===Function)return r;const s=2&t.flags?Ve(t.index,e):e;0==(32&e[2])&&ho(s);let a=Oi(e,r,i),l=o.__ngNextListenerFn__;for(;l;)a=Oi(e,l,i)&&a,l=l.__ngNextListenerFn__;return n&&!1===a&&(i.preventDefault(),i.returnValue=!1),a}}function Di(t=1){return function(t){return(je.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,je.lFrame.contextLView))[8]}(t)}const Mi=[];function Pi(t,e,r,n,o){const i=t[r+1],s=null===e;let a=n?Rn(i):Nn(i),l=!1;for(;0!==a&&(!1===l||s);){const r=t[a+1];Bi(t[a],e)&&(l=!0,t[a+1]=n?Mn(r):On(r)),a=n?Rn(r):Nn(r)}l&&(t[r+1]=n?On(i):Mn(i))}function Bi(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ne(t,e)>=0}function Li(t,e,r){return function(t,e,r,n){const o=Ze(),i=Ke(),s=function(t){const e=je.lFrame,r=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,r}();i.firstUpdatePass&&function(t,e,r,n){const o=t.data;if(null===o[r+1]){const i=o[gr()+ye],s=function(t,e){return e>=t.expandoStartIndex}(t,r);(function(t,e){return 0!=(32&t.flags)})(i)&&null===e&&!s&&(e=!1),e=function(t,e,r,n){const o=function(t){const e=je.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let i=e.residualStyles;if(null===o)0===e.styleBindings&&(r=Fi(r=xi(null,t,e,r,n),e.attrs,n),i=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==o)if(r=xi(o,t,e,r,n),null===i){let r=function(t,e,r){const n=e.styleBindings;if(0!==Nn(n))return t[Rn(n)]}(t,e);void 0!==r&&Array.isArray(r)&&(r=xi(null,t,e,r[1],n),r=Fi(r,e.attrs,n),function(t,e,r,n){t[Rn(e.styleBindings)]=n}(t,e,0,r))}else i=function(t,e,r){let n=void 0;const o=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<o;i++)n=Fi(n,t[i].hostAttrs,false);return Fi(n,e.attrs,false)}(t,e)}return void 0!==i&&(e.residualStyles=i),r}(o,i,e,n),function(t,e,r,n,o,i){let s=e.styleBindings,a=Rn(s),l=Nn(s);t[n]=r;let u,c=!1;if(Array.isArray(r)){const t=r;u=t[1],(null===u||ne(t,u)>0)&&(c=!0)}else u=r;if(o)if(0!==l){const e=Rn(t[a+1]);t[n+1]=Tn(e,a),0!==e&&(t[e+1]=Dn(t[e+1],n)),t[a+1]=131071&t[a+1]|n<<17}else t[n+1]=Tn(a,0),0!==a&&(t[a+1]=Dn(t[a+1],n)),a=n;else t[n+1]=Tn(l,0),0===a?a=n:t[l+1]=Dn(t[l+1],n),l=n;c&&(t[n+1]=On(t[n+1])),Pi(t,u,n,!0),Pi(t,u,n,!1),function(t,e,r,n,o){const i=t.residualStyles;null!=i&&"string"==typeof e&&ne(i,e)>=0&&(r[n+1]=Mn(r[n+1]))}(e,u,t,n),s=Tn(a,l),e.styleBindings=s}(o,i,e,r,s)}}(i,t,s,false),e!==Cn&&yi(o,s,e)&&function(t,e,r,n,o,i,s,a){if(3!==e.type)return;const l=t.data,u=l[a+1];Vi(1==(1&u)?ki(l,e,r,o,Nn(u),s):void 0)||(Vi(i)||function(t){return 2==(2&t)}(u)&&(i=ki(l,null,r,o,a,s)),function(t,e,r,n,o){const i=Pe(t);{const e=-1==n.indexOf("-")?void 0:2;null==o?i?t.removeStyle(r,n,e):r.style.removeProperty(n):i?t.setStyle(r,n,o,e):r.style.setProperty(n,o)}}(n,0,xe(gr(),r),o,i))}(i,i.data[gr()+ye],o,o[11],t,o[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=mt(function(t){return t instanceof class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}?t.changingThisBreaksApplicationSecurity:t}(t)))),t}(e,r),false,s)}(t,e,r),Li}function xi(t,e,r,n,o){let i=null;const s=r.directiveEnd;let a=r.directiveStylingLast;for(-1===a?a=r.directiveStart:a++;a<s&&(i=e[a],n=Fi(n,i.hostAttrs,o),i!==t);)a++;return null!==t&&(r.directiveStylingLast=a),n}function Fi(t,e,r){const n=r?1:2;let o=-1;if(null!==e)for(let i=0;i<e.length;i++){const s=e[i];"number"==typeof s?o=s:o===n&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ee(t,s,!!r||e[++i]))}return void 0===t?null:t}function ki(t,e,r,n,o,i){const s=null===e;let a=void 0;for(;o>0;){const e=t[o],i=Array.isArray(e),l=i?e[1]:e,u=null===l;let c=r[o+1];c===Cn&&(c=u?Mi:void 0);let h=u?re(c,n):l===n?c:void 0;if(i&&!Vi(h)&&(h=re(e,n)),Vi(h)&&(a=h,s))return a;const d=t[o+1];o=s?Rn(d):Nn(d)}if(null!==e){let t=i?e.residualClasses:e.residualStyles;null!=t&&(a=re(t,n))}return a}function Vi(t){return void 0!==t}function Ui(t,e=""){const r=Ze(),n=Ke(),o=t+ye,i=n.firstCreatePass?xn(n,r[6],t,3,null,null):n.data[o],s=r[o]=function(t,e){return Pe(e)?e.createText(t):e.createTextNode(t)}(e,r[11]);Po(n,r,s,i),Qe(i,!1)}function Hi(t){return Gi("",t,""),Hi}function Gi(t,e,r){const n=Ze(),o=function(t,e,r,n){return yi(t,rr(),r)?e+Mr(r)+n:Cn}(n,t,e,r);return o!==Cn&&function(t,e,r){const n=xe(e,t),o=t[11];Pe(o)?o.setValue(n,r):n.textContent=r}(n,gr(),o),Gi}function Wi(t,e){const r=Ue(t)[1],n=r.data.length-1;wr(r,{directiveStart:n,directiveEnd:n+1})}class zi{}class Xi{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${mt(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let ji=(()=>{class t{}return t.NULL=new Xi,t})(),Yi=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>Zi(t),t})();const Zi=function(t){return Yo(t,$e(),Ze())};class Ki{}var qi=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let $i=(()=>{class t{}return t.\u0275prov=at({token:t,providedIn:"root",factory:()=>null}),t})();class Qi{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ji=new Qi("10.0.14");class ts{constructor(){}supports(t){return mi(t)}create(t){return new rs(t)}}const es=(t,e)=>e;class rs{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||es}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,n=0,o=null;for(;e||r;){const i=!r||e&&e.currentIndex<ss(r,n,o)?e:r,s=ss(i,n,o),a=i.currentIndex;if(i===r)n--,r=r._nextRemoved;else if(e=e._next,null==i.previousIndex)n++;else{o||(o=[]);const t=s-n,e=a-n;if(t!=e){for(let r=0;r<t;r++){const n=r<o.length?o[r]:o[r]=0,i=n+r;e<=i&&i<t&&(o[r]=n+1)}o[i.previousIndex]=e-t}}s!==a&&t(i,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!mi(t))throw new Error(`Error trying to diff '${mt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,r,n,o=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)r=t[e],n=this._trackByFn(e,r),null!==o&&Object.is(o.trackById,n)?(i&&(o=this._verifyReinsertion(o,r,n,e)),Object.is(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,n,e),i=!0),o=o._next}else e=0,function(t,e){if(Array.isArray(t))for(let r=0;r<t.length;r++)e(t[r]);else{const r=t[wi()]();let n;for(;!(n=r.next()).done;)e(n.value)}}(t,t=>{n=this._trackByFn(e,t),null!==o&&Object.is(o.trackById,n)?(i&&(o=this._verifyReinsertion(o,t,n,e)),Object.is(o.item,t)||this._addIdentityChange(o,t)):(o=this._mismatch(o,t,n,e),i=!0),o=o._next,e++}),this.length=e;return this._truncate(o),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,n){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,n))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,n)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,n)):t=this._addAfter(new ns(e,r),o,n),t}_verifyReinsertion(t,e,r,n){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?t=this._reinsertAfter(o,t._prev,n):t.currentIndex!=n&&(t.currentIndex=n,this._addToMoves(t,n)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const n=t._prevRemoved,o=t._nextRemoved;return null===n?this._removalsHead=o:n._nextRemoved=o,null===o?this._removalsTail=n:o._prevRemoved=n,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){const n=null===e?this._itHead:e._next;return t._next=n,t._prev=e,null===n?this._itTail=t:n._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new is),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,r=t._next;return null===e?this._itHead=r:e._next=r,null===r?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new is),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ns{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class os{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===e||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const e=t._prevDup,r=t._nextDup;return null===e?this._head=r:e._nextDup=r,null===r?this._tail=e:r._prevDup=e,null===this._head}}class is{constructor(){this.map=new Map}put(t){const e=t.trackById;let r=this.map.get(e);r||(r=new os,this.map.set(e,r)),r.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ss(t,e,r){const n=t.previousIndex;if(null===n)return n;let o=0;return r&&n<r.length&&(o=r[n]),n+e+o}class as{constructor(){}supports(t){return t instanceof Map||_i(t)}create(){return new ls}}class ls{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||_i(t)))throw new Error(`Error trying to diff '${mt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const n=this._getOrCreateRecordForKey(r,t);e=this._insertBeforeOrAppend(e,n)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const r=t._prev;return e._next=t,e._prev=r,t._prev=e,r&&(r._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,e);const n=r._prev,o=r._next;return n&&(n._next=o),o&&(o._prev=n),r._next=null,r._prev=null,r}const r=new us(t);return this._records.set(t,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(r=>e(t[r],r))}}class us{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let cs=(()=>{class t{constructor(t){this.factories=t}static create(e,r){if(null!=r){const t=r.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:r=>{if(!r)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,r)},deps:[[t,new ot,new rt]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${r=t,r.name||typeof r}'`);var r}}return t.\u0275prov=at({token:t,providedIn:"root",factory:()=>new t([new ts])}),t})(),hs=(()=>{class t{constructor(t){this.factories=t}static create(e,r){if(r){const t=r.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:r=>{if(!r)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,r)},deps:[[t,new ot,new rt]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=at({token:t,providedIn:"root",factory:()=>new t([new as])}),t})();const ds=[new as],fs=new cs([new ts]),gs=new hs(ds);let ps=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ws(t,Yi),t})();const ws=function(t,e){return Zo(t,e,$e(),Ze())};let ms=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>_s(t,Yi),t})();const _s=function(t,e){return Ko(t,e,$e(),Ze())},ys={};class Cs extends ji{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=we(t);return new vs(e,this.ngModule)}}function Es(t){const e=[];for(let r in t)t.hasOwnProperty(r)&&e.push({propName:t[r],templateName:r});return e}const As=new Bt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Br});class vs extends zi{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(yn).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Es(this.componentDef.inputs)}get outputs(){return Es(this.componentDef.outputs)}create(t,e,r,n){const o=(n=n||this.ngModule)?function(t,e){return{get:(r,n,o)=>{const i=t.get(r,ys,o);return i!==ys||n===ys?i:e.get(r,n,o)}}}(t,n.injector):t,i=o.get(Ki,Be),s=o.get($i,null),a=i.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",u=r?function(t,e,r){if(Pe(t))return t.selectRootElement(e,r===ie.ShadowDom);let n="string"==typeof e?t.querySelector(e):e;return n.textContent="",n}(a,r,this.componentDef.encapsulation):Bn(l,i.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),c=this.componentDef.onPush?576:528,h={components:[],scheduler:Br,clean:wo,playerHandler:null,flags:0},d=zn(0,-1,null,1,0,null,null,null,null,null),f=Ln(null,d,h,c,null,null,i,a,s,o);let g,p;lr(f,null);try{const t=function(t,e,r,n,o,i){const s=r[1];r[20]=t;const a=xn(s,null,0,3,null,null),l=a.mergedAttrs=e.hostAttrs;null!==l&&(gi(a,l,!0),null!==t&&(vr(o,t,l),null!==a.classes&&Uo(o,t,a.classes),null!==a.styles&&Vo(o,t,a.styles)));const u=n.createRenderer(t,e),c=Ln(r,Wn(e),null,e.onPush?64:16,r[20],a,n,u,void 0);return s.firstCreatePass&&(Wr(Vr(a,r),s,e.type),Jn(s,a),eo(a,r.length,1)),co(r,c),r[20]=c}(u,this.componentDef,f,i,a);if(u)if(r)vr(a,u,["ng-version",Ji.full]);else{const{attrs:t,classes:e}=function(t){const e=[],r=[];let n=1,o=2;for(;n<t.length;){let i=t[n];if("string"==typeof i)2===o?""!==i&&e.push(i,t[++n]):8===o&&r.push(i);else{if(!pn(o))break;o=i}n++}return{attrs:e,classes:r}}(this.componentDef.selectors[0]);t&&vr(a,u,t),e&&e.length>0&&Uo(a,u,e.join(" "))}if(p=ke(d,0),void 0!==e){const t=p.projection=[];for(let r=0;r<this.ngContentSelectors.length;r++){const n=e[r];t.push(null!=n?Array.from(n):null)}}g=function(t,e,r,n,o){const i=r[1],s=function(t,e,r){const n=$e();t.firstCreatePass&&(r.providersResolver&&r.providersResolver(r),Qn(t,n,1),ro(t,e,r));const o=Zr(e,t,e.length-1,n);sn(o,e);const i=Fe(n,e);return i&&sn(i,e),o}(i,r,e);n.components.push(s),t[8]=s,o&&o.forEach(t=>t(s,e)),e.contentQueries&&e.contentQueries(1,s,r.length-1);const a=$e();if(i.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){pr(a.index-ye);const t=r[1];Kn(t,e),qn(t,r,e.hostVars),$n(e,s)}return s}(t,this.componentDef,f,h,[Wi]),Fn(d,f,null)}finally{fr()}const w=new Ss(this.componentType,g,Yo(Yi,p,f),f,p);return d.node.child=p,w}}class Ss extends class{}{constructor(t,e,r,n,o){super(),this.location=r,this._rootLView=n,this._tNode=o,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new Go(n),function(t,e,r,n){let o=t.node;null==o&&(t.node=o=jn(0,null,2,-1,null,null)),n[6]=o}(n[1],0,0,n),this.componentType=t}get injector(){return new $r(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const Is=void 0;var bs=["en",[["a","p"],["AM","PM"],Is],[["AM","PM"],Is,Is],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Is,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Is,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Is,"{1} 'at' {0}",Is],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===r?1:5}];let Ts={};function Rs(t){return t in Ts||(Ts[t]=bt.ng&&bt.ng.common&&bt.ng.common.locales&&bt.ng.common.locales[t]),Ts[t]}var Os=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Ns="en-US";let Ds=Ns;function Ms(t){var e,r;r="Expected localeId to be defined",null==(e=t)&&function(t,e,r,n){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(r,e),"string"==typeof t&&(Ds=t.toLowerCase().replace(/_/g,"-"))}const Ps=new Map;function Bs(t){if(null!==t.\u0275mod.id){const e=t.\u0275mod.id;(function(t,e,r){if(e&&e!==r)throw new Error(`Duplicate module registered for ${t} - ${mt(e)} vs ${mt(e.name)}`)})(e,Ps.get(e),t),Ps.set(e,t)}let e=t.\u0275mod.imports;e instanceof Function&&(e=e()),e&&e.forEach(t=>Bs(t))}class Ls extends Kt{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Cs(this);const r=_e(t),n=t[Dt]||null;n&&Ms(n),this._bootstrapComponents=Lr(r.bootstrap),this._r3Injector=ii(t,e,[{provide:Kt,useValue:this},{provide:ji,useValue:this.componentFactoryResolver}],mt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=di.THROW_IF_NOT_FOUND,r=it.Default){return t===di||t===Kt||t===Lt?this:this._r3Injector.get(t,e,r)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class xs extends qt{constructor(t){super(),this.moduleType=t,null!==_e(t)&&Bs(t)}create(t){return new Ls(this.moduleType,t)}}const Fs=class extends v{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,r){let n,o=t=>null,i=()=>null;t&&"object"==typeof t?(n=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(i=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(n=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),r&&(i=this.__isAsync?()=>{setTimeout(()=>r())}:()=>{r()}));const s=super.subscribe(n,o,i);return t instanceof h&&t.add(s),s}};function ks(){return this._results[wi()]()}class Vs{constructor(){this.dirty=!0,this._results=[],this.changes=new Fs,this.length=0;const t=wi(),e=Vs.prototype;e[t]||(e[t]=ks)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=$t(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Us{constructor(t){this.queryList=t,this.matches=null}clone(){return new Us(this.queryList)}setDirty(){this.queryList.setDirty()}}class Hs{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const r=null!==t.contentQueries?t.contentQueries[0]:e.length,n=[];for(let t=0;t<r;t++){const r=e.getByIndex(t);n.push(this.queries[r.indexInDeclarationView].clone())}return new Hs(n)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Qs(t,e).matches&&this.queries[e].setDirty()}}class Gs{constructor(t,e,r,n=null){this.predicate=t,this.descendants=e,this.isStatic=r,this.read=n}}class Ws{constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){const n=null!==e?e.length:0,o=this.getByIndex(r).embeddedTView(t,n);o&&(o.indexInDeclarationView=r,null!==e?e.push(o):e=[o])}return null!==e?new Ws(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class zs{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new zs(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&4===r.type&&r.index!==e;)r=r.parent;return e===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const r=this.metadata.predicate;if(Array.isArray(r))for(let n=0;n<r.length;n++){const o=r[n];this.matchTNodeWithReadOption(t,e,Xs(e,o)),this.matchTNodeWithReadOption(t,e,Yr(e,t,o,!1,!1))}else r===ps?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Yr(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(null!==r){const n=this.metadata.read;if(null!==n)if(n===Yi||n===ms||n===ps&&0===e.type)this.addMatch(e.index,-2);else{const r=Yr(e,t,n,!1,!1);null!==r&&this.addMatch(e.index,r)}else this.addMatch(e.index,r)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Xs(t,e){const r=t.localNames;if(null!==r)for(let n=0;n<r.length;n+=2)if(r[n]===e)return r[n+1];return null}function js(t,e,r,n){return-1===r?function(t,e){return 3===t.type||4===t.type?Yo(Yi,t,e):0===t.type?Zo(ps,Yi,t,e):null}(e,t):-2===r?function(t,e,r){return r===Yi?Yo(Yi,e,t):r===ps?Zo(ps,Yi,e,t):r===ms?Ko(ms,Yi,e,t):void 0}(t,e,n):Zr(t,t[1],r,e)}function Ys(t,e,r,n){const o=e[19].queries[n];if(null===o.matches){const n=t.data,i=r.matches,s=[];for(let t=0;t<i.length;t+=2){const o=i[t];s.push(o<0?null:js(e,n[o],i[t+1],r.metadata.read))}o.matches=s}return o.matches}function Zs(t,e,r,n){const o=t.queries.getByIndex(r),i=o.matches;if(null!==i){const s=Ys(t,e,o,r);for(let t=0;t<i.length;t+=2){const r=i[t];if(r>0)n.push(s[t/2]);else{const o=i[t+1],s=e[-r];for(let t=Ce;t<s.length;t++){const e=s[t];e[17]===e[3]&&Zs(e[1],e,o,n)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const r=t[e];Zs(r[1],r,o,n)}}}}}return n}function Ks(t){const e=Ze(),r=Ke(),n=ir();sr(n+1);const o=Qs(r,n);if(t.dirty&&He(e)===o.metadata.isStatic){if(null===o.matches)t.reset([]);else{const i=o.crossesNgTemplate?Zs(r,e,n,[]):Ys(r,e,o,n);t.reset(i),t.notifyOnChanges()}return!0}return!1}function qs(t,e,r,n,o,i){t.firstCreatePass&&(function(t,e,r){null===t.queries&&(t.queries=new Ws),t.queries.track(new zs(e,-1))}(t,new Gs(r,n,i,o)),i&&(t.staticViewQueries=!0)),function(t,e){const r=new Vs;Xn(t,e,r,r.destroy),null===e[19]&&(e[19]=new Hs),e[19].queries.push(new Us(r))}(t,e)}function $s(){return t=Ze(),e=ir(),t[19].queries[e].queryList;var t,e}function Qs(t,e){return t.queries.getByIndex(e)}const Js=new Bt("Application Initializer");let ta=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const e=this.appInits[r]();Ti(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Xt(Js,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const ea=new Bt("AppId"),ra={provide:ea,useFactory:function(){return`${na()}${na()}${na()}`},deps:[]};function na(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const oa=new Bt("Platform Initializer"),ia=new Bt("Platform ID"),sa=new Bt("appBootstrapListener");let aa=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const la=new Bt("LocaleId"),ua=new Bt("DefaultCurrencyCode");class ca{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const ha=function(t){return new xs(t)},da=ha,fa=function(t){return Promise.resolve(ha(t))},ga=function(t){const e=ha(t),r=Lr(_e(t).declarations).reduce((t,e)=>{const r=we(e);return r&&t.push(new vs(r)),t},[]);return new ca(e,r)},pa=ga,wa=function(t){return Promise.resolve(ga(t))};let ma=(()=>{class t{constructor(){this.compileModuleSync=da,this.compileModuleAsync=fa,this.compileModuleAndAllComponentsSync=pa,this.compileModuleAndAllComponentsAsync=wa}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const _a=(()=>Promise.resolve(0))();function ya(t){"undefined"==typeof Zone?_a.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ca{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fs(!1),this.onMicrotaskEmpty=new Fs(!1),this.onStable=new Fs(!1),this.onError=new Fs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.wtfZoneSpec&&(r._inner=r._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=e,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=bt.requestAnimationFrame,e=bt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(bt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Sa(t),va(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Sa(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(r,n,o,i,s,a)=>{try{return Ia(t),r.invokeTask(o,i,s,a)}finally{e&&"eventTask"===i.type&&e(),ba(t)}},onInvoke:(e,r,n,o,i,s,a)=>{try{return Ia(t),e.invoke(n,o,i,s,a)}finally{ba(t)}},onHasTask:(e,r,n,o)=>{e.hasTask(n,o),r===n&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,Sa(t),va(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(e,r,n,o)=>(e.handleError(n,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ca.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ca.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,n){const o=this._inner,i=o.scheduleEventTask("NgZoneEvent: "+n,t,Aa,Ea,Ea);try{return o.runTask(i,e,r)}finally{o.cancelTask(i)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}}function Ea(){}const Aa={};function va(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Sa(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Ia(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ba(t){t._nesting--,va(t)}class Ta{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fs,this.onMicrotaskEmpty=new Fs,this.onStable=new Fs,this.onError=new Fs}run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,n){return t.apply(e,r)}}let Ra=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ca.assertNotInAngularZone(),ya(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ya(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,r){let n=-1;e&&e>0&&(n=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==n),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:n,updateCb:r})}whenStable(t,e,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,r){return[]}}return t.\u0275fac=function(e){return new(e||t)(Xt(Ca))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),Oa=(()=>{class t{constructor(){this._applications=new Map,Ma.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Ma.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();class Na{addToWindow(t){}findTestabilityInTree(t,e,r){return null}}let Da,Ma=new Na;const Pa=new Bt("AllowMultipleToken");class Ba{constructor(t,e){this.name=t,this.token=e}}function La(t,e,r=[]){const n="Platform: "+e,o=new Bt(n);return(e=[])=>{let i=xa();if(!i||i.injector.get(Pa,!1))if(t)t(r.concat(e).concat({provide:o,useValue:!0}));else{const t=r.concat(e).concat({provide:o,useValue:!0},{provide:Jo,useValue:"platform"});!function(t){if(Da&&!Da.destroyed&&!Da.injector.get(Pa,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Da=t.get(Fa);const e=t.get(oa,null);e&&e.forEach(t=>t())}(di.create({providers:t,name:n}))}return function(t){const e=xa();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(o)}}function xa(){return Da&&!Da.destroyed?Da:null}let Fa=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const r=function(t,e){let r;return r="noop"===t?new Ta:("zone.js"===t?void 0:t)||new Ca({enableLongStackTrace:on(),shouldCoalesceEventChangeDetection:e}),r}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),n=[{provide:Ca,useValue:r}];return r.run(()=>{const e=di.create({providers:n,parent:this.injector,name:t.moduleType.name}),o=t.create(e),i=o.injector.get(en,null);if(!i)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return o.onDestroy(()=>Ua(this._modules,o)),r.runOutsideAngular(()=>r.onError.subscribe({next:t=>{i.handleError(t)}})),function(t,e,r){try{const n=r();return Ti(n)?n.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):n}catch(n){throw e.runOutsideAngular(()=>t.handleError(n)),n}}(i,r,()=>{const t=o.injector.get(ta);return t.runInitializers(),t.donePromise.then(()=>(Ms(o.injector.get(la,Ns)||Ns),this._moduleDoBootstrap(o),o))})})}bootstrapModule(t,e=[]){const r=ka({},e);return function(t,e,r){const n=new xs(r);return Promise.resolve(n)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,r))}_moduleDoBootstrap(t){const e=t.injector.get(Va);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${mt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Xt(di))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();function ka(t,e){return Array.isArray(e)?e.reduce(ka,t):Object.assign(Object.assign({},t),e)}let Va=(()=>{class t{constructor(t,e,r,n,o,i){this._zone=t,this._console=e,this._injector=r,this._exceptionHandler=n,this._componentFactoryResolver=o,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=on(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new _(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),a=new _(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Ca.assertNotInAngularZone(),ya(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const r=this._zone.onUnstable.subscribe(()=>{Ca.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),r.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,r=null,n=t[t.length-1];return I(n)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof n&&(e=t.pop()),null===r&&1===t.length&&t[0]instanceof _?t[0]:W(e)(z(t,r))}(s,a.pipe(t=>{return X()((e=$,function(t){let r;r="function"==typeof e?e:function(){return e};const n=Object.create(t,K);return n.source=t,n.subjectFactory=r,n})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let r;r=t instanceof zi?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(r.componentType);const n=r.isBoundToModule?void 0:this._injector.get(Kt),o=r.create(di.NULL,[],e||r.selector,n);o.onDestroy(()=>{this._unloadComponent(o)});const i=o.injector.get(Ra,null);return i&&o.injector.get(Oa).registerApplication(o.location.nativeElement,i),this._loadComponent(o),on()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),o}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ua(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(sa,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),Ua(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Xt(Ca),Xt(aa),Xt(di),Xt(en),Xt(ji),Xt(ta))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();function Ua(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class Ha{}class Ga{}const Wa={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let za=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Wa}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,n]=t.split("#");return void 0===n&&(n="default"),r("zn8P")(e).then(t=>t[n]).then(t=>Xa(t,e,n)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,n]=t.split("#"),o="NgFactory";return void 0===n&&(n="default",o=""),r("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[n+o]).then(t=>Xa(t,e,n))}}return t.\u0275fac=function(e){return new(e||t)(Xt(ma),Xt(Ga,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();function Xa(t,e,r){if(!t)throw new Error(`Cannot find '${r}' in '${e}'`);return t}const ja=La(null,"core",[{provide:ia,useValue:"unknown"},{provide:Fa,deps:[di]},{provide:Oa,deps:[]},{provide:aa,deps:[]}]),Ya=[{provide:Va,useClass:Va,deps:[Ca,aa,di,en,ji,ta]},{provide:As,deps:[Ca],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:ta,useClass:ta,deps:[[new rt,Js]]},{provide:ma,useClass:ma,deps:[]},ra,{provide:cs,useFactory:function(){return fs},deps:[]},{provide:hs,useFactory:function(){return gs},deps:[]},{provide:la,useFactory:function(t){return Ms(t=t||"undefined"!=typeof $localize&&$localize.locale||Ns),t},deps:[[new et(la),new rt,new ot]]},{provide:ua,useValue:"USD"}];let Za=(()=>{class t{constructor(t){}}return t.\u0275mod=fe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)(Xt(Va))},providers:Ya}),t})(),Ka=null;function qa(){return Ka}const $a=new Bt("DocumentToken");let Qa=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({factory:Ja,token:t,providedIn:"platform"}),t})();function Ja(){return Xt(el)}const tl=new Bt("Location Initialized");let el=(()=>{class t extends Qa{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=qa().getLocation(),this._history=qa().getHistory()}getBaseHrefFromDOM(){return qa().getBaseHref(this._doc)}onPopState(t){qa().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){qa().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,r){rl()?this._history.pushState(t,e,r):this.location.hash=r}replaceState(t,e,r){rl()?this._history.replaceState(t,e,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Xt($a))},t.\u0275prov=at({factory:nl,token:t,providedIn:"platform"}),t})();function rl(){return!!window.history.pushState}function nl(){return new el(Xt($a))}function ol(t,e){if(0==t.length)return e;if(0==e.length)return t;let r=0;return t.endsWith("/")&&r++,e.startsWith("/")&&r++,2==r?t+e.substring(1):1==r?t+e:t+"/"+e}function il(t){const e=t.match(/#|\?|$/),r=e&&e.index||t.length;return t.slice(0,r-("/"===t[r-1]?1:0))+t.slice(r)}function sl(t){return t&&"?"!==t[0]?"?"+t:t}let al=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({factory:ll,token:t,providedIn:"root"}),t})();function ll(t){const e=Xt($a).location;return new cl(Xt(Qa),e&&e.origin||"")}const ul=new Bt("appBaseHref");let cl=(()=>{class t extends al{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ol(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+sl(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${e}${r}`:e}pushState(t,e,r,n){const o=this.prepareExternalUrl(r+sl(n));this._platformLocation.pushState(t,e,o)}replaceState(t,e,r,n){const o=this.prepareExternalUrl(r+sl(n));this._platformLocation.replaceState(t,e,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Xt(Qa),Xt(ul,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),hl=(()=>{class t extends al{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=ol(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,r,n){let o=this.prepareExternalUrl(r+sl(n));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,e,o)}replaceState(t,e,r,n){let o=this.prepareExternalUrl(r+sl(n));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Xt(Qa),Xt(ul,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),dl=(()=>{class t{constructor(t,e){this._subject=new Fs,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=il(gl(r)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+sl(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,gl(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",r=null){this._platformStrategy.pushState(r,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+sl(e)),r)}replaceState(t,e="",r=null){this._platformStrategy.replaceState(r,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+sl(e)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(r=>r(t,e))}subscribe(t,e,r){return this._subject.subscribe({next:t,error:e,complete:r})}}return t.\u0275fac=function(e){return new(e||t)(Xt(al),Xt(Qa))},t.normalizeQueryParams=sl,t.joinWithSlash=ol,t.stripTrailingSlash=il,t.\u0275prov=at({factory:fl,token:t,providedIn:"root"}),t})();function fl(){return new dl(Xt(al),Xt(Qa))}function gl(t){return t.replace(/\/index.html$/,"")}var pl=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});class wl{}let ml=(()=>{class t extends wl{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let r=Rs(e);if(r)return r;const n=e.split("-")[0];if(r=Rs(n),r)return r;if("en"===n)return bs;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[Os.PluralCase]}(e||this.locale)(t)){case pl.Zero:return"zero";case pl.One:return"one";case pl.Two:return"two";case pl.Few:return"few";case pl.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Xt(la))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),_l=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new yl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Cl("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Cl("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Ei(ms),Ei(ps))},t.\u0275dir=pe({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class yl{constructor(){this.$implicit=null,this.ngIf=null}}function Cl(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${mt(e)}'.`)}let El=(()=>{class t{}return t.\u0275mod=fe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:[{provide:wl,useClass:ml}]}),t})(),Al=(()=>{class t{}return t.\u0275prov=at({token:t,providedIn:"root",factory:()=>new vl(Xt($a),window,Xt(en))}),t})();class vl{constructor(t,e,r){this.document=t,this.window=e,this.errorHandler=r,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,n=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],n-o[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const t=Sl(this.window.history)||Sl(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(t){return!1}}}function Sl(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Il extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new Il,Ka||(Ka=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=Tl||(Tl=document.querySelector("base"),Tl)?Tl.getAttribute("href"):null;return null==e?null:(r=e,bl||(bl=document.createElement("a")),bl.setAttribute("href",r),"/"===bl.pathname.charAt(0)?bl.pathname:"/"+bl.pathname);var r}resetBaseElement(){Tl=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const r of t.split(";")){const t=r.indexOf("="),[n,o]=-1==t?[r,""]:[r.slice(0,t),r.slice(t+1)];if(n.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,t)}}let bl,Tl=null;const Rl=new Bt("TRANSITION_ID"),Ol=[{provide:Js,useFactory:function(t,e,r){return()=>{r.get(ta).donePromise.then(()=>{const r=qa();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>r.remove(t))})}},deps:[Rl,$a,di],multi:!0}];class Nl{static init(){var t;t=new Nl,Ma=t}addToWindow(t){bt.getAngularTestability=(e,r=!0)=>{const n=t.findTestabilityInTree(e,r);if(null==n)throw new Error("Could not find testability for element.");return n},bt.getAllAngularTestabilities=()=>t.getAllTestabilities(),bt.getAllAngularRootElements=()=>t.getAllRootElements(),bt.frameworkStabilizers||(bt.frameworkStabilizers=[]),bt.frameworkStabilizers.push(t=>{const e=bt.getAllAngularTestabilities();let r=e.length,n=!1;const o=function(e){n=n||e,r--,0==r&&t(n)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,r){if(null==e)return null;const n=t.getTestability(e);return null!=n?n:r?qa().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const Dl=new Bt("EventManagerPlugins");let Ml=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,r){return this._findPluginFor(e).addEventListener(t,e,r)}addGlobalEventListener(t,e,r){return this._findPluginFor(e).addGlobalEventListener(t,e,r)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const r=this._plugins;for(let n=0;n<r.length;n++){const e=r[n];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(Xt(Dl),Xt(Ca))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();class Pl{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const n=qa().getGlobalEventTarget(this._doc,t);if(!n)throw new Error(`Unsupported event target ${n} for event ${e}`);return this.addEventListener(n,e,r)}}let Bl=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),Ll=(()=>{class t extends Bl{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,this._styleNodes.add(e.appendChild(r))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>qa().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(Xt($a))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const xl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Fl=/%COMP%/g;function kl(t,e,r){for(let n=0;n<e.length;n++){let o=e[n];Array.isArray(o)?kl(t,o,r):(o=o.replace(Fl,t),r.push(o))}return r}function Vl(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ul=(()=>{class t{constructor(t,e,r){this.eventManager=t,this.sharedStylesHost=e,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Hl(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case ie.Emulated:{let r=this.rendererByCompId.get(e.id);return r||(r=new Gl(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,r)),r.applyToHost(t),r}case ie.Native:case ie.ShadowDom:return new Wl(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=kl(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Xt(Ml),Xt(Ll),Xt(ea))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();class Hl{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(xl[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,r){t&&t.insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,n){if(n){e=n+":"+e;const o=xl[n];o?t.setAttributeNS(o,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const n=xl[r];n?t.removeAttributeNS(n,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,n){n&qi.DashCase?t.style.setProperty(e,r,n&qi.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&qi.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Vl(r)):this.eventManager.addEventListener(t,e,Vl(r))}}class Gl extends Hl{constructor(t,e,r,n){super(t),this.component=r;const o=kl(n+"-"+r.id,r.styles,[]);e.addStyles(o),this.contentAttr="_ngcontent-%COMP%".replace(Fl,n+"-"+r.id),this.hostAttr="_nghost-%COMP%".replace(Fl,n+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}class Wl extends Hl{constructor(t,e,r,n){super(t),this.sharedStylesHost=e,this.hostEl=r,this.component=n,this.shadowRoot=n.encapsulation===ie.ShadowDom?r.attachShadow({mode:"open"}):r.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const o=kl(n.id,n.styles,[]);for(let i=0;i<o.length;i++){const t=document.createElement("style");t.textContent=o[i],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let zl=(()=>{class t extends Pl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,r){return t.addEventListener(e,r,!1),()=>this.removeEventListener(t,e,r)}removeEventListener(t,e,r){return t.removeEventListener(e,r)}}return t.\u0275fac=function(e){return new(e||t)(Xt($a))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const Xl=["alt","control","meta","shift"],jl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Yl={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Zl={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Kl=(()=>{class t extends Pl{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,r,n){const o=t.parseEventName(r),i=t.eventCallback(o.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qa().onAndCancel(e,o.domEventName,i))}static parseEventName(e){const r=e.toLowerCase().split("."),n=r.shift();if(0===r.length||"keydown"!==n&&"keyup"!==n)return null;const o=t._normalizeKey(r.pop());let i="";if(Xl.forEach(t=>{const e=r.indexOf(t);e>-1&&(r.splice(e,1),i+=t+".")}),i+=o,0!=r.length||0===o.length)return null;const s={};return s.domEventName=n,s.fullKey=i,s}static getEventFullKey(t){let e="",r=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Yl.hasOwnProperty(e)&&(e=Yl[e]))}return jl[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Xl.forEach(n=>{n!=r&&(0,Zl[n])(t)&&(e+=n+".")}),e+=r,e}static eventCallback(e,r,n){return o=>{t.getEventFullKey(o)===e&&n.runGuarded(()=>r(o))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(Xt($a))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const ql=La(ja,"browser",[{provide:ia,useValue:"browser"},{provide:oa,useValue:function(){Il.makeCurrent(),Nl.init()},multi:!0},{provide:$a,useFactory:function(){return function(t){Me=t}(document),document},deps:[]}]),$l=[[],{provide:Jo,useValue:"root"},{provide:en,useFactory:function(){return new en},deps:[]},{provide:Dl,useClass:zl,multi:!0,deps:[$a,Ca,ia]},{provide:Dl,useClass:Kl,multi:!0,deps:[$a]},[],{provide:Ul,useClass:Ul,deps:[Ml,Ll,ea]},{provide:Ki,useExisting:Ul},{provide:Bl,useExisting:Ll},{provide:Ll,useClass:Ll,deps:[$a]},{provide:Ra,useClass:Ra,deps:[Ca]},{provide:Ml,useClass:Ml,deps:[Dl,Ca]},[]];let Ql=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:ea,useValue:e.appId},{provide:Rl,useExisting:ea},Ol]}}}return t.\u0275mod=fe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)(Xt(t,12))},providers:$l,imports:[El,Za]}),t})();function Jl(...t){let e=t[t.length-1];return I(e)?(t.pop(),k(t,e)):z(t)}"undefined"!=typeof window&&window;class tu extends v{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new C;return this._value}next(t){super.next(this._value=t)}}const eu=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),ru={};class nu{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new ou(t,this.resultSelector))}}class ou extends B{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(ru),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let r=0;r<e;r++){const e=t[r];this.add(P(this,e,e,r))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,r,n,o){const i=this.values,s=this.toRespond?i[r]===ru?--this.toRespond:this.toRespond:0;i[r]=e,0===s&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}const iu=new _(t=>t.complete());function su(t){return t?function(t){return new _(e=>t.schedule(()=>e.complete()))}(t):iu}function au(t){return new _(e=>{let r;try{r=t()}catch(n){return void e.error(n)}return(r?V(r):su()).subscribe(e)})}function lu(){return W(1)}function uu(t,e){return function(r){return r.lift(new cu(t,e))}}class cu{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new hu(t,this.predicate,this.thisArg))}}class hu extends g{constructor(t,e,r){super(t),this.predicate=e,this.thisArg=r,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}e&&this.destination.next(t)}}const du=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function fu(t){return function(e){return 0===t?su():e.lift(new gu(t))}}class gu{constructor(t){if(this.total=t,this.total<0)throw new du}call(t,e){return e.subscribe(new pu(t,this.total))}}class pu extends g{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,r=this.total,n=this.count++;e.length<r?e.push(t):e[n%r]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const r=this.count>=this.total?this.total:this.count,n=this.ring;for(let o=0;o<r;o++){const o=e++%r;t.next(n[o])}}t.complete()}}function wu(t=yu){return e=>e.lift(new mu(t))}class mu{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new _u(t,this.errorFactory))}}class _u extends g{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function yu(){return new eu}function Cu(t=null){return e=>e.lift(new Eu(t))}class Eu{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Au(t,this.defaultValue))}}class Au extends g{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function vu(t){return function(e){const r=new Su(t),n=e.lift(r);return r.caught=n}}class Su{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Iu(t,this.selector,this.caught))}}class Iu extends B{constructor(t,e,r){super(t),this.selector=e,this.caught=r}error(t){if(!this.isStopped){let r;try{r=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const n=new b(this,void 0,void 0);this.add(n);const o=P(this,r,void 0,void 0,n);o!==n&&this.add(o)}}}function bu(t){return e=>0===t?su():e.lift(new Tu(t))}class Tu{constructor(t){if(this.total=t,this.total<0)throw new du}call(t,e){return e.subscribe(new Ru(t,this.total))}}class Ru extends g{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,r=++this.count;r<=e&&(this.destination.next(t),r===e&&(this.destination.complete(),this.unsubscribe()))}}function Ou(t,e){const r=arguments.length>=2;return n=>n.pipe(t?uu((e,r)=>t(e,r,n)):m,bu(1),r?Cu(e):wu(()=>new eu))}function Nu(){}function Du(t,e,r){return function(n){return n.lift(new Mu(t,e,r))}}class Mu{constructor(t,e,r){this.nextOrObserver=t,this.error=e,this.complete=r}call(t,e){return e.subscribe(new Pu(t,this.nextOrObserver,this.error,this.complete))}}class Pu extends g{constructor(t,e,r,o){super(t),this._tapNext=Nu,this._tapError=Nu,this._tapComplete=Nu,this._tapError=r||Nu,this._tapComplete=o||Nu,n(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||Nu,this._tapError=e.error||Nu,this._tapComplete=e.complete||Nu)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class Bu{constructor(t,e,r){this.predicate=t,this.thisArg=e,this.source=r}call(t,e){return e.subscribe(new Lu(t,this.predicate,this.thisArg,this.source))}}class Lu extends g{constructor(t,e,r,n){super(t),this.predicate=e,this.thisArg=r,this.source=n,this.index=0,this.thisArg=r||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(r){return void this.destination.error(r)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function xu(t,e){return"function"==typeof e?r=>r.pipe(xu((r,n)=>V(t(r,n)).pipe(L((t,o)=>e(r,t,n,o))))):e=>e.lift(new Fu(t))}class Fu{constructor(t){this.project=t}call(t,e){return e.subscribe(new ku(t,this.project))}}class ku extends B{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const r=this.index++;try{e=this.project(t,r)}catch(n){return void this.destination.error(n)}this._innerSub(e,t,r)}_innerSub(t,e,r){const n=this.innerSubscription;n&&n.unsubscribe();const o=new b(this,e,r),i=this.destination;i.add(o),this.innerSubscription=P(this,t,void 0,void 0,o),this.innerSubscription!==o&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,r,n,o){this.destination.next(e)}}function Vu(...t){return lu()(Jl(...t))}class Uu{constructor(t,e,r=!1){this.accumulator=t,this.seed=e,this.hasSeed=r}call(t,e){return e.subscribe(new Hu(t,this.accumulator,this.seed,this.hasSeed))}}class Hu extends g{constructor(t,e,r,n){super(t),this.accumulator=e,this._seed=r,this.hasSeed=n,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let r;try{r=this.accumulator(this.seed,t,e)}catch(n){this.destination.error(n)}this.seed=r,this.destination.next(r)}}function Gu(t,e){return U(t,e,1)}class Wu{constructor(t){this.callback=t}call(t,e){return e.subscribe(new zu(t,this.callback))}}class zu extends g{constructor(t,e){super(t),this.add(new h(e))}}class Xu{constructor(t,e){this.id=t,this.url=e}}class ju extends Xu{constructor(t,e,r="imperative",n=null){super(t,e),this.navigationTrigger=r,this.restoredState=n}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Yu extends Xu{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Zu extends Xu{constructor(t,e,r){super(t,e),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ku extends Xu{constructor(t,e,r){super(t,e),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qu extends Xu{constructor(t,e,r,n){super(t,e),this.urlAfterRedirects=r,this.state=n}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $u extends Xu{constructor(t,e,r,n){super(t,e),this.urlAfterRedirects=r,this.state=n}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qu extends Xu{constructor(t,e,r,n,o){super(t,e),this.urlAfterRedirects=r,this.state=n,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ju extends Xu{constructor(t,e,r,n){super(t,e),this.urlAfterRedirects=r,this.state=n}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tc extends Xu{constructor(t,e,r,n){super(t,e),this.urlAfterRedirects=r,this.state=n}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ec{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class rc{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nc{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oc{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ic{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sc{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ac{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const lc="primary";class uc{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function cc(t){return new uc(t)}function hc(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function dc(t,e,r){const n=r.path.split("/");if(n.length>t.length)return null;if("full"===r.pathMatch&&(e.hasChildren()||n.length<t.length))return null;const o={};for(let i=0;i<n.length;i++){const e=n[i],r=t[i];if(e.startsWith(":"))o[e.substring(1)]=r;else if(e!==r.path)return null}return{consumed:t.slice(0,n.length),posParams:o}}function fc(t,e){const r=Object.keys(t),n=Object.keys(e);if(!r||!n||r.length!=n.length)return!1;let o;for(let i=0;i<r.length;i++)if(o=r[i],!gc(t[o],e[o]))return!1;return!0}function gc(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length==e.length&&t.every(t=>e.indexOf(t)>-1):t===e}function pc(t){return Array.prototype.concat.apply([],t)}function wc(t){return t.length>0?t[t.length-1]:null}function mc(t,e){for(const r in t)t.hasOwnProperty(r)&&e(t[r],r)}function _c(t){return(e=t)&&"function"==typeof e.subscribe?t:Ti(t)?V(Promise.resolve(t)):Jl(t);var e}function yc(t,e,r){return r?function(t,e){return fc(t,e)}(t.queryParams,e.queryParams)&&Cc(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(r=>gc(t[r],e[r]))}(t.queryParams,e.queryParams)&&Ec(t.root,e.root)}function Cc(t,e){if(!bc(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children){if(!t.children[r])return!1;if(!Cc(t.children[r],e.children[r]))return!1}return!0}function Ec(t,e){return Ac(t,e,e.segments)}function Ac(t,e,r){if(t.segments.length>r.length)return!!bc(t.segments.slice(0,r.length),r)&&!e.hasChildren();if(t.segments.length===r.length){if(!bc(t.segments,r))return!1;for(const r in e.children){if(!t.children[r])return!1;if(!Ec(t.children[r],e.children[r]))return!1}return!0}{const n=r.slice(0,t.segments.length),o=r.slice(t.segments.length);return!!bc(t.segments,n)&&!!t.children.primary&&Ac(t.children.primary,e,o)}}class vc{constructor(t,e,r){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cc(this.queryParams)),this._queryParamMap}toString(){return Nc.serialize(this)}}class Sc{constructor(t,e){this.segments=t,this.children=e,this.parent=null,mc(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dc(this)}}class Ic{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=cc(this.parameters)),this._parameterMap}toString(){return kc(this)}}function bc(t,e){return t.length===e.length&&t.every((t,r)=>t.path===e[r].path)}function Tc(t,e){let r=[];return mc(t.children,(t,n)=>{n===lc&&(r=r.concat(e(t,n)))}),mc(t.children,(t,n)=>{n!==lc&&(r=r.concat(e(t,n)))}),r}class Rc{}class Oc{parse(t){const e=new Wc(t);return new vc(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+Mc(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const r=t[e];return Array.isArray(r)?r.map(t=>`${Bc(e)}=${Bc(t)}`).join("&"):`${Bc(e)}=${Bc(r)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const Nc=new Oc;function Dc(t){return t.segments.map(t=>kc(t)).join("/")}function Mc(t,e){if(!t.hasChildren())return Dc(t);if(e){const e=t.children.primary?Mc(t.children.primary,!1):"",r=[];return mc(t.children,(t,e)=>{e!==lc&&r.push(`${e}:${Mc(t,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=Tc(t,(e,r)=>r===lc?[Mc(t.children.primary,!1)]:[`${r}:${Mc(e,!1)}`]);return`${Dc(t)}/(${e.join("//")})`}}function Pc(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Bc(t){return Pc(t).replace(/%3B/gi,";")}function Lc(t){return Pc(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xc(t){return decodeURIComponent(t)}function Fc(t){return xc(t.replace(/\+/g,"%20"))}function kc(t){return`${Lc(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Lc(t)}=${Lc(e[t])}`).join("")}`;var e}const Vc=/^[^\/()?;=#]+/;function Uc(t){const e=t.match(Vc);return e?e[0]:""}const Hc=/^[^=?&#]+/,Gc=/^[^?&#]+/;class Wc{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Sc([],{}):new Sc([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r.primary=new Sc(t,e)),r}parseSegment(){const t=Uc(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Ic(xc(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Uc(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const t=Uc(this.remaining);t&&(r=t,this.capture(r))}t[xc(e)]=xc(r)}parseQueryParam(t){const e=function(t){const e=t.match(Hc);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Gc);return e?e[0]:""}(this.remaining);t&&(r=t,this.capture(r))}const n=Fc(e),o=Fc(r);if(t.hasOwnProperty(n)){let e=t[n];Array.isArray(e)||(e=[e],t[n]=e),e.push(o)}else t[n]=o}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Uc(this.remaining),n=this.remaining[r.length];if("/"!==n&&")"!==n&&";"!==n)throw new Error(`Cannot parse url '${this.url}'`);let o=void 0;r.indexOf(":")>-1?(o=r.substr(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=lc);const i=this.parseChildren();e[o]=1===Object.keys(i).length?i.primary:new Sc([],i),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class zc{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Xc(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Xc(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=jc(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return jc(t,this._root).map(t=>t.value)}}function Xc(t,e){if(t===e.value)return e;for(const r of e.children){const e=Xc(t,r);if(e)return e}return null}function jc(t,e){if(t===e.value)return[e];for(const r of e.children){const n=jc(t,r);if(n.length)return n.unshift(e),n}return[]}class Yc{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Zc(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Kc extends zc{constructor(t,e){super(t),this.snapshot=e,eh(this,t)}toString(){return this.snapshot.toString()}}function qc(t,e){const r=function(t,e){const r=new Jc([],{},{},"",{},lc,e,null,t.root,-1,{});return new th("",new Yc(r,[]))}(t,e),n=new tu([new Ic("",{})]),o=new tu({}),i=new tu({}),s=new tu({}),a=new tu(""),l=new $c(n,o,s,a,i,lc,e,r.root);return l.snapshot=r.root,new Kc(new Yc(l,[]),r)}class $c{constructor(t,e,r,n,o,i,s,a){this.url=t,this.params=e,this.queryParams=r,this.fragment=n,this.data=o,this.outlet=i,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(L(t=>cc(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(L(t=>cc(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Qc(t,e="emptyOnly"){const r=t.pathFromRoot;let n=0;if("always"!==e)for(n=r.length-1;n>=1;){const t=r[n],e=r[n-1];if(t.routeConfig&&""===t.routeConfig.path)n--;else{if(e.component)break;n--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(r.slice(n))}class Jc{constructor(t,e,r,n,o,i,s,a,l,u,c){this.url=t,this.params=e,this.queryParams=r,this.fragment=n,this.data=o,this.outlet=i,this.component=s,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class th extends zc{constructor(t,e){super(e),this.url=t,eh(this,e)}toString(){return rh(this._root)}}function eh(t,e){e.value._routerState=t,e.children.forEach(e=>eh(t,e))}function rh(t){const e=t.children.length>0?` { ${t.children.map(rh).join(", ")} } `:"";return`${t.value}${e}`}function nh(t){if(t.snapshot){const e=t.snapshot,r=t._futureSnapshot;t.snapshot=r,fc(e.queryParams,r.queryParams)||t.queryParams.next(r.queryParams),e.fragment!==r.fragment&&t.fragment.next(r.fragment),fc(e.params,r.params)||t.params.next(r.params),function(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!fc(t[r],e[r]))return!1;return!0}(e.url,r.url)||t.url.next(r.url),fc(e.data,r.data)||t.data.next(r.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function oh(t,e){var r,n;return fc(t.params,e.params)&&bc(r=t.url,n=e.url)&&r.every((t,e)=>fc(t.parameters,n[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||oh(t.parent,e.parent))}function ih(t,e,r){if(r&&t.shouldReuseRoute(e.value,r.value.snapshot)){const n=r.value;n._futureSnapshot=e.value;const o=function(t,e,r){return e.children.map(e=>{for(const n of r.children)if(t.shouldReuseRoute(n.value.snapshot,e.value))return ih(t,e,n);return ih(t,e)})}(t,e,r);return new Yc(n,o)}{const r=t.retrieve(e.value);if(r){const t=r.route;return sh(e,t),t}{const r=new $c(new tu((n=e.value).url),new tu(n.params),new tu(n.queryParams),new tu(n.fragment),new tu(n.data),n.outlet,n.component,n),o=e.children.map(e=>ih(t,e));return new Yc(r,o)}}var n}function sh(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let r=0;r<t.children.length;++r)sh(t.children[r],e.children[r])}function ah(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function lh(t,e,r,n,o){let i={};return n&&mc(n,(t,e)=>{i[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new vc(r.root===t?e:uh(r.root,t,e),i,o)}function uh(t,e,r){const n={};return mc(t.children,(t,o)=>{n[o]=t===e?r:uh(t,e,r)}),new Sc(t.segments,n)}class ch{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&ah(r[0]))throw new Error("Root segment cannot have matrix parameters");const n=r.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(n&&n!==wc(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class hh{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function dh(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:""+t}function fh(t,e,r){if(t||(t=new Sc([],{})),0===t.segments.length&&t.hasChildren())return gh(t,e,r);const n=function(t,e,r){let n=0,o=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(n>=r.length)return i;const e=t.segments[o],s=dh(r[n]),a=n<r.length-1?r[n+1]:null;if(o>0&&void 0===s)break;if(s&&a&&"object"==typeof a&&void 0===a.outlets){if(!_h(s,a,e))return i;n+=2}else{if(!_h(s,{},e))return i;n++}o++}return{match:!0,pathIndex:o,commandIndex:n}}(t,e,r),o=r.slice(n.commandIndex);if(n.match&&n.pathIndex<t.segments.length){const e=new Sc(t.segments.slice(0,n.pathIndex),{});return e.children.primary=new Sc(t.segments.slice(n.pathIndex),t.children),gh(e,0,o)}return n.match&&0===o.length?new Sc(t.segments,{}):n.match&&!t.hasChildren()?ph(t,e,r):n.match?gh(t,0,o):ph(t,e,r)}function gh(t,e,r){if(0===r.length)return new Sc(t.segments,{});{const n=function(t){return"object"==typeof t[0]&&null!==t[0]&&t[0].outlets?t[0].outlets:{[lc]:t}}(r),o={};return mc(n,(r,n)=>{null!==r&&(o[n]=fh(t.children[n],e,r))}),mc(t.children,(t,e)=>{void 0===n[e]&&(o[e]=t)}),new Sc(t.segments,o)}}function ph(t,e,r){const n=t.segments.slice(0,e);let o=0;for(;o<r.length;){if("object"==typeof r[o]&&null!==r[o]&&void 0!==r[o].outlets){const t=wh(r[o].outlets);return new Sc(n,t)}if(0===o&&ah(r[0])){n.push(new Ic(t.segments[e].path,r[0])),o++;continue}const i=dh(r[o]),s=o<r.length-1?r[o+1]:null;i&&s&&ah(s)?(n.push(new Ic(i,mh(s))),o+=2):(n.push(new Ic(i,{})),o++)}return new Sc(n,{})}function wh(t){const e={};return mc(t,(t,r)=>{null!==t&&(e[r]=ph(new Sc([],{}),0,t))}),e}function mh(t){const e={};return mc(t,(t,r)=>e[r]=""+t),e}function _h(t,e,r){return t==r.path&&fc(e,r.parameters)}class yh{constructor(t,e,r,n){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=n}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),nh(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const n=Zc(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,n[e],r),delete n[e]}),mc(n,(t,e)=>{this.deactivateRouteAndItsChildren(t,r)})}deactivateRoutes(t,e,r){const n=t.value,o=e?e.value:null;if(n===o)if(n.component){const o=r.getContext(n.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,r);else o&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet);if(r&&r.outlet){const e=r.outlet.detach(),n=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:n})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet);if(r){const n=Zc(t),o=t.value.component?r.children:e;mc(n,(t,e)=>this.deactivateRouteAndItsChildren(t,o)),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}}activateChildRoutes(t,e,r){const n=Zc(e);t.children.forEach(t=>{this.activateRoutes(t,n[t.value.outlet],r),this.forwardEvent(new sc(t.value.snapshot))}),t.children.length&&this.forwardEvent(new oc(t.value.snapshot))}activateRoutes(t,e,r){const n=t.value,o=e?e.value:null;if(nh(n),n===o)if(n.component){const o=r.getOrCreateContext(n.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,r);else if(n.component){const e=r.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){const t=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Ch(t.route)}else{const r=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(n.snapshot),o=r?r.module.componentFactoryResolver:null;e.attachRef=null,e.route=n,e.resolver=o,e.outlet&&e.outlet.activateWith(n,o),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,r)}}function Ch(t){nh(t.value),t.children.forEach(Ch)}class Eh{constructor(t,e){this.routes=t,this.module=e}}function Ah(t){return"function"==typeof t}function vh(t){return t instanceof vc}class Sh{constructor(t){this.segmentGroup=t||null}}class Ih{constructor(t){this.urlTree=t}}function bh(t){return new _(e=>e.error(new Sh(t)))}function Th(t){return new _(e=>e.error(new Ih(t)))}function Rh(t){return new _(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Oh{constructor(t,e,r,n,o){this.configLoader=e,this.urlSerializer=r,this.urlTree=n,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(Kt)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,lc).pipe(L(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(vu(t=>{if(t instanceof Ih)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Sh)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,lc).pipe(L(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(vu(t=>{if(t instanceof Sh)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,r){const n=t.segments.length>0?new Sc([],{[lc]:t}):t;return new vc(n,e,r)}expandSegmentGroup(t,e,r,n){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe(L(t=>new Sc([],t))):this.expandSegment(t,r,e,r.segments,n,!0)}expandChildren(t,e,r){return function(t,e){if(0===Object.keys(t).length)return Jl({});const r=[],n=[],o={};return mc(t,(t,i)=>{const s=e(i,t).pipe(L(t=>o[i]=t));i===lc?r.push(s):n.push(s)}),Jl.apply(null,r.concat(n)).pipe(lu(),function(t,e){const r=arguments.length>=2;return n=>n.pipe(t?uu((e,r)=>t(e,r,n)):m,fu(1),r?Cu(e):wu(()=>new eu))}(),L(()=>o))}(r.children,(r,n)=>this.expandSegmentGroup(t,e,n,r))}expandSegment(t,e,r,n,o,i){return Jl(...r).pipe(L(s=>this.expandSegmentAgainstRoute(t,e,r,s,n,o,i).pipe(vu(t=>{if(t instanceof Sh)return Jl(null);throw t}))),lu(),Ou(t=>!!t),vu((t,r)=>{if(t instanceof eu||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,n,o))return Jl(new Sc([],{}));throw new Sh(e)}throw t}))}noLeftoversInUrl(t,e,r){return 0===e.length&&!t.children[r]}expandSegmentAgainstRoute(t,e,r,n,o,i,s){return Ph(n)!==i?bh(e):void 0===n.redirectTo?this.matchSegmentAgainstRoute(t,e,n,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,n,o,i):bh(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,n,o,i){return"**"===n.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,n,i):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,n,o,i)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,n){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Th(o):this.lineralizeSegments(r,o).pipe(U(r=>{const o=new Sc(r,{});return this.expandSegment(t,o,e,r,n,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,n,o,i){const{matched:s,consumedSegments:a,lastChild:l,positionalParamSegments:u}=Nh(e,n,o);if(!s)return bh(e);const c=this.applyRedirectCommands(a,n.redirectTo,u);return n.redirectTo.startsWith("/")?Th(c):this.lineralizeSegments(n,c).pipe(U(n=>this.expandSegment(t,e,r,n.concat(o.slice(l)),i,!1)))}matchSegmentAgainstRoute(t,e,r,n){if("**"===r.path)return r.loadChildren?this.configLoader.load(t.injector,r).pipe(L(t=>(r._loadedConfig=t,new Sc(n,{})))):Jl(new Sc(n,{}));const{matched:o,consumedSegments:i,lastChild:s}=Nh(e,r,n);if(!o)return bh(e);const a=n.slice(s);return this.getChildConfig(t,r,n).pipe(U(t=>{const r=t.module,n=t.routes,{segmentGroup:o,slicedSegments:s}=function(t,e,r,n){return r.length>0&&function(t,e,r){return r.some(r=>Mh(t,e,r)&&Ph(r)!==lc)}(t,r,n)?{segmentGroup:Dh(new Sc(e,function(t,e){const r={};r.primary=e;for(const n of t)""===n.path&&Ph(n)!==lc&&(r[Ph(n)]=new Sc([],{}));return r}(n,new Sc(r,t.children)))),slicedSegments:[]}:0===r.length&&function(t,e,r){return r.some(r=>Mh(t,e,r))}(t,r,n)?{segmentGroup:Dh(new Sc(t.segments,function(t,e,r,n){const o={};for(const i of r)Mh(t,e,i)&&!n[Ph(i)]&&(o[Ph(i)]=new Sc([],{}));return Object.assign(Object.assign({},n),o)}(t,r,n,t.children))),slicedSegments:r}:{segmentGroup:t,slicedSegments:r}}(e,i,a,n);return 0===s.length&&o.hasChildren()?this.expandChildren(r,n,o).pipe(L(t=>new Sc(i,t))):0===n.length&&0===s.length?Jl(new Sc(i,{})):this.expandSegment(r,o,n,s,lc,!0).pipe(L(t=>new Sc(i.concat(t.segments),t.children)))}))}getChildConfig(t,e,r){return e.children?Jl(new Eh(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Jl(e._loadedConfig):this.runCanLoadGuards(t.injector,e,r).pipe(U(r=>r?this.configLoader.load(t.injector,e).pipe(L(t=>(e._loadedConfig=t,t))):function(t){return new _(e=>e.error(hc(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Jl(new Eh([],t))}runCanLoadGuards(t,e,r){const n=e.canLoad;return n&&0!==n.length?V(n).pipe(L(n=>{const o=t.get(n);let i;if(function(t){return t&&Ah(t.canLoad)}(o))i=o.canLoad(e,r);else{if(!Ah(o))throw new Error("Invalid CanLoad guard");i=o(e,r)}return _c(i)})).pipe(lu(),Du(t=>{if(!vh(t))return;const e=hc(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(o=t=>!0===t,t=>t.lift(new Bu(o,void 0,t)))):Jl(!0);var o}lineralizeSegments(t,e){let r=[],n=e.root;for(;;){if(r=r.concat(n.segments),0===n.numberOfChildren)return Jl(r);if(n.numberOfChildren>1||!n.children.primary)return Rh(t.redirectTo);n=n.children.primary}}applyRedirectCommands(t,e,r){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreatreUrlTree(t,e,r,n){const o=this.createSegmentGroup(t,e.root,r,n);return new vc(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return mc(t,(t,n)=>{if("string"==typeof t&&t.startsWith(":")){const o=t.substring(1);r[n]=e[o]}else r[n]=t}),r}createSegmentGroup(t,e,r,n){const o=this.createSegments(t,e.segments,r,n);let i={};return mc(e.children,(e,o)=>{i[o]=this.createSegmentGroup(t,e,r,n)}),new Sc(o,i)}createSegments(t,e,r,n){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,n):this.findOrReturn(e,r))}findPosParam(t,e,r){const n=r[e.path.substring(1)];if(!n)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return n}findOrReturn(t,e){let r=0;for(const n of e){if(n.path===t.path)return e.splice(r),n;r++}return t}}function Nh(t,e,r){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||r.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const n=(e.matcher||dc)(r,t,e);return n?{matched:!0,consumedSegments:n.consumed,lastChild:n.consumed.length,positionalParamSegments:n.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Dh(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Sc(t.segments.concat(e.segments),e.children)}return t}function Mh(t,e,r){return(!(t.hasChildren()||e.length>0)||"full"!==r.pathMatch)&&""===r.path&&void 0!==r.redirectTo}function Ph(t){return t.outlet||lc}class Bh{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Lh{constructor(t,e){this.component=t,this.route=e}}function xh(t,e,r){const n=t._root;return kh(n,e?e._root:null,r,[n.value])}function Fh(t,e,r){const n=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(n?n.module.injector:r).get(t)}function kh(t,e,r,n,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=Zc(e);return t.children.forEach(t=>{!function(t,e,r,n,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=t.value,s=e?e.value:null,a=r?r.getContext(t.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){const l=function(t,e,r){if("function"==typeof r)return r(t,e);switch(r){case"pathParamsChange":return!bc(t.url,e.url);case"pathParamsOrQueryParamsChange":return!bc(t.url,e.url)||!fc(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!oh(t,e)||!fc(t.queryParams,e.queryParams);case"paramsChange":default:return!oh(t,e)}}(s,i,i.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new Bh(n)):(i.data=s.data,i._resolvedData=s._resolvedData),kh(t,e,i.component?a?a.children:null:r,n,o),l&&o.canDeactivateChecks.push(new Lh(a&&a.outlet&&a.outlet.component||null,s))}else s&&Vh(e,a,o),o.canActivateChecks.push(new Bh(n)),kh(t,null,i.component?a?a.children:null:r,n,o)}(t,i[t.value.outlet],r,n.concat([t.value]),o),delete i[t.value.outlet]}),mc(i,(t,e)=>Vh(t,r.getContext(e),o)),o}function Vh(t,e,r){const n=Zc(t),o=t.value;mc(n,(t,n)=>{Vh(t,o.component?e?e.children.getContext(n):null:e,r)}),r.canDeactivateChecks.push(new Lh(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}const Uh=Symbol("INITIAL_VALUE");function Hh(){return xu(t=>function(...t){let e=null,r=null;return I(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&l(t[0])&&(t=t[0]),z(t,r).lift(new nu(e))}(...t.map(t=>t.pipe(bu(1),function(...t){const e=t[t.length-1];return I(e)?(t.pop(),r=>Vu(t,r,e)):e=>Vu(t,e)}(Uh)))).pipe(function(t,e){let r=!1;return arguments.length>=2&&(r=!0),function(n){return n.lift(new Uu(t,e,r))}}((t,e)=>{let r=!1;return e.reduce((t,n,o)=>{if(t!==Uh)return t;if(n===Uh&&(r=!0),!r){if(!1===n)return n;if(o===e.length-1||vh(n))return n}return t},t)},Uh),uu(t=>t!==Uh),L(t=>vh(t)?t:!0===t),bu(1)))}function Gh(t,e){return null!==t&&e&&e(new ic(t)),Jl(!0)}function Wh(t,e){return null!==t&&e&&e(new nc(t)),Jl(!0)}function zh(t,e,r){const n=e.routeConfig?e.routeConfig.canActivate:null;return n&&0!==n.length?Jl(n.map(n=>au(()=>{const o=Fh(n,e,r);let i;if(function(t){return t&&Ah(t.canActivate)}(o))i=_c(o.canActivate(e,t));else{if(!Ah(o))throw new Error("Invalid CanActivate guard");i=_c(o(e,t))}return i.pipe(Ou())}))).pipe(Hh()):Jl(!0)}function Xh(t,e,r){const n=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>au(()=>Jl(e.guards.map(o=>{const i=Fh(o,e.node,r);let s;if(function(t){return t&&Ah(t.canActivateChild)}(i))s=_c(i.canActivateChild(n,t));else{if(!Ah(i))throw new Error("Invalid CanActivateChild guard");s=_c(i(n,t))}return s.pipe(Ou())})).pipe(Hh())));return Jl(o).pipe(Hh())}class jh{}class Yh{constructor(t,e,r,n,o,i){this.rootComponentType=t,this.config=e,this.urlTree=r,this.url=n,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=i}recognize(){try{const t=qh(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,lc),r=new Jc([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},lc,this.rootComponentType,null,this.urlTree.root,-1,{}),n=new Yc(r,e),o=new th(this.url,n);return this.inheritParamsAndData(o._root),Jl(o)}catch(t){return new _(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,r=Qc(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,r){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,r)}processChildren(t,e){const r=Tc(e,(e,r)=>this.processSegmentGroup(t,e,r));return function(t){const e={};t.forEach(t=>{const r=e[t.value.outlet];if(r){const e=r.url.map(t=>t.toString()).join("/"),n=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${n}'.`)}e[t.value.outlet]=t.value})}(r),r.sort((t,e)=>t.value.outlet===lc?-1:e.value.outlet===lc?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,r,n){for(const i of t)try{return this.processSegmentAgainstRoute(i,e,r,n)}catch(o){if(!(o instanceof jh))throw o}if(this.noLeftoversInUrl(e,r,n))return[];throw new jh}noLeftoversInUrl(t,e,r){return 0===e.length&&!t.children[r]}processSegmentAgainstRoute(t,e,r,n){if(t.redirectTo)throw new jh;if((t.outlet||lc)!==n)throw new jh;let o,i=[],s=[];if("**"===t.path){const i=r.length>0?wc(r).parameters:{};o=new Jc(r,i,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Jh(t),n,t.component,t,Zh(e),Kh(e)+r.length,td(t))}else{const a=function(t,e,r){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||r.length>0))throw new jh;return{consumedSegments:[],lastChild:0,parameters:{}}}const n=(e.matcher||dc)(r,t,e);if(!n)throw new jh;const o={};mc(n.posParams,(t,e)=>{o[e]=t.path});const i=n.consumed.length>0?Object.assign(Object.assign({},o),n.consumed[n.consumed.length-1].parameters):o;return{consumedSegments:n.consumed,lastChild:n.consumed.length,parameters:i}}(e,t,r);i=a.consumedSegments,s=r.slice(a.lastChild),o=new Jc(i,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Jh(t),n,t.component,t,Zh(e),Kh(e)+i.length,td(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:l,slicedSegments:u}=qh(e,i,s,a,this.relativeLinkResolution);if(0===u.length&&l.hasChildren()){const t=this.processChildren(a,l);return[new Yc(o,t)]}if(0===a.length&&0===u.length)return[new Yc(o,[])];const c=this.processSegment(a,l,u,lc);return[new Yc(o,c)]}}function Zh(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Kh(t){let e=t,r=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,r+=e._segmentIndexShift?e._segmentIndexShift:0;return r-1}function qh(t,e,r,n,o){if(r.length>0&&function(t,e,r){return r.some(r=>$h(t,e,r)&&Qh(r)!==lc)}(t,r,n)){const o=new Sc(e,function(t,e,r,n){const o={};o.primary=n,n._sourceSegment=t,n._segmentIndexShift=e.length;for(const i of r)if(""===i.path&&Qh(i)!==lc){const r=new Sc([],{});r._sourceSegment=t,r._segmentIndexShift=e.length,o[Qh(i)]=r}return o}(t,e,n,new Sc(r,t.children)));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===r.length&&function(t,e,r){return r.some(r=>$h(t,e,r))}(t,r,n)){const i=new Sc(t.segments,function(t,e,r,n,o,i){const s={};for(const a of n)if($h(t,r,a)&&!o[Qh(a)]){const r=new Sc([],{});r._sourceSegment=t,r._segmentIndexShift="legacy"===i?t.segments.length:e.length,s[Qh(a)]=r}return Object.assign(Object.assign({},o),s)}(t,e,r,n,t.children,o));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:r}}const i=new Sc(t.segments,t.children);return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:r}}function $h(t,e,r){return(!(t.hasChildren()||e.length>0)||"full"!==r.pathMatch)&&""===r.path&&void 0===r.redirectTo}function Qh(t){return t.outlet||lc}function Jh(t){return t.data||{}}function td(t){return t.resolve||{}}function ed(t){return function(e){return e.pipe(xu(e=>{const r=t(e);return r?V(r).pipe(L(()=>e)):V([e])}))}}class rd{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let nd=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=ue({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&(Si(0,"router-outlet",undefined,undefined),Ii())},directives:function(){return[md]},encapsulation:2}),t})();function od(t,e=""){for(let r=0;r<t.length;r++){const n=t[r];id(n,sd(e,n))}}function id(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==lc)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&od(t.children,e)}function sd(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function ad(t){const e=t.children&&t.children.map(ad),r=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!r.component&&(e||r.loadChildren)&&r.outlet&&r.outlet!==lc&&(r.component=nd),r}const ld=new Bt("ROUTES");class ud{constructor(t,e,r,n){this.loader=t,this.compiler=e,this.onLoadStartListener=r,this.onLoadEndListener=n}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(L(r=>{this.onLoadEndListener&&this.onLoadEndListener(e);const n=r.create(t);return new Eh(pc(n.injector.get(ld)).map(ad),n)}))}loadModuleFactory(t){return"string"==typeof t?V(this.loader.load(t)):_c(t()).pipe(U(t=>t instanceof qt?Jl(t):V(this.compiler.compileModuleAsync(t))))}}class cd{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new hd,this.attachRef=null}}class hd{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const r=this.getOrCreateContext(t);r.outlet=e,this.contexts.set(t,r)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new cd,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class dd{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function fd(t){throw t}function gd(t,e,r){return e.parse("/")}function pd(t,e){return Jl(null)}let wd=(()=>{class t{constructor(t,e,r,n,o,i,s,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=r,this.location=n,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new v,this.errorHandler=fd,this.malformedUriErrorHandler=gd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:pd,afterPreactivation:pd},this.urlHandlingStrategy=new dd,this.routeReuseStrategy=new rd,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(Kt),this.console=o.get(aa);const l=o.get(Ca);this.isNgZoneEnabled=l instanceof Ca,this.resetConfig(a),this.currentUrlTree=new vc(new Sc([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ud(i,s,t=>this.triggerEvent(new ec(t)),t=>this.triggerEvent(new rc(t))),this.routerState=qc(this.currentUrlTree,this.rootComponentType),this.transitions=new tu({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(uu(t=>0!==t.id),L(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),xu(t=>{let r=!1,n=!1;return Jl(t).pipe(Du(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),xu(t=>{const r=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||r)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Jl(t).pipe(xu(t=>{const r=this.transitions.getValue();return e.next(new ju(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),r!==this.transitions.getValue()?iu:[t]}),xu(t=>Promise.resolve(t)),(n=this.ngModule.injector,o=this.configLoader,i=this.urlSerializer,s=this.config,function(t){return t.pipe(xu(t=>function(t,e,r,n,o){return new Oh(t,e,r,n,o).apply()}(n,o,i,t.extractedUrl,s).pipe(L(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Du(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,r,n,o){return function(i){return i.pipe(U(i=>function(t,e,r,n,o="emptyOnly",i="legacy"){return new Yh(t,e,r,n,o,i).recognize()}(t,e,i.urlAfterRedirects,r(i.urlAfterRedirects),n,o).pipe(L(t=>Object.assign(Object.assign({},i),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Du(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Du(t=>{const r=new qu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(r)}));var n,o,i,s;if(r&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:r,extractedUrl:n,source:o,restoredState:i,extras:s}=t,a=new ju(r,this.serializeUrl(n),o,i);e.next(a);const l=qc(n,this.rootComponentType).snapshot;return Jl(Object.assign(Object.assign({},t),{targetSnapshot:l,urlAfterRedirects:n,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),iu}),ed(t=>{const{targetSnapshot:e,id:r,extractedUrl:n,rawUrl:o,extras:{skipLocationChange:i,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:r,appliedUrlTree:n,rawUrlTree:o,skipLocationChange:!!i,replaceUrl:!!s})}),Du(t=>{const e=new $u(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),L(t=>Object.assign(Object.assign({},t),{guards:xh(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(r){return r.pipe(U(r=>{const{targetSnapshot:n,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=r;return 0===s.length&&0===i.length?Jl(Object.assign(Object.assign({},r),{guardsResult:!0})):function(t,e,r,n){return V(t).pipe(U(t=>function(t,e,r,n,o){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return i&&0!==i.length?Jl(i.map(i=>{const s=Fh(i,e,o);let a;if(function(t){return t&&Ah(t.canDeactivate)}(s))a=_c(s.canDeactivate(t,e,r,n));else{if(!Ah(s))throw new Error("Invalid CanDeactivate guard");a=_c(s(t,e,r,n))}return a.pipe(Ou())})).pipe(Hh()):Jl(!0)}(t.component,t.route,r,e,n)),Ou(t=>!0!==t,!0))}(s,n,o,t).pipe(U(r=>r&&"boolean"==typeof r?function(t,e,r,n){return V(e).pipe(Gu(e=>V([Wh(e.route.parent,n),Gh(e.route,n),Xh(t,e.path,r),zh(t,e.route,r)]).pipe(lu(),Ou(t=>!0!==t,!0))),Ou(t=>!0!==t,!0))}(n,i,t,e):Jl(r)),L(t=>Object.assign(Object.assign({},r),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Du(t=>{if(vh(t.guardsResult)){const e=hc(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Du(t=>{const e=new Qu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),uu(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const r=new Zu(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(r),t.resolve(!1),!1}return!0}),ed(t=>{if(t.guards.canActivateChecks.length)return Jl(t).pipe(Du(t=>{const e=new Ju(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),xu(t=>{let r=!1;return Jl(t).pipe((n=this.paramsInheritanceStrategy,o=this.ngModule.injector,function(t){return t.pipe(U(t=>{const{targetSnapshot:e,guards:{canActivateChecks:r}}=t;if(!r.length)return Jl(t);let i=0;return V(r).pipe(Gu(t=>function(t,e,r,n){return function(t,e,r,n){const o=Object.keys(t);if(0===o.length)return Jl({});const i={};return V(o).pipe(U(o=>function(t,e,r,n){const o=Fh(t,e,n);return _c(o.resolve?o.resolve(e,r):o(e,r))}(t[o],e,r,n).pipe(Du(t=>{i[o]=t}))),fu(1),U(()=>Object.keys(i).length===o.length?Jl(i):iu))}(t._resolve,t,e,n).pipe(L(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Qc(t,r).resolve),null)))}(t.route,e,n,o)),Du(()=>i++),fu(1),U(e=>i===r.length?Jl(t):iu))}))}),Du({next:()=>r=!0,complete:()=>{if(!r){const r=new Zu(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(r),t.resolve(!1)}}}));var n,o}),Du(t=>{const e=new tc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),ed(t=>{const{targetSnapshot:e,id:r,extractedUrl:n,rawUrl:o,extras:{skipLocationChange:i,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:r,appliedUrlTree:n,rawUrlTree:o,skipLocationChange:!!i,replaceUrl:!!s})}),L(t=>{const e=function(t,e,r){const n=ih(t,e._root,r?r._root:void 0);return new Kc(n,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Du(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),L(t=>(new yh(s,t.targetRouterState,t.currentRouterState,a).activate(i),t))),Du({next(){r=!0},complete(){r=!0}}),(o=()=>{if(!r&&!n){this.resetUrlToCurrentUrlTree();const r=new Zu(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(r),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Wu(o))),vu(r=>{if(n=!0,(o=r)&&o.ngNavigationCancelingError){const n=vh(r.url);n||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const o=new Zu(t.id,this.serializeUrl(t.extractedUrl),r.message);e.next(o),n?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(r.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const n=new Ku(t.id,this.serializeUrl(t.extractedUrl),r);e.next(n);try{t.resolve(this.errorHandler(r))}catch(i){t.reject(i)}}var o;return iu}));var o,i,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const r="popstate"===t.type?"popstate":"hashchange",n=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,r,n,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){od(t),this.config=t.map(ad),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:r,queryParams:n,fragment:o,preserveQueryParams:i,queryParamsHandling:s,preserveFragment:a}=e;on()&&i&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const l=r||this.routerState.root,u=a?this.currentUrlTree.fragment:o;let c=null;if(s)switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),n);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=n||null}else c=i?this.currentUrlTree.queryParams:n||null;return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,r,n,o){if(0===r.length)return lh(e.root,e.root,e,n,o);const i=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new ch(!0,0,t);let e=0,r=!1;const n=t.reduce((t,n,o)=>{if("object"==typeof n&&null!=n){if(n.outlets){const e={};return mc(n.outlets,(t,r)=>{e[r]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(n.segmentPath)return[...t,n.segmentPath]}return"string"!=typeof n?[...t,n]:0===o?(n.split("/").forEach((n,o)=>{0==o&&"."===n||(0==o&&""===n?r=!0:".."===n?e++:""!=n&&t.push(n))}),t):[...t,n]},[]);return new ch(r,e,n)}(r);if(i.toRoot())return lh(e.root,new Sc([],{}),e,n,o);const s=function(t,e,r){if(t.isAbsolute)return new hh(e.root,!0,0);if(-1===r.snapshot._lastPathIndex){const t=r.snapshot._urlSegment;return new hh(t,t===e.root,0)}const n=ah(t.commands[0])?0:1;return function(t,e,r){let n=t,o=e,i=r;for(;i>o;){if(i-=o,n=n.parent,!n)throw new Error("Invalid number of '../'");o=n.segments.length}return new hh(n,!1,o-i)}(r.snapshot._urlSegment,r.snapshot._lastPathIndex+n,t.numberOfDoubleDots)}(i,e,t),a=s.processChildren?gh(s.segmentGroup,s.index,i.commands):fh(s.segmentGroup,s.index,i.commands);return lh(s.segmentGroup,a,e,n,o)}(l,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){on()&&this.isNgZoneEnabled&&!Ca.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const r=vh(t)?t:this.parseUrl(t),n=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(n,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const r=t[e];if(null==r)throw new Error(`The requested path contains ${r} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(r){e=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return e}isActive(t,e){if(vh(t))return yc(this.currentUrlTree,t,e);const r=this.parseUrl(t);return yc(this.currentUrlTree,r,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,r)=>{const n=t[r];return null!=n&&(e[r]=n),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Yu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,r,n,o){const i=this.getTransition();if(i&&"imperative"!==e&&"imperative"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"hashchange"==e&&"popstate"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"popstate"==e&&"hashchange"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);let s,a,l;o?(s=o.resolve,a=o.reject,l=o.promise):l=new Promise((t,e)=>{s=t,a=e});const u=++this.navigationId;return this.setTransition({id:u,source:e,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:n,resolve:s,reject:a,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,r,n){const o=this.urlSerializer.serialize(t);n=n||{},this.location.isCurrentPathEqualTo(o)||e?this.location.replaceState(o,"",Object.assign(Object.assign({},n),{navigationId:r})):this.location.go(o,"",Object.assign(Object.assign({},n),{navigationId:r}))}resetStateAndUrl(t,e,r){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(Xt(Qo),Xt(Rc),Xt(hd),Xt(dl),Xt(di),Xt(Ha),Xt(ma),Xt(void 0))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),md=(()=>{class t{constructor(t,e,r,n,o){this.parentContexts=t,this.location=e,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Fs,this.deactivateEvents=new Fs,this.name=n||lc,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const r=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),n=this.parentContexts.getOrCreateContext(this.name).children,o=new _d(t,n,this.location.injector);this.activated=this.location.createComponent(r,this.location.length,o),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(Ei(hd),Ei(ms),Ei(ji),("name",function(t,e){const r=t.attrs;if(r){const t=r.length;let n=0;for(;n<t;){const o=r[n];if(Sr(o))break;if(0===o)n+=2;else if("number"==typeof o)for(n++;n<t&&"string"==typeof r[n];)n++;else{if(o===e)return r[n+1];n+=2}}}return null}($e(),"name")),Ei(qo))},t.\u0275dir=pe({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class _d{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===$c?this.route:t===hd?this.childContexts:this.parent.get(t,e)}}class yd{}class Cd{preload(t,e){return Jl(null)}}let Ed=(()=>{class t{constructor(t,e,r,n,o){this.router=t,this.injector=n,this.preloadingStrategy=o,this.loader=new ud(e,r,e=>t.triggerEvent(new ec(e)),e=>t.triggerEvent(new rc(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(uu(t=>t instanceof Yu),Gu(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Kt);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const r=[];for(const n of e)if(n.loadChildren&&!n.canLoad&&n._loadedConfig){const t=n._loadedConfig;r.push(this.processRoutes(t.module,t.routes))}else n.loadChildren&&!n.canLoad?r.push(this.preloadConfig(t,n)):n.children&&r.push(this.processRoutes(t,n.children));return V(r).pipe(W(),L(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(U(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Xt(wd),Xt(Ha),Xt(ma),Xt(di),Xt(yd))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),Ad=(()=>{class t{constructor(t,e,r={}){this.router=t,this.viewportScroller=e,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ju?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Yu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ac&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new ac(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Xt(wd),Xt(Al),Xt(void 0))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const vd=new Bt("ROUTER_CONFIGURATION"),Sd=new Bt("ROUTER_FORROOT_GUARD"),Id=[dl,{provide:Rc,useClass:Oc},{provide:wd,useFactory:function(t,e,r,n,o,i,s,a={},l,u){const c=new wd(null,t,e,r,n,o,i,pc(s));if(l&&(c.urlHandlingStrategy=l),u&&(c.routeReuseStrategy=u),a.errorHandler&&(c.errorHandler=a.errorHandler),a.malformedUriErrorHandler&&(c.malformedUriErrorHandler=a.malformedUriErrorHandler),a.enableTracing){const t=qa();c.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return a.onSameUrlNavigation&&(c.onSameUrlNavigation=a.onSameUrlNavigation),a.paramsInheritanceStrategy&&(c.paramsInheritanceStrategy=a.paramsInheritanceStrategy),a.urlUpdateStrategy&&(c.urlUpdateStrategy=a.urlUpdateStrategy),a.relativeLinkResolution&&(c.relativeLinkResolution=a.relativeLinkResolution),c},deps:[Rc,hd,dl,di,Ha,ma,ld,vd,[class{},new rt],[class{},new rt]]},hd,{provide:$c,useFactory:function(t){return t.routerState.root},deps:[wd]},{provide:Ha,useClass:za},Ed,Cd,class{preload(t,e){return e().pipe(vu(()=>Jl(null)))}},{provide:vd,useValue:{enableTracing:!1}}];function bd(){return new Ba("Router",wd)}let Td=(()=>{class t{constructor(t,e){}static forRoot(e,r){return{ngModule:t,providers:[Id,Dd(e),{provide:Sd,useFactory:Nd,deps:[[wd,new rt,new ot]]},{provide:vd,useValue:r||{}},{provide:al,useFactory:Od,deps:[Qa,[new et(ul),new rt],vd]},{provide:Ad,useFactory:Rd,deps:[wd,Al,vd]},{provide:yd,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Cd},{provide:Ba,multi:!0,useFactory:bd},[Md,{provide:Js,multi:!0,useFactory:Pd,deps:[Md]},{provide:Ld,useFactory:Bd,deps:[Md]},{provide:sa,multi:!0,useExisting:Ld}]]}}static forChild(e){return{ngModule:t,providers:[Dd(e)]}}}return t.\u0275mod=fe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)(Xt(Sd,8),Xt(wd,8))}}),t})();function Rd(t,e,r){return r.scrollOffset&&e.setOffset(r.scrollOffset),new Ad(t,e,r)}function Od(t,e,r={}){return r.useHash?new hl(t,e):new cl(t,e)}function Nd(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Dd(t){return[{provide:fi,multi:!0,useValue:t},{provide:ld,multi:!0,useValue:t}]}let Md=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new v}appInitializer(){return this.injector.get(tl,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),r=this.injector.get(wd),n=this.injector.get(vd);if(this.isLegacyDisabled(n)||this.isLegacyEnabled(n))t(!0);else if("disabled"===n.initialNavigation)r.setUpLocationChangeListener(),t(!0);else{if("enabled"!==n.initialNavigation)throw new Error(`Invalid initialNavigation options: '${n.initialNavigation}'`);r.hooks.afterPreactivation=()=>this.initNavigation?Jl(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),r.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(vd),r=this.injector.get(Ed),n=this.injector.get(Ad),o=this.injector.get(wd),i=this.injector.get(Va);t===i.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),r.setUpPreloading(),n.init(),o.resetRootComponentType(i.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(Xt(di))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();function Pd(t){return t.appInitializer.bind(t)}function Bd(t){return t.bootstrapListener.bind(t)}const Ld=new Bt("Router Initializer"),xd=[];let Fd=(()=>{class t{}return t.\u0275mod=fe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},imports:[[Td.forRoot(xd)],Td]}),t})();var kd=r("KBVK");let Vd=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),Ud=(()=>{class t{}return t.\u0275mod=fe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)}}),t})(),Hd=(()=>{class t{}return t.\u0275mod=fe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:[Vd],imports:[Ud]}),t})();function Gd(t,e,r,n){return new(r||(r=Promise))(function(o,i){function s(t){try{l(n.next(t))}catch(e){i(e)}}function a(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(s,a)}l((n=n.apply(t,e||[])).next())})}var Wd=r("R7y3");class zd extends Wd.BrowserMultiFormatReader{getScannerControls(){if(!this.scannerControls)throw new Error("No scanning is running at the time.");return this.scannerControls}scanFromDeviceObservable(t,e){return Gd(this,void 0,void 0,function*(){const r=new tu({});try{const n=yield this.decodeFromVideoDevice(t,e,(t,e)=>{if(!e)return void r.next({result:t});const n=e.name;n!==kd.NotFoundException.name&&n!==kd.ChecksumException.name&&n!==kd.FormatException.name?(r.error(e),this.scannerControls.stop(),this.scannerControls=void 0):r.next({error:e})});this.scannerControls=Object.assign(Object.assign({},n),{stop(){n.stop(),r.complete()}})}catch(n){r.error(n),this.scannerControls.stop(),this.scannerControls=void 0}return r.asObservable()})}}const Xd=["preview"];let jd=(()=>{class t{constructor(){this.timeBetweenScans=500,this.delayBetweenScanSuccess=500,this.previewFitMode="cover",this._ready=!1,this.autostarted=new Fs,this.autostarting=new Fs,this.torchCompatible=new Fs(!1),this.scanSuccess=new Fs,this.scanFailure=new Fs,this.scanError=new Fs,this.scanComplete=new Fs,this.camerasFound=new Fs,this.camerasNotFound=new Fs,this.permissionResponse=new Fs(!0),this.hasDevices=new Fs,this.deviceChange=new Fs,this._enabled=!0,this._hints=new Map,this.autofocusEnabled=!0,this.autostart=!0,this.formats=[kd.BarcodeFormat.QR_CODE],this.hasNavigator="undefined"!=typeof navigator,this.isMediaDevicesSupported=this.hasNavigator&&!!navigator.mediaDevices}get codeReader(){return this._codeReader}set device(t){this._ready?this.isAutostarting?console.warn("Avoid setting a device during auto-start."):this.isCurrentDevice(t)?console.warn("Setting the same device is not allowed."):this.hasPermission?this.setDevice(t):console.warn("Permissions not set yet, waiting for them to be set to apply device change."):this._devicePreStart=t}get device(){return this._device}get formats(){return this.hints.get(kd.DecodeHintType.POSSIBLE_FORMATS)}set formats(t){if("string"==typeof t)throw new Error("Invalid formats, make sure the [formats] input is a binding.");const e=t.map(t=>this.getBarcodeFormatOrFail(t)),r=this.hints;r.set(kd.DecodeHintType.POSSIBLE_FORMATS,e),this.hints=r}get hints(){return this._hints}set hints(t){var e;this._hints=t,null===(e=this.codeReader)||void 0===e||e.setHints(this._hints)}set videoConstraints(t){var e;const r=null===(e=this.codeReader)||void 0===e?void 0:e.getScannerControls();r&&(null==r||r.streamVideoConstraintsApply(t))}set isAutostarting(t){this._isAutostarting=t,this.autostarting.next(t)}get isAutostarting(){return this._isAutostarting}set torch(t){try{this.getCodeReader().getScannerControls().switchTorch(t)}catch(e){}}set enable(t){this._enabled=Boolean(t),this._enabled?this.device?this.scanFromDevice(this.device.deviceId):this.init():this.reset()}get enabled(){return this._enabled}get tryHarder(){return this.hints.get(kd.DecodeHintType.TRY_HARDER)}set tryHarder(t){const e=this.hints;t?e.set(kd.DecodeHintType.TRY_HARDER,!0):e.delete(kd.DecodeHintType.TRY_HARDER),this.hints=e}askForPermission(){return Gd(this,void 0,void 0,function*(){if(!this.hasNavigator)return console.error("@zxing/ngx-scanner","Can't ask permission, navigator is not present."),this.setPermission(null),this.hasPermission;if(!this.isMediaDevicesSupported)return console.error("@zxing/ngx-scanner","Can't get user media, this is not supported."),this.setPermission(null),this.hasPermission;let t,e;try{t=yield this.getAnyVideoDevice(),e=!!t}catch(r){return this.handlePermissionException(r)}finally{this.terminateStream(t)}return this.setPermission(e),e})}getAnyVideoDevice(){return navigator.mediaDevices.getUserMedia({video:!0})}terminateStream(t){t&&t.getTracks().forEach(t=>t.stop()),t=void 0}init(){return Gd(this,void 0,void 0,function*(){if(!this.autostart)return console.warn("Feature 'autostart' disabled. Permissions and devices recovery has to be run manually."),this.initAutostartOff(),void(this._ready=!0);yield this.initAutostartOn(),this._ready=!0})}initAutostartOff(){this.isAutostarting=!1,this.updateVideoInputDevices(),this._device&&this._devicePreStart&&this.setDevice(this._devicePreStart)}initAutostartOn(){return Gd(this,void 0,void 0,function*(){let t;this.isAutostarting=!0;try{t=yield this.askForPermission()}catch(e){return void console.error("Exception occurred while asking for permission:",e)}if(t){const t=yield this.updateVideoInputDevices();yield this.autostartScanner([...t])}this.isAutostarting=!1,this.autostarted.next()})}isCurrentDevice(t){var e;return(null==t?void 0:t.deviceId)===(null===(e=this._device)||void 0===e?void 0:e.deviceId)}ngOnDestroy(){this.reset()}ngOnInit(){this.init()}scanStop(){var t,e;this._scanSubscription&&(null===(t=this.codeReader)||void 0===t||t.getScannerControls().stop(),null===(e=this._scanSubscription)||void 0===e||e.unsubscribe(),this._scanSubscription=void 0),this.torchCompatible.next(!1)}scanStart(){if(this._scanSubscription)throw new Error("There is already a scan proccess running.");if(!this._device)throw new Error("No device defined, cannot start scan, please define a device.");this.scanFromDevice(this._device.deviceId)}restart(){this._codeReader=void 0;const t=this._reset();t&&(this.device=t)}updateVideoInputDevices(){return Gd(this,void 0,void 0,function*(){const t=(yield Wd.BrowserCodeReader.listVideoInputDevices())||[],e=t&&t.length>0;return this.hasDevices.next(e),this.camerasFound.next([...t]),e||this.camerasNotFound.next(),t})}autostartScanner(t){return Gd(this,void 0,void 0,function*(){const e=t.find(({label:t})=>/back|tr\xe1s|rear|traseira|environment|ambiente/gi.test(t))||t.pop();if(!e)throw new Error("Impossible to autostart, no input devices available.");yield this.setDevice(e),this.deviceChange.next(e)})}dispatchScanSuccess(t){this.scanSuccess.next(t.getText())}dispatchScanFailure(t){this.scanFailure.next(t)}dispatchScanError(t){this.scanError.observers.some(t=>Boolean(t))||(console.error("zxing scanner component: "+t.name,t),console.warn("Use the `(scanError)` property to handle errors like this!")),this.scanError.next(t)}dispatchScanComplete(t){this.scanComplete.next(t)}handlePermissionException(t){let e;switch(console.error("@zxing/ngx-scanner","Error when asking for permission.",t),t.name){case"NotSupportedError":console.warn("@zxing/ngx-scanner",t.message),e=null,this.hasDevices.next(null);break;case"NotAllowedError":console.warn("@zxing/ngx-scanner",t.message),e=!1,this.hasDevices.next(!0);break;case"NotFoundError":console.warn("@zxing/ngx-scanner",t.message),e=null,this.hasDevices.next(!1),this.camerasNotFound.next(t);break;case"NotReadableError":console.warn("@zxing/ngx-scanner","Couldn't read the device(s)'s stream, it's probably in use by another app."),e=null,this.hasDevices.next(!1),this.camerasNotFound.next(t);break;default:console.warn("@zxing/ngx-scanner","I was not able to define if I have permissions for camera or not.",t),e=null}return this.setPermission(e),this.permissionResponse.error(t),e}getBarcodeFormatOrFail(t){return"string"==typeof t?kd.BarcodeFormat[t.trim().toUpperCase()]:t}getCodeReader(){return this._codeReader||(this._codeReader=new zd(this.hints,{delayBetweenScanAttempts:this.timeBetweenScans,delayBetweenScanSuccess:this.delayBetweenScanSuccess})),this._codeReader}scanFromDevice(t){return Gd(this,void 0,void 0,function*(){const e=this.previewElemRef.nativeElement,r=this.getCodeReader(),n=yield r.scanFromDeviceObservable(t,e);if(!n)throw new Error("Undefined decoding stream, aborting.");const o=r.getScannerControls();this.torchCompatible.next(void 0!==o.switchTorch),this._scanSubscription=n.subscribe(t=>this._onDecodeResult(t.result,t.error),t=>this._onDecodeError(t),()=>{})})}_onDecodeError(t){this.dispatchScanError(t)}_onDecodeResult(t,e){t?this.dispatchScanSuccess(t):this.dispatchScanFailure(e),this.dispatchScanComplete(t)}_reset(){if(!this._codeReader)return;const t=this._device;return this.device=void 0,this._codeReader=void 0,t}reset(){this._reset(),this.deviceChange.emit(null)}setDevice(t){return Gd(this,void 0,void 0,function*(){this.scanStop(),this._device=t||void 0,this._device||Wd.BrowserCodeReader.cleanVideoSource(this.previewElemRef.nativeElement),this._enabled&&t&&(yield this.scanFromDevice(t.deviceId))})}setPermission(t){this.hasPermission=t,this.permissionResponse.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=ue({type:t,selectors:[["zxing-scanner"]],viewQuery:function(t,e){var r,n;1&t&&(n=Xd,!0,qs(Ke(),Ze(),n,true,undefined,!0)),2&t&&Ks(r=$s())&&(e.previewElemRef=r.first)},inputs:{autofocusEnabled:"autofocusEnabled",timeBetweenScans:"timeBetweenScans",delayBetweenScanSuccess:"delayBetweenScanSuccess",autostart:"autostart",previewFitMode:"previewFitMode",device:"device",formats:"formats",videoConstraints:"videoConstraints",torch:"torch",enable:"enable",tryHarder:"tryHarder"},outputs:{autostarted:"autostarted",autostarting:"autostarting",torchCompatible:"torchCompatible",scanSuccess:"scanSuccess",scanFailure:"scanFailure",scanError:"scanError",scanComplete:"scanComplete",camerasFound:"camerasFound",camerasNotFound:"camerasNotFound",permissionResponse:"permissionResponse",hasDevices:"hasDevices",deviceChange:"deviceChange"},decls:6,vars:2,consts:[["preview",""]],template:function(t,e){1&t&&(Si(0,"video",null,0),Si(2,"p"),Ui(3," Your browser does not support this feature, please try to upgrade it. "),Ii(),Si(4,"p"),Ui(5," Seu navegador n\xe3o suporta este recurso, por favor tente atualiz\xe1-lo. "),Ii(),Ii()),2&t&&Li("object-fit",e.previewFitMode)},styles:["[_nghost-%COMP%]{display:block}video[_ngcontent-%COMP%]{-o-object-fit:contain;height:auto;object-fit:contain;width:100%}"],changeDetection:0}),t})(),Yd=(()=>{class t{}return t.\u0275mod=fe({type:t}),t.\u0275inj=lt({factory:function(e){return new(e||t)},imports:[[El,Hd]]}),t})();const Zd=["scanner"];function Kd(t,e){if(1&t&&(Si(0,"h1",4),Ui(1),Ii()),2&t){const t=Di();In(1),Hi(t.resultText)}}function qd(t,e){1&t&&(Si(0,"h1",4),Ui(1,"Detection ..."),Ii())}function $d(t,e){if(1&t){const t=bi();Si(0,"button",5),Ri("click",function(){return qe(t),Di().scannerEnabled=!0}),Ui(1,"Start"),Ii()}}function Qd(t,e){if(1&t){const t=bi();Si(0,"button",5),Ri("click",function(){return qe(t),Di().scannerEnabled=!1}),Ui(1,"Stop"),Ii()}}let Jd=(()=>{class t{constructor(t){this.router=t,this.title="qrcodeReader",this.allowedFormats=[kd.BarcodeFormat.QR_CODE],this.scannerEnabled=!1}onTorchCompatible(t){this.torchCompatible||(console.log("onTorchCompatible"),console.log(t),this.torchCompatible=t,console.log(this.torchCompatible))}camerasFoundHandler(t){console.log("camerasFoundHandler"),console.log(t)}camerasNotFoundHandler(t){console.log("camerasNotFoundHandler"),console.log(t)}scanSuccessHandler(t){console.log("scanSuccessHandler"),console.log(t)}scanErrorHandler(t){console.log("scanErrorHandler"),console.log(t)}scanFailureHandler(t){console.log("scanFailureHandler"),console.log(t)}scanCompleteHandler(t){t&&t.getText()!==this.resultText&&(this.resultText=t.getText(),this.scannerEnabled=!1)}}return t.\u0275fac=function(e){return new(e||t)(Ei(wd))},t.\u0275cmp=ue({type:t,selectors:[["app-root"]],viewQuery:function(t,e){var r,n;1&t&&(n=Zd,!0,qs(Ke(),Ze(),n,true,undefined,!1)),2&t&&Ks(r=$s())&&(e.scanner=r.first)},decls:8,vars:7,consts:[["class","h1",4,"ngIf"],[3,"click",4,"ngIf"],[3,"enable","formats","scanComplete","torchCompatible"],["scanner",""],[1,"h1"],[3,"click"]],template:function(t,e){1&t&&(Ci(0,Kd,2,1,"h1",0),Ci(1,qd,2,0,"h1",0),Si(2,"span"),Ui(3),Ii(),Ci(4,$d,2,0,"button",1),Ci(5,Qd,2,0,"button",1),Si(6,"zxing-scanner",2,3),Ri("scanComplete",function(t){return e.scanCompleteHandler(t)})("torchCompatible",function(t){return e.onTorchCompatible(t)}),Ii()),2&t&&(Ai("ngIf",e.resultText),In(1),Ai("ngIf",!e.resultText),In(2),Gi("torchCompatible : ",e.torchCompatible,""),In(1),Ai("ngIf",!e.scannerEnabled),In(1),Ai("ngIf",e.scannerEnabled),In(1),Ai("enable",e.scannerEnabled)("formats",e.allowedFormats))},directives:[_l,jd],styles:[""]}),t})(),tf=(()=>{class t{}return t.\u0275mod=fe({type:t,bootstrap:[Jd]}),t.\u0275inj=lt({factory:function(e){return new(e||t)},providers:[],imports:[[Ql,Yd,Fd]]}),t})();(function(){if(nn)throw new Error("Cannot enable prod mode after platform setup.");rn=!1})(),ql().bootstrapModule(tf).catch(t=>console.error(t))},zn8P:function(t,e){function r(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}r.keys=function(){return[]},r.resolve=r,t.exports=r,r.id="zn8P"}},[[0,0]]]);